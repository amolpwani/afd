{"version":3,"sources":["../../../build/src/webCore/WebCoreModule.js","../../../build/src/webCore/services/wcAlertConsoleService/WcAlertConsoleService.js","../../../build/src/webCore/services/wcAuthorizationService/WcAuthorizationCacheHelper.js","../../../build/src/webCore/services/wcAuthorizationService/WcAuthorizationService.js","../../../build/src/webCore/services/wcCameraService/WcCameraService.js","../../../build/src/webCore/services/wcDataFileService/WcDataFileService.js","../../../build/src/webCore/services/wcHttpRequestService/WcHttpRequestService.js","../../../build/src/webCore/services/wcImageFileService/WcImageFileService.js","../../../build/src/webCore/services/wcTranslateConfiguratorService/WcTranslateConfiguratorService.js","../../../build/src/webCore/services/wcWebtrendsService/WcWebtrendsService.js","../../../build/src/webCore/prototypes/wcDateRangePickerPrototype/WcDateRangePickerPrototype.js","../../../build/src/webCore/prototypes/wcHttpEndpointPrototype/WcHttpEndpointPrototype.js","../../../build/src/webCore/directives/requiredDirective/requiredDirective.js","../../../build/src/webCore/directives/formDirective/formDirective.js","../../../build/src/webCore/directives/ngrequiredDirective/ngrequiredDirective.js","../../../build/src/webCore/directives/wcAlertConsoleDirective/wcAlertConsoleDirective.js","../../../build/src/webCore/directives/wcChartDirective/wcChartDirective.js","../../../build/src/webCore/directives/wcCheckAllNoneDirective/wcCheckAllNoneDirective.js","../../../build/src/webCore/directives/wcClickOnceDirective/wcClickOnceDirective.js","../../../build/src/webCore/directives/wcContinueIfValidDirective/wcContinueIfValidDirective.js","../../../build/src/webCore/directives/wcFileUploadImageDirective/wcFileUploadImageDirective.js","../../../build/src/webCore/directives/wcInputFileDirective/wcInputFileDirective.js","../../../build/src/webCore/directives/wcLoadingIndicatorDirective/wcLoadingIndicatorDirective.js","../../../build/src/webCore/directives/wcNavMenuDirective/wcNavMenuDirective.js","../../../build/src/webCore/directives/wcNgModelDirectiveDecorator/wcNgModelDirectiveDecorator.js","../../../build/src/webCore/directives/wcOfflineIndicatorDirective/wcOfflineIndicatorDirective.js","../../../build/src/webCore/directives/wcPageTitleDirective/wcPageTitleDirective.js","../../../build/src/webCore/directives/wcPaginationDirective/wcPaginationDirective.js","../../../build/src/webCore/directives/wcProtectedResourceDirective/wcProtectedResourceDirective.js","../../../build/src/webCore/directives/wcValidationIndicatorDirective/wcValidationIndicatorDirective.js","../../../build/src/webCore/directives/ngPrismDirective/ngPrismDirective.js","../../../build/src/webCore/filters/wcPriceFilter/WcPriceFilter.js","../../../build/src/webCore/modules/wcResponsiveTable/WcResponsiveTableModule.js","../../../build/src/webCore/modules/wcResponsiveTable/components/directives/wcResponsiveTableDirective/wcResponsiveTableDirective.js","../../../build/src/webCore/modules/wcResponsiveTable/components/directives/wcRowRepeatDirective.js","../../../build/src/webCore/modules/wcResponsiveTable/components/directives/wcRowSelectCheckboxDirective.js","../../../build/src/webCore/modules/wcResponsiveTable/components/directives/wcRowSelectRadioDirective.js","../../../build/src/webCore/modules/wcResponsiveTable/components/directives/wcRowSelectAllDirective.js","../../../build/src/webCore/modules/wcResponsiveTable/components/directives/wcRowSelectNoneDirective.js","../../../build/src/webCore/modules/wcResponsiveTable/components/directives/wcTableSelectionInfoDirective.js","../../../build/src/webCore/modules/wcResponsiveTable/components/directives/wcRowActionSingleDirective.js","../../../build/src/webCore/modules/wcResponsiveTable/components/directives/wcRowSelectHeaderCheckboxDirective.js","../../../build/src/webCore/modules/wcResponsiveTable/components/directives/wcRowSelectHeaderRadioDirective.js","../../../build/src/webCore/modules/wcResponsiveTable/components/directives/wcRowActionMultipleDirective.js","../../../build/src/webCore/modules/wcResponsiveTable/components/directives/wcTablePaginationDirective.js","../../../build/src/webCore/modules/wcResponsiveTable/components/directives/wcColumnSortDirective.js","../../../build/src/webCore/modules/wcResponsiveTable/components/directives/wcColumnFilterDirective.js","../../../build/src/webCore/modules/wcResponsiveTable/components/directives/wcExportToExcelDirective.js","../../../build/src/webCore/modules/wcResponsiveTable/components/directives/wcExportToPdfDirective.js","../../../build/src/webCore/modules/wcResponsiveTable/components/services/wcTableScopeService/WcTableScopeService.js","../../../build/src/webCore/modules/wcResponsiveTable/components/services/wcColumnFilterService/WcColumnFilterService.js","../../../build/src/webCore/modules/wcResponsiveTable/components/services/wcTableCollectionService/WcTableCollectionService.js","../../../build/src/webCore/modules/wcResponsiveTable/components/services/wcTablePaginationService/WcTablePaginationService.js"],"names":["angular","module","config","$httpProvider","WcTranslateConfiguratorServiceProvider","$qProvider","errorOnUnhandledRejections","useApplyAsync","configureTranslateService","run","WcTranslateConfiguratorService","loadPartAndRefresh","constant","window","_","XLSX","saveAs","pdfMake","Chart","local","wslBaseUrl","authorization","any","all","version","name","Prism","jQuery","fn","exists","this","length","outerHTML","append","eq","clone","html","merge","dst","forEach","arguments","obj","value","key","constructor","Object","service","$timeout","$interval","$sce","configureDefaults","undefined","visible","visibleDefault","multiple","multipleDefault","persist","persistDefault","timeout","parseInt","timeoutDefault","errorOnStateChange","removeErrorOnStateChange","getSettings","fadeOutAnimationLengthMS","messages","isMessageDuplicate","msg","isDuplicate","i","message","$$unwrapTrustedValue","addMessage","messageInstance","trustAsHtml","uniqueishID","uniqueId","type","push","f","fadeOut","bind","removeMessage","updateTimeout","manualFade","foo","splice","removeMessages","includingPersistent","removeErrorMessages","getMessages","onlyVisible","messagesToReturn","getMessagesByType","typeToMatch","$q","$window","setSessionCache","sessionStorage","policyCache","toJson","cache","getSessionCache","fromJson","resetCache","retrievePolicyAuthorization","formattedPolicy","foundPolicy","find","policy","promise","then","resolved","data","authorized","when","formatPolicy","promiseOrData","resolvedPolicy","policyLocation","cachePolicy","localPolicy","copy","resource","action","addPolicy","policyName","policyPromise","WcHttpEndpointPrototype","WcAuthorizationCacheHelper","WcConstants","$state","authorizationEndpoint","requestAuthorization","get","params","authorizationString","response","isAuthorizedFromCache","isStateAuthorized","stateName","state","policies","criteria","isAuthorized","policySet","isArray","authorizations","each","isCached","arrayOfAuths","some","every","$rootScope","WcImageFileService","navigator","$on","stopCamera","onbeforeunload","cameraIsOn","height","width","setCameraSize","x","y","mediaDevices","getUserMedia","mozGetUserMedia","webkitGetUserMedia","c","Promise","n","call","generateVideo","document","createElement","returnVideoElement","videoElement","setAttribute","style","audio","video","stream","src","URL","createObjectURL","$","catch","error","console","checkForCamera","enumerateDevices","devices","filter","device","kind","err","log","takePicture","canvas","generateCanvas","getContext","drawImage","toDataURL","startCamera","play","getVideoTracks","tracks","stop","getFileType","fileDef","replace","prepareForFileUpload","base64DataUri","MIMEType","match","base64String","readFile","deferred","defer","reader","FileReader","onload","loadEvent","dataUri","target","result","resolve","onerror","reject","readAsDataURL","$http","$interpolate","WcAlertConsoleService","configuration","xsrfCookieName","withCredentials","headers","baseUrl","pingTrustPeriodMS","unAuthenticatedCallback","unprotectedPingRoute","queuedRequestMessages","extend","requestConfigurationMapper","httpConfig","urlBuilder","url","indexOf","interceptedParams","triggerRequestInterceptors","urlForCache","retString","keys","parseParams","alwaysRefresh","forceRefresh","cachedData","getFromLocalStorage","getFromSessionStorage","$broadcast","triggerResponseInterceptors","storeInLocalStorage","storeInSessionStorage","status","triggerErrorInterceptors","getNetworkState","finally","post","offline","fromQueue","queueRequest","put","delete","localStorage","getItem","isString","setItem","removeFromLocalStorage","removeItem","removeFromSessionStorage","addMessageForQueuedRequest","verb","substring","lastIndexOf","processOfflineQueue","deregisterListener","currentQueue","item","shift","requestPromise","handler","setupQueueTrigger","requestInterceptors","responseInterceptors","errorInterceptors","addRequestInterceptor","interceptor","index","newParms","addResponseInterceptor","newResponse","addErrorInterceptor","_lastPingRequestTimestamp","_trustedResponse","_pendingRequests","_currentPingRequestPromise","_networkStatusResponses","currentTime","Date","loadImage","imageSrc","context","image","Image","createImageURI","imageURI","provider","$translateProvider","translateProvider","sanitizationStrategy","loader","loaderObj","urlTemplate","langKeyArray","langKeyObj","en_*","en-*","zh_CN","zh_HK","ru_RU","fallbackLang","useSanitizeValueStrategy","useLoader","registerAvailableLanguageKeys","determinePreferredLanguage","fallbackLanguage","use","preferredLanguage","$get","$translate","$translatePartialLoader","partString","addPart","refresh","_enabled","enable","trackData","uri","urlPart","location","hash","search","$current","dcsMultiTrack","$apply","factory","WcDateRangePickerPrototype","startDate","endDate","minDate","maxDate","startDateFieldName","endDateFieldName","form","isStartDateOpen","isEndDateOpen","load","$watch","newValue","oldValue","minEndDate","maxStartDate","dateDisabledArray","$error","newVal","$viewValue","$setValidity","prototype","minStartDate","maxEndDate","openStartDate","$event","preventDefault","stopPropagation","openEndDate","WcHttpRequestService","Endpoint","route","baseURL","subRoute","id","options","directive","$compile","restrict","require","controller","$scope","$element","$attrs","insertionPoint","closest","formElem","addLabels","scope","attrs","has","disabled","readonly","prepend","hasAttribute","formGroup","first","link","elem","ctrls","remove","ngRequired","getFormControls","formController","formControls","hasOwnProperty","calculateNumRequiredFields","numRequiredFields","required","removeLabels","ngRequiredController","template","visibleMessages","closeAlert","newMsgs","oldMsgs","userYpos","scrollTop","msgYpos","last","offset","top","animate","chartObj","defaultOptions","responsive","maintainAspectRatio","wrap","cvs","destroyChart","resize","destroy","update","targetContainerId","controllerAs","responsiveTableController","element","viewScope","$parent","toggleCheckAllExists","setToggleCheckAllExists","getToggleCheckAllExists","checkAll","WcTableScopeService","getTableScope","prop","checkBoxList","checked","click","checkNone","controllers","datatableController","priority","onClick","evt","stopImmediatePropagation","off","on","workflow","isWorkflowEnabled","getWorkflowData","navigateToState","callingValues","nextState","reload","go","clickHandler","viewCtrl","callback","controllerContinueCallbackFunctionName","retVal","continueIfValid","attr","ctrl","formName","formCtrl","$valid","$setPristine","bindToController","onUpload","fileTypes","join","WcCameraService","WcDataFileService","cameraElement","chooseImageUpload","snapshotToUpload","webcamPresent","webCamIsPresnet","cancel","previewImageElement","capturePicture","snapShot","prepareForUpload","imageToUpload","imageToUploadObject","imageFileData","imageBase64String","imageMIMEType","fileType","description","thumbnailURI","thumbnailFileData","thumbnailBase64String","thumbnailMIMEType","imageObject","original","imageData","thumb","thumbnailData","turnCameraOff","turnCameraOn","addImages","wcInputFile","vm","onChange","changeEvent","files","map","extension","val","file","requestCount","pendingStateChange","showLoadingIndicator","show","opacity","hideLoadingIndicator","hide","incrementPendingCounterAndShow","decrementPendingCounterAndHide","hideLoadingIndicatorCallback","loadingIndicator","menuData","menuDataUrl","transclude","removeClass","collapseNavbar","navbarCollapsed","MainMenuCollpase","event","parentElement","parent","not","toggleClass","toggleNavbarCollpase","collapasesubMenu","menu","replaceWith","$provide","decorator","$delegate","shouldSetBlurUpdateEvent","nodeName","toLowerCase","nodeType","classList","contains","compileFn","compile","apply","pre","$overrideModelOptions","updateOn","updateOnDefault","checking","showOfflineIndicator","alertBox","addClass","scrollTo","hideOfflineIndicator","showUnavailableOffline","hideUnavailableOffline","showUnauthIndicator","hideUnauthIndicator","checkNetworkState","wslLogin","href","encodeURIComponent","current","unavailableOffline","offlineIndicator","firstRun","pageTitle","cleanUpName","cleanName","m","toUpperCase","updatePageTitle","parentStateName","appName","tempPageTitle","titleTag","wc-page-title","ng-bind","$templateCache","wcPagination","resultsPerPage","resultsPerPageText","showingResultsText","resultsItemCount","responsiveBreakpoints","searchResults","isNumber","totalItems","itemsPerPage","currentPage","boundaryLinks","maxSize","filteredSearchResults","updatePageResultsCount","begin","end","$watchCollection","slice","currentBreakpoint","resizeHandler","innerWidth","debounce","setTimeout","before","after","WcAuthorizationService","checkAuthorization","wcProtectedResource","toString","trim","split","protectedResourceCtrl","datatableCtrl","tagName","attributes","ngFormObj","elemName","wcResponsiveTable","ctrlName","nodeValue","insertBefore","errType","errorMessage","errorMessageDOM","min","max","validatorAttrs","errorMsgId","requiredText","fieldNameTranslateString","wcValidationIndicator","errorTypes","defaultMsg","email","minlength","maxlength","minMaxRange","tableRequired","date","pattern","number","inValid","buildErrorMsg","instant","fieldName","elemNameSnakeCase","buildErrorMsgDOM","watchListener","$submitted","errorCases","toPairs","ready","highlightElement","detectFilterType","filterMax","items","propertyName","num","filterMin","filterRange","newItems","isNaN","$swipe","WcTableCollectionService","WcTablePaginationService","WcColumnFilterService","rowKey","ngModel","paginationControlsPlacement","responsiveView","columnData","selectResultsPerPage","paginationEnabled","checkallnoneEnabled","exporttopdfEnabled","exporttoexcelEnabled","parentScope","table","setParentScope","setTableScope","setInitialCollection","setRowKey","ngModelController","setupTableOptions","$onChanges","changes","activeSortColumn","columnToSort","columnSortController","sortReverse","refreshCollection","currentValue","setCollection","sortEnabled","filterEnabled","tableScope","renderTable","resetToPageOne","tableIsLoading","tableIsFinishedLoading","tableRendered","selectedMathFilterOption","toggleFilterVisibility","currentText","text","toggle","staticFilter","showFilterLabel","hideFilterLabel","setupRachetingColumns","ratchetIndex","ratchetCols","direction","numberOfCols","args","animating","setupPaginationDefaults","numberOfPageControls","setPaginationState","setPaginationDefaults","setupTableValidation","$name","$parsers","viewValue","$formatters","modelValue","applyModel","$setViewValue","$$parentForm","$addControl","preSetupTable","dataRow","headerRow","children","columnsToHide","headerTxtNode","contents","headerTxtPreWrap","appendTo","columnHeadingText","addLoadingIndicator","addColumnFilteringFeature","tableConfig","addPaginationFeature","addCheckAllNoneFeature","checkAllNone","next","addExportToPdfFeature","tableButtonGroup","addExportToExcelFeature","addResponsiveFeature","addScrollingTableFeature","addRachetingColumnsFeature","addColumnToggleFeature","addListViewFeature","setMatchingHeights","selector","css","columnResizeHandler","scrollHandler","currentTarget","scrollLeft","scroll","startCoords","valid","directionOfSwipe","coords","deltaY","Math","abs","deltaX","start","columnToggle","columnName","firstChild","nextSibling","localName","e","postSetupTable","dataRowChildren","loadTable","noRecordRow","collection","getCollection","getRowKey","elements","insertRows","pageStart","pageEnd","elementsLength","el","$destroy","childScope","$new","row","isSelected","newRow","$attr","block","mappedCollection","selectedItems","hiddenColumns","rowRepeatController","paginationDefaults","getPaginationDefaults","checkbox","rowCheckedMap","rowUncheckedMap","wcRowSelectCheckbox","selectRow","newModel","highlightRow","shouldHighlight","tableCells","cell","boolean","wcRowSelectRadio","rowSelectRadioController","highlight","getParentScope","selectAll","rowSelectAllController","selectNone","rowSelectNoneController","numberOfSelectedRows","oldVal","wcRowActionSingle","singleAction","rowScope","concat","rowActionSingleController","wcRowSelectHeaderCheckbox","checkIfAllChecked","allCheckboxes","is","isChecked","selectAllRows","wcRowSelectHeaderRadio","wcRowActionMultiple","multipleAction","rowActionMultipleController","pagination","tableWrapper","resetCurrentPage","getCollectionLength","totalPages","ceil","updatePaginationControls","createPaginationControlNumbers","paginationPageControls","array","paginationNoOfPages","paginationOffset","floor","pageNumberToAdd","checkValue","numberOfPagesNeeded","lastPageAdded","firstPageAdded","unshift","changeResultsPerPage","changePage","newPage","pageNumber","newPageEnd","nextPage","nextPageNumber","previousPage","$digest","tablePaginationController","actionDropdownTemplate","controlsPlacement","paginationTop","paginationBottom","wcColumnSort","wcColumnSortDefault","specialChars","columnIndex","collectionLength","sortOn","arr","reverse","sort","a","b","localeCompare","sortCollection","isRefresh","columnClass","Number","previousSortColumn","sortedColumn","column","binding","defaultSorts","sortIcon","clickableElem","add","$document","$filter","wcColumnFilter","wcColumnFilterDelay","defaultDropdownOption","htmlDecode","input","innerHTML","childNodes","predicate","isMultiSelect","mathFilterOptions","filterColumn","activeFilterWrapper","filterArray","getColumnsToFilter","filteredCollection","j","isMathFilter","mathOp","filterString","filterNum","rowValue","$eval","dismissFilter","removeColumnToFilter","parents","filterListener","htmlPredicate","elementVal","setColumnsToFilter","filterIconFinder","activeFilterButton","label","activeFilterBox","columnFilterController","keyup","uniq","option","exportToExcel","columnHeadText","dataAttributes","tableId","exportArray","rowLen","r","fileName","workbook","SheetNames","Sheets","worksheet","sheetFromArrayOfArrays","wsColumnWidths","wch","maxLength","v","ranges","outWorkbook","write","Blob","s2ab","s","ArrayBuffer","buf","view","Uint8Array","charCodeAt","Array","ws","range","R","C","cell_ref","utils","encode_cell","t","z","SSF","_table","dateNum","encode_range","date1904","epoch","getTime","makeExcel","columnHeaders","firstRowData","getAttribute","substr","exportToPDF","tableheaders","locationInCollection","outputTDLength","tableContent","rowContent","columnContent","bold","pdfTableBodyFormatting","str","stringArr","innerTxt","k","isDate","docDefinition","content","headerRows","widths","body","createPdf","download","makePDF","tableHeader","tableHeadersArray","tableBodyArray","td","fullStr","newParentScope","$id","newTableScope","columnsToFilter","mathFilter","findIndex","getBlankFilters","blankFilters","newCollection","sorted","filtered","initialCollection","newRowKey","isPaginationEnabled","newDefaults","property"],"mappings":"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","file":"FRF-webCore.min.js","sourcesContent":["/**\r\n * @ngdoc overview\r\n * @name WebCoreModule\r\n * @description\r\n * WebCore is a collection of internally developed components and extensions and is the majority of the custom code developed for the\r\n * Ford Responsive Framework (FRF). The WebCoreModule includes all needed vendor scripts as dependencies and also includes the custom\r\n * developed scripts. Applications can take advantage of all vendor and custom code via inclusion of WebCoreModule.\r\n */\r\n'use strict';\r\nangular.module('WebCoreModule', [\r\n    'ngSanitize',\r\n    'ngTouch',\r\n    'pascalprecht.translate',\r\n    'ui.bootstrap',\r\n    'ui.mask',\r\n    'ui.router',\r\n    'ui.router.state.events',\r\n    'ui.select',\r\n    'WcResponsiveTableModule'\r\n])\r\n    .config(['$httpProvider', 'WcTranslateConfiguratorServiceProvider', '$qProvider', function ($httpProvider, WcTranslateConfiguratorServiceProvider, $qProvider) {\r\n\r\n        $qProvider.errorOnUnhandledRejections(false); // default value is true form angularJs v >=1.6, so declaration is required\r\n\r\n        //override default $http behavior to trigger any webCore http requests to be batched into similar digest cycles.\r\n        $httpProvider.useApplyAsync(true);\r\n        WcTranslateConfiguratorServiceProvider.configureTranslateService();\r\n    }])\r\n    .run(['WcTranslateConfiguratorService', function (WcTranslateConfiguratorService) {\r\n        WcTranslateConfiguratorService.loadPartAndRefresh('WC-dataTable');\r\n    }]);\r\n\r\n/**\r\n * @ngdoc service\r\n * @name WebCoreModule.service:_\r\n * @description\r\n * WebCore includes the underscore library. Since it's not defined in the Angular context, we define an Angular constant for it here.\r\n */\r\nangular.module('WebCoreModule').constant('_', window._);\r\n\r\n/**\r\n * @ngdoc service\r\n * @name WebCoreModule.service:XLSX\r\n * @description\r\n * WebCore includes the js-xlsx library. Since it's not defined in the Angular context, we define an Angular constant for it here.\r\n */\r\nangular.module('WebCoreModule').constant('XLSX', window.XLSX);\r\n\r\n\r\n/**\r\n * @ngdoc service\r\n * @name WebCoreModule.service:saveAs\r\n * @description\r\n * WebCore includes the file-saver library. Since it's not defined in the Angular context, we define an Angular constant for it here.\r\n */\r\nangular.module('WebCoreModule').constant('saveAs', window.saveAs);\r\n\r\n/**\r\n * @ngdoc service\r\n * @name WebCoreModule.service:pdfMake\r\n * @description\r\n * WebCore includes the pdfMake library. Since it's not defined in the Angular context, we define an Angular constant for it here.\r\n */\r\nangular.module('WebCoreModule').constant('pdfMake', window.pdfMake);\r\n\r\n/**\r\n * @ngdoc service\r\n * @name WebCoreModule.service:Chart\r\n * @description\r\n * WebCore includes the Chart.js library. Since it's not defined in the Angular context, we define an Angular constant for it here.\r\n */\r\nangular.module('WebCoreModule').constant('Chart', window.Chart);\r\n\r\n/**\r\n * @ngdoc service\r\n * @name WebCoreModule.service:WcConstants\r\n * @description\r\n * WebCore includes a few constant values that are applicable module-wide. They are defined here as a constant service for use\r\n * throughout the module.\r\n */\r\nangular.module('WebCoreModule').constant('WcConstants', {\r\n    'local': 'local',\r\n    'wslBaseUrl': 'https://www.wsl.ford.com/login.cgi?portstripping=no&back=',\r\n    'authorization': {\r\n        'any': 'Any',\r\n        'all': 'All'\r\n    },\r\n    'version': '1.3.0',\r\n    'name': 'Ford Responsive Framework (FRF)'\r\n});\r\nangular.module('WebCoreModule').constant('Prism', window.Prism);\r\n\r\njQuery.fn.exists = function () {\r\n    return this.length !== 0;\r\n};\r\n\r\njQuery.fn.outerHTML = function () {\r\n    return jQuery('<div>').append(this.eq(0).clone()).html();\r\n};\r\n\r\n//credit to stack overflow posters 'Michael Herold and Ryan O'Neill': http://stackoverflow.com/a/15311842\r\nangular.merge = function (dst) {\r\n    angular.forEach(arguments, function (obj) {\r\n        if (obj !== dst) {\r\n            angular.forEach(obj, function (value, key) {\r\n                if (dst[key] && dst[key].constructor && dst[key].constructor === Object) {\r\n                    angular.merge(dst[key], value);\r\n                } else {\r\n                    dst[key] = value;\r\n                }\r\n            });\r\n        }\r\n    });\r\n    return dst;\r\n};\r\n","\t\t/**\r\n\t\t * @ngdoc service\r\n\t\t * @name WebCoreModule.service:WcAlertConsoleService\r\n\t\t * @requires $timeout\r\n\t\t * @requires _\r\n\t\t * @requires $interval\r\n\t\t * @requires $sce\r\n\t\t * @description\r\n\t\t * The WcAlertConsoleService manages the array of app-wide alert messages that are made visible to the user. The service exposes\r\n\t\t * a configureDefaults function and an addMessage function. Messages added to the service are then displayed by the wcAlertConsole directive.\r\n\t\t */\r\n'use strict';\r\nangular.module('WebCoreModule')\r\n\t.service('WcAlertConsoleService', ['$timeout', '_', '$interval', '$sce', function($timeout, _, $interval, $sce) {\r\n\r\n\t\t/**\r\n\t\t * @ngdoc method\r\n\t\t * @name WcAlertConsoleService.configureDefaults\r\n\t\t * @methodOf WebCoreModule.service:WcAlertConsoleService\r\n\t\t * @param {Object} config Options object to configure default values used by the WcAlertConsoleService. Config properties that can be set in this object include:\r\n\t\t *  - visible: set to true to make the messages visible (default). Set to false to hide the messages in the console.\r\n\t\t *  - multiple: set to true to allow multiple copies of the same message in the console (default). Set to false to allow only a single copy to be displayed in the console.\r\n\t\t *  - persist: set to false to allow the messages to be cleared from the console (default). Set to true to make the messages persist in the console.\r\n\t\t *  - timeout: set an {Integer} value for the length of time in seconds a message should stay in the console. (default, 7sec)\r\n\t\t *  - errorOnStateChange: set to true to have messages removed when a state change occurs (default). Set to false to allow the messages to stay in the console across states.\r\n\t\t * @description\r\n\t\t * Takes the configuration object passed in and uses it to configure the default values used by the WcAlertConsoleService.\r\n\t\t */\r\n\t\tthis.configureDefaults = function(config) { // jshint ignore:line\r\n\r\n\t\t\tif(config) {\r\n\t\t\t\tif(config.visible !== undefined && (config.visible === true || config.visible === false)) {\r\n\t\t\t\t\tvisibleDefault = config.visible;\r\n\t\t\t\t}\r\n\t\t\t\tif(config.multiple !== undefined && (config.multiple === true || config.multiple === false)) {\r\n\t\t\t\t\tmultipleDefault = config.multiple;\r\n\t\t\t\t}\r\n\t\t\t\tif(config.persist !== undefined && (config.persist === true || config.persist === false)) {\r\n\t\t\t\t\tpersistDefault = config.persist;\r\n\t\t\t\t}\r\n\t\t\t\tif(config.timeout !== undefined && (parseInt(config.timeout) !== 'NaN')) {\r\n\t\t\t\t\ttimeoutDefault = config.timeout;\r\n\t\t\t\t}\r\n\t\t\t\tif(config.errorOnStateChange && (config.errorOnStateChange === true || config.errorOnStateChange === false)) {\r\n\t\t\t\t\tremoveErrorOnStateChange = config.errorOnStateChange;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t};\r\n\t\tvar visibleDefault = true;\r\n\t\tvar multipleDefault = true;\r\n\t\tvar persistDefault = false;\r\n\t\tvar timeoutDefault = 7;\r\n\t\tvar fadeOutAnimationLengthMS = 350;\r\n\t\tvar removeErrorOnStateChange = true;\r\n        /**\r\n         * @ngdoc method\r\n         * @name WcAlertConsoleService.getSettings\r\n         * @methodOf WebCoreModule.service:WcAlertConsoleService\r\n\t\t * @returns {Object} An object that contains the settings for the alert console\r\n         * @description\r\n\t\t * Returns the settings for the alert console.\r\n         */\r\n\t\tthis.getSettings = function() {\r\n\t\t\t//noinspection UnnecessaryLocalVariableJS\r\n            var settings = {\r\n\t\t\t\tvisible: visibleDefault,\r\n\t\t\t\tmultiple: multipleDefault,\r\n\t\t\t\tpersist: persistDefault,\r\n\t\t\t\ttimeout: timeoutDefault,\r\n\t\t\t\tfadeOutAnimationLengthMS: fadeOutAnimationLengthMS,\r\n\t\t\t\tremoveErrorOnStateChange: removeErrorOnStateChange\r\n\t\t\t};\r\n\t\t\treturn settings;\r\n\t\t};\r\n\r\n\t\tvar messages = [];\r\n        /**\r\n         * @ngdoc method\r\n         * @name WcAlertConsoleService.isMessageDuplicate\r\n         * @methodOf WebCoreModule.service:WcAlertConsoleService\r\n         * @param {Object} msg Object to cross check with the messages already in the alert console\r\n\t\t * @description\r\n\t\t * Grabs the value of the msg passed in as a parameter and checks if it\r\n\t\t * matches any of the existing messages in the alert console, returning true\r\n\t\t * if there is a match, false otherwise.\r\n         */\r\n\t\tthis.isMessageDuplicate = function(msg) {\r\n\r\n\t\t\tvar isDuplicate = false;\r\n\r\n\t\t\tfor(var i = 0; i < messages.length; i++) {\r\n\t\t\t\tif(messages[i].message.$$unwrapTrustedValue() === msg.$$unwrapTrustedValue()) {\r\n\t\t\t\t\tisDuplicate = true;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\treturn isDuplicate;\r\n\r\n\t\t};\r\n\t\t/**\r\n\t\t * @ngdoc method\r\n\t\t * @name WcAlertConsoleService.addMessage\r\n\t\t * @methodOf WebCoreModule.service:WcAlertConsoleService\r\n\t\t * @param {Object} messageInstance Object to configure the message to add to the console. Config properties that can be set in this object include:\r\n\t\t *  - message: Required. The string of text that will be added to the console as a message.\r\n\t\t *  - type: Required. The type of message styling to apply. Can be success, info, warning, or danger.\r\n\t\t *  - visible: set to true to make the messages visible (default). Set to false to hide the messages in the console.\r\n\t\t *  - multiple: set to true to allow multiple copies of the same message in the console (default). Set to false to allow only a single copy to be displayed in the console.\r\n\t\t *  - persist: set to false to allow the messages to be cleared from the console (default). Set to true to make the messages persist in the console.\r\n\t\t *  - timeout: set an {Integer} value for the length of time in seconds a message should stay in the console. (default, 7sec)\r\n\t\t *  - errorOnStateChange: set to true to have messages removed when a state change occurs (default). Set to false to allow the messages to stay in the console across states.\r\n\t\t * @description\r\n\t\t * Prepares and displays the message from the messageInstance passed in as a parameter according to the settings of the alert console. For Example, this means that if duplicate messages\r\n\t\t * are not allowed by the alert console it will not display unless noted by the settings of the messageInstance.\r\n\t\t */\r\n\t\tthis.addMessage = function(messageInstance) {\r\n\r\n\t\t\t//first, trust the alert text as html\r\n\t\t\tmessageInstance.message = $sce.trustAsHtml(messageInstance.message);\r\n\r\n\t\t\tif(messageInstance) {\r\n\t\t\t\tif(messageInstance.visible === undefined) {\r\n\t\t\t\t\tmessageInstance.visible = visibleDefault;\r\n\t\t\t\t}\r\n\t\t\t\tif(messageInstance.multiple === undefined) {\r\n\t\t\t\t\tmessageInstance.multiple = multipleDefault;\r\n\t\t\t\t}\r\n\t\t\t\tif(messageInstance.persist === undefined) {\r\n\t\t\t\t\tmessageInstance.persist = persistDefault;\r\n\t\t\t\t}\r\n\t\t\t\tif(messageInstance.timeout === undefined) {\r\n\t\t\t\t\tmessageInstance.timeout = timeoutDefault;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t// create identifier for message\r\n\t\t\t//noinspection UnnecessaryLocalVariableJS\r\n            var uniqueishID = _.uniqueId('alert_');\r\n\t\t\tmessageInstance.uniqueishID = uniqueishID;\r\n\r\n\t\t\t// persist danger messages by default\r\n\t\t\tif(messageInstance.type === 'danger') {\r\n\t\t\t\tmessageInstance.persist = true;\r\n\t\t\t}\r\n\r\n\t\t\t// prevent duplicate message if multiple=false\r\n\t\t\tif(messageInstance.multiple === false) {\r\n\t\t\t\tif(!this.isMessageDuplicate(messageInstance.message)) {\r\n\t\t\t\t\tmessages.push(messageInstance);\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tmessages.push(messageInstance);\r\n\t\t\t}\r\n\r\n\t\t\tif(messageInstance.persist === false) {\r\n\t\t\t\t$interval(function() {\r\n\t\t\t\t\tfor(var f = 0; f < messages.length; f++) {\r\n\t\t\t\t\t\tif(messages[f].uniqueishID === messageInstance.uniqueishID) {\r\n\t\t\t\t\t\t\tmessages[f].fadeOut = true;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}, messageInstance.timeout * 1000 - fadeOutAnimationLengthMS,1);\r\n\r\n\t\t\t\t$interval(angular.bind(this, function() {\r\n\t\t\t\t\tthis.removeMessage(messageInstance.uniqueishID);\r\n\t\t\t\t}), messageInstance.timeout * 1000,1);\r\n\r\n\t\t\t\t$interval(angular.bind(this, function() {\r\n\t\t\t\t\tthis.updateTimeout(messageInstance.uniqueishID);\r\n\t\t\t\t}), 1000, messageInstance.timeout);\r\n\t\t\t}\r\n\t\t};\r\n\r\n        /**\r\n         * @ngdoc method\r\n         * @name WcAlertConsoleService.updateTimeout\r\n         * @methodOf WebCoreModule.service:WcAlertConsoleService\r\n         * @param {string} uniqueishID variable is the identifier for the message that should have the timeout updated.\r\n         * @description\r\n         * Looks for the message based on the uniqueishID passed in and decrements the timeout variable if the message is found.\r\n         */\r\n\t\tthis.updateTimeout = function(uniqueishID) {\r\n\t\t\tfor(var i = 0; i < messages.length; i++) {\r\n\t\t\t\tif(messages[i].uniqueishID === uniqueishID) {\r\n\t\t\t\t\tmessages[i].timeout --;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t};\r\n\r\n        /**\r\n         * @ngdoc method\r\n         * @name WcAlertConsoleService.removeMessage\r\n         * @methodOf WebCoreModule.service:WcAlertConsoleService\r\n         * @param {string} uniqueishID variable is the identifier for the message that will be removed\r\n\t\t * @param {boolean} manualFade boolean to determine if the message should be faded out manually within the remove message method\r\n         * @description\r\n         * Looks for the message based on the uniqueishID passed in and removes it from the console.\r\n\t\t * If manualFade is true, it will fade the message out regardless of the alert console settings.\r\n         */\r\n\t\tthis.removeMessage = function(uniqueishID, manualFade) {\r\n\r\n\t\t\tfunction foo(uniqueishID) {\r\n\t\t\t\treturn function() {\r\n\t\t\t\t\tthis.removeMessage(uniqueishID);\r\n\t\t\t\t};\r\n\t\t\t}\r\n\r\n\t\t\tfor(var i in messages) {\r\n\t\t\t\tif(messages[i].uniqueishID === uniqueishID) {\r\n\r\n\t\t\t\t\tif(manualFade) {\r\n\t\t\t\t\t\tmessages[i].fadeOut = true;\r\n\t\t\t\t\t\t$timeout(angular.bind(this, foo(uniqueishID)), fadeOutAnimationLengthMS);\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tmessages.splice(i, 1);\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t};\r\n\r\n        /**\r\n         * @ngdoc method\r\n         * @name WcAlertConsoleService.removeMessage\r\n         * @methodOf WebCoreModule.service:WcAlertConsoleService\r\n         * @param {string} includingPersistent boolean to tell this method whether to also remove persistent messages or not.\r\n         * @description\r\n         * Goes through all messages in the alert console and removes them if they are not persistant, unless includingPersistant is true,\r\n\t\t * in which case truly all of the messages are removed.\r\n         */\r\n\t\tthis.removeMessages = function(includingPersistent) {\r\n\r\n\t\t\tfor(var i = 0; i < messages.length; i++) {\r\n\t\t\t\tif(messages[i].persist === false || includingPersistent === true) {\r\n\t\t\t\t\tmessages.splice(i, 1);\r\n\t\t\t\t\t// reset index for accurate loop\r\n\t\t\t\t\ti = i - 1;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t};\r\n\r\n        /**\r\n         * @ngdoc method\r\n         * @name WcAlertConsoleService.removeErrorMessages\r\n         * @methodOf WebCoreModule.service:WcAlertConsoleService\r\n         * @description\r\n         * Finds all messages in the alert console of type 'danger' and removes them.\r\n         */\r\n\t\tthis.removeErrorMessages = function() {\r\n\t\t\tfor(var i = 0; i < messages.length; i++) {\r\n\t\t\t\tif(messages[i].type === 'danger') {\r\n\t\t\t\t\tmessages.splice(i, 1);\r\n\t\t\t\t\t// reset index for accurate loop\r\n\t\t\t\t\ti = i - 1;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t};\r\n\r\n        /**\r\n         * @ngdoc method\r\n         * @name WcAlertConsoleService.getMessages\r\n         * @methodOf WebCoreModule.service:WcAlertConsoleService\r\n\t\t * @param {boolean} onlyVisible boolean to determine whether to only get the messages that are visible or all messages.\r\n\t\t * @return {array} Returns an array of messageObjects.\r\n         * @description\r\n         * This method gets all messages in the alert console and returns them in an array. If only visible is true it only returns the visible messages in the alert console.\r\n         */\r\n\t\tthis.getMessages = function(onlyVisible) {\r\n\t\t\tvar messagesToReturn = [];\r\n\r\n\t\t\tfor(var i = 0; i < messages.length; i++) {\r\n\t\t\t\tif((onlyVisible === true && messages[i].visible === true) || onlyVisible === undefined) {\r\n\t\t\t\t\tmessagesToReturn.push(messages[i]);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\treturn messagesToReturn;\r\n\t\t};\r\n\r\n        /**\r\n         * @ngdoc method\r\n         * @name WcAlertConsoleService.getMessagesByType\r\n         * @methodOf WebCoreModule.service:WcAlertConsoleService\r\n         * @param {string} typeToMatch string to match to the type of the messages that are being searched for.\r\n         * @return {array} Returns an array of messageObjects.\r\n         * @description\r\n         * This method gets all messages of type typeToMatch and returns them in an array.\r\n         */\r\n\t\tthis.getMessagesByType = function(typeToMatch) {\r\n\r\n\t\t\tvar messagesToReturn = [];\r\n\r\n\t\t\tfor(var i = 0; i < messages.length; i++) {\r\n\t\t\t\tif(messages[i].type === typeToMatch) {\r\n\t\t\t\t\tmessagesToReturn.push(messages[i]);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\treturn messagesToReturn;\r\n\t\t};\r\n\r\n\r\n\t}]);","\t\t/**\r\n\t\t * @ngdoc service\r\n\t\t * @name WebCoreModule.service:WcAuthorizationCacheHelper\r\n\t\t * @requires _\r\n\t\t * @requires $q\r\n\t\t * @requires $window\r\n\t\t * @description\r\n\t\t * The WcAuthorizationCacheHelper is utilized by the WcAuthorizationService to cache authorization results for the application.\r\n\t\t * Results from authorization checks are stored in the browser's session storage, limiting the number of network requests that are required.\r\n\t\t * The WcAuthorizationCacheHelper is a private helper specific to the WcAuthorizationService, so its properties and methods are not\r\n\t\t * documented here.\r\n\t\t */\r\n'use strict';\r\nangular.module('WebCoreModule')\r\n\t.service('WcAuthorizationCacheHelper', ['_', '$q', '$window', function(_, $q, $window) {\r\n\r\n        /**\r\n         * @ngdoc method\r\n         * @name WcAuthorizationCacheHelper.setSessionCache\r\n         * @methodOf WebCoreModule.service:WcAuthorizationCacheHelper\r\n         * @description\r\n         * This method grabs the cache from angular and converts to JSON and stores it on the $window\r\n         */\r\n\t\tthis.setSessionCache = function() {\r\n\t\t\t$window.sessionStorage.policyCache = angular.toJson(this.cache);\r\n\t\t};\r\n\r\n        /**\r\n         * @ngdoc method\r\n         * @name WcAuthorizationCacheHelper.getSessionCache\r\n         * @methodOf WebCoreModule.service:WcAuthorizationCacheHelper\r\n\t\t * @return {Object} A deserialized JSON string representing the policy cache\r\n         * @description\r\n         * This method returns the policy cache to deserialized and returns it.\r\n         */\r\n\t\tthis.getSessionCache = function() {\r\n\t\t\treturn angular.fromJson($window.sessionStorage.policyCache);\r\n\t\t};\r\n\r\n        /**\r\n         * @ngdoc property\r\n         * @name WcAuthorizationCacheHelper.cache\r\n         * @propertyOf WebCoreModule.service:WcAuthorizationCacheHelper\r\n         * @returns {Object} The json formatted policy cache\r\n         */\r\n\t\tthis.cache = this.getSessionCache();\r\n\r\n\t\tif (!this.cache) {\r\n\t\t\tthis.cache = [];\r\n\t\t}\r\n\r\n        /**\r\n         * @ngdoc method\r\n         * @name WcAuthorizationCacheHelper.resetCache\r\n         * @methodOf WebCoreModule.service:WcAuthorizationCacheHelper\r\n         * @description\r\n         * This method clears the cache object to an empty array.\r\n         */\r\n\t\tthis.resetCache = function() {\r\n\t\t\tthis.cache = [];\r\n\t\t};\r\n\r\n        /**\r\n         * @ngdoc method\r\n         * @name WcAuthorizationCacheHelper.retrievePolicyAuthorization\r\n         * @methodOf WebCoreModule.service:WcAuthorizationCacheHelper\r\n\t\t * @param {Object} formattedPolicy a json formatted policy object\r\n\t\t * @return {Object} authorization property of the policy, or null if not found\r\n         * @description\r\n         * This method finds the policy in the cache and returns the authorization\r\n         */\r\n\t\tthis.retrievePolicyAuthorization = function(formattedPolicy) {\r\n\t\t\tvar foundPolicy = _.find(this.cache, {\r\n\t\t\t\t'policy': formattedPolicy\r\n\t\t\t});\r\n\t\t\tif (foundPolicy !== undefined) {\r\n\t\t\t\tif (foundPolicy.promise && foundPolicy.promise.then) {\r\n\t\t\t\t\treturn foundPolicy.promise.then(function(resolved) {\r\n\t\t\t\t\t\tresolved = resolved.data ? resolved.data : resolved;\r\n\r\n\t\t\t\t\t\treturn resolved.authorized;\r\n\t\t\t\t\t});\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn $q.when(foundPolicy.authorized);\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\treturn null;\r\n\t\t\t}\r\n\t\t};\r\n\r\n        /**\r\n         * @ngdoc method\r\n         * @name WcAuthorizationCacheHelper.formatPolicy\r\n         * @methodOf WebCoreModule.service:WcAuthorizationCacheHelper\r\n\t\t * @param {string} name the name of the policy\r\n\t\t * @param {Object} promiseOrData either a promise or the data of the policy\r\n         * @description\r\n         * This method first checks if the policy is a promise, and if so resolves the promise in an object and caches the data and calls this function again with the resolved policy.\r\n\t\t * When this function is colled with a policy data object (local policy) in promiseOrData it returns the policy and name together in an object.\r\n         */\r\n\t\tthis.formatPolicy = function(name, promiseOrData) {\r\n\t\t\t// detect if policy is a promise\r\n\t\t\tif (promiseOrData.then) {\r\n\t\t\t\tpromiseOrData.then(angular.bind(this, function(resolvedPolicy) {\r\n\t\t\t\t\tvar policyLocation;\r\n\t\t\t\t\tfor (policyLocation = 0; policyLocation < this.cache.length; policyLocation++) {\r\n\t\t\t\t\t\tif (this.cache[policyLocation].policy === name) {\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tresolvedPolicy = resolvedPolicy.data ? resolvedPolicy.data : resolvedPolicy;\r\n\r\n\t\t\t\t\tthis.cache[policyLocation] = this.formatPolicy(name, resolvedPolicy);\r\n\t\t\t\t\tthis.setSessionCache();\r\n\r\n\t\t\t\t}));\r\n\t\t\t\tvar cachePolicy = {};\r\n\t\t\t\tcachePolicy.policy = name;\r\n\t\t\t\tcachePolicy.promise = promiseOrData;\r\n\t\t\t\treturn cachePolicy;\r\n\t\t\t} else {\r\n\t\t\t\tvar localPolicy = angular.copy(promiseOrData);\r\n\t\t\t\tlocalPolicy.policy = name;\r\n\t\t\t\tdelete localPolicy.resource;\r\n\t\t\t\tdelete localPolicy.action;\r\n\t\t\t\treturn localPolicy;\r\n\t\t\t}\r\n\t\t};\r\n\r\n        /**\r\n         * @ngdoc method\r\n         * @name WcAuthorizationCacheHelper.addPolicy\r\n         * @methodOf WebCoreModule.service:WcAuthorizationCacheHelper\r\n\t\t * @param {string} policyName the name of the policy to be added\r\n         * @param {Promise} policyPromise a promise for the policy to be added\r\n         * @description\r\n         * This method pushes a formatted policy to the cache and then sets the cache with the new cache object.\r\n         */\r\n\t\tthis.addPolicy = function(policyName, policyPromise) {\r\n\t\t\tthis.cache.push(this.formatPolicy(policyName, policyPromise));\r\n\t\t\tthis.setSessionCache();\r\n\t\t};\r\n\r\n\t}]);","\t\t/**\r\n\t\t * @ngdoc service\r\n\t\t * @name WebCoreModule.service:WcAuthorizationService\r\n\t\t * @requires WebCoreModule.service:WcHttpEndpointPrototype\r\n\t\t * @requires WebCoreModule.service:WcAuthorizationCacheHelper\r\n\t\t * @requires _\r\n\t\t * @requires $q\r\n\t\t * @requires WcConstants\r\n\t\t * @requires $state\r\n\t\t * @description\r\n\t\t * The WcAuthorizationService communicates with a specified restful endpoint to determine whether a user is authorized for a\r\n\t\t * resource or not. The service exposes functions to assist in decisions for whole states or even specific resources.\r\n\t\t */\r\n'use strict';\r\nangular.module('WebCoreModule')\r\n\t.service('WcAuthorizationService', ['WcHttpEndpointPrototype', 'WcAuthorizationCacheHelper', '_', '$q', 'WcConstants', '$state', function(WcHttpEndpointPrototype, WcAuthorizationCacheHelper, _, $q, WcConstants, $state) {\r\n\r\n        /**\r\n         * @ngdoc property\r\n         * @name WcAuthorizationService.authorizationEndpoint\r\n         * @propertyOf WebCoreModule.service:WcAuthorizationService\r\n         * @returns {Object} An instance of WcHttpEndpointPrototype using 'authorizations' as the id.\r\n         */\r\n\t\tthis.authorizationEndpoint = new WcHttpEndpointPrototype('authorizations');\r\n\r\n        /**\r\n         * @ngdoc method\r\n         * @name WcAuthorizationService.requestAuthorization\r\n         * @methodOf WebCoreModule.service:WcAuthorizationService\r\n\t\t * @param {string} name the name of the policy that is being requested\r\n         * @description\r\n         * This function gets authorization policy from the authorization endpoint with name as the authorziationString and then adds this policy using\r\n\t\t * WcAuthorizationCacheHelper.addPolicy\r\n         */\r\n\t\tthis.requestAuthorization = function(name) {\r\n\t\t\tWcAuthorizationCacheHelper.addPolicy(name, this.authorizationEndpoint.get({params: {\r\n\t\t\t\t'authorizationString': name\r\n\t\t\t}}).then(function(response) {\r\n\t\t\t\treturn response.data[0];\r\n\t\t\t}));\r\n\t\t};\r\n\r\n        /**\r\n         * @ngdoc method\r\n         * @name WcAuthorizationService.isAuthorizedFromCache\r\n         * @methodOf WebCoreModule.service:WcAuthorizationService\r\n\t\t * @param {Object} policy a json formatted policy object\r\n         * @returns {Object} returns the authorization of the policy object passed in\r\n         * @description\r\n         * The isAuthorizedFromCache function simply returns the cached policy from the WcAuthorizationCacheHelper\r\n         */\r\n\t\tthis.isAuthorizedFromCache = function(policy) {\r\n\t\t\treturn WcAuthorizationCacheHelper.retrievePolicyAuthorization(policy);\r\n\t\t};\r\n\r\n\t\t/**\r\n\t\t * @ngdoc method\r\n\t\t * @name WcAuthorizationService.isStateAuthorized\r\n\t\t * @methodOf WebCoreModule.service:WcAuthorizationService\r\n\t\t * @param {String} stateName String identifying the state to check the user's authoization for.\r\n\t\t * @returns {Promise} Promise object containing the results of the authorization check for the given state's policies.\r\n\t\t * @description\r\n\t\t * The isStateAuthorized function is a wrapper for the isAuthorized call when working with states. The function will\r\n\t\t * find the authorization policies associated with the given state name and invoke isAuthorized to determine if the\r\n\t\t * user is authorized to access the state.\r\n\t\t */\r\n\t\tthis.isStateAuthorized = function(stateName) {\r\n\r\n\t\t\t// Grab applicable policies from state's definition\r\n\t\t\tvar state = $state.get(stateName);\r\n\t\t\tvar policies = null,\r\n\t\t\t\tcriteria = null;\r\n\r\n\t\t\tif (state.data) {\r\n\t\t\t\tpolicies = state.data.policies ? state.data.policies : null;\r\n\t\t\t\tcriteria = state.data.criteria ? state.data.criteria : null;\r\n\t\t\t}\r\n\r\n\t\t\t// If state does not require any policy permissions, return true.\r\n\t\t\tif (!policies) {\r\n\t\t\t\treturn $q.when(true);\r\n\t\t\t}\r\n\r\n\t\t\t// Set criteria to 'All' by default if not specified\r\n\t\t\tif (policies && !criteria) {\r\n\t\t\t\tcriteria = WcConstants.authorization.all;\r\n\t\t\t}\r\n\r\n\t\t\treturn this.isAuthorized(policies, criteria);\r\n\t\t};\r\n\r\n\t\t/**\r\n\t\t * @ngdoc method\r\n\t\t * @name WcAuthorizationService.isAuthorized\r\n\t\t * @methodOf WebCoreModule.service:WcAuthorizationService\r\n\t\t * @param {String|Array} policySet Set of policies to check authorization against.\r\n\t\t * @param {String} criteria String identifying if the check should be for authorization against any or all of the policies.\r\n\t\t * @returns {Promise} Promise object containing the results of the authorization check for the given policySet and criteria.\r\n\t\t * @description\r\n\t\t * The isAuthorized function checks if the current user is authorized for the given policy set. Checks are made via\r\n\t\t * restful communications to the application server. The authorization service caches responses, to limit network\r\n\t\t * traffic if multiple checks are required for the same policy. The function returns a promise that will resolve based\r\n\t\t * on the given criteria. If 'All' is specified, the promise will be true if the user is authorized for all policies.\r\n\t\t * If 'Any' is specified, the promise will be true if the user is authorized for any of the policies.\r\n\t\t */\r\n\t\tthis.isAuthorized = function(policySet, criteria) {\r\n\r\n\t\t\tif (!criteria) {\r\n\t\t\t\tcriteria = WcConstants.authorization.all;\r\n\t\t\t}\r\n\r\n\t\t\tif (!angular.isArray(policySet)) {\r\n\t\t\t\tpolicySet = [policySet];\r\n\t\t\t}\r\n\r\n\t\t\tvar authorizations = [];\r\n\r\n\t\t\t_.each(policySet, angular.bind(this, function(policy) {\r\n\t\t\t\tvar isCached = this.isAuthorizedFromCache(policy);\r\n\t\t\t\tif (isCached === null) {\r\n\t\t\t\t\tthis.requestAuthorization(policy);\r\n\t\t\t\t\tisCached = this.isAuthorizedFromCache(policy);\r\n\t\t\t\t}\r\n\t\t\t\tauthorizations.push(isCached);\r\n\t\t\t}));\r\n\r\n\t\t\treturn $q.all(authorizations).then(function(arrayOfAuths) {\r\n\t\t\t\tswitch (criteria) {\r\n\t\t\t\t\tcase 'Any':\r\n\t\t\t\t\t\treturn _.some(arrayOfAuths);\r\n\t\t\t\t\tcase 'All':\r\n\t\t\t\t\t\treturn _.every(arrayOfAuths);\r\n\t\t\t\t\tdefault:\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t};\r\n\t}]);","\t\t/**\r\n\t\t * @ngdoc service\r\n\t\t * @constructor\r\n\t\t * @name WebCoreModule.service:WcCameraService\r\n\t\t * @requires $window\r\n\t\t * @requires $rootScope\r\n\t\t * @description\r\n\t\t * The WcCameraService service is used for taking pictures from user's camera for uploading the image to the application.\r\n\t\t *\r\n\t\t * To leverage the WcCameraService, create a new instance using 'new WcCameraService()' in calling code.\r\n\t\t * The WcCameraService constructor creates a new instance of the WcCameraService. This prototype\r\n\t\t * establishes the necessary properties and functions for taking pictures from camera.\r\n\t\t */\r\n\r\n'use strict';\r\nangular.module('WebCoreModule')\r\n\t.service('WcCameraService', ['$window', '$rootScope', 'WcImageFileService',\r\n\t\tfunction($window, $rootScope, WcImageFileService) {\r\n\t\t\tvar navigator = $window.navigator;\r\n\r\n\t\t\t//Events to ensure Webcam is disengaged when navigated away.\r\n\t\t\t$rootScope.$on('$stateChangeStart', angular.bind(this, function() {\r\n\t\t\t\tthis.stopCamera();\r\n\t\t\t}));\r\n\r\n\t\t\t$window.onbeforeunload = angular.bind(this, function() {\r\n\t\t\t\tthis.stopCamera();\r\n\t\t\t});\r\n\r\n            /**\r\n             * @ngdoc property\r\n             * @name WcCameraService.cameraIsOn\r\n             * @propertyOf WebCoreModule.service:WcCameraService\r\n             * @returns {Boolean} A boolean that tells whether the camera is on or off.\r\n             */\r\n            /**\r\n             * @ngdoc property\r\n             * @name WcCameraService.height\r\n             * @propertyOf WebCoreModule.service:WcCameraService\r\n             * @returns {Integer} An integer that is the height of the camera frame\r\n             */\r\n            /**\r\n             * @ngdoc property\r\n             * @name WcCameraService.width\r\n             * @propertyOf WebCoreModule.service:WcCameraService\r\n             * @returns {Integer} An integer that is the width of the camera frame\r\n             */\r\n\r\n\r\n\t\t\tthis.cameraIsOn = false;\r\n\t\t\tthis.height = 0;\r\n\t\t\tthis.width = 0;\r\n\r\n            /**\r\n             * @ngdoc method\r\n             * @name WcCameraService.setCameraSize\r\n             * @methodOf WebCoreModule.service:WcCameraService\r\n             * @param {Integer} x The width of the camera\r\n             * @param {Integer} y The height of the camera\r\n             * @description\r\n             * Takes in an x and y size for the camera and sets the height and width variables accordingly.\r\n             */\r\n\t\t\tthis.setCameraSize = function(x, y) {\r\n\t\t\t\tthis.height = y;\r\n\t\t\t\tthis.width = x;\r\n\t\t\t};\r\n\r\n\t\t\t// WebcamJS's solution for finding the correct getUserMedia function\r\n\t\t\t// https://github.com/jhuckaby/webcamjs/blob/master/webcam.js\r\n            /**\r\n             * @ngdoc property\r\n             * @name WcCameraService.mediaDevices\r\n             * @propertyOf WebCoreModule.service:WcCameraService\r\n             * @returns {Object} mediaDevices object describing the available media devices\r\n\t\t\t * @description\r\n\t\t\t * Adapted from WebcamJS https://github.com/jhuckaby/webcamjs/blob/master/webcam.js\r\n             */\r\n\t\t\tthis.mediaDevices = (navigator.mediaDevices && navigator.mediaDevices.getUserMedia) ?\r\n\t\t\t\tnavigator.mediaDevices : ((navigator.mozGetUserMedia || navigator.webkitGetUserMedia) ? {\r\n\t\t\t\tgetUserMedia: function(c) {\r\n\t\t\t\t\t// TODO use $q\r\n\t\t\t\t\treturn new Promise(function(y, n) {\r\n\t\t\t\t\t\t(navigator.mozGetUserMedia ||\r\n\t\t\t\t\t\tnavigator.webkitGetUserMedia).call(navigator, c, y, n);\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t} : null);\r\n\t\t\t//end webcamjs\r\n\r\n\t\t\t// Only for testing. We have yet to find out how to mock document.createElement without\r\n\t\t\t// blowing up angular-mock. We have a Stack Overflow question out there to hopefully\r\n\t\t\t// find an answer.\r\n\t\t\t//\r\n\t\t\t// TODO: try $document instead of document\r\n\t\t\t// http://stackoverflow.com/questions/35369629/using-jasmine-to-spy-on-document-createelement-throws-error-from-angular-mock\r\n\t\t\t//\r\n\t\t\tthis.generateVideo = function() {\r\n\t\t\t\treturn document.createElement('video');\r\n\t\t\t};\r\n\r\n\t\t\t// https://github.com/jhuckaby/webcamjs/blob/master/webcam.js\r\n            /**\r\n             * @ngdoc method\r\n             * @name WcCameraService.returnVideoElement\r\n             * @propertyOf WebCoreModule.service:WcCameraService\r\n             * @returns {Object} html video element\r\n             * @description\r\n             * Adapted from WebcamJS https://github.com/jhuckaby/webcamjs/blob/master/webcam.js\r\n             */\r\n\t\t\tthis.returnVideoElement = function() {\r\n\t\t\t\t// We don't use jQuery for the video element because you must call the play() function\r\n\t\t\t\t// on the actual HTML element, not a jquery object.\r\n\t\t\t\tthis.videoElement = this.generateVideo();\r\n\t\t\t\tthis.videoElement.setAttribute('autoplay', 'autoplay');\r\n\t\t\t\tthis.videoElement.style.width = '' + this.width + 'px';\r\n\t\t\t\tthis.videoElement.style.height = '' + this.height + 'px';\r\n\r\n\t\t\t\treturn this.mediaDevices.getUserMedia({\r\n\t\t\t\t\taudio: false,\r\n\t\t\t\t\tvideo: true\r\n\t\t\t\t}).then(angular.bind(this, function(stream) {\r\n\t\t\t\t\tthis.stream = stream;\r\n\t\t\t\t\tthis.videoElement.src = $window.URL.createObjectURL(stream);\r\n\r\n\t\t\t\t\treturn $(this.videoElement);\r\n\t\t\t\t})).catch(function(error) {\r\n\t\t\t\t\tconsole.error(error);\r\n\t\t\t\t});\r\n\t\t\t};\r\n\t\t\t//end webcamjs\r\n\r\n\t\t\t/**\r\n\t\t\t * @ngdoc method\r\n\t\t\t * @name WcCameraService.checkForCamera\r\n\t\t\t * @methodOf WebCoreModule.service:WcCameraService\r\n\t\t\t * @returns {Promise} The data retrieved from the backing service wrapped in a promise.\r\n\t\t\t * @description\r\n\t\t\t * The WcCameraService provides a checkForCamera function to check the availability of the user's camera.\r\n\t\t\t */\r\n\t\t\tthis.checkForCamera = function() {\r\n\t\t\t\treturn $window.navigator.mediaDevices.enumerateDevices()\r\n\t\t\t\t\t.then(function(devices) {\r\n\t\t\t\t\t\tdevices = devices.filter(function(device) {\r\n\t\t\t\t\t\t\treturn device.kind === 'videoinput';\r\n\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\treturn (devices.length > 0);\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.catch(function(err) {\r\n\t\t\t\t\t\tconsole.log(err.name + \": \" + err.message);\r\n\t\t\t\t\t});\r\n\t\t\t};\r\n\r\n\t\t\t/**\r\n\t\t\t * @ngdoc method\r\n\t\t\t * @name WcCameraService.takePicture\r\n\t\t\t * @methodOf WebCoreModule.service:WcCameraService\r\n\t\t\t * @returns {Object} The data retrieved from the backing service will be an image in jpeg format.\r\n\t\t\t * @description\r\n\t\t\t * The WcCameraService provides a takePicture function to take the picture from user's camera.\r\n\t\t\t */\r\n\r\n\t\t\tthis.takePicture = function() {\r\n\t\t\t\tvar canvas = WcImageFileService.generateCanvas();\r\n\t\t\t\tcanvas.width = this.width;\r\n\t\t\t\tcanvas.height = this.height;\r\n\r\n\t\t\t\tvar context = canvas.getContext('2d');\r\n\t\t\t\tcontext.drawImage(this.videoElement, 0, 0, this.width, this.height);\r\n\r\n\t\t\t\treturn canvas.toDataURL('image/jpeg', 100);\r\n\t\t\t};\r\n\r\n\t\t\t/**\r\n\t\t\t * @ngdoc method\r\n\t\t\t * @name WcCameraService.startCamera\r\n\t\t\t * @methodOf WebCoreModule.service:WcCameraService\r\n\t\t\t * @description\r\n\t\t\t * The WcCameraService provides an stopCamera function to start the camera.\r\n\t\t\t */\r\n\t\t\tthis.startCamera = function() {\r\n\t\t\t\tthis.videoElement.play();\r\n\t\t\t\tthis.cameraIsOn = true;\r\n\t\t\t};\r\n\r\n\t\t\t/**\r\n\t\t\t * @ngdoc method\r\n\t\t\t * @name WcCameraService.stopCamera\r\n\t\t\t * @methodOf WebCoreModule.service:WcCameraService\r\n\t\t\t * @description\r\n\t\t\t * The WcCameraService provides an stopCamera function to stop the camera.\r\n\t\t\t */\r\n\t\t\tthis.stopCamera = function() {\r\n\t\t\t\tif(this.cameraIsOn) {\r\n\t\t\t\t\t// https://github.com/jhuckaby/webcamjs/blob/master/webcam.js\r\n\t\t\t\t\tif (this.stream.getVideoTracks) {\r\n\t\t\t\t\t\t// get video track to call stop on it\r\n\t\t\t\t\t\tvar tracks = this.stream.getVideoTracks();\r\n\t\t\t\t\t\tif (tracks && tracks[0] && tracks[0].stop) {\r\n\t\t\t\t\t\t\ttracks[0].stop();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else if (this.stream.stop) {\r\n\t\t\t\t\t\t// deprecated, may be removed in future\r\n\t\t\t\t\t\tthis.stream.stop();\r\n\t\t\t\t\t}\r\n\t\t\t\t\t//end webcamjs\r\n\r\n\t\t\t\t\tthis.cameraIsOn = false;\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t}\r\n\t]);","\t\t/**\r\n\t\t * @ngdoc service\r\n\t\t * @name WebCoreModule.service:WcDataFileService\r\n\t\t * @requires $q\r\n\t\t * @requires $window\r\n\t\t * @description\r\n\t\t * The WcDataFileService manages the file related operations while uploading the file.\r\n\t\t */\r\n\r\n'use strict';\r\nangular.module('WebCoreModule')\r\n\t.service('WcDataFileService', ['$q', '$window', function($q, $window) {\r\n        /**\r\n         * @ngdoc method\r\n         * @name WcImageFileService.getFileType\r\n         * @methodOf WebCoreModule.service:WcDataFileService\r\n         * @param {Object} fileDef This object holds the file definition\r\n         * @returns {String} Returns a string with the file type only\r\n         * @description\r\n         * This method grabs the file type off of the file definition object\r\n         */\r\n\t\tthis.getFileType = function(fileDef) {\r\n\t\t\t//noinspection UnnecessaryLocalVariableJS\r\n            var fileType = fileDef.type.replace(/[a-z]+\\//, '');\r\n\t\t\treturn fileType;\r\n\t\t};\r\n\r\n\t\t/**\r\n\t\t * @ngdoc method\r\n\t\t * @name WcImageFileService.prepareForFileUpload\r\n\t\t * @methodOf WebCoreModule.service:WcDataFileService\r\n\t\t * @param {String} base64DataUri This string value holds the data uri\r\n\t\t * @returns {Object} The object value holds the file\r\n\t\t * @description\r\n\t\t * The WcImageFileService provides a prepareForFileUpload function to create a file  object from the provided url.\r\n\t\t */\r\n\r\n\t\tthis.prepareForFileUpload = function(base64DataUri) {\r\n\t\t\t//noinspection UnnecessaryLocalVariableJS\r\n            var fileObj = {\r\n\t\t\t\tMIMEType: base64DataUri.match(/^[^,]*,/, '')[0],\r\n\t\t\t\tbase64String: base64DataUri.replace(/^[^,]*,/, '')\r\n\t\t\t};\r\n\r\n\t\t\treturn fileObj;\r\n\t\t};\r\n\r\n\t\t/**\r\n\t\t * @ngdoc method\r\n\t\t * @name WcImageFileService.readFile\r\n\t\t * @methodOf WebCoreModule.service:WcDataFileService\r\n\t\t * @param {Object} fileDef This object value holds definition of the file.\r\n\t\t * @returns {Promise} Return dataURI as a promise\r\n\t\t * @description\r\n\t\t * The WcImageFileService provides a readFile function to read the uploaded file.\r\n\t\t */\r\n\r\n\t\tthis.readFile = function(fileDef) {\r\n\t\t\t// Return dataURI as a promise\r\n\t\t\t//https://gist.github.com/jollytoad/4201905\r\n\t\t\tvar deferred = $q.defer();\r\n\t\t\tvar reader = new $window.FileReader();\r\n\r\n\t\t\treader.onload = function(loadEvent){\r\n\t\t\t\tvar dataUri = loadEvent.target.result;\r\n\t\t\t\tdeferred.resolve(dataUri);\r\n\t\t\t};\r\n\r\n\t\t\treader.onerror = function(){\r\n\t\t\t\tdeferred.reject(fileDef);\r\n\t\t\t};\r\n\r\n\t\t\treader.readAsDataURL(fileDef);\r\n\r\n\t\t\treturn deferred.promise;\r\n\t\t};\r\n\t}]\r\n);","\t\t\t/**\r\n\t\t\t * @ngdoc service\r\n\t\t\t * @name WebCoreModule.service:WcHttpRequestService\r\n\t\t\t * @requires $rootScope\r\n\t\t\t * @requires $q\r\n\t\t\t * @requires $http\r\n\t\t\t * @requires $window\r\n\t\t\t * @requires $timeout\r\n\t\t\t * @requires $interpolate\r\n\t\t\t * @description\r\n\t\t\t * The WcHttpRequestService wraps Angular's $http service. The wrapper provides caching, interceptors and default config params\r\n\t\t\t * that apply app-wide to all requests. The service also provides wrappers for each of the http verbs, but these functions are\r\n\t\t\t * better used when interacted with via the WcHttpEndpointPrototype, so they will not be documented here.\r\n\t\t\t */\r\n'use strict';\r\nangular.module('WebCoreModule')\r\n\t.service('WcHttpRequestService', ['$rootScope', '$q', '$http', '$window', '$timeout', '$interpolate', 'WcAlertConsoleService',\r\n\t\tfunction($rootScope, $q, $http, $window, $timeout, $interpolate, WcAlertConsoleService) {\r\n\r\n            /**\r\n             * @ngdoc property\r\n             * @name WcHttpRequestService.configuration\r\n             * @propertyOf WebCoreModule.service:WcHttpRequestService\r\n             * @returns {Object} configuration object for Http Request with the following properties:\r\n\t\t\t *  - xsrfCookieName {String}\r\n\t\t\t *  - withCredentials {Boolean}\r\n\t\t\t *  - headers {Object}\r\n\t\t\t *  - baseUrl {String}\r\n\t\t\t *  - cache {Boolean}\r\n             *  - pingTrustPeriodMS {Integer}\r\n             *  - unAuthenticatedCallback {Function}\r\n\t\t\t *  - unprotectedPingRoute {String}\r\n\t\t\t *  - queuedRequestMessages {Object}\r\n             */\r\n\t\t\tthis.configuration = {\r\n\t\t\t\txsrfCookieName: 'WSL-credential',\r\n\t\t\t\twithCredentials: true,\r\n\t\t\t\theaders: {},\r\n\t\t\t\ttimeout: 10000,\r\n\t\t\t\tbaseUrl: '',\r\n\t\t\t\tcache: false,\r\n\t\t\t\tpingTrustPeriodMS: 1000,\r\n\t\t\t\tunAuthenticatedCallback: function() {\r\n\t\t\t\t},\r\n\t\t\t\tunprotectedPingRoute: 'unprotected/ping',\r\n\t\t\t\tqueuedRequestMessages: {}\r\n\t\t\t};\r\n\r\n\t\t\t/**\r\n\t\t\t * @ngdoc method\r\n\t\t\t * @name WcHttpRequestService.configureDefaults\r\n\t\t\t * @methodOf WebCoreModule.service:WcHttpRequestService\r\n\t\t\t * @param {Object} config Options object to configure default values used by the WcHttpRequestService. Config properties that can be set in this object include:\r\n\t\t\t *  - baseUrl: String value identifying the base url to build requests from (e.g., wwwdev.jab.ford.com/Jab7Web/api). Defaults to ''\r\n\t\t\t *  - xsrfCookieName: String value used to identify a cookie that should always be sent. Defaults to 'WSL-credential'.\r\n\t\t\t *  - withCredentials: Boolean value for whether or not credentials should be sent on requests. Defaults to true.\r\n\t\t\t *  - headers: Object containing headers to send on each request. Defaults to {}.\r\n\t\t\t *  - timeout: Integer to identify how long to wait, in MS, before timing out a connection attempt. Defaults to 10000ms.\r\n\t\t\t *  - cache: Boolean to determine app-wide caching. Defaults to false, and typically should not be changed.\r\n\t\t\t *  - pingTrustPeriodMS: Integer to identify a trust period when calling an endpoint to check connectivity. Defaults to 1000ms, and typically doesn't need to be changed.\r\n\t\t\t *  - unAuthenticatedCallback: Function to be called when the service determines it has lost authentication.\r\n\t\t\t *  - unprotectedPingRoute: String value identifying the route to use for the unprotected ping request\r\n\t\t\t * @description\r\n\t\t\t * The WcHttpRequestService configures itself with application-wide defaults when it starts up. The configureDefaults function allows\r\n\t\t\t * you to override those defaults at the app level, so that the new parameters will apply to any request made via the service.\r\n\t\t\t */\r\n\t\t\tthis.configureDefaults = function(config) {\r\n\t\t\t\tangular.extend(this.configuration, config);\r\n\t\t\t};\r\n\r\n            /**\r\n             * @ngdoc method\r\n             * @name WcHttpRequestService.requestConfigurationMapper\r\n             * @methodOf WebCoreModule.service:WcHttpRequestService\r\n             * @param {Object} config Options object to configure values used by the WcHttpRequestService. Config properties that can be set in this object include:\r\n             *  - baseUrl: String value identifying the base url to build requests from (e.g., wwwdev.jab.ford.com/Jab7Web/api). Defaults to ''\r\n             *  - xsrfCookieName: String value used to identify a cookie that should always be sent. Defaults to 'WSL-credential'.\r\n             *  - withCredentials: Boolean value for whether or not credentials should be sent on requests. Defaults to true.\r\n             *  - headers: Object containing headers to send on each request. Defaults to {}.\r\n             *  - timeout: Integer to identify how long to wait, in MS, before timing out a connection attempt. Defaults to 10000ms.\r\n             *  - cache: Boolean to determine app-wide caching. Defaults to false, and typically should not be changed.\r\n             *  - pingTrustPeriodMS: Integer to identify a trust period when calling an endpoint to check connectivity. Defaults to 1000ms, and typically doesn't need to be changed.\r\n             *  - unAuthenticatedCallback: Function to be called when the service determines it has lost authentication.\r\n             *  - unprotectedPingRoute: String value identifying the route to use for the unprotected ping request\r\n\t\t\t * @return {Object} httpConfig object that is a subset of the parameters passed in from 'config'\r\n             * @description\r\n             * Takes the configuration from this service, copies it, deletes baseURL, pingTrustPeriodMS, unAuthenticatedCallback, unprotectedPingRoute and queuedRequestMessages\r\n\t\t\t * and then extends this new config object to the object that was passed and and then deletes the cache object. Returns the stripped-down copy of the config object to be used for\r\n\t\t\t * a call to $http.get\r\n             */\r\n\t\t\tthis.requestConfigurationMapper = function(config) {\r\n\t\t\t\tvar httpConfig = angular.copy(this.configuration);\r\n\t\t\t\tdelete httpConfig.baseUrl;\r\n\t\t\t\tdelete httpConfig.pingTrustPeriodMS;\r\n\t\t\t\tdelete httpConfig.unAuthenticatedCallback;\r\n\t\t\t\tdelete httpConfig.unprotectedPingRoute;\r\n\t\t\t\tdelete httpConfig.queuedRequestMessages;\r\n\r\n\t\t\t\tangular.extend(httpConfig, config);\r\n\r\n\t\t\t\tdelete httpConfig.cache;\r\n\r\n\t\t\t\treturn httpConfig;\r\n\t\t\t};\r\n\r\n            /**\r\n             * @ngdoc method\r\n             * @name WcHttpRequestService.requestConfigurationMapper\r\n             * @methodOf WebCoreModule.service:WcHttpRequestService\r\n             * @param {String} url This parameter is the url that needs to contain the correct protocol.\r\n             * @return {String} new url string including the protocol if the protocol was not already there\r\n             * @description\r\n             * Takes the url string passed in and prefixes with the protocol if it is not already there and then returns this new string.\r\n             */\r\n\t\t\tthis.urlBuilder = function(url) {\r\n\t\t\t\t// if we detect that the url contains a protocol from the endpoint, it's already a full url\r\n\t\t\t\tif(url.indexOf('http://') > -1 || url.indexOf('https://') > -1) {\r\n\t\t\t\t\treturn url;\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn this.configuration.baseUrl + url;\r\n\t\t\t\t}\r\n\t\t\t};\r\n\r\n            /**\r\n             * @ngdoc method\r\n             * @name WcHttpRequestService.get\r\n             * @methodOf WebCoreModule.service:WcHttpRequestService\r\n             * @param {String} url This string is the url that is being requested, not necessarily with the correct protocol. This will be added by this.urlBuilder if needed.\r\n             * @param {Object} config This parameter is the configuration settings for this request, in the format shown in this.configuration\r\n             * @return {Promise} returns a promise object that is either for data from the cache if caching is enabled or from the server.\r\n             * @description\r\n             * Parses through the configurations to use for caching. If the data is available in the cache, it returns a promise for the cached data in local or session storage.\r\n\t\t\t * Otherwise it sets up an $http.get() to grab the data from the server.\r\n             */\r\n\t\t\tthis.get = function(url, config) {\r\n\t\t\t\tvar interceptedParams = this.triggerRequestInterceptors(url, null, config);\r\n\t\t\t\turl = interceptedParams.url;\r\n\t\t\t\tconfig = interceptedParams.config;\r\n\r\n\t\t\t\t//if params are passed in, they go on the url only after hitting $http. we need them sooner for cache storage purposes\r\n\t\t\t\tvar parseParams = function(params){\r\n\t\t\t\t\tvar retString = '/';\r\n\t\t\t\t\tObject.keys(params).forEach(function(key){\r\n\t\t\t\t\t\tif(retString === '/') {\r\n\t\t\t\t\t\t\tretString = retString + key + ':' + params[key];\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse {\r\n\t\t\t\t\t\t\tretString = retString + '-' + key + ':' + params[key];\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t\treturn retString;\r\n\t\t\t\t};\r\n\t\t\t\tvar urlForCache = url;\r\n\t\t\t\tif(config && config.params) {\r\n\t\t\t\t\turlForCache = url + parseParams(config.params);\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// if cache is enabled, should we attempt to use cached data or refresh from the server?\r\n\t\t\t\t// set alwaysRefresh to never use cache unless offline\r\n\t\t\t\t// set forceRefresh to true to override default behavior and request from the server on demand\r\n\t\t\t\tif(config && config.cache && !config.alwaysRefresh && !config.forceRefresh) {\r\n\t\t\t\t\tvar cachedData;\r\n\t\t\t\t\tif(config.cache === 'localStorage') {\r\n\t\t\t\t\t\tcachedData = {data: this.getFromLocalStorage(urlForCache)};\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse if(config.cache === 'sessionStorage') {\r\n\t\t\t\t\t\tcachedData = this.getFromSessionStorage(urlForCache);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif(cachedData && cachedData.data) {\r\n\t\t\t\t\t\treturn $q.when(cachedData);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn $http.get(this.urlBuilder(url), this.requestConfigurationMapper(config)).then(angular.bind(this, function(response) {\r\n\t\t\t\t\t$rootScope.$broadcast('Online');\r\n\t\t\t\t\tresponse = this.triggerResponseInterceptors(response);\r\n\r\n\t\t\t\t\tif(config) {\r\n\t\t\t\t\t\tif(config.cache === 'localStorage') {\r\n\t\t\t\t\t\t\tthis.storeInLocalStorage(urlForCache, response.data);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse if(config.cache === 'sessionStorage') {\r\n\t\t\t\t\t\t\tthis.storeInSessionStorage(urlForCache, response.data);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn {data: response.data, status: response.status};\r\n\t\t\t\t}), angular.bind(this, function(error) {\r\n\r\n\t\t\t\t\tthis.triggerErrorInterceptors(error);\r\n\r\n\t\t\t\t\t//we got to the server, but it errored out. since we know the server is available, return the error object and let the app decide what to do.\r\n\t\t\t\t\tif(error.status > 0) {\r\n\t\t\t\t\t\treturn $q.reject(error);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\treturn this.getNetworkState().then(angular.bind(this, function(state) {\r\n\t\t\t\t\t\tif(state === 'offline' && config) {\r\n\t\t\t\t\t\t\tvar cachedData;\r\n\t\t\t\t\t\t\tif(config.cache === 'localStorage') {\r\n\t\t\t\t\t\t\t\tcachedData = {data: this.getFromLocalStorage(urlForCache)};\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\telse if(config.cache === 'sessionStorage') {\r\n\t\t\t\t\t\t\t\tcachedData = this.getFromSessionStorage(urlForCache);\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tif(!cachedData || !cachedData.data) {\r\n\t\t\t\t\t\t\t\treturn $q.reject('Offline: No cached data available!');\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\telse {\r\n\t\t\t\t\t\t\t\treturn $q.when(cachedData).finally(function() {\r\n\t\t\t\t\t\t\t\t\t// we are not rejecting the promise but are still operating 'offline'\r\n\t\t\t\t\t\t\t\t\t$timeout(function() {\r\n\t\t\t\t\t\t\t\t\t\t$rootScope.$broadcast('Offline');\r\n\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse {\r\n\t\t\t\t\t\t\treturn $q.reject(error);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}));\r\n\t\t\t\t}));\r\n\t\t\t};\r\n\r\n\r\n            /**\r\n             * @ngdoc method\r\n             * @name WcHttpRequestService.post\r\n             * @methodOf WebCoreModule.service:WcHttpRequestService\r\n             * @param {String} url This string is the url that is being requested, not necessarily with the correct protocol. This will be added by this.urlBuilder if needed.\r\n             * @param {Object} data an object containing the data to attempt to be posted to the server\r\n             * @param {Object} config This parameter is the configuration settings for this request, in the format shown in this.configuration\r\n             * @return {Promise} A promise object containing the response from the $http.post()\r\n             * @description\r\n             * Using the data and configuration object passed in call $http.post() and return the response\r\n             */\r\n\t\t\tthis.post = function(url, data, config) {\r\n\t\t\t\tvar interceptedParams = this.triggerRequestInterceptors(url, data, config);\r\n\t\t\t\turl = interceptedParams.url;\r\n\t\t\t\tdata = interceptedParams.data;\r\n\t\t\t\tconfig = interceptedParams.config;\r\n\r\n\t\t\t\treturn $http.post(this.urlBuilder(url), data, this.requestConfigurationMapper(config)).then(angular.bind(this, function(response) {\r\n\t\t\t\t\t$rootScope.$broadcast('Online');\r\n\t\t\t\t\tresponse = this.triggerResponseInterceptors(response);\r\n\t\t\t\t\treturn {data: response.data, status: response.status};\r\n\t\t\t\t}), angular.bind(this, function(error) {\r\n\t\t\t\t\tthis.triggerErrorInterceptors(error);\r\n\t\t\t\t\t//only queue for unrecoverable errors\r\n\t\t\t\t\tif(error.status <= 0 && (config && config.offline === 'queue' && !config.fromQueue)) {\r\n\t\t\t\t\t\tthis.queueRequest('post', url, data, config);\r\n\t\t\t\t\t\t//if we queue, return a success promise resolution\r\n\t\t\t\t\t\terror.status = 'queue';\r\n\t\t\t\t\t\treturn $q.when(error);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\t//and if we don't, make it an error\r\n\t\t\t\t\t\treturn $q.reject(error);\r\n\t\t\t\t\t}\r\n\t\t\t\t}));\r\n\t\t\t};\r\n\r\n            /**\r\n             * @ngdoc method\r\n             * @name WcHttpRequestService.put\r\n             * @methodOf WebCoreModule.service:WcHttpRequestService\r\n             * @param {String} url This string is the url that is being requested, not necessarily with the correct protocol. This will be added by this.urlBuilder if needed.\r\n             * @param {Object} data an object containing the data to attempt to be put to the server\r\n             * @param {Object} config This parameter is the configuration settings for this request, in the format shown in this.configuration\r\n             * @return {Promise} A promise object containing the response from the $http.put()\r\n             * @description\r\n             * Using the data and configuration object passed in call $http.put() and return the response\r\n             */\r\n\t\t\tthis.put = function(url, data, config) {\r\n\t\t\t\tvar interceptedParams = this.triggerRequestInterceptors(url, data, config);\r\n\t\t\t\turl = interceptedParams.url;\r\n\t\t\t\tdata = interceptedParams.data;\r\n\t\t\t\tconfig = interceptedParams.config;\r\n\r\n\t\t\t\treturn $http.put(this.urlBuilder(url), data, this.requestConfigurationMapper(config)).then(angular.bind(this, function(response) {\r\n\t\t\t\t\t$rootScope.$broadcast('Online');\r\n\t\t\t\t\tresponse = this.triggerResponseInterceptors(response);\r\n\t\t\t\t\treturn {data: response.data, status: response.status};\r\n\t\t\t\t}), angular.bind(this, function(error) {\r\n\t\t\t\t\tthis.triggerErrorInterceptors(error);\r\n\t\t\t\t\t//only queue for unrecoverable errors\r\n\t\t\t\t\tif(error.status <= 0 && (config && config.offline === 'queue' && !config.fromQueue)) {\r\n\t\t\t\t\t\tthis.queueRequest('put', url, data, config);\r\n\t\t\t\t\t\t//if we queue, return a success promise resolution\r\n\t\t\t\t\t\terror.status = 'queue';\r\n\t\t\t\t\t\treturn $q.when(error);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\t//and if we don't, make it an error\r\n\t\t\t\t\t\treturn $q.reject(error);\r\n\t\t\t\t\t}\r\n\t\t\t\t}));\r\n\t\t\t};\r\n\r\n            /**\r\n             * @ngdoc method\r\n             * @name WcHttpRequestService.delete\r\n             * @methodOf WebCoreModule.service:WcHttpRequestService\r\n             * @param {String} url This string is the url that is being requested, not necessarily with the correct protocol. This will be added by this.urlBuilder if needed.\r\n             * @param {Object} config This parameter is the configuration settings for this request, in the format shown in this.configuration\r\n             * @return {Promise} A promise object containing the response from the $http.delete()\r\n             * @description\r\n             * Using the data and configuration object passed in call $http.delete() and return the response\r\n             */\r\n\t\t\tthis.delete = function(url, config) {\r\n\t\t\t\tvar interceptedParams = this.triggerRequestInterceptors(url, null, config);\r\n\t\t\t\turl = interceptedParams.url;\r\n\t\t\t\tconfig = interceptedParams.config;\r\n\r\n\t\t\t\treturn $http.delete(this.urlBuilder(url), this.requestConfigurationMapper(config)).then(angular.bind(this, function(response) {\r\n\t\t\t\t\t$rootScope.$broadcast('Online');\r\n\t\t\t\t\tresponse = this.triggerResponseInterceptors(response);\r\n\t\t\t\t\treturn {data: response.data, status: response.status};\r\n\t\t\t\t}), angular.bind(this, function(error) {\r\n\t\t\t\t\tthis.triggerErrorInterceptors(error);\r\n\t\t\t\t\t//only queue for unrecoverable errors\r\n\t\t\t\t\tif(error.status <= 0 && (config && config.offline === 'queue' && !config.fromQueue)) {\r\n\t\t\t\t\t\tthis.queueRequest('delete', url, undefined, config);\r\n\t\t\t\t\t\t//if we queue, return a success promise resolution\r\n\t\t\t\t\t\terror.status = 'queue';\r\n\t\t\t\t\t\treturn $q.when(error);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\t//and if we don't, make it an error\r\n\t\t\t\t\t\treturn $q.reject(error);\r\n\t\t\t\t\t}\r\n\t\t\t\t}));\r\n\t\t\t};\r\n\r\n            /**\r\n             * @ngdoc method\r\n             * @name WcHttpRequestService.getFromLocalStorage\r\n             * @methodOf WebCoreModule.service:WcHttpRequestService\r\n             * @param {String} key This string is the key for the data being requested.\r\n             * @return {Object} The value stored at the key passed into the function. If not found this will be null.\r\n             * @description\r\n             * This method tries to find the value stored in localStorage at the key passed in. If it is found it returns a deserialized json object, otherwise it returns null.\r\n             */\r\n\t\t\tthis.getFromLocalStorage = function(key) {\r\n\t\t\t\tvar cachedData = $window.localStorage.getItem(key);\r\n\r\n\t\t\t\ttry {\r\n\t\t\t\t\tcachedData = angular.fromJson(cachedData);\r\n\t\t\t\t}\r\n\t\t\t\tfinally {\r\n\t\t\t\t\t//noinspection ReturnInsideFinallyBlockJS\r\n                    return cachedData;\r\n\t\t\t\t}\r\n\t\t\t};\r\n\r\n            /**\r\n             * @ngdoc method\r\n             * @name WcHttpRequestService.getFromSessionStorage\r\n             * @methodOf WebCoreModule.service:WcHttpRequestService\r\n             * @param {String} key This string is the key for the data being requested.\r\n             * @return {Object} The value stored at the key passed into the function. If not found this will be null.\r\n             * @description\r\n             * This method tries to find the value stored in sessionStorage at the key passed in. If it is found it returns a\r\n\t\t\t * deserialized json object wrapped in an object property 'data', otherwise it returns null.\r\n             */\r\n\t\t\tthis.getFromSessionStorage = function(key) {\r\n\t\t\t\tvar cachedData = $window.sessionStorage.getItem(key);\r\n\r\n\t\t\t\ttry {\r\n\t\t\t\t\tcachedData = angular.fromJson(cachedData);\r\n\t\t\t\t}\r\n\t\t\t\tfinally {\r\n\t\t\t\t\t//noinspection ReturnInsideFinallyBlockJS\r\n                    return !cachedData ? cachedData : {data: cachedData};\r\n\t\t\t\t}\r\n\t\t\t};\r\n\r\n            /**\r\n             * @ngdoc method\r\n             * @name WcHttpRequestService.storeInLocalStorage\r\n             * @methodOf WebCoreModule.service:WcHttpRequestService\r\n             * @param {String} key This string is the key for the data being stored.\r\n\t\t\t * @param {Object} value The value to be stored at the key passed into the function.\r\n             * @description\r\n             * If the value to be stored is not a string, first converts to JSON. Stores value in session storage at the key specified in the parameters\r\n             */\r\n\t\t\tthis.storeInLocalStorage = function(key, value) {\r\n\t\t\t\tif(!angular.isString(value)) {\r\n\t\t\t\t\tvalue = angular.toJson(value);\r\n\t\t\t\t}\r\n\t\t\t\t$window.localStorage.setItem(key, value);\r\n\t\t\t};\r\n\r\n            /**\r\n             * @ngdoc method\r\n             * @name WcHttpRequestService.storeInSessionStorage\r\n             * @methodOf WebCoreModule.service:WcHttpRequestService\r\n             * @param {String} key This string is the key for the data being stored.\r\n             * @param {Object} value The value to be stored at the key passed into the function.\r\n             * @description\r\n             * If the value to be stored is not a string, first converts to JSON. Stores value in local storage at the key specified in the parameters\r\n             */\r\n\t\t\tthis.storeInSessionStorage = function(key, value) {\r\n\t\t\t\tif(!angular.isString(value)) {\r\n\t\t\t\t\tvalue = angular.toJson(value);\r\n\t\t\t\t}\r\n\t\t\t\t$window.sessionStorage.setItem(key, value);\r\n\t\t\t};\r\n\r\n            /**\r\n             * @ngdoc method\r\n             * @name WcHttpRequestService.removeFromLocalStorage\r\n             * @methodOf WebCoreModule.service:WcHttpRequestService\r\n             * @param {String} key This string is the key for the data being removed.\r\n             * @description\r\n             * Removes the data from local storage stored at the key specified in the 'key' parameter\r\n             */\r\n\t\t\tthis.removeFromLocalStorage = function(key) {\r\n\t\t\t\t$window.localStorage.removeItem(key);\r\n\t\t\t};\r\n\r\n            /**\r\n             * @ngdoc method\r\n             * @name WcHttpRequestService.removeFromSessionStorage\r\n             * @methodOf WebCoreModule.service:WcHttpRequestService\r\n             * @param {String} key This string is the key for the data being removed.\r\n             * @description\r\n             * Removes the data from session storage stored at the key specified in the 'key' parameter\r\n             */\r\n\t\t\tthis.removeFromSessionStorage = function(key) {\r\n\t\t\t\t$window.sessionStorage.removeItem(key);\r\n\t\t\t};\r\n\r\n            /**\r\n             * @ngdoc method\r\n             * @name WcHttpRequestService.addMessageForQueuedRequest\r\n             * @methodOf WebCoreModule.service:WcHttpRequestService\r\n             * @param {String} verb This string is the type of request that is queued\r\n             * @param {String} url This string is the url to which the request is being made\r\n             * @param {Object} data This object is the data of the request that is queued\r\n             * @param {Object} config This object is the configuration object of the request that is queued.\r\n             * @param {Promise} response This promise object is the response received from $http function\r\n             * @description\r\n             * This method sets up a message based on the parameters passed in and then add this message to the WcAlertConsole.\r\n\t\t\t *  - response status is 200: success message\r\n\t\t\t *  - response status is 409: failure due to conflict message\r\n\t\t\t *  - response status is 500: failure due to server error message\r\n             *  - Otherwise, message is taken from the queued request messages in the config parameter based on the verb and url\r\n             */\r\n\t\t\tthis.addMessageForQueuedRequest = function(verb, url, data, config, response){\r\n\t\t\t\t//set up default messages\r\n\t\t\t\tvar message, type;\r\n\t\t\t\tif(response.status === 200) {\r\n\t\t\t\t\tmessage = 'Queued request submitted successfully: ' + verb + ' to endpoint ' + url + ', status: ' + response.status;\r\n\t\t\t\t\ttype = 'success';\r\n\t\t\t\t}\r\n\t\t\t\telse if(response.status === 409) {\r\n\t\t\t\t\tmessage = 'Queued request failed to be submitted due to a conflict: ' + verb + ' to endpoint ' + url + ', status: ' + response.status;\r\n\t\t\t\t\ttype = 'danger';\r\n\t\t\t\t}\r\n\t\t\t\telse if(response.status === 500) {\r\n\t\t\t\t\tmessage = 'Queued request failed to be submitted due to a server error: ' + verb + ' to endpoint ' + url + ', status: ' + response.status;\r\n\t\t\t\t\ttype = 'danger';\r\n\t\t\t\t}\r\n\r\n\t\t\t\t//ensure a message object has been passed in\r\n\t\t\t\tif(this.configuration.queuedRequestMessages && Object.keys(this.configuration.queuedRequestMessages).length !== 0) {\r\n\t\t\t\t\t//if we can't match our url identically, we likely are dealing with a put or delete with an id on the url\r\n\t\t\t\t\tvar messageExp;\r\n\t\t\t\t\tif(!this.configuration.queuedRequestMessages[verb][url]) {\r\n\t\t\t\t\t\tif(this.configuration.queuedRequestMessages[verb][url.substring(0, url.lastIndexOf('/'))][response.status]) {\r\n\t\t\t\t\t\t\tmessage = this.configuration.queuedRequestMessages[verb][url.substring(0, url.lastIndexOf('/'))][response.status];\r\n\t\t\t\t\t\t\tmessageExp = $interpolate(message);\r\n\t\t\t\t\t\t\tmessage = messageExp({verb: verb, url: url, data: data, config: config, response: response});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse {\r\n\t\t\t\t\t\tif(this.configuration.queuedRequestMessages[verb][url][response.status]) {\r\n\t\t\t\t\t\t\tmessage = this.configuration.queuedRequestMessages[verb][url][response.status];\r\n\t\t\t\t\t\t\tmessageExp = $interpolate(message);\r\n\t\t\t\t\t\t\tmessage = messageExp({verb: verb, url: url, data: data, config: config, response: response});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\t//add the message\r\n\t\t\t\tWcAlertConsoleService.addMessage({\r\n\t\t\t\t\tmessage: message,\r\n\t\t\t\t\ttype: type,\r\n\t\t\t\t\tmultiple: false,\r\n\t\t\t\t\terrorOnStateChange: false,\r\n\t\t\t\t\ttimeout: 20\r\n\t\t\t\t});\r\n\t\t\t};\r\n\r\n            /**\r\n             * @ngdoc method\r\n             * @name WcHttpRequestService.removeFromSessionStorage\r\n             * @methodOf WebCoreModule.service:WcHttpRequestService\r\n             * @param {Function} deregisterListener the function for deregistering the listener for the current queue\r\n             * @description\r\n             * Grabs and removes the offline queue from local storage, deregisters the listener for the queue and iterates through and attempts to process\r\n\t\t\t * the requests in the queue.\r\n             */\r\n\t\t\tthis.processOfflineQueue = function(deregisterListener) {\r\n\t\t\t\t//retrieve the current queue then clear it and the associated listener so it won't be triggered again.\r\n\t\t\t\t//remember that each attempted request could add itself back to the queue if it fails\r\n\t\t\t\tvar currentQueue = this.getFromLocalStorage('offlineQueue');\r\n\t\t\t\tthis.removeFromLocalStorage('offlineQueue');\r\n\t\t\t\tderegisterListener();\r\n\r\n\t\t\t\tvar item = currentQueue.shift();\r\n\t\t\t\twhile(item) {\r\n\t\t\t\t\titem.config.fromQueue = true;\r\n\t\t\t\t\tvar requestPromise;\r\n\t\t\t\t\tif(item.verb === 'delete') {\r\n\t\t\t\t\t\trequestPromise = this.delete(item.url, item.config);\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse {\r\n\t\t\t\t\t\trequestPromise = this[item.verb](item.url, item.data, item.config);\r\n\t\t\t\t\t}\r\n\t\t\t\t\t//handler for both the success and error cases\r\n\t\t\t\t\tvar handler = angular.bind(this, function(item, response) {\r\n\t\t\t\t\t\tthis.addMessageForQueuedRequest(item.verb, item.url, item.data, item.config, response);\r\n\t\t\t\t\t}, item);\r\n\t\t\t\t\t//chain to add messages, as the verb functions themselves don't add them\r\n\t\t\t\t\trequestPromise.then(handler, handler);\r\n\t\t\t\t\titem = currentQueue.shift();\r\n\t\t\t\t}\r\n\t\t\t};\r\n\r\n            /**\r\n             * @ngdoc method\r\n             * @name WcHttpRequestService.setupQueueTrigger\r\n             * @methodOf WebCoreModule.service:WcHttpRequestService\r\n             * @description\r\n             * Sets up a listener for when the application is online and when it is triggered it calls the processing of the offline queue.\r\n             */\r\n\t\t\tthis.setupQueueTrigger = function(){\r\n\t\t\t\tvar deregisterListener = $rootScope.$on('Online', angular.bind(this, function() {\r\n\t\t\t\t\tthis.processOfflineQueue(deregisterListener);\r\n\t\t\t\t}));\r\n\t\t\t};\r\n\r\n            /**\r\n             * @ngdoc method\r\n             * @name WcHttpRequestService.queueRequest\r\n             * @methodOf WebCoreModule.service:WcHttpRequestService\r\n             * @param {String} verb This string is the type of request that is to be queued\r\n             * @param {String} url This string is the url to which the request is being made\r\n             * @param {data} data This is the data for the request being queued\r\n             * @param {Object} config This object is the configuration object for the request being queued\r\n             * @description\r\n             * Adds the request described with the parameters to the queue via push, or creates a new queue for the local storage if the queue is empty.\r\n             */\r\n\t\t\tthis.queueRequest = function(verb, url, data, config){\r\n\t\t\t\tvar currentQueue = this.getFromLocalStorage('offlineQueue');\r\n\t\t\t\tif(!currentQueue) {\r\n\t\t\t\t\tthis.storeInLocalStorage('offlineQueue', [{verb: verb, url: url, data: data, config: config}]);\r\n\t\t\t\t\tthis.setupQueueTrigger();\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\tcurrentQueue.push({verb: verb, url: url, data: data, config: config});\r\n\t\t\t\t\tthis.storeInLocalStorage('offlineQueue', currentQueue);\r\n\t\t\t\t}\r\n\t\t\t};\r\n\r\n\t\t\t//need to do this when the service is created to establish the queue processing trigger\r\n\t\t\tif(this.getFromLocalStorage('offlineQueue')) {\r\n\t\t\t\tthis.setupQueueTrigger();\r\n\t\t\t}\r\n\r\n            /**\r\n             * @ngdoc property\r\n             * @name WcHttpRequestService.requestInterceptors\r\n             * @propertyOf WebCoreModule.service:WcHttpRequestService\r\n             * @returns {Array} An array of interceptor functions\r\n             */\r\n            /**\r\n             * @ngdoc property\r\n             * @name WcHttpRequestService.responseInterceptors\r\n             * @propertyOf WebCoreModule.service:WcHttpRequestService\r\n             * @returns {Array} An array of interceptor functions\r\n\t\t\t */\r\n            /**\r\n             * @ngdoc property\r\n             * @name WcHttpRequestService.errorInterceptors\r\n             * @propertyOf WebCoreModule.service:WcHttpRequestService\r\n             * @returns {Array} An array of interceptor functions\r\n             */\r\n\r\n\t\t\tthis.requestInterceptors = [];\r\n\t\t\tthis.responseInterceptors = [];\r\n\t\t\tthis.errorInterceptors = [];\r\n\r\n\t\t\t/**\r\n\t\t\t * @ngdoc method\r\n\t\t\t * @name WcHttpRequestService.addRequestInterceptor\r\n\t\t\t * @methodOf WebCoreModule.service:WcHttpRequestService\r\n\t\t\t * @param {Function} interceptor A function to trigger before requests are sent.\r\n\t\t\t * @description\r\n\t\t\t * The WcHttpRequestService allows you to include callback interceptor functions before a request is sent. These\r\n\t\t\t * custom functions can adjust the request before it is sent to the server. Once attached, the service will always\r\n\t\t\t * trigger all request interceptors before triggering the request itself.\r\n\t\t\t */\r\n\t\t\tthis.addRequestInterceptor = function(interceptor) {\r\n\t\t\t\tthis.requestInterceptors.push(interceptor);\r\n\t\t\t};\r\n\r\n            /**\r\n             * @ngdoc method\r\n             * @name WcHttpRequestService.triggerRequestInterceptors\r\n             * @methodOf WebCoreModule.service:WcHttpRequestService\r\n             * @param {String} url This string is the url being requested\r\n             * @param {data} data This is the data for the request\r\n             * @param {Object} config This object is the configuration object for the request\r\n             * @description\r\n             * This method triggers all of the response functions in the request interceptor array using the url, data and config parameters passed into this method\r\n             */\r\n\t\t\tthis.triggerRequestInterceptors = function(url, data, config) {\r\n\t\t\t\tvar index = 0;\r\n\t\t\t\twhile(index < this.requestInterceptors.length) {\r\n\t\t\t\t\tvar newParms = this.requestInterceptors[index](url, data, config);\r\n\t\t\t\t\tif(newParms) {\r\n\t\t\t\t\t\tif(newParms.url) url = newParms.url;\r\n\t\t\t\t\t\tif(newParms.data) data = newParms.data;\r\n\t\t\t\t\t\tif(newParms.config) config = newParms.config;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tindex++;\r\n\t\t\t\t}\r\n\t\t\t\treturn {url: url, data: data, config: config};\r\n\t\t\t};\r\n\r\n\t\t\t/**\r\n\t\t\t * @ngdoc method\r\n\t\t\t * @name WcHttpRequestService.addResponseInterceptor\r\n\t\t\t * @methodOf WebCoreModule.service:WcHttpRequestService\r\n\t\t\t * @param {Function} interceptor A function to trigger before responses are processed and returned.\r\n\t\t\t * @description\r\n\t\t\t * The WcHttpRequestService allows you to include callback interceptor functions after a service response is received\r\n\t\t\t * and before the returned data is given to the application code. These custom functions can adjust the response data or\r\n\t\t\t * trigger behaviors before the data is given to the application. Once attached, the service will always trigger all response\r\n\t\t\t * interceptors before returning the data and the control flow back to the application.\r\n\t\t\t */\r\n\t\t\tthis.addResponseInterceptor = function(interceptor) {\r\n\t\t\t\tthis.responseInterceptors.push(interceptor);\r\n\t\t\t};\r\n\r\n            /**\r\n             * @ngdoc method\r\n             * @name WcHttpRequestService.triggerResponseInterceptors\r\n             * @methodOf WebCoreModule.service:WcHttpRequestService\r\n             * @param {Object} response This object is what will be passed to the response interceptor functions to be triggered\r\n             * @description\r\n             * This method triggers all of the response functions in the response interceptor array\r\n             */\r\n\t\t\tthis.triggerResponseInterceptors = function(response) {\r\n\t\t\t\tvar index = 0;\r\n\t\t\t\twhile(index < this.responseInterceptors.length) {\r\n\t\t\t\t\tvar newResponse = this.responseInterceptors[index](response);\r\n\t\t\t\t\tif(newResponse) {\r\n\t\t\t\t\t\tresponse = newResponse;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tindex++;\r\n\t\t\t\t}\r\n\t\t\t\treturn response;\r\n\t\t\t};\r\n\r\n\t\t\t/**\r\n\t\t\t * @ngdoc method\r\n\t\t\t * @name WcHttpRequestService.addErrorInterceptor\r\n\t\t\t * @methodOf WebCoreModule.service:WcHttpRequestService\r\n\t\t\t * @param {Function} interceptor A function to trigger before error responses are processed and returned.\r\n\t\t\t * @description\r\n\t\t\t * The WcHttpRequestService allows you to include callback interceptor functions after an erroneous service response is received\r\n\t\t\t * and before the error is given to the application code. These custom functions can adjust for the error or\r\n\t\t\t * trigger behaviors before control is given back to the application. Once attached, the service will always trigger all error\r\n\t\t\t * interceptors before returning the errors and the control flow back to the application.\r\n\t\t\t */\r\n\t\t\tthis.addErrorInterceptor = function(interceptor) {\r\n\t\t\t\tthis.errorInterceptors.push(interceptor);\r\n\t\t\t};\r\n\r\n\t\t\t/**\r\n\t\t\t These 'Interceptors' currently function more as a callback/event handler\r\n\t\t\t Keeping name as interceptor to align with Restangular and other function names\r\n\t\t\t There is potential for refactoring to support graceful error recovery\r\n\t\t\t **/\r\n\r\n            /**\r\n             * @ngdoc method\r\n             * @name WcHttpRequestService.triggerResponseInterceptors\r\n             * @methodOf WebCoreModule.service:WcHttpRequestService\r\n             * @param {Object} error This object is what will be passed to the Error interceptor functions to be triggered\r\n             * @description\r\n             * This method triggers all of the response functions in the response interceptor array\r\n             */\r\n\t\t\tthis.triggerErrorInterceptors = function(error) {\r\n\t\t\t\tvar index = 0;\r\n\t\t\t\twhile(index < this.errorInterceptors.length) {\r\n\t\t\t\t\tthis.errorInterceptors[index](error);\r\n\t\t\t\t\tindex++;\r\n\t\t\t\t}\r\n\t\t\t};\r\n\r\n\t\t\t/**\r\n\t\t\t *\r\n\t\t\t *    Network Detection\r\n\t\t\t *\r\n\t\t\t * **/\r\n\r\n            /**\r\n             * @ngdoc property\r\n             * @name WcHttpRequestService._lastPingRequestTimestamp\r\n             * @propertyOf WebCoreModule.service:WcHttpRequestService\r\n             * @returns {Integer} An integer noting the last time a ping request was received\r\n             */\r\n            /**\r\n             * @ngdoc property\r\n             * @name WcHttpRequestService._trustedResponse\r\n             * @propertyOf WebCoreModule.service:WcHttpRequestService\r\n             * @returns {String} A response for the request.\r\n             */\r\n            /**\r\n             * @ngdoc property\r\n             * @name WcHttpRequestService._pendingRequests\r\n             * @propertyOf WebCoreModule.service:WcHttpRequestService\r\n             * @returns {Integer} An integer noting the number of current pending requests\r\n             */\r\n            /**\r\n             * @ngdoc property\r\n             * @name WcHttpRequestService._currentPingRequestPromise\r\n             * @propertyOf WebCoreModule.service:WcHttpRequestService\r\n             * @returns {Promise} A promise for the current ping request\r\n             */\r\n            /**\r\n             * @ngdoc property\r\n             * @name WcHttpRequestService._networkStatusResponses\r\n             * @propertyOf WebCoreModule.service:WcHttpRequestService\r\n             * @returns {Array} An array of strings representing the possible network status responses: 'online' , 'unauthenticated', 'offline'\r\n             */\r\n\t\t\tthis._lastPingRequestTimestamp = 0;\r\n\t\t\tthis._trustedResponse = '';\r\n\t\t\tthis._pendingRequests = 0;\r\n\t\t\tthis._currentPingRequestPromise = {};\r\n\t\t\tthis._networkStatusResponses = ['online', 'unauthenticated', 'offline'];\r\n\r\n\r\n\t\t\t/**\r\n\t\t\t * @ngdoc method\r\n\t\t\t * @name WcHttpRequestService.getNetworkState\r\n\t\t\t * @methodOf WebCoreModule.service:WcHttpRequestService\r\n\t\t\t * @description\r\n\t\t\t * @returns {Promise} Promise wrapped value to identify the current state of the application's connectivity to its server.\r\n\t\t\t * The WcHttpRequestService allows you to interrogate the status of the the application's connectivity to its application\r\n\t\t\t * server. This status check is used behind the scenes across various webCore services to determine proper actions\r\n\t\t\t * when connectivity is lost. This function can also be triggered by application code, if the need arises.\r\n\t\t\t *\r\n\t\t\t * For this function to work properly, the application's services need to expose an endpoint unprotected by authentication\r\n\t\t\t * controls. This service will use that endpoint to determine whether the application is online, unauthenicated, or offline.\r\n\t\t\t */\r\n\t\t\t/* can return statuses defined in _networkStatusResponses\r\n\t\t\t *\r\n\t\t\t * will always resolve promise, never reject - error case is a valid response\r\n\t\t\t * */\r\n\t\t\tthis.getNetworkState = function() {\r\n\r\n\t\t\t\tif(this._pendingRequests > 0) {\r\n\t\t\t\t\t// already pinging server, do not re-request and return saved promise\r\n\t\t\t\t\treturn this._currentPingRequestPromise;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tvar currentTime = new Date();\r\n\t\t\t\t\tif(currentTime - this._lastPingRequestTimestamp > this.configuration.pingTrustPeriodMS) {\r\n\t\t\t\t\t\tthis._pendingRequests++;\r\n\t\t\t\t\t\tthis._lastPingRequestTimestamp = currentTime;\r\n\t\t\t\t\t\tthis._trustedResponse = '';\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\t// we are trusting that our last ping request was close enough\r\n\t\t\t\t\t\treturn $q.when(this._trustedResponse);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\t//needs to use $http itself here to ensure we don't cause issues with the network detection loop.\r\n\t\t\t\tthis._currentPingRequestPromise = $http.get(this.urlBuilder(this.configuration.unprotectedPingRoute), this.requestConfigurationMapper(this.configuration)).then(angular.bind(this, function() {\r\n\t\t\t\t\t// we only query the network when there is an error in retrieving data from the server\r\n\t\t\t\t\t// if we can access the unprotected ping endpoint, we know the issue is most likely that the user is not logged in\r\n\t\t\t\t\tthis._pendingRequests--;\r\n\t\t\t\t\tthis._currentPingRequestPromise = {};\r\n\t\t\t\t\tthis._trustedResponse = this._networkStatusResponses[1]; //unauthenticated\r\n\t\t\t\t\t// perform callback\r\n\t\t\t\t\tthis.configuration.unAuthenticatedCallback();\r\n\t\t\t\t\t$rootScope.$broadcast('Unauthenticated');\r\n\t\t\t\t\treturn $q.when(this._networkStatusResponses[1]);\r\n\t\t\t\t}), angular.bind(this, function() {\r\n\t\t\t\t\t// if we cannot access the unprotected ping endpoint, we must be offline\r\n\t\t\t\t\tthis._pendingRequests--;\r\n\t\t\t\t\tthis._currentPingRequestPromise = {};\r\n\t\t\t\t\tthis._trustedResponse = this._networkStatusResponses[2]; // offline\r\n\t\t\t\t\t$rootScope.$broadcast('Offline');\r\n\t\t\t\t\treturn $q.when(this._networkStatusResponses[2]);\r\n\t\t\t\t}));\r\n\r\n\t\t\t\treturn this._currentPingRequestPromise;\r\n\t\t\t};\r\n\t\t}]);\r\n","\t\t/**\r\n\t\t * @ngdoc service\r\n\t\t * @name WebCoreModule.service:WcImageFileService\r\n\t\t * @requires $q\r\n\t\t * @requires $window\r\n\t\t * @description\r\n\t\t * The WcImageFileService manages the image file related operations.This service is mainly for generating the image related properties.\r\n\t\t */\r\n\r\n'use strict';\r\nangular.module('WebCoreModule')\r\n\t.service('WcImageFileService', ['$q', '$window', function($q) { // jshint ignore:line\r\n\r\n\t\t// I don't want to make this a public method, but we run into problems testing image.onload.\r\n\t\t// If someone finds a way to mock the Image.onload event, do that and make this method private.\r\n\t\tthis.loadImage = angular.bind(this, function(imageSrc, width, height) {\r\n\t\t\tvar deferred = $q.defer();\r\n\r\n\t\t\tvar canvas = this.generateCanvas();\r\n\t\t\tcanvas.width = width;\r\n\t\t\tcanvas.height = height;\r\n\r\n\t\t\tvar context = canvas.getContext('2d');\r\n\r\n\t\t\tvar image = new Image();\r\n\t\t\timage.onload = function() {\r\n\t\t\t\tcontext.drawImage(image, 0, 0, canvas.width, canvas.height);\r\n\r\n\t\t\t\tdeferred.resolve(canvas);\r\n\t\t\t};\r\n\r\n\t\t\timage.src = imageSrc;\r\n\r\n\t\t\treturn deferred.promise;\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t * @ngdoc method\r\n\t\t * @name WcImageFileService.createImageURI\r\n\t\t * @methodOf WebCoreModule.service:WcImageFileService\r\n\t\t * @param {String} imageURI This string value holds the image name\r\n\t\t * @param {Integer} width(optional) This Integer value holds the width of the image. The default value of this field is 200px\r\n\t\t * @param {Integer} height(optional) This Integer value holds the height of the image. The default value of this field is 200px\r\n\t\t * @returns {String} The string value is the image uri\r\n\t\t * @description\r\n\t\t * The WcImageFileService provides a createImageURI function to create the image uri based on image name, width and height.\r\n\t\t */\r\n\r\n\t\tthis.createImageURI = function(imageURI, width, height) {\r\n\t\t\twidth = width || 200;\r\n\t\t\theight = height || 200;\r\n\r\n\t\t\treturn this.loadImage(imageURI, width, height).then(function(canvas) {\r\n\t\t\t\treturn $q.when(canvas.toDataURL('image/jpeg', 1));\r\n\t\t\t});\r\n\t\t};\r\n\r\n\t\t// Only for testing. We have yet to find out how to mock document.createElement without\r\n\t\t// blowing up angular-mock. We have a Stack Overflow question out there to hopefully\r\n\t\t// find an answer.\r\n\t\t// http://stackoverflow.com/questions/35369629/using-jasmine-to-spy-on-document-createelement-throws-error-from-angular-mock\r\n\t\tthis.generateCanvas = function() {\r\n\t\t\treturn document.createElement('canvas');\r\n\t\t};\r\n\t}]\r\n);","\t/**\r\n\t * @ngdoc service\r\n\t * @name WebCoreModule.service:WcTranslateConfiguratorService\r\n\t * @requires $translateProvider\r\n\t * @description\r\n\t * The WcTranslateConfiguratorService allows WebCore to wrap default translation configuration with a construct that is still\r\n\t * accessible in a module's .config() function. This provider also exposes a service, allowing for runtime configuration adjustment.\r\n\t */\r\n\r\n'use strict';\r\nangular.module('WebCoreModule').provider('WcTranslateConfiguratorService', ['$translateProvider', function($translateProvider) {\r\n\r\n\t//expose the translate provider in case users need to call through to it\r\n    /**\r\n     * @ngdoc property\r\n     * @name WcTranslateConfiguratorService.translateProvider\r\n     * @propertyOf WebCoreModule.service:WcTranslateConfiguratorService\r\n     * @returns {Object} A reference to the angular-translate provider\r\n     */\r\n\tthis.translateProvider = $translateProvider;\r\n\r\n    /**\r\n     * @ngdoc property\r\n     * @name WcTranslateConfiguratorService.configuration\r\n     * @propertyOf WebCoreModule.service:WcTranslateConfiguratorService\r\n     * @returns {Object} configuration object for angularjs' translate provider with the following properties:\r\n     *  - sanitizationStrategy {String}\r\n     *  - loader {String}\r\n     *  - loaderObj {Object}\r\n     *  - langKeyArray {Array}\r\n     *  - langKeyObj {Object}\r\n     *  - fallbackLang {String}\r\n     */\r\n\tthis.configuration = {\r\n\t\tsanitizationStrategy: 'escape',\r\n\t\tloader: '$translatePartialLoader',\r\n\t\tloaderObj: {urlTemplate: 'translations/{lang}/{part}.json'},\r\n\t\tlangKeyArray: ['en', 'zh', 'ru'],\r\n\t\tlangKeyObj: {\r\n\t\t\t'en_*': 'en',\r\n\t\t\t'en-*': 'en',\r\n\t\t\t'zh_CN': 'zh',\r\n\t\t\t'zh_HK': 'zh',\r\n\t\t\t'ru_RU': 'ru'\r\n\t\t},\r\n\t\tfallbackLang: 'en'\r\n\t};\r\n\r\n\t/**\r\n\t * @ngdoc method\r\n\t * @name WcTranslateConfiguratorService.configureTranslateService\r\n\t * @methodOf WebCoreModule.service:WcTranslateConfiguratorService\r\n\t * @param {Object} config Options object to configure default values used by the WcTranslateConfiguratorServiceProvider. Config properties that can be set in this object include:\r\n\t *  - loader: String to identify the loader service to use. Defaults to '$translatePartialLoader' and likely does not need to be changed.\r\n\t *  - loaderObj: Object defining loader configuration. Defaults to '{urlTemplate: 'translations/{lang}/{part}.json'}', defining the default location of translation json files.\r\n\t *  - langKeyArray: Array of strings defining the languages the app should support. Defaults to ['en', 'zh', 'ru'].\r\n\t *  - langKeyObj: Object defining mappings between two and four character language codes. Should define mappings for any languages in use.\r\n\t *  - fallbackLang: String identifying the language to use if a non-supported language is requested. Defaults to 'en'\r\n\t * @description\r\n\t * The WcTranslateConfiguratorServiceProvider configures itself with application-wide defaults when it starts up. The configureDefaults function allows\r\n\t * you to override those defaults at the app level, so that the new parameters will apply to the configuration of the translation modules.\r\n\t */\r\n\tthis.configureTranslateService = function(config) {\r\n\t\t//default config is set - if different config is passed in, use it instead\r\n\t\tif(config) {\r\n\t\t\tangular.extend(this.configuration, config);\r\n\t\t}\r\n\t\t$translateProvider.useSanitizeValueStrategy(this.configuration.sanitizationStrategy);\r\n\t\t$translateProvider.useLoader(this.configuration.loader, this.configuration.loaderObj);\r\n\t\t$translateProvider.registerAvailableLanguageKeys(this.configuration.langKeyArray, this.configuration.langKeyObj);\r\n\t\t$translateProvider.determinePreferredLanguage();\r\n\t\t$translateProvider.fallbackLanguage(this.configuration.fallbackLang);\r\n\t\t$translateProvider.use($translateProvider.preferredLanguage());\r\n\t};\r\n\r\n\t//this is essentially a factory function\r\n\tthis.$get = ['$translate', '$translatePartialLoader', function($translate, $translatePartialLoader){\r\n\t/**\r\n\t * @ngdoc method\r\n\t * @name WcTranslateConfiguratorService.loadPartAndRefresh\r\n\t * @methodOf WebCoreModule.service:WcTranslateConfiguratorService\r\n\t * @param {String} partString String defining the language partial file to load. For instance, to load the JabUiApp.json file, pass in 'JabUiApp'\r\n\t * @description\r\n\t * The WcTranslateConfiguratorService exposes a helper function to add a language partial json file to the language database\r\n\t * and refresh the application using it.\r\n\t */\r\n\t\tthis.loadPartAndRefresh = function(partString) {\r\n\t\t\t$translatePartialLoader.addPart(partString);\r\n\t\t\t$translate.refresh();\r\n\t\t};\r\n\r\n\t\t//return our object when all is said and done\r\n\t\treturn this;\r\n\t}];\r\n}]);\r\n","\t\t/**\r\n\t\t * @ngdoc service\r\n\t\t * @name WebCoreModule.service:WcWebtrendsService\r\n\t\t * @requires $rootScope\r\n\t\t * @requires $window\r\n\t\t * @requires $state\r\n\t\t * @requires $timeout\r\n\t\t * @description\r\n\t\t * The WcWebtrendsService wraps configuration needed by the Ford webtrends implementation for web analytics.\r\n\t\t */\r\n'use strict';\r\nangular.module('WebCoreModule')\r\n\t.service('WcWebtrendsService', ['$rootScope', '$window', '$state', '$timeout', function($rootScope, $window, $state, $timeout) {\r\n\r\n\t\tthis._enabled = false;\r\n\r\n\t\t/**\r\n\t\t * @ngdoc method\r\n\t\t * @name WcWebtrendsService.enable\r\n\t\t * @methodOf WebCoreModule.service:WcWebtrendsService\r\n\t\t * @description\r\n\t\t * Calling the enable function enables WebTrends tracking for the application.\r\n\t\t */\r\n\t\tthis.enable = function() {\r\n\t\t\tthis._enabled = true;\r\n\t\t};\r\n\r\n        /**\r\n         * @ngdoc method\r\n         * @name WcWebtrendsService.trackData\r\n         * @methodOf WebCoreModule.service:WcWebtrendsService\r\n         * @description\r\n         * Build uri from the url and track to the angular $window\r\n         */\r\n\t\tthis.trackData = function() {\r\n\t\t\tvar uri, urlPart;\r\n\r\n\t\t\tif ($window.location.hash !== '') {\r\n\t\t\t\turlPart = $window.location.hash + $window.location.search;\r\n\t\t\t}\r\n\r\n\t\t\tif (urlPart && (urlPart.replace('#/','') !== $state.$current.name)) {\r\n\t\t\t\turi = urlPart + ':' + $state.$current.name;\r\n\t\t\t} else {\r\n\t\t\t\turi = urlPart;\r\n\t\t\t}\r\n\r\n\t\t\tif (!uri) {\r\n\t\t\t\turi = ':' + $state.$current.name;\r\n\t\t\t}\r\n\r\n\t\t\t// $window.dcsMultiTrack('DCS.dcsuri', uri); //not mobile supportive. Source:\r\n\t\t\treturn uri;\r\n\t\t};\r\n\r\n\t\t$rootScope.$on('$stateChangeSuccess', angular.bind(this, function() {\r\n\t\t\tif(this._enabled && $window.dcsMultiTrack) {\r\n\t\t\t\t// $timeout required to allow Angular to update browser URL\r\n\t\t\t\t$timeout(angular.bind(this, function(){\r\n\t\t\t\t\t$rootScope.$apply();\r\n\t\t\t\t\tthis.trackData();\r\n\t\t\t\t}));\r\n\t\t\t}\r\n\t\t}));\r\n\r\n\t}]);","\t\t/**\r\n\t\t * @ngdoc service\r\n\t\t * @constructor\r\n\t\t * @name WebCoreModule.service:WcDateRangePickerPrototype\r\n\t\t * @requires $rootScope\r\n\t\t * @param {Object} config Config parameters to pass in to the prototype being created\r\n\t\t * @returns {WcDateRangePickerPrototype} The prototype created with the passed in information. The returned WcDateRangePickerPrototype\r\n\t\t * will expose the following properties and methods:\r\n\t\t * @description\r\n\t\t * The WcDateRangePickerPrototype provides a way to create paired date picker inputs for range selection. The pickers are\r\n\t\t * aware of the dates picked in either picker and disallow selections that are then out of range.\r\n\t\t *\r\n\t\t * To leverage the WcDateRangePickerPrototype, create a new instance using 'new WcDateRangePickerPrototype()' in calling code.\r\n\t\t * The WcDateRangePickerPrototype constructor creates a new instance of the WcDateRangePickerPrototype. This prototype\r\n\t\t * establishes the necessary properties and functions for rendering paired date pickers in your view.\r\n\t\t */\r\n'use strict';\r\nangular.module('WebCoreModule')\r\n\t.factory('WcDateRangePickerPrototype', ['$rootScope',\r\n\r\n\tfunction($rootScope) {\r\n\t\tfunction WcDateRangePickerPrototype(config) {\r\n\t\t\tvar startDate, endDate, minDate, maxDate, startDateFieldName, endDateFieldName, form;\r\n\r\n\t\t\tif(config) {\r\n\t\t\t\tstartDate = config.startDate ? config.startDate : null;\r\n\t\t\t\tendDate = config.endDate ? config.endDate : null;\r\n\t\t\t\tminDate = config.minDate ? config.minDate : null;\r\n\t\t\t\tmaxDate = config.maxDate ? config.maxDate : null;\r\n\t\t\t\tstartDateFieldName = config.startDateFieldName ? config.startDateFieldName : null;\r\n\t\t\t\tendDateFieldName = config.endDateFieldName ? config.endDateFieldName : null;\r\n\t\t\t\tform = config.form ? config.form : null;\r\n\t\t\t}\r\n\r\n\t\t\tthis.isStartDateOpen = false;\r\n\t\t\tthis.isEndDateOpen = false;\r\n\r\n\t\t\tthis.load(startDate, endDate, minDate, maxDate);\r\n\r\n\t\t\t$rootScope.$watch(angular.bind(this, function() {\r\n\t\t\t\treturn this.startDate;\r\n\t\t\t}), angular.bind(this, function(newValue, oldValue) {\r\n\t\t\t\tif(newValue !== oldValue) {\r\n                    this.minEndDate = newValue ? newValue : this.minDate;\r\n                }\r\n\t\t\t}));\r\n\r\n\t\t\t$rootScope.$watch(angular.bind(this, function() {\r\n\t\t\t\treturn this.endDate;\r\n            }), angular.bind(this, function(newValue, oldValue) {\r\n                if(newValue !== oldValue) {\r\n                    this.maxStartDate = newValue ? newValue : this.maxDate;\r\n                }\r\n\t\t\t}));\r\n\r\n\t\t\tif(form && startDateFieldName && endDateFieldName) {\r\n\t\t\t\t$rootScope.$watch(function(){\r\n\t\t\t\t\tvar dateDisabledArray = form.$error[\"date-disabled\"];\r\n\t\t\t\t\tif(dateDisabledArray) {\r\n\t\t\t\t\t\treturn dateDisabledArray.length;\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn 0;\r\n\t\t\t\t}, angular.bind(this, function(newVal) {\r\n\t\t\t\t\tvar dateDisabledArray = form.$error[\"date-disabled\"];\r\n\t\t\t\t\tif(newVal > 0) {\r\n\t\t\t\t\t\tfor(var i=0; i<dateDisabledArray.length; i++) {\r\n\t\t\t\t\t\t\t//this only operates on two date pickers now, so no need to look further in the createBookingForm.\r\n\t\t\t\t\t\t\t//we'd need to augment this if we were using more datepickers\r\n\t\t\t\t\t\t\tif (dateDisabledArray[i].$viewValue === form[startDateFieldName].$viewValue) {\r\n\t\t\t\t\t\t\t\tform[startDateFieldName].$setValidity('dateRange', !(dateDisabledArray[i].$error[\"date-disabled\"]));\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\telse {\r\n\t\t\t\t\t\t\t\tform[endDateFieldName].$setValidity('dateRange', !(dateDisabledArray[i].$error[\"date-disabled\"]));\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tform[startDateFieldName].$setValidity('dateRange', true);\r\n\t\t\t\t\t\tform[endDateFieldName].$setValidity('dateRange', true);\r\n\t\t\t\t\t}\r\n\t\t\t\t}));\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tconsole.log('The DateRangePicker cannot support validation indicators without having been provided the formObj and the field names.');\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t * @ngdoc property\r\n\t\t * @name WcDateRangePickerPrototype.maxStartDate\r\n\t\t * @propertyOf WebCoreModule.service:WcDateRangePickerPrototype\r\n\t\t * @returns {Date} The Date object used to identify the maximum valid date for the start date field.\r\n\t\t * @description\r\n\t\t * The maxStartDate property defines the maximum date that should be selectable in the start date field.\r\n\t\t */\r\n\t\t/**\r\n\t\t * @ngdoc property\r\n\t\t * @name WcDateRangePickerPrototype.minEndDate\r\n\t\t * @propertyOf WebCoreModule.service:WcDateRangePickerPrototype\r\n\t\t * @returns {Date} The Date object used to identify the minimum valid date for the end date field.\r\n\t\t * @description\r\n\t\t * The minEndDate property defines the minimum date that should be selectable in the end date field.\r\n\t\t */\r\n\t\t/**\r\n\t\t * @ngdoc property\r\n\t\t * @name WcDateRangePickerPrototype.maxEndDate\r\n\t\t * @propertyOf WebCoreModule.service:WcDateRangePickerPrototype\r\n\t\t * @returns {Date} The Date object used to identify the maximum valid date for the end date field.\r\n\t\t * @description\r\n\t\t * The maxEndDate property defines the maximum date that should be selectable in the end date field.\r\n\t\t */\r\n\t\tWcDateRangePickerPrototype.prototype.load = function(startDate, endDate, minDate, maxDate) {\r\n            /**\r\n             * @ngdoc property\r\n             * @name WcDateRangePickerPrototype.startDate\r\n             * @propertyOf WebCoreModule.service:WcDateRangePickerPrototype\r\n             * @returns {Date} The Date object created to match the date selected by the user in the start date field.\r\n             * @description\r\n             * The startDate property is used as the model variable bound to the start date input field.\r\n             */\r\n\t\t\tthis.startDate = startDate || null; //The day the start datepicker defaults to\r\n            /**\r\n             * @ngdoc property\r\n             * @name WcDateRangePickerPrototype.endDate\r\n             * @propertyOf WebCoreModule.service:WcDateRangePickerPrototype\r\n             * @returns {Date} The Date object created to match the date selected by the user in the end date field.\r\n             * @description\r\n             * The endDate property is used as the model variable bound to the end date input field.\r\n             */\r\n\t\t\tthis.endDate = endDate || null; //The day the end datepicker defaults to\r\n            /**\r\n             * @ngdoc property\r\n             * @name WcDateRangePickerPrototype.minDate\r\n             * @propertyOf WebCoreModule.service:WcDateRangePickerPrototype\r\n             * @returns {Date} The Date object used to identify the minimum valid date for the date range.\r\n             * @description\r\n             * The minDate property defines the minimum date that should be selectable as the start date for the range.\r\n             */\r\n\r\n\t\t\tthis.minDate = minDate || null; //The minimum day the start datepicker can have\r\n            /**\r\n             * @ngdoc property\r\n             * @name WcDateRangePickerPrototype.maxDate\r\n             * @propertyOf WebCoreModule.service:WcDateRangePickerPrototype\r\n             * @returns {Date} The Date object used to identify the maximum valid date for the date range.\r\n             * @description\r\n             * The maxDate property defines the maximum date that should be selectable as the end date for the range.\r\n             */\r\n\t\t\tthis.maxDate = maxDate || null; //The maximum day the end datepicker can have\r\n\r\n\t\t\tthis.minStartDate = this.minDate;\r\n\t\t\tthis.maxStartDate = this.endDate ? this.endDate : this.maxDate; //TODO: verify endDate <= maxDate\r\n\r\n\t\t\tthis.minEndDate = this.startDate ? this.startDate : this.minDate; //TODO: verify startDate >= minDate\r\n\t\t\tthis.maxEndDate = this.maxDate;\r\n\t\t};\r\n\r\n\t\t/**\r\n\t\t * @ngdoc method\r\n\t\t * @name WcDateRangePickerPrototype.openStartDate\r\n\t\t * @methodOf WebCoreModule.service:WcDateRangePickerPrototype\r\n\t\t * @param {Event} $event Event object describing what happened when the function was called.\r\n\t\t * @description\r\n\t\t * The WcDateRangePickerPrototype provides an openStartDate function to appropriately trigger the date picker control\r\n\t\t * to open and to keep track of open status of the control.\r\n\t\t */\r\n\t\tWcDateRangePickerPrototype.prototype.openStartDate = function($event) {\r\n\t\t\t$event.preventDefault();\r\n\t\t\t$event.stopPropagation();\r\n\r\n\t\t\tif (this.isStartDateOpen === true) {\r\n\t\t\t\tthis.isStartDateOpen = false;\r\n\t\t\t} else {\r\n\t\t\t\tthis.isStartDateOpen = true;\r\n\t\t\t\tthis.isEndDateOpen = false;\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\t/**\r\n\t\t * @ngdoc method\r\n\t\t * @name WcDateRangePickerPrototype.openEndDate\r\n\t\t * @methodOf WebCoreModule.service:WcDateRangePickerPrototype\r\n\t\t * @param {Event} $event Event object describing what happened when the function was called.\r\n\t\t * @description\r\n\t\t * The WcDateRangePickerPrototype provides an openEndDate function to appropriately trigger the date picker control\r\n\t\t * to open and to keep track of open status of the control.\r\n\t\t */\r\n\t\tWcDateRangePickerPrototype.prototype.openEndDate = function($event) {\r\n\t\t\t$event.preventDefault();\r\n\t\t\t$event.stopPropagation();\r\n\r\n\t\t\tif (this.isEndDateOpen === true) {\r\n\t\t\t\tthis.isEndDateOpen = false;\r\n\t\t\t} else {\r\n\t\t\t\tthis.isEndDateOpen = true;\r\n\t\t\t\tthis.isStartDateOpen = false;\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\treturn WcDateRangePickerPrototype;\r\n\t}]);","\t\t/**\r\n\t\t * @ngdoc service\r\n\t\t * @constructor\r\n\t\t * @name WebCoreModule.service:WcHttpEndpointPrototype\r\n\t\t * @requires WebCoreModule.service:WcHttpRequestService\r\n\t\t * @param {String} route The url endpoint string to use for this endpoint. This value will be appended to the application's base url.\r\n\t\t * @param {String} baseURL If passed in, this base url will be used instead of the value set application-wide.\r\n\t\t * @returns {WcHttpEndpointPrototype} The prototype created with the passed in information. The returned WcHttpEndpointPrototype\r\n\t\t * will expose the following properties and methods:\r\n\t\t * @description\r\n\t\t * The WcHttpEndpointPrototype wraps the WcHttpRequestService to make calls against a restful endpoint easy. Creating a new\r\n\t\t * endpoint prototype exposes all http verbs for that endpoint, making calls to the restful service easy to manage.\r\n\t\t *\r\n\t\t * To leverage the WcHttpEndpointPrototype, create a new instance using 'new WcHttpEndpointPrototype()' in calling code.\r\n\t\t * The WcHttpEndpointPrototype constructor creates a new instance of the WcHttpEndpointPrototype. This prototype\r\n\t\t * establishes the url for an endpoint and provides functions to call for the HTTP verbs (GET, PUT, POST, DELETE).\r\n\t\t */\r\n'use strict';\r\nangular.module('WebCoreModule')\r\n\t.factory('WcHttpEndpointPrototype', ['WcHttpRequestService', function(WcHttpRequestService) {\r\n\t\t/**\r\n\t\t * @ngdoc property\r\n\t\t * @name WcHttpEndpointPrototype.route\r\n\t\t * @propertyOf WebCoreModule.service:WcHttpEndpointPrototype\r\n\t\t * @returns {String} String defining the endpoint route to append to the baseURL for this endpoint.\r\n\t\t * @description\r\n\t\t * Passing in the required route string for an endpoint will establish the URL this endpoint should operate on\r\n\t\t * by appending the route to the end of the baseURL.\r\n\t\t */\r\n\t\t/**\r\n\t\t * @ngdoc property\r\n\t\t * @name WcHttpEndpointPrototype.baseURL\r\n\t\t * @propertyOf WebCoreModule.service:WcHttpEndpointPrototype\r\n\t\t * @returns {String} String defining a baseURL to override the application wide baseURL for this endpoint.\r\n\t\t * @description\r\n\t\t * Passing in an optional baseURL allows the user to override the baseURL for this endpoint with the passed in baseURL.\r\n\t\t */\r\n\t\tfunction Endpoint(route, baseURL) {\r\n\t\t\tthis.baseUrl = baseURL;\r\n\t\t\tthis.route = route;\r\n\t\t\tif(baseURL) {\r\n\t\t\t\tthis.route = this.baseUrl+this.route;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tEndpoint.prototype = {\r\n\t\t\tsubRoute: function(id) {\r\n\t\t\t\treturn new Endpoint(this.route + '/' + id);\r\n\t\t\t},\r\n\t\t\t/**\r\n\t\t\t * @ngdoc method\r\n\t\t\t * @name WcHttpEndpointPrototype.get\r\n\t\t\t * @methodOf WebCoreModule.service:WcHttpEndpointPrototype\r\n\t\t\t * @param {Object} options Options object to configure what happens when this verb is called. Config properties that can be set in this object include:\r\n\t\t\t *  - cache: set to 'localStorage' or 'sessionStorage' to enable caching for this call\r\n\t\t\t *  - alwaysRefresh: set to true to have the request always directed to the server when operating online. Each time the results are cached, making them available for offline usage. set to false to have only the first request directed to the server when operating online. Every subsequent request, online or offline, will be retrieved from the cache.\r\n\t\t\t * @returns {Promise} The data retreived from the backing service wrapped in a promise.\r\n\t\t\t * @description\r\n\t\t\t * The WcHttpEndpointPrototype provides a get function to trigger an HTTP GET against the established endpoint URL.\r\n\t\t\t *\r\n\t\t\t * A get call can be configured to cache the returned results from the server call. These results can be stored in\r\n\t\t\t * localStorage or session storage. Caching behavior can also be configured to happen in one of two ways:\r\n\t\t\t *  - An always refreshing cache will always go to the server when operating online, storing a copy of the data retrieved in the specified cache.\r\n\t\t\t *  - A non refreshing cache will go to the server with the first request when operating online, caching the results, but all subsequent requests will be retrieved from the cache, not from the server.\r\n\t\t\t */\r\n\t\t\tget: function(options) {\r\n\t\t\t\treturn WcHttpRequestService.get(this.route, options);\r\n\t\t\t},\r\n\t\t\t/**\r\n\t\t\t * @ngdoc method\r\n\t\t\t * @name WcHttpEndpointPrototype.post\r\n\t\t\t * @methodOf WebCoreModule.service:WcHttpEndpointPrototype\r\n\t\t\t * @param {Object} data Data to send to the endpoint when this verb is called.\r\n\t\t\t * @param {Object} options Options object to configure what happens when this verb is called.\r\n\t\t\t * @returns {Promise} The data retreived from the backing service wrapped in a promise.\r\n\t\t\t * @description\r\n\t\t\t * The WcHttpEndpointPrototype provides a post function to trigger an HTTP POST against the established endpoint URL.\r\n\t\t\t */\r\n\t\t\tpost: function(data, options) {\r\n\t\t\t\treturn WcHttpRequestService.post(this.route, data, options);\r\n\t\t\t},\r\n\t\t\t/**\r\n\t\t\t * @ngdoc method\r\n\t\t\t * @name WcHttpEndpointPrototype.put\r\n\t\t\t * @methodOf WebCoreModule.service:WcHttpEndpointPrototype\r\n\t\t\t * @param {String} id Identifier for which record we should operate on when this verb is called.\r\n\t\t\t * @param {Object} data Data to send to the endpoint when this verb is called.\r\n\t\t\t * @param {Object} options Options object to configure what happens when this verb is called.\r\n\t\t\t * @returns {Promise} The data retreived from the backing service wrapped in a promise.\r\n\t\t\t * @description\r\n\t\t\t * The WcHttpEndpointPrototype provides a put function to trigger an HTTP PUT against the established endpoint URL.\r\n\t\t\t */\r\n\t\t\tput: function(id, data, options) {\r\n\t\t\t\treturn WcHttpRequestService.put(this.route+'/'+id, data, options);\r\n\t\t\t},\r\n\t\t\t/**\r\n\t\t\t * @ngdoc method\r\n\t\t\t * @name WcHttpEndpointPrototype.delete\r\n\t\t\t * @methodOf WebCoreModule.service:WcHttpEndpointPrototype\r\n\t\t\t * @param {String} id Identifier for which record we should operate on when this verb is called.\r\n\t\t\t * @param {Object} options Options object to configure what happens when this verb is called.\r\n\t\t\t * @returns {Promise} The data retreived from the backing service wrapped in a promise.\r\n\t\t\t * @description\r\n\t\t\t * The WcHttpEndpointPrototype provides a delete function to trigger an HTTP DELETE against the established endpoint URL.\r\n\t\t\t */\r\n\t\t\tdelete: function(id, options){\r\n\t\t\t\treturn WcHttpRequestService.delete(this.route+'/'+id, options);\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\treturn Endpoint;\r\n\t}]);","/**\r\n * @ngdoc directive\r\n * @name WebCoreModule.directive:required\r\n * @restrict A\r\n * @element input|select|textarea\r\n * @description\r\n * The required directive adds behavior to HTML's required attribute. With this directive in use, any tag with a\r\n * required attribute will have a required field indicator added to the label for the field. The directive will also\r\n * add an appropriate legend to the form of the field, indicating what the required field indicator means.\r\n */\r\n'use strict';\r\nangular.module('WebCoreModule')\r\n    .directive('required', ['WcTranslateConfiguratorService', '$compile', '$timeout', function (WcTranslateConfiguratorService, $compile, $timeout) {\r\n        return {\r\n            restrict: 'A',\r\n            require: ['required'],\r\n            controller: ['$scope', '$element', '$attrs', 'WcTranslateConfiguratorService', function ($scope, $element, $attrs, WcTranslateConfiguratorService) { // jshint ignore:line\r\n\r\n                WcTranslateConfiguratorService.loadPartAndRefresh('WC-dataTable');\r\n\r\n                /**\r\n                 * @ngdoc property\r\n                 * @name required.insertionPoint\r\n                 * @propertyOf WebCoreModule.directive:required\r\n                 * @returns {Object} The label html object for the current element.\r\n                 */\r\n                this.insertionPoint = $('label[for=\"' + $attrs.id + '\"]');\r\n                // If it's a radio or checkbox, try to find legend for fieldset instead\r\n                if ($element[0].type == 'checkbox' || $element[0].type == 'radio') {\r\n                    this.insertionPoint = $element.closest('fieldset').find('legend');\r\n                }\r\n\r\n\r\n                /**\r\n                 * @ngdoc property\r\n                 * @name required.formElem\r\n                 * @propertyOf WebCoreModule.directive:required\r\n                 * @returns {Object} The parent form element to insert the required legend\r\n                 */\r\n                this.formElem = this.insertionPoint.closest('form');\r\n\r\n                /**\r\n                 * @ngdoc method\r\n                 * @name required.addLabels\r\n                 * @methodOf WebCoreModule.directive:required\r\n                 * @param {Object} scope AngularJS scope\r\n                 * @param {Object} attrs AngularJS element attributes\r\n                 * @description\r\n                 * This method adds the required 'required' indicator to fields marked required.\r\n                 */\r\n                this.addLabels = function (scope, attrs) {\r\n\r\n                    WcTranslateConfiguratorService.loadPartAndRefresh('WC-required');\r\n                    $timeout(angular.bind(this, function () {\r\n                        // check to make sure abbr is not already there before adding\r\n                        if (this.insertionPoint.has('abbr[title=\"Required\"]').length === 0 && !attrs.disabled && !attrs.readonly) {\r\n                            this.insertionPoint.prepend('<abbr class=\"required h6\" title=\"Required\">*</abbr>');\r\n                        }\r\n\r\n                         // Responsive table - row selection required\r\n                        if ($element[0].hasAttribute('wc-responsive-table')) {\r\n                            this.formGroup = $element.closest('form').find('.form-group').first();\r\n                            this.formGroup.prepend($compile('<div><abbr class=\"required h6\" title=\"Required\">*</abbr> <span>{{\"tableSelectionRequired\" | translate}}</span></div>')($scope));\r\n                            this.formElem = $element.closest('form');\r\n                        }\r\n\r\n                        //lastly, check for the form legend and add it if necessary\r\n                        if ((this.formElem.has('div.required-legend').length === 0 && !attrs.disabled && !attrs.readonly) || ($element[0].hasAttribute('wc-responsive-table'))) {\r\n                            this.formElem.prepend($compile('<div class=\"required-legend hidden-xs\"><span class=\"required-text\"><abbr class=\"required h6\" title=\"Required\">*</abbr> {{\"required.requiredText\" | translate}}</span></div>')(scope));\r\n                        }\r\n                    }), 100);\r\n                };\r\n\r\n            }],\r\n            link: function (scope, elem, attrs, ctrls) {\r\n                var requiredController = ctrls[0];\r\n\r\n                requiredController.addLabels(scope, attrs);\r\n            }\r\n        };\r\n    }]);","/**\r\n * @ngdoc directive\r\n * @name WebCoreModule.directive:form\r\n * @restrict E\r\n * @element form\r\n * @description\r\n * The required directive adds a legend to the form if one doesn't exist. This directive removes the legend if\r\n * no required fields exist on the page\r\n */\r\n'use strict';\r\nangular.module('WebCoreModule')\r\n    .directive('form', function () {\r\n        return {\r\n            restrict: 'E',\r\n            link: function (scope) { // jshint ignore:line\r\n                scope.$on('$viewContentLoaded', angular.bind(this, function () {\r\n                    var required = $('[required]');\r\n                    if(required.length<1) {\r\n                        var legend = $('.required-legend');\r\n                        legend.remove();\r\n                    }\r\n                }));\r\n\r\n            }\r\n        };\r\n    });\r\n","/**\r\n * @ngdoc directive\r\n * @name WebCoreModule.directive:ngRequired\r\n * @restrict A\r\n * @element input|select|textarea\r\n * @description\r\n * The ngRequired directive adds behavior to Angular's ngRequired attribute. With this directive in use, any tag with a\r\n * ng-required attribute will have a required field indicator added to the label for the field. The directive will also\r\n * add an appropriate legend to the form of the field, indicating what the required field indicator means.\r\n */\r\n'use strict';\r\nangular.module('WebCoreModule')\r\n    .directive('ngRequired', ['WcTranslateConfiguratorService', '$compile', '$timeout', function (WcTranslateConfiguratorService, $compile, $timeout) {\r\n        return {\r\n            restrict: 'A',\r\n            require: ['ngRequired', '^form'],\r\n            scope: {\r\n                ngRequired: '='\r\n            },\r\n            controller: ['$scope', '$element', '$attrs', function ($scope, $element, $attrs) { // jshint ignore:line\r\n\r\n                /**\r\n                 * @ngdoc property\r\n                 * @name ngRequired.insertionPoint\r\n                 * @propertyOf WebCoreModule.directive:ngRequired\r\n                 * @returns {Object} The label html object for the current element to insert the required abbreviation.\r\n                 */\r\n                this.insertionPoint = $('label[for=\"' + $attrs.id + '\"]');\r\n                // If it's a radio or checkbox, try to find legend for fieldset instead\r\n                if ($element[0].type === 'checkbox' || $element[0].type === 'radio') {\r\n                    this.insertionPoint = $element.closest('fieldset').find('legend');\r\n                }\r\n                /**\r\n                 * @ngdoc property\r\n                 * @name ngRequired.formElem\r\n                 * @propertyOf WebCoreModule.directive:ngRequired\r\n                 * @returns {Object} The parent form element to insert the required legend\r\n                 */\r\n                this.formElem = this.insertionPoint.closest('form');\r\n\r\n                /**\r\n                 * @ngdoc method\r\n                 * @name ngRequired.getFormControls\r\n                 * @methodOf WebCoreModule.directive:ngRequired\r\n                 * @param {Object} formController This object is the controller for the form object.\r\n                 * @return {Array} formControls An array of valid objects from the formController.\r\n                 * @description\r\n                 * This method iterates over the formController and finds the $valid objects and returns them in an array.\r\n                 */\r\n                var getFormControls = function (formController) {\r\n                    var formControls = [];\r\n\r\n                    angular.forEach(formController, function (value) { // jshint ignore:line\r\n                        if (typeof value === 'object' && value.hasOwnProperty('$valid')) {\r\n                            this.push(value);\r\n                        }\r\n                    }, formControls);\r\n\r\n                    return formControls;\r\n                };\r\n\r\n                /**\r\n                 * @ngdoc method\r\n                 * @name ngRequired.calculateNumRequiredFields\r\n                 * @methodOf WebCoreModule.directive:ngRequired\r\n                 * @param {Object} formController This object is the controller for the form object.\r\n                 * @return {Integer} formControls The number of Fields that are required within the formController\r\n                 * @description\r\n                 * This method calls getFormControls and then counts and returns the number of form fields that are required.\r\n                 */\r\n                this.calculateNumRequiredFields = function (formController) {\r\n                    var formControls = getFormControls(formController);\r\n\r\n                    var numRequiredFields = 0;\r\n                    angular.forEach(formControls, function (value) { // jshint ignore:line\r\n                        if (value.$error.required) {\r\n                            numRequiredFields++;\r\n                        }\r\n                    });\r\n\r\n                    return numRequiredFields;\r\n                };\r\n\r\n                /**\r\n                 * @ngdoc method\r\n                 * @name ngRequired.addLabels\r\n                 * @methodOf WebCoreModule.directive:ngRequired\r\n                 * @param {Object} scope AngularJS scope\r\n                 * @param {Object} attrs AngularJS element attributes\r\n                 * @description\r\n                 * This method adds the required 'required' indicator to fields marked with required.\r\n                 */\r\n                this.addLabels = function (scope, attrs) { // jshint ignore:line\r\n\r\n                    WcTranslateConfiguratorService.loadPartAndRefresh('WC-required');\r\n                    $timeout(angular.bind(this, function () {\r\n                        // check to make sure abbr is not already there before adding\r\n                        if (this.insertionPoint.has('abbr[title=\"Required\"]').length === 0 && !attrs.disabled && !attrs.readonly) {\r\n                            this.insertionPoint.prepend('<abbr class=\"required h6\" title=\"Required\">*</abbr>');\r\n                        }\r\n\r\n                        //lastly, check for the form legend and add it if necessary\r\n                        if (this.formElem.has('div.required-legend').length === 0 && !attrs.disabled && !attrs.readonly) {\r\n                            this.formElem.prepend($compile('<div ng-cloak class=\"required-legend hidden-xs\"><span class=\"required-text\"><abbr class=\"required h6\" title=\"Required\">*</abbr> {{\"required.requiredText\" | translate}}</span></div>')(scope));\r\n                        }\r\n                    }), 0);\r\n                };\r\n                /**\r\n                 * @ngdoc method\r\n                 * @name ngRequired.removeLabels\r\n                 * @methodOf WebCoreModule.directive:ngRequired\r\n                 * @param {Object} formController This object is the controller for the form directive\r\n                 * @description\r\n                 * This method removes the required 'required' indicator to fields marked with required.\r\n                 */\r\n                this.removeLabels = function (formController) {\r\n                    this.insertionPoint.find('abbr.required').remove();\r\n                    var numRequiredFields = this.calculateNumRequiredFields(formController);\r\n                    if (numRequiredFields === 0) {\r\n                        this.formElem.find('div.required-legend').remove();\r\n                    }\r\n                };\r\n            }],\r\n\r\n            link: function (scope, elem, attrs, ctrls) { // jshint ignore:line\r\n                var ngRequiredController = ctrls[0];\r\n                var formController = ctrls[1];\r\n\r\n                scope.$watch(function () {\r\n                    return scope.ngRequired;\r\n                }, function (newValue) {\r\n                    if (newValue) {\r\n                        ngRequiredController.addLabels(scope, attrs);\r\n                    } else {\r\n                        ngRequiredController.removeLabels(formController);\r\n                    }\r\n                });\r\n            }\r\n        };\r\n    }]);\r\n","/**\r\n * @ngdoc directive\r\n * @name WebCoreModule.directive:wcAlertConsole\r\n * @restrict A\r\n * @element div\r\n * @description\r\n * The wcAlertConsole directive adds an alert console div to the page. The directive also watches the array of visible\r\n * messages, and updates the view to display all messages that should currently be visible. This directive works with\r\n * WebCore's WcAlertConsoleService, which adds the messages into the arrays.\r\n */\r\n'use strict';\r\nangular.module('WebCoreModule')\r\n\t.directive('wcAlertConsole', function() {\r\n\t\treturn {\r\n\t\t\trestrict: 'A',\r\n\t\t\ttemplate: \"<div id=\\\"alert-console\\\"><div class=\\\"alert alert-dismissable\\\"ng-swipe-right=\\\"closeAlert(alert.uniqueishID)\\\" role=\\\"alert\\\" ng-cloak ng-repeat=\\\"alert in visibleMessages\\\" type=\\\"{{alert.type}}\\\" ng-class=\\\"{'zoom-out-animate': alert.fadeOut, 'fade-out': alert.fadeOut, 'alert-success' : alert.type == 'success', 'alert-danger' : alert.type == 'danger', 'alert-warning' : alert.type == 'warning', 'alert-info' : alert.type == 'info'}\\\"> <span class=\\\"glyphicon\\\" ng-class=\\\"{'glyphicon-ok': alert.type == 'success', 'glyphicon-warning-sign': alert.type == 'warning', 'glyphicon-remove-circle': alert.type == 'danger', 'glyphicon-info-sign' : alert.type == 'info'}\\\"></span><button class=\\\"close\\\" ng-click=\\\"closeAlert(alert.uniqueishID)\\\"><span aria-hidden=\\\"true\\\">&#120;</span><span class=\\\"sr-only\\\">Close</span></button><div><span ng-bind-html=\\\"alert.message\\\"></span><!--<progressbar ng-if=\\\"!alert.persist\\\" class=\\\"progress-striped active\\\" value=\\\"100 - alert.timeout*10\\\" type=\\\"{{alert.type}}\\\"></progressbar>--></div></div></div>\",\r\n\t\t\treplace: false,\r\n\t\t\tcontroller: ['$scope', 'WcAlertConsoleService', '$timeout', function($scope, WcAlertConsoleService, $timeout) {\r\n\r\n\t\t\t\t$scope.visibleMessages = [];\r\n\r\n\t\t\t\t$scope.closeAlert = function(uniqueishID) {\r\n\t\t\t\t\t// manually trigger fade out\r\n\t\t\t\t\tWcAlertConsoleService.removeMessage(uniqueishID, true);\r\n\t\t\t\t};\r\n\r\n\t\t\t\tif(WcAlertConsoleService.getSettings().removeErrorOnStateChange) {\r\n\t\t\t\t\t$scope.$on('$stateChangeStart', function() {\r\n\t\t\t\t\t\tWcAlertConsoleService.removeErrorMessages();\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// watch on alert messages\r\n\t\t\t\t$scope.$watch(function() {\r\n\t\t\t\t\t//noinspection UnnecessaryLocalVariableJS\r\n                    var messages = WcAlertConsoleService.getMessages(true);\r\n\t\t\t\t\treturn messages;\r\n\t\t\t\t}, function(newMsgs, oldMsgs) {\r\n\t\t\t\t\t$scope.visibleMessages = newMsgs;\r\n\r\n\t\t\t\t\t// move user to focus on alert if new message is added\r\n\t\t\t\t\t$timeout(function() {\r\n\t\t\t\t\t\tif(newMsgs.length > oldMsgs.length) {\r\n\t\t\t\t\t\t\tvar userYpos = $(document).scrollTop(); // jshint ignore:line\r\n\t\t\t\t\t\t\tvar msgYpos = $('div.alert').last().offset();\r\n\t\t\t\t\t\t\tmsgYpos = msgYpos.top - 15;\r\n\r\n\t\t\t\t\t\t\tif(msgYpos < userYpos) {\r\n\t\t\t\t\t\t\t\t$('html, body').animate({ scrollTop: msgYpos},100);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}, 0);\r\n\r\n\t\t\t\t}, true);\r\n\r\n\r\n\t\t\t}]\r\n\t\t};\r\n\t});","/**\r\n * @ngdoc directive\r\n * @name WebCoreModule.directive:wcChart\r\n * @restrict E\r\n * @scope\r\n * @param {array} data The array of data to render a chart from\r\n * @param {string} type The type of chart to render. Can be Line, Bar or Pie\r\n * @param {object} options An object with configuration options for the chart\r\n * @param {number} height the height of the canvas\r\n * @description\r\n * The wcChart directive utilizes the Chart.js library to provide charting capabilities via an Angular directive.\r\n * The directive provides customization for various chart types via the passed in attributes on the tag.\r\n */\r\n'use strict';\r\nangular.module('WebCoreModule')\r\n    .directive('wcChart', ['Chart',  function (Chart) {\r\n        return {\r\n            restrict: 'E',\r\n            scope: {\r\n                data: '&data',\r\n                options: '&options',\r\n                type: '@',\r\n                height: \"=\"\r\n            },\r\n            replace: true,\r\n            template: '<canvas></canvas>',\r\n            link: function ($scope, $element) { // jshint ignore:line\r\n                // jshint unused:true\r\n                var chartObj;\r\n                $scope.data = $scope.data();\r\n                $scope.options = $scope.options();\r\n\r\n                /**\r\n                 * @ngdoc property\r\n                 * @name wcChart.defaultOptions\r\n                 * @propertyOf WebCoreModule.directive:wcChart\r\n                 * @returns {Object} this object is the minimum settings for a chart object\r\n                 */\r\n                this.defaultOptions = {\r\n                    responsive: true,\r\n                    maintainAspectRatio: false\r\n                };\r\n\r\n                $.extend($scope.options, this.defaultOptions );\r\n\r\n                /**\r\n                 * @ngdoc property\r\n                 * @name wcChart.height\r\n                 * @propertyOf WebCoreModule.directive:wcChart\r\n                 * @returns {Integer} this is the height of the chart object\r\n                 */\r\n                this.height = $scope.height || 300;\r\n\r\n                $element.wrap(\"<div style='height:\" + this.height + \"px ' class='chart-container'></div>\");\r\n\r\n                var cvs = $element[0];\r\n\r\n                // Watch for Changes to Data Set & options\r\n\r\n\r\n                $scope.$watch('data', angular.bind(this, function(value) {\r\n                    if(value) {\r\n                        this.destroyChart();\r\n\r\n                        chartObj = new Chart(cvs, {\r\n                            type: $scope.type,\r\n                            data: $scope.data,\r\n                            options: $scope.options\r\n                        });\r\n                        chartObj.resize();\r\n                    }\r\n                }, true));\r\n\r\n                $scope.$on('$destroy', angular.bind(this, function () {\r\n                    this.destroyChart();\r\n                }));\r\n\r\n                /**\r\n                 * @ngdoc method\r\n                 * @name wcChart.destroyChart\r\n                 * @methodOf WebCoreModule.directive:wcChart\r\n                 * @description\r\n                 * This method destroys the chart that is within the chart directive\r\n                 */\r\n                this.destroyChart = function () {\r\n                    if (chartObj) {\r\n                        chartObj.destroy();\r\n                    }\r\n                };\r\n\r\n\r\n                /* Update chart when changes occure on data */\r\n                $scope.$on('update', angular.bind(this, function () {\r\n                    chartObj.update();\r\n                }));\r\n\r\n            }\r\n        };\r\n    }]);","/**\r\n * @ngdoc directive\r\n * @name WebCoreModule.directive:wcCheckAllNone\r\n * @restrict AE\r\n * @scope\r\n * @requires dataTable\r\n * @param {string} targetContainerId The html id of the tag this directive should target\r\n * @description\r\n * The wcCheckAllNone directive sets up check all/none functionality for an array of checkboxes. It can be used in conjunction\r\n * with a Data table. The directive will inject check all/none links and provide the necessary functions to make them function.\r\n */\r\n'use strict';\r\nangular.module('WebCoreModule')\r\n\t.directive('wcCheckAllNone', function() {\r\n\t\treturn {\r\n\t\t\trestrict: 'AE',\r\n\t\t\trequire: ['wcCheckAllNone', '?^datatable'],\r\n\t\t\tscope: {\r\n\t\t\t\ttargetContainerId: '@targetContainerId'\r\n\t\t\t},\r\n\t\t\ttemplate: '<a class=\"select-all\" href=\"javascript:;\" ng-cloak ng-click=\"checkAllNoneController.checkAll()\">{{\"actions.selectAll\" | translate}}</a> | <a class=\"select-none\" href=\"javascript:;\" ng-click=\"checkAllNoneController.checkNone()\">{{\"actions.selectNone\"| translate}}</a>',\r\n\t\t\tcontrollerAs: 'checkAllNoneController',\r\n\t\t\tcontroller: ['$scope', '$element', 'WcTranslateConfiguratorService', function($scope, $element, WcTranslateConfiguratorService) {\r\n\r\n\t\t\t\tWcTranslateConfiguratorService.loadPartAndRefresh('WC-checkAllNone');\r\n\r\n                /**\r\n                 * @ngdoc property\r\n                 * @name wcCheckAllNone.height\r\n                 * @propertyOf WebCoreModule.directive:wcCheckAllNone\r\n                 * @returns {Object} The object is the controller for the responsive table in scope for this checkAllNone directive.\r\n                 */\r\n\t\t\t\tthis.responsiveTableController = angular.element('#'+$scope.targetContainerId).controller('wcResponsiveTable');\r\n\r\n\t\t\t\t$scope.viewScope = $scope.$parent;\r\n\r\n\t\t\t\t$scope.toggleCheckAllExists = false;\r\n\r\n\t\t\t\t$scope.setToggleCheckAllExists = function(exists) {\r\n\t\t\t\t\t$scope.toggleCheckAllExists = exists;\r\n\t\t\t\t};\r\n\r\n\t\t\t\t$scope.getToggleCheckAllExists = function() {\r\n\t\t\t\t\treturn $scope.toggleCheckAllExists;\r\n\t\t\t\t};\r\n\r\n                /**\r\n                 * @ngdoc method\r\n                 * @name wcCheckAllNone.checkAll\r\n                 * @methodOf WebCoreModule.directive:wcCheckAllNone\r\n                 * @description\r\n                 * This method gets all of the checkboxes within the table and selects all of them and then checks them, including the header checkbox.\r\n                 */\r\n\t\t\t\tthis.checkAll = function() {\r\n\t\t\t\t\tif(this.responsiveTableController){\r\n\t\t\t\t\t\tthis.responsiveTableController.WcTableScopeService.getTableScope().$broadcast('table.select.checkbox.all');\r\n\t\t\t\t\t\tthis.responsiveTableController.WcTableScopeService.getTableScope().$broadcast('table.select.button.all');\r\n                        var checkbox = $('#' + $scope.targetContainerId).find('input[type=\"checkbox\"].wc-header-checkbox');\r\n\t\t\t\t\t\tcheckbox.prop('checked', true);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tvar checkBoxList = $('#' + $scope.targetContainerId).find('input[type=\"checkbox\"]:not(.toggle-check-all)');\r\n\t\t\t\t\t\tangular.forEach(checkBoxList, function (item) {\r\n\t\t\t\t\t\t\t// item.checked = false;\r\n\t\t\t\t\t\t\t// item.click();\r\n\r\n\t\t\t\t\t\t\tif(!item.checked) {\r\n\t\t\t\t\t\t\t\titem.click();\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\titem.checked = true;\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t};\r\n\r\n                /**\r\n                 * @ngdoc method\r\n                 * @name wcCheckAllNone.checkNone\r\n                 * @methodOf WebCoreModule.directive:wcCheckAllNone\r\n                 * @description\r\n                 * This method gets all of the checkboxes within the table and selects all of them and then unchecks them, including the header checkbox.\r\n                 */\r\n\t\t\t\tthis.checkNone = function() {\r\n\t\t\t\t\tif(this.responsiveTableController){\r\n                        this.responsiveTableController.WcTableScopeService.getTableScope().$broadcast('table.select.checkbox.none');\r\n                        this.responsiveTableController.WcTableScopeService.getTableScope().$broadcast('table.select.button.none');\r\n                        var checkbox = $('#' + $scope.targetContainerId).find('input[type=\"checkbox\"].wc-header-checkbox');\r\n                        checkbox.prop('checked', false);\r\n                    } else {\r\n\t\t\t\t\t\tvar checkBoxList = $('#' + $scope.targetContainerId).find('input[type=\"checkbox\"]:not(.toggle-check-all)');\r\n\t\t\t\t\t\tangular.forEach(checkBoxList, function (item) {\r\n\t\t\t\t\t\t\t// item.checked = true;\r\n\t\t\t\t\t\t\t// item.click();\r\n\r\n\t\t\t\t\t\t\tif(item.checked) {\r\n\t\t\t\t\t\t\t\titem.click();\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\titem.checked = false;\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t};\r\n\r\n\t\t\t}],\r\n\t\t\tlink: function(scope, elem, attrs, controllers) {\r\n\t\t\t\tvar datatableController = controllers[1];\r\n\r\n\t\t\t\tif (datatableController) {\r\n\t\t\t\t\tscope.setToggleCheckAllExists(datatableController.getToggleCheckAllExists());\r\n\t\t\t\t}\r\n\r\n\r\n\t\t\t}\r\n\r\n\t\t};\r\n\t});\r\n","/**\r\n * @ngdoc directive\r\n * @name WebCoreModule.directive:wcClickOnce\r\n * @restrict A\r\n * @priority -1\r\n * @description\r\n * The wcClickOnce directive is applied as an attribute on any item a user can interact with. It will ensure the user\r\n * cannot accidentally double click the control. This is handy in preventing double submissions of forms or actions.\r\n */\r\n'use strict';\r\nangular.module('WebCoreModule')\r\n\t.directive('wcClickOnce', ['$timeout', function($timeout) {\r\n\t\tvar delay = 500;   // min milliseconds between clicks\r\n\r\n\t\treturn {\r\n\t\t\trestrict: 'A',\r\n\t\t\tpriority: -1,   // cause out postLink function to execute before native `ngClick`'s\r\n\t\t\t\t\t\t\t// ensuring that we can stop the propagation of the 'click' event\r\n\t\t\t\t\t\t\t// before it reaches `ngClick`'s listener\r\n\t\t\tlink: function(scope, elem) {\r\n\t\t\t\tvar disabled = false;\r\n\r\n\t\t\t\tvar onClick = function(evt) {\r\n\t\t\t\t\tif(disabled) {\r\n\t\t\t\t\t\tscope.$broadcast('onClickOnce');\r\n\t\t\t\t\t\tevt.preventDefault();\r\n\t\t\t\t\t\tevt.stopImmediatePropagation();\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tdisabled = true;\r\n\t\t\t\t\t\t$timeout(function() {\r\n\t\t\t\t\t\t\tdisabled = false;\r\n\t\t\t\t\t\t}, delay, false);\r\n\t\t\t\t\t}\r\n\t\t\t\t};\r\n\r\n\r\n\t\t\t\tscope.$on('$destroy', function() {\r\n\t\t\t\t\telem.off('click', onClick);\r\n\t\t\t\t});\r\n\t\t\t\telem.on('click', onClick);\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t}]);\r\n","/**\r\n * @ngdoc directive\r\n * @name WebCoreModule.directive:wcContinueIfValid\r\n * @restrict A\r\n * @requires ngController\r\n * @description\r\n * The wcContinueIfValid directive encorporates form validation into the submit button action. By applying this directive,\r\n * a click on the submit button will first check form validation. If the form is valid, the app will continue to the next\r\n * state defined in the state's 'workflow' data property. If the form is invalid, the app will not navigate and the user\r\n * will be allowed to make adjustments to their entries before trying navigation again.\r\n */\r\n'use strict';\r\nangular.module('WebCoreModule')\r\n\t.directive('wcContinueIfValid', ['$timeout', function($timeout) {\r\n\t\treturn {\r\n\t\t\trestrict: 'A',\r\n\t\t\trequired: '^ngController',\r\n\t\t\tcontroller: ['$state', '$element', '$scope', function($state, $element, $scope) {\r\n\t\t\t\t// jshint unused:true\r\n\t\t\t\t//written as a function so we can mock it in test code\r\n\r\n\t\t\t\t$state.$current.data = $state.$current.data || {};\r\n\r\n\t\t\t\t$state.$current.data.workflow = $state.$current.data.workflow|| null;\r\n\r\n\t\t\t\tif($state.$current.data.workflow) {\r\n\t\t\t\t\tthis.isWorkflowEnabled = true;\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\tthis.isWorkflowEnabled = false;\r\n\t\t\t\t}\r\n                /**\r\n                 * @ngdoc method\r\n                 * @name wcContinueIfValid.getWorkflowData\r\n                 * @methodOf WebCoreModule.directive:wcContinueIfValid\r\n                 * @return {Object} This object is a workflow data object\r\n\t\t\t\t * @description\r\n\t\t\t\t * This method returns the current states workflow\r\n                 */\r\n\t\t\t\tthis.getWorkflowData = function(){\r\n\t\t\t\t\t\treturn $state.$current.data.workflow;\r\n\t\t\t\t};\r\n\r\n                /**\r\n                 * @ngdoc method\r\n                 * @name wcContinueIfValid.navigateToState\r\n                 * @methodOf WebCoreModule.directive:wcContinueIfValid\r\n\t\t\t\t * @param {String} name This parameter is the name of the state to navigate to\r\n\t\t\t\t * @param {Object} params This object contains the parameters required to navigate to the named state\r\n\t\t\t\t * @param {Object} options This object contains the options used when navigating to the named state\r\n                 * @description\r\n                 * This method navigates to the state named in the method parameters using the parameters and options passed in to this method.\r\n                 */\r\n\t\t\t\tthis.navigateToState = function(name, params, options) {\r\n\t\t\t\t\tvar callingValues = {name: this.getWorkflowData().nextState, params: {}, options: {location: false, reload: false}};\r\n\r\n\t\t\t\t\t//if a single arg is passed, assume it's a state name and nav to it with other options as defaults\r\n\t\t\t\t\tif(arguments.length == 1) {\r\n\t\t\t\t\t\tcallingValues.name = name;\r\n\t\t\t\t\t}\r\n\t\t\t\t\t//determine what was passed in and use it accordingly\r\n\t\t\t\t\telse if(arguments.length > 1) {\r\n\t\t\t\t\t\tif(name) {\r\n\t\t\t\t\t\t\tcallingValues.name = name;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif(params) {\r\n\t\t\t\t\t\t\tcallingValues.params = params;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif(options) {\r\n\t\t\t\t\t\t\tangular.extend(callingValues.options, options);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t$state.go(callingValues.name, callingValues.params, callingValues.options);\r\n\t\t\t\t};\r\n\r\n                /**\r\n                 * @ngdoc method\r\n                 * @name wcContinueIfValid.clickHandler\r\n                 * @methodOf WebCoreModule.directive:wcContinueIfValid\r\n\t\t\t\t * @param {Object} viewCtrl This object holds the controller for the view of the page\r\n                 * @description\r\n                 * This function handles the event of moving to the next state by checking for callback and then navigating to either next state or default navigation.\r\n                 */\r\n\t\t\t\tthis.clickHandler = angular.bind(this, function(viewCtrl) {\r\n\t\t\t\t\t\tvar callback = this.getWorkflowData().controllerContinueCallbackFunctionName;\r\n\t\t\t\t\t\tif(callback) {\r\n\t\t\t\t\t\t\tvar retVal = viewCtrl[callback]($element);\r\n\t\t\t\t\t\t\tif(retVal) {\r\n\t\t\t\t\t\t\t\t//async case\r\n\t\t\t\t\t\t\t\tif(retVal.then) {\r\n\t\t\t\t\t\t\t\t\tretVal.then(angular.bind(this, function(obj){\r\n\t\t\t\t\t\t\t\t\t\tthis.navigateToState(obj.name, obj.params, obj.options);\r\n\t\t\t\t\t\t\t\t\t}), angular.bind(this, function(obj) {\r\n\t\t\t\t\t\t\t\t\t\tthis.navigateToState(obj.name, obj.params, obj.options);\r\n\t\t\t\t\t\t\t\t\t}));\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t//sync case\r\n\t\t\t\t\t\t\t\telse {\r\n\t\t\t\t\t\t\t\t\tthis.navigateToState(retVal.name, retVal.params, retVal.options);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t//nothing returned - do default nav\r\n\t\t\t\t\t\t\telse {\r\n\t\t\t\t\t\t\t\tthis.navigateToState();\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t//no callback - do default nav\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tthis.navigateToState();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t});\r\n                return $scope.continueIfValid = this;\r\n\t\t\t}],\r\n\t\t\tlink: function(scope, elem, attr, ctrl) {\r\n\t\t\t\t//these pieces aren't set up in a way that is easily unit testable.\r\n\t\t\t\t//leave them here in the link and allow e2e testing to pick them up.\r\n\t\t\t\telem.on('click', function() {\r\n\t\t\t\t\t$timeout(function(){\r\n\t\t\t\t\t\tvar viewCtrl = elem.controller();\r\n\t\t\t\t\t\tvar formName = elem[0].form.name;\r\n\r\n\r\n                        var formCtrl = scope[formName];\r\n\r\n                        if(!formCtrl) {\r\n                            //break out of isolate scope and then walk the tree for the form obj\r\n                            formCtrl = scope.$parent[formName];\r\n                        }\r\n\r\n\t\t\t\t\t\t// enable display of validation errors\r\n\t\t\t\t\t\t// viewCtrl.isFormSubmitted = true;\r\n\r\n\t\t\t\t\t\t// if form is valid, navigate to requested state and call the given function\r\n\t\t\t\t\t\tif(formCtrl.$valid) {\r\n\t\t\t\t\t\t\tformCtrl.$setPristine();\r\n\t\t\t\t\t\t\tif(ctrl.isWorkflowEnabled) {\r\n\t\t\t\t\t\t\t\tctrl.clickHandler(viewCtrl);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\telse  {\r\n\t\t\t\t\t\t\t\tscope.$broadcast('navigateToNextState');\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}, 0);\r\n\t\t\t\t});\r\n\r\n\t\t\t}\r\n\t\t};\r\n\t}]);","/**\r\n * @ngdoc directive\r\n * @name WebCoreModule.directive:wcFileUploadImage\r\n * @restrict E\r\n * @element div\r\n * @description\r\n * The wcFileUploadImage directive includes the html for upload photo.The upload can be done in two ways\r\n * one using uploading the image that is already available with the user and the other way is to take a photo\r\n * using the user's webcam and upload the image.\r\n */\r\n'use strict';\r\nangular.module('WebCoreModule')\r\n\t.directive('wcFileUploadImage', function() {\r\n\t\tvar template = [\r\n\t\t\t'<div ng-show=\"ctrl.webcamPresent\" class=\"row\">',\r\n\t\t\t\t'<div class=\"col-md-12\">',\r\n\t\t\t\t\t'<div class=\"row\">',\r\n\t\t\t\t\t\t'<div class=\"col-md-3 col-md-offset-1\" id=\"wc-file-upload-image-camera\"></div>',\r\n\t\t\t\t\t'</div>',\r\n\t\t\t\t\t'<div class=\"row\">',\r\n\t\t\t\t\t\t'<div class=\"col-md-4 col-md-offset-1\">',\r\n\t\t\t\t\t\t\t'<button type=\"button\" class=\"btn btn-tertiary \" ng-click=\"ctrl.turnCameraOff()\">Camera Off</button>',\r\n\t\t\t\t\t\t\t'<button type=\"button\" class=\"btn btn-tertiary\" ng-click=\"ctrl.turnCameraOn()\">Camera On</button>',\r\n\t\t\t\t\t\t\t'<button type=\"button\" class=\"btn btn-primary\" ng-click=\"ctrl.capturePicture()\">Take Picture</button>',\r\n\t\t\t\t\t\t'</div>',\r\n\t\t\t\t\t'</div>',\r\n\t\t\t\t'</div>',\r\n\t\t\t'</div>',\r\n\t\t\t'<div class=\"row\">',\r\n                '<div class=\"col-md-12\">',\r\n                    '<div class=\"row\">',\r\n                        '<div class=\"col-md-4 col-md-offset-1\">' +\r\n\t\t\t\t\t\t' <div class=\"input-group\">' +\r\n                            '<input wc-input-file=\"ctrl.chooseImageUpload\" file-types=\"ctrl.fileTypes()\" class=\"form-control\" type=\"file\" accept=\"image/\">' +\r\n\t\t\t\t\t\t'<span class=\"input-group-btn\">' +\r\n                        '<button type=\"button\" class=\"btn btn-tertiary\" type=\"button\" ng-click=\"ctrl.cancel()\"><i class=\"glyphicon glyphicon-remove\"  aria-hidden=\"true\" title=\"Remove\"></i><span class=\"sr-only\">Remove</span></button>',\r\n\t\t\t\t\t\t'</span>' +\r\n\t\t\t\t\t\t\t'</div>' +\r\n                        '</div>',\r\n                    '</div>',\r\n                    '<div class=\"row\">',\r\n                        '<div class=\"col-md-2 col-md-offset-1\">',\r\n                            '<button type=\"button\" class=\"btn btn-primary\" type=\"submit\" ng-click=\"ctrl.prepareForUpload()\">Upload Photo</button>',\r\n                        '</div>',\r\n                    '</div>',\r\n                '</div>',\r\n\t\t\t'</div>'\r\n\t\t].join('');\r\n\t\treturn {\r\n\t\t\trestrict: 'E',\r\n\t\t\tscope: {},\r\n\t\t\tbindToController: {\r\n\t\t\t\tonUpload: '&',\r\n\t\t\t\tfileTypes: '&'\r\n\t\t\t\t// thumbnail: '&'\r\n\t\t\t},\r\n\t\t\ttemplate: template,\r\n\t\t\tcontrollerAs: 'ctrl',\r\n\t\t\tcontroller: ['$rootScope', 'WcCameraService', 'WcImageFileService', 'WcDataFileService', '$scope',\r\n\t\t\t\tfunction ($rootScope, WcCameraService, WcImageFileService, WcDataFileService) { // jshint ignore:line\r\n\r\n                    /**\r\n                     * @ngdoc property\r\n                     * @name wcFileUploadImage.cameraElement\r\n                     * @propertyOf WebCoreModule.directive:wcFileUploadImage\r\n                     * @returns {Object} Holds the camera element from the page\r\n                     */\r\n                    /**\r\n                     * @ngdoc property\r\n                     * @name wcFileUploadImage.videoElement\r\n                     * @propertyOf WebCoreModule.directive:wcFileUploadImage\r\n                     * @returns {Object} Holds the video element from the webcam\r\n                     */\r\n                    /**\r\n                     * @ngdoc property\r\n                     * @name wcFileUploadImage.chooseImageUpload\r\n                     * @propertyOf WebCoreModule.directive:wcFileUploadImage\r\n                     * @returns {Object} Holds the image object chosen by the user to upload\r\n                     */\r\n                    /**\r\n                     * @ngdoc property\r\n                     * @name wcFileUploadImage.snapshotToUpload\r\n                     * @propertyOf WebCoreModule.directive:wcFileUploadImage\r\n                     * @returns {Object} Holds the image object taken from the webcam\r\n                     */\r\n                    /**\r\n                     * @ngdoc property\r\n                     * @name wcFileUploadImage.webcamPresent\r\n                     * @propertyOf WebCoreModule.directive:wcFileUploadImage\r\n                     * @returns {Boolean} Whether or not to display the webcam image on the page\r\n                     */\r\n\r\n\r\n                    this.cameraElement = $('#wc-file-upload-image-camera');\r\n\t\t\t\t\tthis.chooseImageUpload = null;\r\n\t\t\t\t\tthis.snapshotToUpload = null;\r\n\t\t\t\t\tthis.webcamPresent = false;\r\n\r\n\t\t\t\t\tWcCameraService.checkForCamera().then(angular.bind(this, function(webCamIsPresnet) {\r\n\t\t\t\t\t\tif(webCamIsPresnet) {\r\n\t\t\t\t\t\t\tWcCameraService.setCameraSize(800, 600);\r\n\t\t\t\t\t\t\tthis.webcamPresent = true;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})).catch(function(error) {\r\n\t\t\t\t\t\tconsole.log(error);\r\n\t\t\t\t\t});\r\n\r\n                    /**\r\n                     * @ngdoc method\r\n                     * @name wcFileUploadImage.cancel\r\n                     * @methodOf WebCoreModule.directive:wcFileUploadImage\r\n                     * @description\r\n                     * This method clears all potential uploads and closes and restarts the camera video preview element.\r\n                     */\r\n\t\t\t\t\tthis.cancel = function() {\r\n\t\t\t\t\t\tthis.chooseImageUpload = null;\r\n\t\t\t\t\t\tthis.snapshotToUpload = null;\r\n\r\n\t\t\t\t\t\tif(this.previewImageElement) {\r\n\t\t\t\t\t\t\tthis.previewImageElement.remove();\r\n\t\t\t\t\t\t\tdelete this.previewImageElement;\r\n\r\n\t\t\t\t\t\t\tthis.cameraElement.append(this.videoElement);\r\n\t\t\t\t\t\t\tthis.videoElement.get(0).play();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t};\r\n\r\n                    /**\r\n                     * @ngdoc method\r\n                     * @name wcFileUploadImage.capturePicture\r\n                     * @methodOf WebCoreModule.directive:wcFileUploadImage\r\n                     * @description\r\n                     * This method takes a still shot from the camera if the camera is available and saves it in this.snapshotToUpload, as well as showing a preview on the page.\r\n                     */\r\n\t\t\t\t\tthis.capturePicture = function() {\r\n\t\t\t\t\t\tvar snapShot;\r\n\r\n\t\t\t\t\t\tif(this.cameraElement.find('img').length === 0 && WcCameraService.cameraIsOn) {\r\n\t\t\t\t\t\t\tsnapShot = WcCameraService.takePicture();\r\n\t\t\t\t\t\t\tthis.previewImageElement = $('<img>').attr('src', snapShot);\r\n\r\n\t\t\t\t\t\t\tthis.videoElement.remove();\r\n\r\n\t\t\t\t\t\t\tthis.cameraElement.append(this.previewImageElement);\r\n\r\n\t\t\t\t\t\t\tthis.snapshotToUpload = snapShot;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t};\r\n\r\n                    /**\r\n                     * @ngdoc method\r\n                     * @name wcFileUploadImage.prepareForUpload\r\n                     * @methodOf WebCoreModule.directive:wcFileUploadImage\r\n                     * @description\r\n                     * This method takes the chosen image or optionally the snapshot taken from the webcame and prepares it to be uploaded to the server.\r\n                     */\r\n\t\t\t\t\tthis.prepareForUpload = function() {\r\n\t\t\t\t\t\tvar imageToUpload = this.chooseImageUpload || this.snapshotToUpload;\r\n\t\t\t\t\t\tvar imageToUploadObject = {};\r\n\r\n\t\t\t\t\t\tif(imageToUpload && typeof imageToUpload !== 'string' && imageToUpload.length > 0) {\r\n\t\t\t\t\t\t\tWcDataFileService.readFile(imageToUpload[0]).then(function(imageURI) {\r\n\t\t\t\t\t\t\t\tvar imageFileData = WcDataFileService.prepareForFileUpload(imageURI);\r\n\t\t\t\t\t\t\t\timageToUploadObject.imageBase64String =imageFileData.base64String;\r\n\t\t\t\t\t\t\t\timageToUploadObject.imageMIMEType =imageFileData.MIMEType;\r\n\t\t\t\t\t\t\t\timageToUploadObject.fileType = WcDataFileService.getFileType(imageToUpload[0]);\r\n\t\t\t\t\t\t\t\timageToUploadObject.description = '...';\r\n\r\n\t\t\t\t\t\t\t\treturn WcImageFileService.createImageURI(imageURI);\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t.then(angular.bind(this, function(thumbnailURI) {\r\n\t\t\t\t\t\t\t\tvar thumbnailFileData = WcDataFileService.prepareForFileUpload(thumbnailURI);\r\n\t\t\t\t\t\t\t\timageToUploadObject.thumbnailBase64String =thumbnailFileData.base64String;\r\n\t\t\t\t\t\t\t\timageToUploadObject.thumbnailMIMEType =thumbnailFileData.MIMEType;\r\n\r\n\t\t\t\t\t\t\t\tthis.onUpload({imageObject: imageToUploadObject});\r\n\t\t\t\t\t\t\t\tthis.cancel();\r\n\r\n\t\t\t\t\t\t\t\tthis.original = $('<img>').attr('src', imageToUploadObject.imageData);\r\n\t\t\t\t\t\t\t\tthis.thumb = $('<img>').attr('src', thumbnailURI);\r\n\t\t\t\t\t\t\t}));\r\n\r\n\t\t\t\t\t\t} else if (typeof imageToUpload === 'string') {\r\n\t\t\t\t\t\t\tWcImageFileService.createImageURI(imageToUpload).then(angular.bind(this, function(thumbnailURI) {\r\n\t\t\t\t\t\t\t\timageToUploadObject.imageData = imageToUpload;\r\n\t\t\t\t\t\t\t\timageToUploadObject.thumbnailData =\tthumbnailURI;\r\n\t\t\t\t\t\t\t\timageToUploadObject.fileType = 'jpeg';\r\n\t\t\t\t\t\t\t\timageToUploadObject.description = '...';\r\n\r\n\t\t\t\t\t\t\t\tthis.original = $('<img>').attr('src', imageToUploadObject.imageData);\r\n\t\t\t\t\t\t\t\tthis.thumb = $('<img>').attr('src', imageToUploadObject.thumbnailData);\r\n\r\n\t\t\t\t\t\t\t\tthis.onUpload({imageObject: imageToUploadObject});\r\n\t\t\t\t\t\t\t\tthis.cancel();\r\n\r\n\t\t\t\t\t\t\t}));\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t};\r\n\r\n                    /**\r\n                     * @ngdoc method\r\n                     * @name wcFileUploadImage.turnCameraOff\r\n                     * @methodOf WebCoreModule.directive:wcFileUploadImage\r\n                     * @description\r\n                     * This method turns off the webcam and removes its preview from the page\r\n                     */\r\n\t\t\t\t\tthis.turnCameraOff = function() {\r\n\t\t\t\t\t\tWcCameraService.stopCamera();\r\n\t\t\t\t\t\tthis.videoElement.remove();\r\n\t\t\t\t\t};\r\n\r\n                    /**\r\n                     * @ngdoc method\r\n                     * @name wcFileUploadImage.turnCameraOn\r\n                     * @methodOf WebCoreModule.directive:wcFileUploadImage\r\n                     * @description\r\n                     * This method turns on the webcam if it is available\r\n                     */\r\n\t\t\t\t\tthis.turnCameraOn = function() {\r\n\t\t\t\t\t\tif(this.webcamPresent && !WcCameraService.cameraIsOn) {\r\n\r\n\t\t\t\t\t\t\tWcCameraService.returnVideoElement().then(angular.bind(this, function(videoElement) {\r\n\t\t\t\t\t\t\t\tthis.videoElement = videoElement;\r\n\r\n\t\t\t\t\t\t\t\t$('#wc-file-upload-image-camera').append(this.videoElement);\r\n\t\t\t\t\t\t\t\tWcCameraService.startCamera();\r\n\t\t\t\t\t\t\t})).catch(function(error) {\r\n\t\t\t\t\t\t\t\tconsole.log(error);\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t};\r\n\t\t\t}],\r\n\t\t\tlink: function(scope, element, attr, ctrl) { // jshint ignore:line\r\n\t\t\t\tctrl.addImages = function() {\r\n\t\t\t\t\telement.append(ctrl.original);\r\n\t\t\t\t\telement.append(ctrl.thumb);\r\n\t\t\t\t};\r\n\t\t\t}\r\n\r\n\t\t};\r\n\t}\r\n);\r\n","/**\r\n * @ngdoc directive\r\n * @name WebCoreModule.directive:wcInputFile\r\n * @description\r\n * The wcInputFile directive holds the input file related operations. This module is widely used in file upload operations.\r\n */\r\n\r\n'use strict';\r\n\r\n// http://stackoverflow.com/questions/17063000/ng-model-for-input-type-file\r\nangular.module('WebCoreModule')\r\n\t.directive(\"wcInputFile\", ['_', function (_) {\r\n\t\treturn {\r\n\t\t\tscope: {},\r\n\t\t\tbindToController: {\r\n\t\t\t\twcInputFile: '=',\r\n\t\t\t\tfileTypes: '&'\r\n\t\t\t},\r\n\t\t\tcontrollerAs: 'ctrl',\r\n\t\t\tcontroller: ['$scope', '$element', 'WcDataFileService', function($scope, $element, WcDataFileService) {\r\n\t\t\t\tvar vm = this;\r\n\r\n                /**\r\n                 * @ngdoc method\r\n                 * @name wcInputFile.onChange\r\n                 * @methodOf WebCoreModule.directive:wcInputFile\r\n\t\t\t\t * @param {Object} changeEvent This object describes the change that has occured on the page\r\n                 * @description\r\n                 * This method makes changes to the input file window based on the change made\r\n                 */\r\n\t\t\t\tthis.onChange = function (changeEvent) {\r\n\t\t\t\t\t// TODO Just do one at a time\r\n\t\t\t\t\tvar files = changeEvent.target.files;\r\n\t\t\t\t\tvar fileTypes;\r\n\t\t\t\t\t$scope.$apply(function () {\r\n\t\t\t\t\t\tif(vm.fileTypes() !== undefined && vm.fileTypes().length > 0) {\r\n\t\t\t\t\t\t\tfileTypes =_.map(files, function(item) {\r\n\t\t\t\t\t\t\t\t//noinspection UnnecessaryLocalVariableJS\r\n                                var fileType = WcDataFileService.getFileType(item);\r\n\t\t\t\t\t\t\t\treturn fileType;\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t.filter(function(extension) {\r\n\t\t\t\t\t\t\t\t\treturn vm.fileTypes().indexOf(extension) >= 0;\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tif(!fileTypes || fileTypes.length === files.length) {\r\n\t\t\t\t\t\t\tvm.wcInputFile = files;\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t$element.val(null);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t};\r\n\r\n\r\n\t\t\t}],\r\n\t\t\tlink: function (scope, element, attrs, ctrl) { // jshint ignore:line\r\n\t\t\t\telement.bind('change', ctrl.onChange);\r\n\r\n\t\t\t\tscope.$watch(function() {\r\n\t\t\t\t\treturn ctrl.wcInputFile;\r\n\t\t\t\t}, function(file) {\r\n                    if (file){\r\n                        console.log('file', file[0]);\r\n                \t} else {\r\n\t\t\t\t\t\telement.val(null);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t};\r\n\t}]);","/**\r\n * @ngdoc directive\r\n * @name WebCoreModule.directive:wcLoadingIndicator\r\n * @restrict A\r\n * @description\r\n * The wcLoadingIndicator directive includes the html for a visual loading indicator and a cover to prevent the user from\r\n * clicking on things as the app loads. The directive adds interceptors to the request/response process, which are used\r\n * to hide and show the indicator accordingly.\r\n */\r\n'use strict';\r\nangular.module('WebCoreModule')\r\n\t.directive('wcLoadingIndicator', function() {\r\n\t\treturn {\r\n\t\t\trestrict: 'A',\r\n\t\t\ttemplate: '<div id=\"loading-cover\"></div><div id=\"loading-indicator\"><span>Loading...</span></div>',\r\n\t\t\tcontroller: ['$scope', 'WcHttpRequestService', function($scope, WcHttpRequestService) {\r\n\r\n\t\t\t\tvar requestCount = 0;\r\n\t\t\t\tvar pendingStateChange = false;\r\n\r\n                /**\r\n                 * @ngdoc method\r\n                 * @name wcLoadingIndicator.showLoadingIndicator\r\n                 * @methodOf WebCoreModule.directive:wcLoadingIndicator\r\n                 * @description\r\n                 * This method displays the loading indicator on the screen\r\n                 */\r\n\t\t\t\tthis.showLoadingIndicator = function() {\r\n\t\t\t\t\t$('#loading-cover').show().animate({opacity: 1.0}, 300);\r\n\t\t\t\t\t$('#loading-indicator').show().animate({opacity: 1.0}, 300);\r\n\t\t\t\t};\r\n\r\n                /**\r\n                 * @ngdoc method\r\n                 * @name wcLoadingIndicator.hideLoadingIndicator\r\n                 * @methodOf WebCoreModule.directive:wcLoadingIndicator\r\n                 * @description\r\n                 * This method hides the loading indicator from the screen\r\n                 */\r\n\t\t\t\tthis.hideLoadingIndicator = function() {\r\n\t\t\t\t\t$('#loading-indicator').hide().animate({opacity:0}, 10);\r\n\t\t\t\t\t$('#loading-cover').hide().animate({opacity:0}, 10);\r\n\t\t\t\t};\r\n\r\n                /**\r\n                 * @ngdoc method\r\n                 * @name wcLoadingIndicator.incrementPendingCounterAndShow\r\n                 * @methodOf WebCoreModule.directive:wcLoadingIndicator\r\n                 * @description\r\n                 * This method increments a counter representing the number of actions pending and calls showLoadingIndicator if that count becomes 1\r\n                 */\r\n\t\t\t\tthis.incrementPendingCounterAndShow = angular.bind(this, function() {\r\n\t\t\t\t\t//increment the counter\r\n\t\t\t\t\trequestCount++;\r\n\r\n\t\t\t\t\t//only call to show the indicator when incrementing from 0 to 1.\r\n\t\t\t\t\t//will not need to do so for subsequent calls, as it will already be shown\r\n\t\t\t\t\tif(requestCount === 1) {\r\n\t\t\t\t\t\tthis.showLoadingIndicator();\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\r\n                /**\r\n                 * @ngdoc method\r\n                 * @name wcLoadingIndicator.decrementPendingCounterAndHide\r\n                 * @methodOf WebCoreModule.directive:wcLoadingIndicator\r\n                 * @description\r\n                 * This method decremenents a counter representing the number of actions pending and calls hideLoadingIndicator if that count becomes 0\r\n                 */\r\n\t\t\t\tthis.decrementPendingCounterAndHide = angular.bind(this, function() {\r\n\t\t\t\t\t//decrement the counter\r\n\t\t\t\t\trequestCount--;\r\n\r\n\t\t\t\t\t//only call to hide the indicator when decrementing from 1 to 0.\r\n\t\t\t\t\tif(requestCount === 0) {\r\n\t\t\t\t\t\tthis.hideLoadingIndicator();\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\r\n\t\t\t\tWcHttpRequestService.addRequestInterceptor(angular.bind(this, function() {\r\n\t\t\t\t\tthis.incrementPendingCounterAndShow();\r\n\t\t\t\t}));\r\n\r\n\t\t\t\tWcHttpRequestService.addErrorInterceptor(angular.bind(this, function() {\r\n\t\t\t\t\tif(!pendingStateChange) {\r\n\t\t\t\t\t\tthis.decrementPendingCounterAndHide();\r\n\t\t\t\t\t}\r\n\t\t\t\t}));\r\n\r\n\t\t\t\tWcHttpRequestService.addResponseInterceptor(angular.bind(this, function() {\r\n\t\t\t\t\tvar data = arguments[0];\r\n\r\n\t\t\t\t\tif(!pendingStateChange) {\r\n\t\t\t\t\t\tthis.decrementPendingCounterAndHide();\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn data;\r\n\t\t\t\t}));\r\n\r\n\t\t\t\t$scope.$on('$stateChangeStart', angular.bind(this, function() {\r\n\t\t\t\t\tpendingStateChange = true;\r\n\t\t\t\t}));\r\n\r\n                /**\r\n                 * @ngdoc method\r\n                 * @name wcLoadingIndicator.hideLoadingIndicatorCallback\r\n                 * @methodOf WebCoreModule.directive:wcLoadingIndicator\r\n                 * @description\r\n                 * This method resets the counter of pending actions and hides the loading indicator\r\n                 */\r\n\t\t\t\tthis.hideLoadingIndicatorCallback = angular.bind(this, function() {\r\n\t\t\t\t\trequestCount = 0;\r\n\t\t\t\t\tpendingStateChange = false;\r\n\t\t\t\t\tthis.hideLoadingIndicator();\r\n\t\t\t\t});\r\n\r\n\t\t\t\t$scope.$on('$stateChangeError', this.hideLoadingIndicatorCallback);\r\n\t\t\t\t$scope.$on('$viewContentLoaded', this.hideLoadingIndicatorCallback);\r\n\t\t\t\t$scope.$on('Unauthenticated', this.hideLoadingIndicatorCallback);\r\n\t\t\t\t$scope.$on('Offline', this.hideLoadingIndicatorCallback);\r\n\r\n\t\t\t\treturn $scope.loadingIndicator = this;\r\n\t\t\t}]\r\n\t\t};\r\n\t});\r\n","/**\r\n * @ngdoc directive\r\n * @name WebCoreModule.directive:wcNavMenu\r\n * @restrict A\r\n * @scope\r\n * @param {object} menuData The property to assign the menu data into so the view can access it\r\n * @param {array} menuDataUrl Array of objects defining the menu's structure and text\r\n * @description\r\n * The wcNavMenu directive generates a navigation menu from the given menu data url. The url should expose an array of objects\r\n * defining the menu's structure and text.\r\n */\r\n'use strict';\r\nangular.module('WebCoreModule')\r\n\t.directive('wcNavMenu',  function() { // jshint ignore:line\r\n\t\treturn {\r\n\t\t\trestrict: 'A',\r\n\t\t\tscope: {\r\n\t\t\t\tmenuData: '=menuData',\r\n\t\t\t\tmenuDataUrl: '@menuDataUrl'\r\n\t\t\t},\r\n\t\t\ttransclude: true,\r\n\t\t\ttemplate: \t\"<nav class=\\\"navbar navbar-default\\\" role=\\\"navigation\\\">\" +\r\n\t\t\t\t\t\t\t\"<div class=\\\"container-fluid\\\">\" +\r\n\t\t\t\t\t\t\t\t\"<div class=\\\"navbar-header\\\">\" +\r\n\t\t\t\t\t\t\t\t\t\"<button id=\\\"toggle-nav-menu-collapse\\\" type=\\\"button\\\" class=\\\"navbar-toggle collapsed\\\" ng-click=\\\"toggleNavbarCollpase($event)\\\" aria-expanded=\\\"false\\\">\" +\r\n\t\t\t\t\t\t\t\t\t\t\"<span ng-cloak class=\\\"sr-only\\\">{{'application.navigation.toggleTitle' | translate}}</span>\" +\r\n\t\t\t\t\t\t\t\t\t\t\"<span class=\\\"icon-bar\\\"></span>\" +\r\n\t\t\t\t\t\t\t\t\t\t\"<span class=\\\"icon-bar\\\"></span>\" +\r\n\t\t\t\t\t\t\t\t\t\t\"<span class=\\\"icon-bar\\\"></span>\" +\r\n\t\t\t\t\t\t\t\t\t\"</button>\" +\r\n\t\t\t\t\t\t\t\t\"</div>\" +\r\n\t\t\t\t\t\t\t\t\"<div uib-collapse=\\\"navbarCollapsed\\\" class=\\\"collapse navbar-collapse\\\" id=\\\"primary-nav\\\" role=\\\"menu\\\">\" +\r\n\t\t\t\t\t\t\t\t\t\"<ul class=\\\"nav navbar-nav\\\">\" +\r\n\t\t\t\t\t\t\t\t\t\t\"<li role=\\\"menuitem\\\" ng-cloak wc-protected-resource=\\\"{{menu.protected}}\\\" ng-repeat=\\\"menu in menuData\\\" ng-class=\\\"{dropdown:menu.subMenu}\\\" ui-sref-active=\\\"active\\\">\" +\r\n\t\t\t\t\t\t\t\t\t\t\t\"<a ng-cloak ng-click=\\\"collapseNavbar()\\\" ng-if=\\\"!menu.subMenu\\\" ui-sref=\\\"{{menu.state | translate}}\\\" ui-sref-opts=\\\"{reload: true, notify: true}\\\">\" +\r\n\t\t\t\t\t\t\t\t\t\t\t\t\"{{menu.label | translate}}\" +\r\n\t\t\t\t\t\t\t\t\t\t\t\"</a>\" +\r\n\t\t\t\t\t\t\t\t\t\t\t\"<a ng-cloak ng-if=\\\"menu.subMenu\\\" ng-click=\\\"MainMenuCollpase($event)\\\"  role=\\\"button\\\"  aria-expanded=\\\"false\\\" href class=\\\"dropdown-toggle\\\" data-toggle=\\\"dropdown\\\">{{menu.label | translate}}\" +\r\n\t\t\t\t\t\t\t\t\t\t\t\t\"<span ng-if=\\\"menu.subMenu\\\" class=\\\"caret\\\"></span>\" +\r\n\t\t\t\t\t\t\t\t\t\t\t\"</a>\" +\r\n\t\t\t\t\t\t\t\t\t\t\t\"<wc-sub-menu></wc-sub-menu>\" +\r\n\t\t\t\t\t\t\t\t\t\t\"</li>\" +\r\n\t\t\t\t\t\t\t\t\t\"</ul>\" +\r\n\t\t\t\t\t\t\t\t\t\"<span ng-transclude></span>\" +\r\n\t\t\t\t\t\t\t\t\"</div>\" +\r\n\t\t\t\t\t\t\t\"</div>\" +\r\n\t\t\t\t\t\t\"</nav>\",\r\n\t\t\tcontroller: ['$scope', '$element', '$attrs', '$http',\r\n\t\t\t\tfunction($scope, $element, $attrs, $http) { // jshint ignore:line\r\n\r\n\t\t\t\t\tif($scope.menuDataUrl){\r\n\t\t\t\t\t\t$http.get($scope.menuDataUrl).then(function(response) {\r\n\t\t\t\t\t\t\t$scope.menuData = response.data;\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t$scope.$on('$stateChangeStart', function() {\r\n\r\n\t\t\t\t\t\t$('nav .in, nav .open').removeClass('in open');\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t\t$scope.$on('collapseNavBar', function() {\r\n\t\t\t\t\t\t$scope.collapseNavbar();\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t\t$scope.navbarCollapsed = true;\r\n\r\n\t\t\t\t\t$scope.MainMenuCollpase = function(event) {\r\n\t\t\t\t\t\tevent.stopPropagation();\r\n\t\t\t\t\t\tvar nav=$(event.target.parentElement).parent();\r\n\t\t\t\t\t\tnav.find('li.dropdown,li.dropdown-submenu').not(event.target.parentElement).removeClass(\"open\");\r\n\t\t\t\t\t\t$(event.target.parentElement).toggleClass(\"open\");\r\n\t\t\t\t\t};\r\n\r\n\t\t\t\t\t$scope.toggleNavbarCollpase = function() { // jshint ignore:line\r\n\t\t\t\t\t\t$scope.navbarCollapsed = !$scope.navbarCollapsed;\r\n\t\t\t\t\t};\r\n\r\n\t\t\t\t\t$scope.collapseNavbar = function() { // jshint ignore:line\r\n\t\t\t\t\t};\r\n\t\t\t\t}]\r\n\r\n\r\n\t\t};\r\n\t})\r\n\t.directive('wcSubMenu', ['$compile', function($compile) {\r\n\t\treturn {\r\n\t\t\trestrict: 'E',\r\n\t\t\tscope: true,\r\n\t\t\tlink: function(scope, element) {\r\n\t\t\t\t//scope.subMenu = scope.menu;\r\n\r\n\t\t\t\tscope.collapasesubMenu=function(event){\r\n\t\t\t\t\tevent.stopPropagation();\r\n\t\t\t\t\telement=event.target.parentElement;\r\n\t\t\t\t\t$( element).toggleClass(\"open\");\r\n\t\t\t\t};\r\n\r\n\t\t\t\tif(scope.menu) {\r\n\t\t\t\t\tvar template = angular.element('<ul class=\"dropdown-menu\">' +\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t'<li wc-protected-resource=\"{{menu.protected}}\" ng-repeat=\"menu in menu.subMenu\" ng-class=\\\"{\\'dropdown-submenu\\':menu.subMenu}\\\" ui-sref-active=\\\"active\\\">' +\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t'<a ng-cloak ng-if=\\\"!menu.subMenu\\\" ui-sref=\"{{menu.state | translate}}\" ui-sref-opts=\"{reload: true, notify: true}\">{{menu.label | translate}}</a>' +\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t'<a ng-cloak ng-if=\\\"menu.subMenu\\\" ng-click=\\\"collapasesubMenu($event)\\\" href>{{menu.label | translate}}</a>' +\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t'<wc-sub-menu ng-cloak ng-if=\\\"menu.subMenu\\\"></wc-sub-menu>' +\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t'</li>' +\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t'</ul>');\r\n\r\n\t\t\t\t\tvar linkFunction = $compile(template);\r\n\t\t\t\t\tlinkFunction(scope);\r\n\t\t\t\t\telement.replaceWith(template);\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\telement.remove();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t};\r\n\t}]);\r\n","//credit to stack overflow for a lot of this one. http://stackoverflow.com/questions/24707508/angularjs-set-global-ngmodeloptions#answer-26537212\r\n\r\n/**\r\n * @ngdoc directive\r\n * @name WebCoreModule.directive:ngModelDirective\r\n * @description\r\n * The ngModelDirective is a decorative directive mainly for HTML control operations,\r\n * this directive is responsible for set blur option in HTML fields.\r\n */\r\n\r\n'use strict';\r\nangular.module('WebCoreModule').config(['$provide', function($provide) {\r\n\r\n\t$provide.decorator('ngModelDirective', ['$delegate', function($delegate) {\r\n\t\tvar directive = $delegate[0];\r\n\t\tvar link = directive.link; // jshint ignore:line\r\n\t\tvar shouldSetBlurUpdateEvent = function (element) {\r\n\t\t\t// The blur event is only really applicable to input controls so\r\n\t\t\t// we want to stick with the default events for selects, checkboxes & radio buttons.\r\n\t\t\t// also stick with default events for typeahead controls and the ui-select\r\n\r\n\t\t\tvar nodeName = element.nodeName.toLowerCase();\r\n\t\t\t//for some reason comments end up in here at times. short circuit this if that's the case.\r\n\t\t\tif(element.nodeName.toLowerCase() === '#comment') return false;\r\n\t\t\tvar nodeType = undefined;\r\n\t\t\tif(typeof element.type === 'string') {\r\n\t\t\t\tnodeType = element.type.toLowerCase();\r\n\t\t\t}\r\n\r\n\t\t\treturn\t(nodeName === 'textarea' && !element.hasAttribute('maxlength')) ||\r\n\t\t\t\t\t(nodeName === 'div' && !element.classList.contains('ui-select-bootstrap') && !element.hasAttribute('wc-data-table') && !element.hasAttribute('uib-datepicker-popup-wrap')) ||\r\n\t\t\t\t\t(nodeName === 'input' && nodeType !== 'checkbox' && nodeType !== 'radio' && nodeType !== 'range' && !element.hasAttribute('uib-typeahead') && !element.hasAttribute('uib-datepicker-popup'));\r\n\t\t};\r\n\r\n\t\t// save a reference to the original compile function\r\n\t\tvar compileFn = directive.compile;\r\n\t\tdirective.compile = function() {\r\n\t\t\tvar link = compileFn.apply(this, arguments);\r\n\r\n\t\t\treturn {\r\n\t\t\t\tpre: function ngModelPostLink(scope, element, attr, ctrls) {\r\n\t\t\t\t\tif (shouldSetBlurUpdateEvent(element[0])) {\r\n\t\t\t\t\t\tvar ngModelController = ctrls[0];\r\n                        ngModelController.$overrideModelOptions({\r\n                            updateOn: 'blur',\r\n                            updateOnDefault: false\r\n                        });\r\n\t\t\t\t\t}\r\n\t\t\t\t\tlink.pre.apply(this, arguments);\r\n\t\t\t\t},\r\n\t\t\t\tpost: link.post\r\n\t\t\t};\r\n\t\t};\r\n\r\n\t\treturn $delegate;\r\n\t}]);\r\n}]);","/**\r\n * @ngdoc directive\r\n * @name WebCoreModule.directive:wcOfflineIndicator\r\n * @restrict A\r\n * @description\r\n * The wcOfflineIndicator directive includes a response interceptor to watch for when requests over the network fail. When things\r\n * fail, this directive will add an AlertConsole like message to notify the user of the situation.\r\n */\r\n'use strict';\r\nangular.module('WebCoreModule')\r\n\t.directive('wcOfflineIndicator', function() {\r\n\t\treturn {\r\n\t\t\trestrict: 'A',\r\n\t\t\ttemplate: '<div class=\"row\"><div id=\"offline-indicator\" class=\"col-xs-12 alert alert-warning\" ng-switch=\"checking\">' +\r\n\t\t\t'<uib-alert type=\"warning\"><span class=\"glyphicon glyphicon-warning-sign\" ng-switch-when=\"false\"></span><span class=\"glyphicon glyphicon-refresh glyphicon-refresh-animate\" ng-switch-when=\"true\"></span>' +\r\n\t\t\t'<span ng-cloak class=\"alert-text\">{{\\'offlineIndicator.offlineMessage\\'|translate}} ' +\r\n\t\t\t'<a href ng-click=\"checkNetworkState()\">{{\\'offlineIndicator.retryConnection\\'|translate}}</a></span></uib-alert></div>' +\r\n\t\t\t'<div id=\"unavailable-offline\" class=\"col-xs-12 alert alert-warning\" ng-switch=\"checking\">' +\r\n\t\t\t'<uib-alert type=\"danger\"><span class=\"glyphicon glyphicon-remove-circle\" ng-switch-when=\"false\"></span><span class=\"glyphicon glyphicon-refresh glyphicon-refresh-animate\" ng-switch-when=\"true\"></span>' +\r\n\t\t\t'<span ng-cloak class=\"alert-text\">{{\\'offlineIndicator.unavailableMessage\\'|translate}} ' +\r\n\t\t\t'<a href ng-click=\"checkNetworkState()\">{{\\'offlineIndicator.retryConnection\\'|translate}}</a></span></uib-alert></div>' +\r\n\t\t\t'<div id=\"unauth-indicator\" class=\"col-xs-12 alert alert-warning\" ng-switch=\"checking\">' +\r\n\t\t\t'<uib-alert type=\"warning\"><span class=\"glyphicon glyphicon-warning-sign\" ng-switch-when=\"false\"></span><span class=\"glyphicon glyphicon-refresh glyphicon-refresh-animate\" ng-switch-when=\"true\"></span>' +\r\n\t\t\t\t'<span ng-cloak class=\"alert-text\">{{\\'unauthIndicator.unauthMessage\\'|translate}} ' +\r\n\t\t\t'<a href ng-cloak ng-click=\"wslLogin()\">{{\\'unauthIndicator.wslLogin\\'|translate}}</a></span></uib-alert></div></div>',\r\n\t\t\treplace: true,\r\n\t\t\tcontroller: ['WcHttpRequestService', '$scope', '$window', '$timeout', '$state', 'WcTranslateConfiguratorService', 'WcConstants',\r\n\t\t\t\tfunction(WcHttpRequestService, $scope, $window, $timeout, $state, WcTranslateConfiguratorService, WcConstants) {\r\n\r\n\t\t\t\tWcTranslateConfiguratorService.loadPartAndRefresh('WC-offlineIndicator');\r\n\r\n\t\t\t\t// Ensure directive is hidden initially\r\n\t\t\t\t$('#offline-indicator').hide();\r\n\t\t\t\t$('#unavailable-offline').hide();\r\n\t\t\t\t$('#unauth-indicator').hide();\r\n\r\n\t\t\t\t$scope.checking = false;\r\n\r\n\t\t\t\t/**\r\n\t\t\t\t * @ngdoc method\r\n\t\t\t\t * @name wcOfflineIndicator.showOfflineIndicator\r\n\t\t\t\t * @methodOf WebCoreModule.directive:wcOfflineIndicator\r\n\t\t\t\t * @description\r\n\t\t\t\t * Finds and shows the alertbox for the offline indicator and adds the pulse class on a timeout of 2sec.\r\n\t\t\t\t */\r\n\t\t\t\tthis.showOfflineIndicator = function() {\r\n\t\t\t\t\t$('#offline-indicator').show();\r\n\t\t\t\t\tvar alertBox = $('#offline-indicator .alert');\r\n\t\t\t\t\talertBox.addClass('pulse');\r\n\t\t\t\t\t$timeout(function(){\r\n\t\t\t\t\t\talertBox.removeClass('pulse');\r\n\t\t\t\t\t},2000);\r\n\t\t\t\t\t$window.scrollTo(0,1);\r\n\t\t\t\t};\r\n\r\n\t\t\t\t/**\r\n\t\t\t\t * @ngdoc method\r\n\t\t\t\t * @name wcOfflineIndicator.hideOfflineIndicator\r\n\t\t\t\t * @methodOf WebCoreModule.directive:wcOfflineIndicator\r\n\t\t\t\t * @description\r\n\t\t\t\t * Finds and hides the offline indicator alertbox\r\n\t\t\t\t */\r\n\t\t\t\tthis.hideOfflineIndicator = function() {\r\n\t\t\t\t\t$('#offline-indicator').hide();\r\n\t\t\t\t};\r\n\r\n\t\t\t\t/**\r\n\t\t\t\t * @ngdoc method\r\n\t\t\t\t * @name wcOfflineIndicator.showUnavailableOffline\r\n\t\t\t\t * @methodOf WebCoreModule.directive:wcOfflineIndicator\r\n\t\t\t\t * @description\r\n\t\t\t\t * Finds and shows the message regarding features being unavailable offline\r\n\t\t\t\t */\r\n\t\t\t\tthis.showUnavailableOffline = function() {\r\n\t\t\t\t\t$('#unavailable-offline').show();\r\n\t\t\t\t\tvar alertBox = $('#unavailable-offline .alert');\r\n\t\t\t\t\talertBox.addClass('pulse');\r\n\t\t\t\t\t$timeout(function(){\r\n\t\t\t\t\t\talertBox.removeClass('pulse');\r\n\t\t\t\t\t},2000);\r\n\t\t\t\t\t$window.scrollTo(0,1);\r\n\t\t\t\t};\r\n\r\n\t\t\t\t/**\r\n\t\t\t\t * @ngdoc method\r\n\t\t\t\t * @name wcOfflineIndicator.hideUnavailableOffline\r\n\t\t\t\t * @methodOf WebCoreModule.directive:wcOfflineIndicator\r\n\t\t\t\t * @description\r\n\t\t\t\t * Finds and hides the message regarding features being unavailable offline\r\n\t\t\t\t */\r\n\t\t\t\tthis.hideUnavailableOffline = function() {\r\n\t\t\t\t\t$('#unavailable-offline').hide();\r\n\t\t\t\t};\r\n\r\n\t\t\t\t/**\r\n\t\t\t\t * @ngdoc method\r\n\t\t\t\t * @name wcOfflineIndicator.showUnauthIndicator\r\n\t\t\t\t * @methodOf WebCoreModule.directive:wcOfflineIndicator\r\n\t\t\t\t * @description\r\n\t\t\t\t * Finds and shows message that user is not correctly authorized to use the application\r\n\t\t\t\t */\r\n\t\t\t\tthis.showUnauthIndicator = function() {\r\n\t\t\t\t\t$('#unauth-indicator').show();\r\n\t\t\t\t\tvar alertBox = $('#unauth-indicator .alert');\r\n\t\t\t\t\talertBox.addClass('pulse');\r\n\t\t\t\t\t$timeout(function(){\r\n\t\t\t\t\t\talertBox.removeClass('pulse');\r\n\t\t\t\t\t},2000);\r\n\t\t\t\t\t$window.scrollTo(0,1);\r\n\t\t\t\t};\r\n\r\n\t\t\t\t/**\r\n\t\t\t\t * @ngdoc method\r\n\t\t\t\t * @name wcOfflineIndicator.hideUnauthIndicator\r\n\t\t\t\t * @methodOf WebCoreModule.directive:wcOfflineIndicator\r\n\t\t\t\t * @description\r\n\t\t\t\t * Finds and hides message that user is not correctly authorized to use the application\r\n\t\t\t\t */\r\n\t\t\t\tthis.hideUnauthIndicator = function() {\r\n\t\t\t\t\t$('#unauth-indicator').hide();\r\n\t\t\t\t};\r\n\r\n\t\t\t\t$scope.checkNetworkState = function() {\r\n\t\t\t\t\t$scope.checking = true;\r\n\t\t\t\t\tWcHttpRequestService.getNetworkState().then(function(state){\r\n\t\t\t\t\t\t//after clicking the check link, force a redirect to wsl if needed\r\n\t\t\t\t\t\tif(state === 'unauthenticated') {\r\n\t\t\t\t\t\t\t$scope.wslLogin();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t$scope.checking = false;\r\n\t\t\t\t\t});\r\n\t\t\t\t};\r\n\r\n\t\t\t\t$scope.wslLogin = function() {\r\n\t\t\t\t\t$window.location.href = WcConstants.wslBaseUrl + encodeURIComponent($window.location.href);\r\n\t\t\t\t};\r\n\r\n\t\t\t\tWcHttpRequestService.addResponseInterceptor(angular.bind(this, function(){\r\n\t\t\t\t\t// hide indicators if we have a successful ReST response\r\n\t\t\t\t\tthis.hideOfflineIndicator();\r\n\t\t\t\t\tthis.hideUnavailableOffline();\r\n\t\t\t\t\tthis.hideUnauthIndicator();\r\n\t\t\t\t}));\r\n\r\n\t\t\t\t$scope.$on('Offline', angular.bind(this, function() {\r\n\t\t\t\t\tif($state.current.data && $state.current.data.unavailableOffline) {\r\n\t\t\t\t\t\tthis.hideOfflineIndicator();\r\n\t\t\t\t\t\tthis.showUnavailableOffline();\r\n\t\t\t\t\t\tthis.hideUnauthIndicator();\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse {\r\n\t\t\t\t\t\tthis.showOfflineIndicator();\r\n\t\t\t\t\t\tthis.hideUnavailableOffline();\r\n\t\t\t\t\t\tthis.hideUnauthIndicator();\r\n\t\t\t\t\t}\r\n\t\t\t\t}));\r\n\r\n\t\t\t\t$scope.$on('Unauthenticated', angular.bind(this, function() {\r\n\t\t\t\t\tthis.showUnauthIndicator();\r\n\t\t\t\t\tthis.hideOfflineIndicator();\r\n\t\t\t\t\tthis.hideUnavailableOffline();\r\n\t\t\t\t}));\r\n\r\n\t\t\t\treturn $scope.offlineIndicator = this;\r\n\t\t\t}]\r\n\t\t};\r\n\t});","/**\r\n * @ngdoc directive\r\n * @name WebCoreModule.directive:wcPageTitle\r\n * @restrict A\r\n * @description\r\n * The wcPageTitle directive will update the page's title by modifying the text of the title tag to include the name of the\r\n * application (the app-wide module name) and the current state of the application.\r\n */\r\n'use strict';\r\nangular.module('WebCoreModule')\r\n\t.directive('wcPageTitle', function() {\r\n\t\treturn {\r\n\t\t\trestrict: 'A',\r\n\t\t\tcontroller: ['$scope', '$state', '$compile', function($scope, $state, $compile) {\r\n\r\n\t\t\t\tvar firstRun = true;\r\n\r\n\t\t\t\t$scope.pageTitle = '';\r\n\r\n                /**\r\n                 * @ngdoc method\r\n                 * @name wcPageTitle.cleanUpName\r\n                 * @methodOf WebCoreModule.directive:wcPageTitle\r\n\t\t\t\t * @param {String} name this parameter is the title tag that should be passed to this function\r\n                 * @description\r\n                 * Takes in the title tag for the page, and replaces hyphens with spaces and then capitalizes it correctly.\r\n                 */\r\n\t\t\t\tthis.cleanUpName = function(name) {\r\n\r\n\t\t\t\t\tvar cleanName = name;\r\n\r\n\t\t\t\t\tcleanName = cleanName.replace(/-/g, ' ');\r\n\r\n\t\t\t\t\tcleanName = cleanName.replace(/\\b./g, function(m) {\r\n\t\t\t\t\t\treturn m.toUpperCase();\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t\treturn cleanName;\r\n\t\t\t\t};\r\n\r\n                /**\r\n                 * @ngdoc method\r\n                 * @name wcPageTitle.updatePageTitle\r\n                 * @methodOf WebCoreModule.directive:wcPageTitle\r\n                 * @description\r\n                 * Updates the page title to properly reflect the app/state/parentstate\r\n                 */\r\n\t\t\t\tthis.updatePageTitle = function() {\r\n\r\n\t\t\t\t\t// grab app name\r\n\t\t\t\t\tvar appName = $('#ng-app').attr('ng-app').replace('Module','');\r\n\r\n\t\t\t\t\t// grab state name\r\n\t\t\t\t\tvar stateName = this.cleanUpName($state.$current.name);\r\n\r\n\t\t\t\t\t// grab parent state's name (if applicable - e.g. workflows)\r\n\t\t\t\t\tvar parentStateName;\r\n\t\t\t\t\tif($state.$current.parent) {\r\n\t\t\t\t\t\tparentStateName = this.cleanUpName($state.get($state.$current.parent).name);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tvar tempPageTitle;\r\n\r\n\t\t\t\t\tif(parentStateName && (parentStateName.replace(/ /g,'') !== appName)) {\r\n\t\t\t\t\t\ttempPageTitle = parentStateName + ': ' + stateName + ' | ' + appName;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\ttempPageTitle = stateName + ' | ' + appName;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t$scope.pageTitle = tempPageTitle;\r\n\r\n\t\t\t\t};\r\n\r\n\t\t\t\t$scope.$on('$viewContentLoaded', angular.bind(this, function() {\r\n\t\t\t\t\tif(firstRun) {\r\n\t\t\t\t\t\tvar titleTag = $('title').attr({'wc-page-title':'','ng-bind':'pageTitle'});\r\n\t\t\t\t\t\ttitleTag.replaceWith($compile(titleTag)($scope));\r\n\t\t\t\t\t\tfirstRun = false;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.updatePageTitle();\r\n\t\t\t\t}));\r\n\r\n\t\t\t}]\r\n\r\n\t\t};\r\n\t});","/**\r\n * @ngdoc directive\r\n * @name WebCoreModule.directive:wcPagination\r\n * @restrict A\r\n * @priority 1\r\n * @scope\r\n * @param {array} wcPagination The array of data to filter through\r\n * @param {string} location Where pagination controls should be added. Can be top, bottom or both\r\n * @param {string=} resultsPerPage array literal defining the options that should show in the results per page drop down\r\n * @param {string=} resultsPerPageText string defining the text that should display as a label for the results per page drop down\r\n * @param {string=} showingResultsText string defining the text that should display in the 'showing results x-y of z' text\r\n * @param {number=} resultsItemCount number defining the default number of results to show per page\r\n * @description\r\n * The wcPagination directive adds pagination controls to a list of data in a view.\r\n */\r\n'use strict';\r\nangular.module('WebCoreModule')\r\n\t.directive('wcPagination', ['$templateCache', '$compile', function($templateCache, $compile) { // jshint ignore:line\r\n\t\treturn {\r\n\t\t\trestrict: 'A',\r\n\t\t\tpriority: 1,\r\n\t\t\tscope: {\r\n\t\t\t\twcPagination: '=',\r\n\t\t\t\tlocation: '@',\r\n\t\t\t\tresultsPerPage: '&',\r\n\t\t\t\tresultsPerPageText: '@',\r\n\t\t\t\tshowingResultsText: '@',\r\n\t\t\t\tresultsItemCount: '&',\r\n\t\t\t\tresponsiveBreakpoints: '&'\r\n\t\t\t},\r\n\t\t\tcontroller: ['$scope', '$window', '_', function($scope, $window, _) {\r\n\t\t\t\t$scope.searchResults = $scope.wcPagination;\r\n\r\n\t\t\t\tif(angular.isArray($scope.resultsPerPage())){\r\n\t\t\t\t\t$scope.resultsPerPage = $scope.resultsPerPage();\r\n\t\t\t\t} else {\r\n\t\t\t\t\t//set defaults if a value isn't given\r\n\t\t\t\t\t$scope.resultsPerPage = [10, 25, 50, 100];\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif(angular.isArray($scope.responsiveBreakpoints())){\r\n\t\t\t\t\t$scope.responsiveBreakpoints = $scope.responsiveBreakpoints();\r\n\t\t\t\t} else {\r\n\t\t\t\t\t//set defaults if a value isn't given\r\n\t\t\t\t\t$scope.responsiveBreakpoints = [430, 500, 600, 900];\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif(!$scope.resultsPerPageText){\r\n\t\t\t\t\t$scope.resultsPerPageText = 'Results per page: ';\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif(!$scope.showingResultsText){\r\n\t\t\t\t\t$scope.showingResultsText = 'Showing results ';\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif(angular.isNumber($scope.resultsItemCount())){\r\n\t\t\t\t\t$scope.resultsItemCount = $scope.resultsItemCount();\r\n\t\t\t\t} else {\r\n\t\t\t\t\t$scope.resultsItemCount = $scope.resultsPerPage[0];\r\n\t\t\t\t}\r\n\r\n\t\t\t\t$scope.totalItems = $scope.searchResults.length;\r\n\t\t\t\t$scope.itemsPerPage = $scope.resultsItemCount;\r\n\t\t\t\t$scope.currentPage = 1;\r\n\t\t\t\t$scope.boundaryLinks = true;\r\n\t\t\t\t$scope.maxSize = 5;\r\n\t\t\t\t$scope.filteredSearchResults = [];\r\n\t\t\t\t$scope.updatePageResultsCount = function() {\r\n\t\t\t\t\t$scope.itemsPerPage = $scope.resultsItemCount;\r\n\t\t\t\t};\r\n\t\t\t\t$scope.begin = 1;\r\n\t\t\t\t$scope.end = $scope.begin + $scope.itemsPerPage;\r\n\r\n\t\t\t\t$scope.$watchCollection(function() {\r\n\t\t\t\t\t\treturn $scope.currentPage + $scope.itemsPerPage;\r\n\t\t\t\t\t}, function() {\r\n\t\t\t\t\t\t$scope.begin = (($scope.currentPage - 1) * $scope.itemsPerPage);\r\n\t\t\t\t\t\t$scope.end = $scope.begin + $scope.itemsPerPage;\r\n\t\t\t\t\t\tif($scope.end > $scope.totalItems) {\r\n\t\t\t\t\t\t\t$scope.end = $scope.totalItems;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t$scope.wcPagination = $scope.searchResults.slice($scope.begin, $scope.end);\r\n\t\t\t\t\t\t$window.scrollTo(0, 1);\r\n\t\t\t\t\t}\r\n\t\t\t\t);\r\n\r\n\t\t\t\t$scope.currentBreakpoint = '';\r\n\t\t\t\t//responsive stuff\r\n\t\t\t\t$scope.$watch(function(){\r\n\t\t\t\t\treturn $scope.currentBreakpoint;\r\n\t\t\t\t}, function(newValue, oldValue) {\r\n\t\t\t\t\tif(newValue !== oldValue) {\r\n\t\t\t\t\t\tif(newValue === 'xs') {\r\n\t\t\t\t\t\t\t$(\".pagination-row\").addClass(\"hidden\");\r\n\t\t\t\t\t\t\t$scope.itemsPerPage = $scope.searchResults.length;\r\n\t\t\t\t\t\t\t$scope.maxSize = 0;\r\n\t\t\t\t\t\t\t$scope.boundaryLinks = false;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse if(newValue === 'sm') {\r\n\t\t\t\t\t\t\t$(\".pagination-row\").removeClass(\"hidden\");\r\n\t\t\t\t\t\t\t$scope.itemsPerPage = $scope.resultsItemCount;\r\n\t\t\t\t\t\t\t$scope.maxSize = 0;\r\n\t\t\t\t\t\t\t$scope.boundaryLinks = false;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse if(newValue === 'md') {\r\n\t\t\t\t\t\t\t$(\".pagination-row\").removeClass(\"hidden\");\r\n\t\t\t\t\t\t\t$scope.itemsPerPage = $scope.resultsItemCount;\r\n\t\t\t\t\t\t\t$scope.maxSize = 0;\r\n\t\t\t\t\t\t\t$scope.boundaryLinks = false;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse if(newValue === 'lg') {\r\n\t\t\t\t\t\t\t$(\".pagination-row\").removeClass(\"hidden\");\r\n\t\t\t\t\t\t\t$scope.itemsPerPage = $scope.resultsItemCount;\r\n\t\t\t\t\t\t\t$scope.maxSize = 1;\r\n\t\t\t\t\t\t\t$scope.boundaryLinks = true;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse {\r\n\t\t\t\t\t\t\t$scope.maxSize = 5;\r\n\t\t\t\t\t\t\t$scope.boundaryLinks = true;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\r\n\t\t\t\tvar resizeHandler = function(){\r\n\t\t\t\t\t//<=430 is default\r\n\t\t\t\t\tif(window.innerWidth <= $scope.responsiveBreakpoints[0] && $scope.currentBreakpoint !== 'xs') {\r\n\t\t\t\t\t\t$scope.currentBreakpoint = 'xs';\r\n\t\t\t\t\t\t$scope.$apply();\r\n\t\t\t\t\t}\r\n\t\t\t\t\t//>430 and <=500 is default\r\n\t\t\t\t\telse if((window.innerWidth > $scope.responsiveBreakpoints[0] && window.innerWidth <= $scope.responsiveBreakpoints[1]) && $scope.currentBreakpoint !== 'sm') {\r\n\t\t\t\t\t\t$scope.currentBreakpoint = 'sm';\r\n\t\t\t\t\t\t$scope.$apply();\r\n\t\t\t\t\t}\r\n\t\t\t\t\t//>500 and <=600 is default\r\n\t\t\t\t\telse if((window.innerWidth > $scope.responsiveBreakpoints[1] && window.innerWidth <= $scope.responsiveBreakpoints[2]) && $scope.currentBreakpoint !== 'md') {\r\n\t\t\t\t\t\t$scope.currentBreakpoint = 'md';\r\n\t\t\t\t\t\t$scope.$apply();\r\n\t\t\t\t\t}\r\n\t\t\t\t\t//>600 and <=900 is default\r\n\t\t\t\t\telse if((window.innerWidth > $scope.responsiveBreakpoints[2] && window.innerWidth <= $scope.responsiveBreakpoints[3]) && $scope.currentBreakpoint !== 'lg') {\r\n\t\t\t\t\t\t$scope.currentBreakpoint = 'lg';\r\n\t\t\t\t\t\t$scope.$apply();\r\n\t\t\t\t\t}\r\n\t\t\t\t\t//>900 is default\r\n\t\t\t\t\telse if(window.innerWidth > $scope.responsiveBreakpoints[3] && $scope.currentBreakpoint !== 'xl') {\r\n\t\t\t\t\t\t$scope.currentBreakpoint = 'xl';\r\n\t\t\t\t\t\t$scope.$apply();\r\n\t\t\t\t\t}\r\n\t\t\t\t};\r\n\t\t\t\t//debounce this handler to avoid rapid-fire resize events\r\n\t\t\t\tangular.element($window).bind('resize', _.debounce(resizeHandler, 300));\r\n\r\n\t\t\t\t//finally, call the resizeHandler once to initialize our breakpoint var\r\n\t\t\t\tsetTimeout(resizeHandler, 0);\r\n\t\t\t}],\r\n\t\t\tlink: function(scope, elem/*, attr, ctrl*/) {\r\n\t\t\t\t//leave template here instead of in it's own file, as it's difficult to load the template properly from a file for this type of inclusion.\r\n\t\t\t\tvar templateTop = '<div class=\"row pagination-row\"><div class=\"col-sm-4 col-xs-6\">' +\r\n\t\t\t\t\t'<label for=\"results-per-page-top\" ng-cloak class=\"control-label\">{{resultsPerPageText}}</label>' +\r\n\t\t\t\t\t'<select ng-model=\"resultsItemCount\" ng-options=\"result for result in resultsPerPage\" id=\"results-per-page-top\" name=\"resultsPerPage\" ng-change=\"updatePageResultsCount();\"></select></div><div ng-cloak class=\"col-sm-4 hidden-xs text-center results-data\">{{showingResultsText}} {{begin+1}}-{{end}} of {{totalItems}}</div><div class=\"col-sm-4 col-xs-6 text-right\"><uib-pagination total-items=\"totalItems\" items-per-page=\"resultsItemCount\" ng-model=\"currentPage\" max-size=\"maxSize\" boundary-links=\"boundaryLinks\" previous-text=\"&#xe071\" next-text=\"&#xe075\" first-text=\"&#xe069\" last-text=\"&#xe077\"></uib-pagination></div></div>';\r\n\t\t\t\tvar templateBottom = '<div class=\"row pagination-row\"><div class=\"col-sm-4 col-xs-6\">' +\r\n\t\t\t\t\t'<label for=\"results-per-page-bottom\" ng-cloak class=\"control-label\">{{resultsPerPageText}}</label>' +\r\n\t\t\t\t\t'<select ng-model=\"resultsItemCount\" ng-options=\"result for result in resultsPerPage\" id=\"results-per-page-bottom\" name=\"resultsPerPage\" ng-change=\"updatePageResultsCount();\"></select></div><div ng-cloak class=\"col-sm-4 hidden-xs text-center results-data\">{{showingResultsText}} {{begin+1}}-{{end}} of {{totalItems}}</div><div class=\"col-sm-4 col-xs-6 text-right\"><uib-pagination total-items=\"totalItems\" items-per-page=\"resultsItemCount\" ng-model=\"currentPage\" max-size=\"maxSize\" boundary-links=\"boundaryLinks\" previous-text=\"&#xe071\" next-text=\"&#xe075\" first-text=\"&#xe069\" last-text=\"&#xe077\"></uib-pagination></div></div>';\r\n\r\n\t\t\t\tif(scope.location === 'top' || scope.location === 'both') {\r\n\t\t\t\t\telem.before($compile(templateTop)(scope));\r\n\t\t\t\t}\r\n\t\t\t\tif(scope.location === 'bottom' || scope.location === 'both') {\r\n\t\t\t\t\telem.after($compile(templateBottom)(scope));\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t};\r\n\t}]);","/**\r\n * @ngdoc directive\r\n * @name WebCoreModule.directive:wcProtectedResource\r\n * @restrict A\r\n * @param {string=} wcProtectedResource string or array literal defining the resource:action pairs that define authorization for the tag\r\n * @description\r\n * The wcProtectedResource directive removes a tag from or adds a tag back to the DOM based on authorization rules. The directive\r\n * leverages the wcAuthorizationService to retrieve the authorization status for the current user from a restful endpoint.\r\n */\r\n'use strict';\r\nangular.module('WebCoreModule')\r\n\t.directive('wcProtectedResource', function() {\r\n\t\treturn {\r\n\t\t\tpriority: -500,\r\n\t\t\trestrict: 'A',\r\n\t\t\trequire: ['wcProtectedResource'],\r\n\t\t\tcontroller: ['WcAuthorizationService', '$element', '$attrs',\r\n\t\t\t\tfunction(WcAuthorizationService, $element, $attrs) {\r\n\r\n                    /**\r\n                     * @ngdoc method\r\n                     * @name wcProtectedResource.checkAuthorization\r\n                     * @methodOf WebCoreModule.directive:wcProtectedResource\r\n                     * @description\r\n                     * This method grabs all of the policies from wcProtectedResource and parses them to check authorization\r\n                     */\r\n\t\t\t\t\tthis.checkAuthorization = function() {\r\n\t\t\t\t\t\tvar criteria = null;\r\n\t\t\t\t\t\tvar policies = $attrs.wcProtectedResource;\r\n\r\n\t\t\t\t\t\tif (policies) {\r\n\r\n\t\t\t\t\t\t\t// check to see if we have an authorization criteria in-line\r\n\t\t\t\t\t\t\tif (policies.indexOf('|') > -1) {\r\n\t\t\t\t\t\t\t\t// extract \"any\" or \"all\"\r\n\t\t\t\t\t\t\t\tcriteria = policies.slice(policies.indexOf('|') + 1, policies.length).toString().trim();\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t// if we have a criteria, clean up string so we can easily extract policies\r\n\t\t\t\t\t\t\tif (criteria) {\r\n\t\t\t\t\t\t\t\tpolicies = policies.slice(0, policies.indexOf('|'));\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t// support multiple policies\r\n\t\t\t\t\t\t\tpolicies = policies.split(',');\r\n\r\n\t\t\t\t\t\t\t// remove whitespace\r\n\t\t\t\t\t\t\tfor (var i = 0; i < policies.length; i++) {\r\n\t\t\t\t\t\t\t\tpolicies[i] = policies[i].trim();\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tpolicies = [];\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tvar isAuth = WcAuthorizationService.isAuthorized(policies, criteria);\r\n\r\n\t\t\t\t\t\tisAuth.then(function(authorized) {\r\n\t\t\t\t\t\t\tif (authorized === false) {\r\n\t\t\t\t\t\t\t\t$element.remove();\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t};\r\n\t\t\t\t}\r\n\t\t\t],\r\n\t\t\tcompile: function() {\r\n\t\t\t\treturn {\r\n\t\t\t\t\tpost: function() {\r\n\t\t\t\t\t\tvar controllers = arguments[3];\r\n\t\t\t\t\t\tvar protectedResourceCtrl = controllers[0];\r\n\t\t\t\t\t\tvar datatableCtrl = controllers[1];\r\n\t\t\t\t\t\tif (datatableCtrl) {\r\n\t\t\t\t\t\t\tdatatableCtrl.checkAuthorization = protectedResourceCtrl.checkAuthorization();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tprotectedResourceCtrl.checkAuthorization();\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t};\r\n\t\t\t}\r\n\t\t};\r\n\t});","/**\r\n * @ngdoc directive\r\n * @name WebCoreModule.directive:wcValidationIndicator\r\n * @restrict A\r\n * @priority 1\r\n * @param {string=} wcValidationIndicator string defining the field identifier text that should be used in the validation message\r\n * @description\r\n * The wcValidationIndicator directive utilizes Angular's isValid and isRequired checks to display messages according to the error\r\n * state at the field level. The directive supports all form input types that are currently a part of the FRF.\r\n */\r\n'use strict';\r\nangular.module('WebCoreModule')\r\n\t.directive('wcValidationIndicator', ['_', '$translate', '$timeout', function(_, $translate, $timeout) {\r\n\t\treturn {\r\n\t\t\trestrict: 'A',\r\n\t\t\tpriority: 1,\r\n\t\t\tlink: function(scope, elem, attr) { // jshint ignore:line\r\n\t\t\t\t//wrap in timeout of zero seconds to force a digest. This ensures nested directives finish before the indicator directive runs\r\n\t\t\t\t$timeout(function(){\r\n\t\t\t\t\t//fieldset is caps here thanks to the browser defining it that way\r\n\t\t\t\t\tif(!elem[0].form || elem[0].tagName === 'FIELDSET'){\r\n\t\t\t\t\t\telem = $(elem).find('input');\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tvar formName = elem[0].form.attributes.name.value;\r\n\t\t\t\t\tvar ngFormObj = scope[formName];\r\n\r\n\t\t\t\t\tif(!ngFormObj) {\r\n\t\t\t\t\t\t//break out of isolate scope and then walk the tree for the form obj\r\n\t\t\t\t\t\tngFormObj = scope.$parent[formName];\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t//modals use ctrl.form.formName instead of ctrl.formName\r\n\t\t\t\t\t//handle it here\r\n\t\t\t\t\tif(!ngFormObj && formName.indexOf(\".\") > -1) {\r\n\t\t\t\t\t\tformName = formName.split('.');\r\n\t\t\t\t\t\tngFormObj = scope.$parent[formName[0]][formName[1]];\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tvar elemName = elem[0].name;\r\n\t\t\t\t\t//sometimes the reset element will not carry the name attr (I'm looking at you, ui-select).\r\n\t\t\t\t\t//in this case, instead grab it off of the attr object that was passed in\r\n\t\t\t\t\tif(!elemName) {\r\n\t\t\t\t\t\telemName = attr.name;\r\n\t\t\t\t\t\t//if this still isn't right, see if we are in a datatable\r\n\t\t\t\t\t\tif(!elemName) {\r\n\t\t\t\t\t\t\tif(attr.wcResponsiveTable === \"\") {\r\n\t\t\t\t\t\t\t\telemName = 'wcResponsiveTable';\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tvar elemCtrl;\r\n\t\t\t\t\t//need to select the controller in a different way if we are within a modal\r\n\t\t\t\t\tif(angular.isArray(formName)) {\r\n\t\t\t\t\t\t//take the controller's name off of the ng-model.\r\n\t\t\t\t\t\t//todo - if there's a better way to do this, DO IT!!\r\n\t\t\t\t\t\tvar ctrlName = elem[0].attributes[\"ng-model\"].nodeValue.split('.')[0];\r\n\t\t\t\t\t\telemCtrl = scope.$parent[ctrlName];\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse {\r\n\t\t\t\t\t\telemCtrl = elem.controller();\r\n\t\t\t\t\t}\r\n\t\t\t\t\tvar formGroup = $(elem).closest('.form-group')[0];\r\n\t\t\t\t\t//datatables will not be in a formgroup. add one and refer to it\r\n\t\t\t\t\tif(!formGroup || elemName === 'wcResponsiveTable'){\r\n\t\t\t\t\t\tformGroup = $('<div class=\"form-group col-xs-12\"></div>').insertBefore('#'+elem.id);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tvar fieldNameTranslateString = attr.wcValidationIndicator;\r\n\r\n\r\n\t\t\t\t\tvar errorTypes = {\r\n\t\t\t\t\t\tdefaultMsg: 'Please add error message for {{n}}.',\r\n\t\t\t\t\t\temail: 'Please enter a valid email address.',\r\n\t\t\t\t\t\tminlength: 'Please enter at least {{n}} characters.',\r\n\t\t\t\t\t\tmaxlength: 'You have entered more than {{n}} characters.',\r\n\t\t\t\t\t\tmin: 'Please enter the number greater than {{n}}.',\r\n\t\t\t\t\t\tmax: 'Please enter the number lesser than {{n}}.',\r\n\t\t\t\t\t\tminMaxRange: 'Please enter between {{min}} and {{max}}.',\r\n\t\t\t\t\t\trequired: '{{fieldName}} is required.',\r\n\t\t\t\t\t\ttableRequired: '{{fieldName}} selection is required.',\r\n\t\t\t\t\t\tdate: 'Please enter a valid date.',\r\n\t\t\t\t\t\tpattern: 'The pattern entered is incorrect.',\r\n\t\t\t\t\t\tnumber: 'Please enter a valid number.',\r\n\t\t\t\t\t\turl: 'Please enter a valid URL.',\r\n\t\t\t\t\t\tinValid: '{{fieldName}} is invalid.'\r\n\t\t\t\t\t};\r\n\r\n\t\t\t\t\tvar errType, errorMessage, errorMessageDOM, n, min, max, validatorAttrs, errorMsgId, requiredText;\r\n\r\n\t\t\t\t\tvar buildErrorMsg = function (errType) {\r\n\t\t\t\t\t\tif(validatorAttrs.length>0){\r\n\t\t\t\t\t\t\tif(ngFormObj[elemName].$error.hasOwnProperty('required')){\r\n\t\t\t\t\t\t\t\terrorMessage = $translate.instant(errorTypes.required, {fieldName:fieldNameTranslateString});\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\telse {\r\n\t\t\t\t\t\t\t\terrorMessage = $translate.instant(errorTypes.inValid, {fieldName:fieldNameTranslateString});\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse {\r\n\t\t\t\t\t\t\tn =attr[errType];\r\n\t\t\t\t\t\t\tif((errType==='min'||errType==='max')&&(attr.min&&attr.max)) {\r\n\t\t\t\t\t\t\t\terrType = 'minMaxRange';\r\n\t\t\t\t\t\t\t\tmin=attr.min;\r\n\t\t\t\t\t\t\t\tmax=attr.max;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\terrorMessage = $translate.instant(errorTypes[errType], {n: n, fieldName:fieldNameTranslateString, min:min, max:max});\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t};\r\n\r\n\r\n\t\t\t\t\t//handy regex from http://stackoverflow.com/questions/8955533/javascript-jquery-split-camelcase-string-and-add-hyphen-rather-than-space\r\n\t\t\t\t\tvar elemNameSnakeCase = elemName.replace(/([a-z])([A-Z])/g, '$1-$2').toLowerCase();\r\n\t\t\t\t\terrorMsgId = elemNameSnakeCase + '-error';\r\n\r\n\t\t\t\t\tvar buildErrorMsgDOM = function (errType) {\r\n\t\t\t\t\t\tbuildErrorMsg(errType);\r\n\t\t\t\t\t\terrorMessageDOM = $('<span id=\"' + errorMsgId + '\" class=\"label label-danger\"><span class=\"glyphicon glyphicon-remove-sign\"></span><span class=\"label-text\">' + errorMessage + '</span></span>');\r\n\t\t\t\t\t};\r\n\r\n\t\t\t\t\tvar watchListener = function() {\r\n\t\t\t\t\t\t//first, remove potential leftover messages.\r\n\t\t\t\t\t\t$(formGroup).find('#' + errorMsgId).remove();\r\n\r\n\t\t\t\t\t\t//when the validation error occurs, insert the error messages and mark the container\r\n//\t\t\t\t\t\tif(!ngFormObj[elemName].$valid && elemCtrl.isFormSubmitted) {\r\n\t\t\t\t\t\tif(!ngFormObj[elemName].$valid && ngFormObj.$submitted) {\r\n\t\t\t\t\t\t\tvalidatorAttrs = _.filter(_.keys(attr), function(item){\r\n\t\t\t\t\t\t\t\treturn (item.indexOf('Validator') > -1);\r\n\t\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\t\tvar errorCases = _.toPairs(ngFormObj[elemName].$error);\r\n\r\n\t\t\t\t\t\t\tfor(var i=0; i<errorCases.length; i++) {\r\n\t\t\t\t\t\t\t\terrType = errorCases[i][0];\r\n\t\t\t\t\t\t\t\tbuildErrorMsgDOM(errType);\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tif(errType==='tableRequired') {\r\n                                requiredText = $(formGroup).html();\r\n                                $(formGroup).html(errorMessageDOM);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\telse {\r\n                                $(formGroup).append(errorMessageDOM);\r\n                            }\r\n\t\t\t\t\t\t\t$(formGroup).addClass('has-error');\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t$(formGroup).removeClass('has-error');\r\n\t\t\t\t\t\t\t$(formGroup).find('#' + errorMsgId).remove();\r\n                            if(errType==='tableRequired') {\r\n                            \t$(formGroup).html(requiredText);\r\n                            }\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t};\r\n\r\n\t\t\t\t\tscope.$watch(function(){\r\n\t\t\t\t\t\treturn ngFormObj[elemName].$valid;\r\n\t\t\t\t\t}, function(){\r\n\t\t\t\t\t\twatchListener();\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t\tscope.$watch(function(){\r\n\t\t\t\t\t\treturn ngFormObj.$submitted;\r\n\t\t\t\t\t\t//return elemCtrl.isFormSubmitted;\r\n\t\t\t\t\t}, function(){\r\n\t\t\t\t\t\twatchListener();\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t\tscope.$watch(function(){\r\n\t\t\t\t\t\treturn ngFormObj[elemName].$error;\r\n\t\t\t\t\t}, function(){\r\n\t\t\t\t\t\twatchListener();\r\n\t\t\t\t\t}, true);\r\n\t\t\t\t},0);\r\n\t\t\t}\r\n\t\t};\r\n\t}]);\r\n","/**\r\n * @ngdoc directive\r\n * @name WebCoreModule.directive:ngPrism\r\n * @restrict A\r\n * @description\r\n * The ngPrism directive adds behavior to highlight element.\r\n */\r\nangular.module('WebCoreModule')\r\n    .directive('prism', [function() {\r\n        return {\r\n            restrict: 'A',\r\n            link: function ($scope, element) {\r\n                element.ready(function() {\r\n                    Prism.highlightElement(element[0]);\r\n                });\r\n            }\r\n        };\r\n    }]\r\n);","/**\r\n * @ngdoc filter\r\n * @name WebCoreModule.filter:WcPrice\r\n * @requires _\r\n * @description\r\n * The wcPrice filter assists with view filtering of any price related information.\r\n */\r\n'use strict';\r\nangular.module('WebCoreModule').\r\nfilter('WcPrice', ['_', function(_) {\r\n\r\n\t// Helper Functions\r\n\tfunction detectFilterType(min, max) {\r\n\t\tvar filterType = '';\r\n\r\n\t\tif ((min || min === 0) && (max || max === 0)) {\r\n\t\t\tfilterType = 'range';\r\n\t\t} else if (min && (max === null)) {\r\n\t\t\tfilterType = 'min';\r\n\t\t} else if (max && (min === null)) {\r\n\t\t\tfilterType = 'max';\r\n\t\t} else {\r\n\t\t\tfilterType = 'invalid';\r\n\t\t}\r\n\r\n\t\treturn filterType;\r\n\t}\r\n\r\n\tfunction filterMax(items, max, propertyName) {\r\n\t\tif (propertyName) {\r\n\t\t\treturn _.filter(items, function(num) {\r\n\t\t\t\tif (num[propertyName] <= max) {\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\treturn _.filter(items, function(num) {\r\n\t\t\t\tif (num <= max) {\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\tfunction filterMin(items, min, propertyName) {\r\n\t\tif (propertyName) {\r\n\t\t\treturn _.filter(items, function(num) {\r\n\t\t\t\tif (num[propertyName] >= min) {\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\treturn _.filter(items, function(num) {\r\n\t\t\t\tif (num >= min) {\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\tfunction filterRange(items, min, max, propertyName) {\r\n\t\tif (propertyName) {\r\n\t\t\treturn _.filter(items, function(num) {\r\n\t\t\t\tif (num[propertyName] >= min && num[propertyName] <= max) {\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\treturn _.filter(items, function(num) {\r\n\t\t\t\tif (num >= min && num <= max) {\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\treturn function(items, min, max, propertyName) {\r\n\r\n\t\tvar newItems = [];\r\n\r\n\t\t// Error Checking\r\n\t\tif (min === undefined || isNaN(min)) {\r\n\t\t\tmin = null;\r\n\t\t}\r\n\r\n\t\tif (max === undefined || isNaN(max)) {\r\n\t\t\tmax = null;\r\n\t\t}\r\n\r\n\t\t// Detect Filter Type\r\n\t\tvar filterType = detectFilterType(min, max);\r\n\r\n\t\tswitch (filterType) {\r\n\t\t\tcase 'range':\r\n\t\t\t\tnewItems = filterRange(items, min, max, propertyName);\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'min':\r\n\t\t\t\tnewItems = filterMin(items, min, propertyName);\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'max':\r\n\t\t\t\tnewItems = filterMax(items, max, propertyName);\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'invalid':\r\n\t\t\t\tnewItems = items;\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\r\n\t\treturn newItems;\r\n\t};\r\n}]);","/**\r\n * @ngdoc overview\r\n * @name WcResponsiveTableModule\r\n * @description\r\n * WcResponsiveTableModule is a collection of internally developed components and extensions which brings responsive behaviour\r\n * for jquery datatable, this module is also responsible for some features like sorting and filtering of datatable.\r\n */\r\n\r\n'use strict';\r\nangular.module('WcResponsiveTableModule', []);","/**\r\n * @ngdoc directive\r\n * @name WcResponsiveTableModule.directive:wcResponsiveTable\r\n * @scope\r\n * @require ngModel\r\n * @param {json} data This is a json string data which will be supplied to the datatable\r\n * @param {string} rowKey This string value holds the row key details\r\n * @param {object=} ngModel The model from which he data is supplied to the datatable\r\n * @param {Integer=} resultsPerPage This integer value holds the number of results per page for the datatable\r\n * @param {object=} columnData This object holds the column data for the datatable.\r\n * @param {Integer=} selectResultsPerPage The integer value that holds the number.\r\n * @description\r\n * The wcResponsiveTable directive adds responsive behavior to jquery datatable. With this directive in use, the\r\n * datatable will adjust automatically according to the window size.\r\n */\r\n\r\n'use strict';\r\n\r\nangular.module('WcResponsiveTableModule').directive('wcResponsiveTable', ['$compile', '_', '$timeout', '$swipe', 'WcTableScopeService', 'WcTableCollectionService', 'WcTablePaginationService', 'WcColumnFilterService',\r\n\tfunction ($compile, _, $timeout, $swipe, WcTableScopeService, WcTableCollectionService, WcTablePaginationService, WcColumnFilterService) {\r\n\t\treturn {\r\n\t\t\trequire: ['wcResponsiveTable', '?ngModel'],\r\n\t\t\tscope: {},\r\n\t\t\tbindToController: {\r\n\t\t\t\tdata: '<',\r\n\t\t\t\trowKey: '@',\r\n\t\t\t\t//bind between our ngModel and our interal selectedRows\r\n\t\t\t\t//selectedRows: '=ngModel',\r\n\t\t\t\tngModel: '=?',\r\n\t\t\t\tresultsPerPage: '=',\r\n\t\t\t\tpaginationControlsPlacement: '@',\r\n\t\t\t\tresponsiveView: '@',\r\n\t\t\t\tcolumnData: '=',\r\n\t\t\t\tselectResultsPerPage: '=',\r\n\t\t\t\trequired: '@',\r\n\t\t\t\tpaginationEnabled: '@',\r\n\t\t\t\tcheckallnoneEnabled: '@',\r\n\t\t\t\texporttopdfEnabled: '@',\r\n\t\t\t\texporttoexcelEnabled: '@'\r\n\t\t\t},\r\n\t\t\tcontrollerAs: 'responsiveTableController',\r\n\t\t\tcontroller: ['$scope', '$element', '$attrs', 'WcTranslateConfiguratorService', '$translate', function ($scope, $element, $attrs, WcTranslateConfiguratorService, $translate) {\r\n                WcTranslateConfiguratorService.loadPartAndRefresh('WC-dataTable');\r\n\r\n\t\t\t\tvar parentScope = $scope.$parent;\r\n\r\n\r\n                /**\r\n                 * @ngdoc property\r\n                 * @name wcResponsiveTable.id\r\n                 * @propertyOf WcResponsiveTableModule.directive:wcResponsiveTable\r\n                 * @returns {String} The string identifier for the attribute of the responsive Table\r\n                 */\r\n                /**\r\n                 * @ngdoc property\r\n                 * @name wcResponsiveTable.element\r\n                 * @propertyOf WcResponsiveTableModule.directive:wcResponsiveTable\r\n                 * @returns {Object} An object that is the HTML element for the responsive table wrapper\r\n                 */\r\n                /**\r\n                 * @ngdoc property\r\n                 * @name wcResponsiveTable.table\r\n                 * @propertyOf WcResponsiveTableModule.directive:wcResponsiveTable\r\n                 * @returns {Object} An object that is the html element for the actual table HTML element\r\n                 */\r\n\t\t\t\tthis.id = $attrs.id;\r\n\t\t\t\tthis.element = $element;\r\n                this.table = $element.find('table');\r\n\r\n                /**\r\n                 * @ngdoc property\r\n                 * @name wcResponsiveTable.WcTableScopeService\r\n                 * @propertyOf WcResponsiveTableModule.directive:wcResponsiveTable\r\n                 * @returns {Object} A reference to an instance WcTableScopeService for this table\r\n                 */\r\n\t\t\t\tthis.WcTableScopeService = new WcTableScopeService();\r\n\t\t\t\tthis.WcTableScopeService.setParentScope(parentScope);\r\n\t\t\t\tthis.WcTableScopeService.setTableScope($scope);\r\n\r\n                /**\r\n                 * @ngdoc property\r\n                 * @name wcResponsiveTable.WcTableCollectionService\r\n                 * @propertyOf WcResponsiveTableModule.directive:wcResponsiveTable\r\n                 * @returns {Object} A reference to an instance WcTableCollectionService for the WcTableScopeService associated with this table\r\n                 */\r\n                this.WcTableCollectionService = new WcTableCollectionService(this.WcTableScopeService);\r\n\t\t\t\tthis.WcTableCollectionService.setInitialCollection(this.data);\r\n\t\t\t\tthis.WcTableCollectionService.setRowKey(this.rowKey);\r\n\r\n                /**\r\n                 * @ngdoc property\r\n                 * @name wcResponsiveTable.WcTablePaginationService\r\n                 * @propertyOf WcResponsiveTableModule.directive:wcResponsiveTable\r\n                 * @returns {Object} A reference to an instance WcTablePaginationService for the WcTableCollectionService associated with this table.\r\n                 */\r\n                this.WcTablePaginationService = new WcTablePaginationService(this.WcTableCollectionService);\r\n\r\n                /**\r\n                 * @ngdoc property\r\n                 * @name wcResponsiveTable.WcColumnFilterService\r\n                 * @propertyOf WcResponsiveTableModule.directive:wcResponsiveTable\r\n                 * @returns {Object} A reference to an instance WcColumnFilterService for this table\r\n                 */\r\n\t\t\t\tthis.WcColumnFilterService = new WcColumnFilterService();\r\n\r\n\t\t\t\tvar ngModelController = $element.controller('ngModel');\r\n\r\n                /**\r\n                 * @ngdoc method\r\n                 * @name wcResponsiveTable.setupTableOptions\r\n                 * @methodOf WcResponsiveTableModule.directive:wcResponsiveTable\r\n                 * @description\r\n                 * This method checks for the available options and makes them more usable for the rest of the methods.\r\n                 */\r\n\t\t\t\tthis.setupTableOptions = function() {\r\n\t\t\t\t\t//workaround for directive attributes that we don't want to set equal to true\r\n\t\t\t\t\tthis.required = (this.required || this.required === \"\") ? true : false;\r\n\t\t\t\t\tthis.paginationEnabled = (this.paginationEnabled || this.paginationEnabled === \"\") ? true : false;\r\n\t\t\t\t\tthis.checkallnoneEnabled = (this.checkallnoneEnabled || this.checkallnoneEnabled === \"\") ? true : false;\r\n\t\t\t\t\tthis.exporttopdfEnabled = (this.exporttopdfEnabled || this.exporttopdfEnabled === \"\") ? true : false;\r\n\t\t\t\t\tthis.exporttoexcelEnabled = (this.exporttoexcelEnabled || this.exporttoexcelEnabled === \"\") ? true : false;\r\n\t\t\t\t};\r\n\t\t\t\tthis.ngModel = (!this.ngModel || this.ngModel === \"\") ? [] : this.ngModel;\r\n\r\n                /**\r\n                 * @ngdoc method\r\n                 * @name wcResponsiveTable.$onChanges\r\n                 * @methodOf WcResponsiveTableModule.directive:wcResponsiveTable\r\n\t\t\t\t * @param {Promise} changes This promise contains the changes that are to be reflected on the page\r\n                 * @description\r\n                 * This method checks the promise passed in and sets the sort highlighting to the correct column as well as triggering table.collection.update and table.filter.completet.\r\n                 */\r\n\t\t\t\tthis.$onChanges = function(changes) {\r\n\t\t\t\t\tif (changes.data) {\r\n\t\t\t\t\t\tif(this.activeSortColumn) {\r\n\t\t\t\t\t\t\tvar columnToSort = $element.find('th[wc-column-sort]')[this.activeSortColumn];\r\n\t\t\t\t\t\t\tvar columnSortController = angular.element(columnToSort).controller('wcColumnSort');\r\n\t\t\t\t\t\t\tcolumnSortController.sortReverse = !columnSortController.sortReverse;\r\n\t\t\t\t\t\t\tcolumnSortController.refreshCollection(changes.data.currentValue);\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tthis.WcTableCollectionService.setCollection(changes.data.currentValue, this.WcTableCollectionService.sortEnabled, this.WcTableCollectionService.filterEnabled);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tthis.WcTableScopeService.tableScope.$broadcast('table.collection.update');\r\n\t\t\t\t\t\tthis.WcTableScopeService.getTableScope().$on('table.filter.complete', function() {\r\n\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t};\r\n\r\n\t\t\t\t$scope.renderTable = function (resetToPageOne) {\r\n\t\t\t\t\t$scope.$broadcast('table.pagination.update', resetToPageOne);\r\n\t\t\t\t\t$scope.$broadcast('table.render.start');\r\n\t\t\t\t\t$scope.tableIsLoading();\r\n\t\t\t\t};\r\n\r\n\t\t\t\t$scope.tableIsLoading = function () {\r\n\t\t\t\t\t$('.wc-table-loading-indicator').show();\r\n\t\t\t\t\t$('.wc-table-loading-cover').show();\r\n\t\t\t\t};\r\n\r\n\t\t\t\t$scope.tableIsFinishedLoading = function () {\r\n\t\t\t\t\t$('.wc-table-loading-indicator').hide();\r\n\t\t\t\t\t$('.wc-table-loading-cover').hide();\r\n\t\t\t\t};\r\n\r\n\t\t\t\t$scope.tableRendered = function () {\r\n\t\t\t\t\t$timeout(angular.bind(this, function () {\r\n\t\t\t\t\t\tparentScope.$broadcast('table.render.complete');\r\n\t\t\t\t\t\t//$scope.$digest();\r\n\t\t\t\t\t\t$scope.tableIsFinishedLoading();\r\n\t\t\t\t\t}), 0);\r\n\t\t\t\t};\r\n\r\n\t\t\t\t//TODO: Update these sections later\r\n                this.selectedMathFilterOption = [];\r\n\r\n                /**\r\n                 * @ngdoc method\r\n                 * @name wcResponsiveTable.toggleFilterVisibility\r\n                 * @methodOf WcResponsiveTableModule.directive:wcResponsiveTable\r\n                 * @description\r\n                 * This method finds the filter input boxes or dropdowns and toggles them visible/hidden and switches the show/hide filter button accordingly\r\n\t\t\t\t * if the filter is not set as a static filter.\r\n                 */\r\n\t\t\t\tthis.toggleFilterVisibility = function () {\r\n\r\n                    var currentText = this.element.find('.filter-visibility-toggle span:first-child').text();\r\n\r\n\t\t\t\t\tthis.element.find('thead input[wc-column-filter], thead select[wc-column-filter], thead select[id^=\"wc-math-filter\"]').toggle();\r\n\r\n\t\t\t\t\tif (!this.staticFilter) {\r\n                        var showFilterLabel = $translate.instant('columnFilter.showFilters');\r\n                        var hideFilterLabel = $translate.instant('columnFilter.hideFilters');\r\n\r\n                        currentText = currentText===showFilterLabel?  hideFilterLabel : showFilterLabel;\r\n\r\n\t\t\t\t\t\tthis.element.find('.filter-visibility-toggle span:first-child').text(currentText);\r\n\t\t\t\t\t}\r\n\t\t\t\t};\r\n\r\n                /**\r\n                 * @ngdoc method\r\n                 * @name wcResponsiveTable.setupRachetingColumns\r\n                 * @methodOf WcResponsiveTableModule.directive:wcResponsiveTable\r\n                 * @description\r\n                 * This method sets up the ratcheting column functionality by resizing the table, and setting up a swipe listener for mobile. It also includes the\r\n\t\t\t\t * definition of the function 'ratchetCols' which actually performs the ratcheting action.\r\n                 */\r\n\t\t\t\tthis.setupRachetingColumns = function () {\r\n\t\t\t\t\t//should match index for the first column of data\r\n\t\t\t\t\tvar ratchetIndex = 2;\r\n\t\t\t\t\tthis.ratchetCols = function(direction) {\r\n\t\t\t\t\t\t//only ratchet at mobile or tablet sizes\r\n\t\t\t\t\t\tif(window.innerWidth < 769) {\r\n\t\t\t\t\t\t\t$scope.$broadcast('ng-swipe');\r\n\t\t\t\t\t\t\tif(direction == 'left') {\r\n\t\t\t\t\t\t\t\t$('#' + this.id + '.table-ratchet .wc-table-column-'+ratchetIndex).hide();\r\n\t\t\t\t\t\t\t\tif(ratchetIndex < this.numberOfCols) {\r\n\t\t\t\t\t\t\t\t\tratchetIndex++;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\telse if(direction == 'right') {\r\n\t\t\t\t\t\t\t\t$('#' + this.id + '.table-ratchet .wc-table-column-'+(ratchetIndex-1)).show();\r\n\t\t\t\t\t\t\t\tif(ratchetIndex > 2) {\r\n\t\t\t\t\t\t\t\t\tratchetIndex--;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t};\r\n\r\n                    $(window).bind('resize', angular.bind(this, function () {\r\n                        if(window.innerWidth >769) {\r\n\r\n                            if(ratchetIndex > 1) {\r\n                                $('#' + this.id + '.table-ratchet .wc-table-column-'+(ratchetIndex-1)).show();\r\n                                ratchetIndex--;\r\n                            }\r\n                        }\r\n                    }));\r\n\r\n\t\t\t\t\t$scope.$on('ng-swipe', angular.bind(this, function(event, args) {\r\n\t\t\t\t\t\tif (!this.animating) {\r\n\t\t\t\t\t\t\tthis.animating = true;\r\n\t\t\t\t\t\t\t// pulse effect animation\r\n\t\t\t\t\t\t\t$('#' + this.id + '.table-ratchet table').animate({\r\n\t\t\t\t\t\t\t\topacity : 0.70\r\n\t\t\t\t\t\t\t}, 150, angular.bind(this, function() {\r\n\t\t\t\t\t\t\t\t$('#' + this.id + '.table-ratchet table').animate({\r\n\t\t\t\t\t\t\t\t\topacity : 1\r\n\t\t\t\t\t\t\t\t}, 200, function() {\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t}));\r\n\t\t\t\t\t\t\tthis.animating = false;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}));\r\n\t\t\t\t};\r\n\r\n                /**\r\n                 * @ngdoc method\r\n                 * @name wcResponsiveTable.setupPaginationDefaults\r\n                 * @methodOf WcResponsiveTableModule.directive:wcResponsiveTable\r\n                 * @description\r\n                 * This method sets up default settings for pagination of a responsive table.\r\n                 */\r\n\t\t\t\tthis.setupPaginationDefaults = function () {\r\n\t\t\t\t\tif (this.paginationEnabled || this.resultsPerPage ||\r\n\t\t\t\t\t\tthis.numberOfPageControls || this.selectResultsPerPage ||\r\n\t\t\t\t\t\tthis.responsiveBreakpoints || this.paginationControlsPlacement) {\r\n\r\n\t\t\t\t\t\tthis.WcTablePaginationService.setPaginationState(true);\r\n\r\n\t\t\t\t\t\tthis.WcTablePaginationService.setPaginationDefaults({\r\n\t\t\t\t\t\t\tnumberOfPageControls: this.numberOfPageControls,\r\n\t\t\t\t\t\t\tresponsiveBreakpoints: this.responsiveBreakpoints,\r\n\t\t\t\t\t\t\tselectResultsPerPage: this.selectResultsPerPage,\r\n\t\t\t\t\t\t\tresultsPerPage: this.resultsPerPage,\r\n\t\t\t\t\t\t\tpaginationControlsPlacement: this.paginationControlsPlacement\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t};\r\n\r\n                /**\r\n                 * @ngdoc method\r\n                 * @name wcResponsiveTable.setupTableValidation\r\n                 * @methodOf WcResponsiveTableModule.directive:wcResponsiveTable\r\n                 * @description\r\n                 * This method sets up default settings for validation in a responsive table by setting up the model controller for table validation.\r\n                 */\r\n\t\t\t\tthis.setupTableValidation = function() {\r\n\t\t\t\t\tthis.ngModel = this.ngModel || [];\r\n\r\n\t\t\t\t\tif(ngModelController) {\r\n\t\t\t\t\t\tngModelController.$name = 'wcResponsiveTable';\r\n\r\n\t\t\t\t\t\t//convert $viewValue to $modelValue\r\n\t\t\t\t\t\t//$viewValue is passed in, modify it and return what will be applied to $modelValue\r\n\t\t\t\t\t\tngModelController.$parsers.push(angular.bind(this, function (viewValue) {\r\n\t\t\t\t\t\t\t//add validation here for required fields\r\n\t\t\t\t\t\t\tif (this.required) {\r\n\t\t\t\t\t\t\t\tif (!viewValue || (angular.isArray(viewValue) && viewValue.length === 0)) {\r\n\t\t\t\t\t\t\t\t\tngModelController.$setValidity('tableRequired', false);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\telse {\r\n\t\t\t\t\t\t\t\t\tngModelController.$setValidity('tableRequired', true);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\treturn viewValue;\r\n\t\t\t\t\t\t}));\r\n\r\n\t\t\t\t\t\t//convert $modelValue to $viewValue\r\n\t\t\t\t\t\t//$modelValue is passed in, modify it and return what will be applied to $viewValue\r\n\t\t\t\t\t\tngModelController.$formatters.push(angular.bind(this, function (modelValue) {\r\n\t\t\t\t\t\t\t//add validation here for required fields\r\n\t\t\t\t\t\t\tif (this.required) {\r\n\t\t\t\t\t\t\t\tif (!modelValue || (angular.isArray(modelValue) && modelValue.length === 0)) {\r\n\t\t\t\t\t\t\t\t\tngModelController.$setValidity('tableRequired', false);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\telse {\r\n\t\t\t\t\t\t\t\t\tngModelController.$setValidity('tableRequired', true);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\treturn modelValue;\r\n\t\t\t\t\t\t}));\r\n\r\n\t\t\t\t\t\t//function to call when $viewValue should be updated with a new value after a user interaction\r\n\t\t\t\t\t\tthis.applyModel = function (value) {\r\n\t\t\t\t\t\t\tngModelController.$setViewValue(value);\r\n\t\t\t\t\t\t};\r\n\r\n\t\t\t\t\t\t//register this table with the form obj\r\n\t\t\t\t\t\tngModelController.$$parentForm.$addControl(ngModelController);\r\n\t\t\t\t\t}\r\n\t\t\t\t};\r\n\t\t\t}],\r\n\t\t\tlink: function (scope, element, attrs, controllers) {\r\n\r\n\t\t\t\tvar responsiveTableController = controllers[0];\r\n\r\n\t\t\t\tresponsiveTableController.preSetupTable = function () {\r\n\t\t\t\t\tresponsiveTableController.table = $(element).find('table');\r\n\t\t\t\t\tvar table = responsiveTableController.table[0];\r\n\t\t\t\t\tif (table.tagName !== 'TABLE') {\r\n\t\t\t\t\t\tconsole.error('Table tag <table> must come right after <wc-responsive-table>');\r\n\t\t\t\t\t\tconsole.error('Directive found ' + table.tagName + ' instead');\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\telement.addClass('wc-table');\r\n\r\n\t\t\t\t\tvar dataRow = $(table).find('tbody tr');\r\n\t\t\t\t\tvar headerRow = $(table).find('thead tr')[0];\r\n\r\n\t\t\t\t\tresponsiveTableController.numberOfCols = headerRow.children.length;\r\n\r\n\t\t\t\t\tresponsiveTableController.columnsToHide = [];\r\n\t\t\t\t\tfor (var i = 0; i < headerRow.children.length; i++) {\r\n\t\t\t\t\t\tresponsiveTableController.columnsToHide[i] = false;\r\n\t\t\t\t\t\t$(headerRow.children[i])\r\n                            .addClass('wc-table-column-' + i);\r\n\r\n                        var headerTxtNode = $(headerRow.children[i]).contents().filter(function(){ return this.nodeType === 3 && $.trim(this.nodeValue) !== '' ; });\r\n                        var headerTxtPreWrap = $(headerRow.children[i]).children()[0];\r\n\r\n                        if(headerTxtNode.length>0) {\r\n                            $(headerTxtNode).wrap(\"<div class='header-text-wrapper'><span class='header-text'></span></div>\");\r\n                        }\r\n                        else {\r\n                            $(headerTxtPreWrap).wrap(\"<div class='header-text-wrapper'></div>\").addClass('header-text');\r\n                        }\r\n\r\n                        if($(headerRow.children[i]).find('[wc-column-filter]').length>0&&$(headerRow.children[i]).find('.form-group').length<1) {\r\n                            $('#' + responsiveTableController.id + ' .wc-table-column-'+ i+' .header-text-wrapper').after(\"<div class='form-group'></div>\");\r\n                            if($(headerRow.children[i]).find('[wc-math-filter]').length>0) {\r\n                                $(headerRow.children[i]).find('label, .wc-math-filter-row').appendTo('#' + responsiveTableController.id +' .wc-table-column-'+ i+' .form-group');\r\n                            }\r\n                            else {\r\n                                $(headerRow.children[i]).find('label, input, select').appendTo('#' + responsiveTableController.id +' .wc-table-column-' + i+' .form-group');\r\n                            }\r\n\r\n                        }\r\n\t\t\t\t\t\t//.attr('column-index', i);\r\n\r\n                        //if (responsiveTableController.responsiveView === 'list') {\r\n                        var columnHeading = $(headerRow.children[i]);\r\n                        var columnHeadingText = headerTxtNode[0] ? headerTxtNode[0].nodeValue : '';\r\n                        $(dataRow.children()[i]).attr('data-title', columnHeadingText);\r\n                        //}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tfor (i = 0; i < dataRow.children().length; i++) {\r\n\t\t\t\t\t\tvar item = $(dataRow.children()[i]);\r\n\r\n\t\t\t\t\t\titem.addClass('wc-table-column-' + i);\r\n\t\t\t\t\t\t//.attr('column-index', i);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tresponsiveTableController.setupTableValidation();\r\n\r\n\t\t\t\t\tvar tableConfig = {\r\n\t\t\t\t\t\ttable: table,\r\n\t\t\t\t\t\tdataRow: dataRow,\r\n\t\t\t\t\t\theaderRow: headerRow\r\n\t\t\t\t\t};\r\n\r\n\t\t\t\t\treturn tableConfig;\r\n\t\t\t\t};\r\n\r\n\t\t\t\tresponsiveTableController.addLoadingIndicator = function () {\r\n\t\t\t\t\tvar loadingElement = '<div class=\"wc-table-loading-cover\"><div class=\"wc-table-loading-indicator\"><span>{{\"loading\" | translate}}</span></div>';\r\n\r\n\t\t\t\t\telement.append($compile(loadingElement)(scope));\r\n\t\t\t\t};\r\n\r\n\t\t\t\tresponsiveTableController.addColumnFilteringFeature = function (tableConfig) {\r\n\t\t\t\t\tif (element.find('thead input[wc-column-filter], thead select[wc-column-filter]').length) {\r\n\t\t\t\t\t\tif (attrs.staticFilter === \"\") {\r\n\t\t\t\t\t\t\tresponsiveTableController.staticFilter = true;\r\n\t\t\t\t\t\t\tresponsiveTableController.toggleFilterVisibility();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse {\r\n\t\t\t\t\t\t\tvar filterToggle = '<div class=\"filter-visibility-toggle\" ng-click=\"responsiveTableController.toggleFilterVisibility()\" ng-cloak><span>{{\"columnFilter.showFilters\" | translate}}</span><span class=\"glyphicon glyphicon-filter\"></span></div>';\r\n                            $(tableConfig.table).before('<div class=\"active-filters hidden\"></div>');\r\n\t\t\t\t\t\t\t$(tableConfig.table).before($compile(filterToggle)(scope));\r\n\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t};\r\n\r\n\t\t\t\tresponsiveTableController.addPaginationFeature = function (tableConfig) {\r\n\t\t\t\t\tif (responsiveTableController.paginationEnabled) {\r\n\t\t\t\t\t\tresponsiveTableController.setupPaginationDefaults();\r\n\t\t\t\t\t\t$(tableConfig.table).before($compile('<wc-table-pagination>')(scope));\r\n\t\t\t\t\t}\r\n\t\t\t\t};\r\n\r\n\t\t\t\tresponsiveTableController.addCheckAllNoneFeature = function (tableConfig) {\r\n\t\t\t\t\tif(responsiveTableController.checkallnoneEnabled) {\r\n\t\t\t\t\t\tvar checkAllNone = $compile('<wc-check-all-none target-container-id=\"' + attrs.id + '\">')(scope);\r\n\t\t\t\t\t\t$(tableConfig.table).next().after(checkAllNone);\r\n\t\t\t\t\t}\r\n\t\t\t\t};\r\n\r\n\t\t\t\tresponsiveTableController.addExportToPdfFeature = function () {\r\n\t\t\t\t\tif(responsiveTableController.exporttopdfEnabled) {\r\n\t\t\t\t\t\tvar tableButtonGroup = element.find('.wc-table-buttons');\r\n\t\t\t\t\t\tif(tableButtonGroup.length > 0) {\r\n\t\t\t\t\t\t\ttableButtonGroup.append($compile('<wc-export-to-pdf>')(scope));\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tvar template = angular.element('' +\r\n\t\t\t\t\t\t\t\t'<div class=\"row\">' +\r\n\t\t\t\t\t\t\t\t\t'<div class=\"col-xs-12\">' +\r\n\t\t\t\t\t\t\t\t\t\t'<div class=\"btn-group wc-table-buttons pull-right\">' +\r\n\t\t\t\t\t\t\t\t\t\t\t'<wc-export-to-pdf/>' +\r\n\t\t\t\t\t\t\t\t\t\t'</div>' +\r\n\t\t\t\t\t\t\t\t\t'</div>' +\r\n\t\t\t\t\t\t\t\t'</div>');\r\n\t\t\t\t\t\t\telement.prepend($compile(template)(scope));\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t};\r\n\r\n\t\t\t\tresponsiveTableController.addExportToExcelFeature = function () {\r\n\t\t\t\t\tif (responsiveTableController.exporttoexcelEnabled){\r\n\t\t\t\t\t\tvar tableButtonGroup = element.find('.wc-table-buttons');\r\n\t\t\t\t\t\tif(tableButtonGroup.length > 0) {\r\n\t\t\t\t\t\t\ttableButtonGroup.append($compile('<wc-export-to-excel>')(scope));\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tvar template = angular.element('' +\r\n                                '<div class=\"row\">' +\r\n\t\t\t\t\t\t\t\t\t'<div class=\"col-xs-12\">' +\r\n\t\t\t\t\t\t\t\t\t\t'<div class=\"btn-group wc-table-buttons pull-right\">' +\r\n\t\t\t\t\t\t\t\t\t\t\t'<wc-export-to-excel/>' +\r\n\t\t\t\t\t\t\t\t\t\t'</div>' +\r\n\t\t\t\t\t\t\t\t\t'</div>' +\r\n                                '</div>');\r\n\t\t\t\t\t\t\telement.prepend($compile(template)(scope));\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t};\r\n\r\n\t\t\t\tresponsiveTableController.addResponsiveFeature = function (tableConfig) {\r\n\t\t\t\t\tswitch(responsiveTableController.responsiveView) {\r\n\t\t\t\t\t\tcase 'scroll': {\r\n\t\t\t\t\t\t\tresponsiveTableController.addScrollingTableFeature(tableConfig);\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tcase 'ratchet': {\r\n\t\t\t\t\t\t\tresponsiveTableController.setupRachetingColumns();\r\n\t\t\t\t\t\t\tresponsiveTableController.addRachetingColumnsFeature(tableConfig);\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tcase 'column-toggle': {\r\n\t\t\t\t\t\t\tresponsiveTableController.addColumnToggleFeature(tableConfig);\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tcase 'radio-columns': {\r\n\t\t\t\t\t\t\tresponsiveTableController.addColumnToggleFeature(tableConfig);\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tcase 'list': {\r\n\t\t\t\t\t\t\tresponsiveTableController.addListViewFeature();\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tcase 'drop': {\r\n\t\t\t\t\t\t\t//support dropping cols here eventually\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tdefault: {\r\n\t\t\t\t\t\t\tresponsiveTableController.addScrollingTableFeature(tableConfig);\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t};\r\n\r\n\t\t\t\tresponsiveTableController.addScrollingTableFeature = function(tableConfig) {\r\n\t\t\t\t\telement.addClass('table-responsive');\r\n\r\n                    $(tableConfig.table).wrap('<div class=\"scroll-table-wrapper\"></div>');\r\n\r\n\t\t\t\t\tvar setMatchingHeights = function(selector) {\r\n\t\t\t\t\t\t$(selector).each(function(index, item){\r\n\t\t\t\t\t\t\t$(item).css('height', $(item).closest('tr').css('height'));\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t};\r\n\r\n\t\t\t\t\tvar columnResizeHandler = function(){\r\n\t\t\t\t\t\tsetMatchingHeights('#' + responsiveTableController.id + ' .wc-table-column-0');\r\n\t\t\t\t\t\tsetMatchingHeights('#' + responsiveTableController.id + ' .wc-table-column-1');\r\n\t\t\t\t\t};\r\n\r\n\t\t\t\t\t$(window).on('resize', _.debounce(columnResizeHandler,250));\r\n\t\t\t\t\tscope.$on('table.render.complete', _.debounce(columnResizeHandler,10));\r\n\r\n\t\t\t\t\tvar scrollHandler = function(event){\r\n\t\t\t\t\t\t$('#' + responsiveTableController.id + ' .wc-table-column-0').each(function(index, item){\r\n\t\t\t\t\t\t\t$(item).css('left', event.currentTarget.scrollLeft + \"px\");\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\t$('#' + responsiveTableController.id + ' .wc-table-column-1').each(function(index, item){\r\n\t\t\t\t\t\t\t$(item).css('left', (event.currentTarget.scrollLeft + 100) + \"px\");\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\t$('#' + responsiveTableController.id + ' .filter-visibility-toggle').each(function(index, item){\r\n\t\t\t\t\t\t\t$(item).css('left', (event.currentTarget.scrollLeft + 15) + \"px\");\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t};\r\n\r\n\t\t\t\t\telement.scroll(scrollHandler);\r\n\t\t\t\t\telement.on('touchmove', scrollHandler);\r\n\t\t\t\t};\r\n\r\n\t\t\t\tresponsiveTableController.addRachetingColumnsFeature = function(tableConfig) {\r\n\t\t\t\t\telement.addClass('table-ratchet');\r\n\r\n\t\t\t\t\t// The maximum vertical delta for a swipe should be less than 75px.\r\n\t\t\t\t\t//start block of modified code coming from angular-touch library.\r\n\t\t\t\t\tvar MAX_VERTICAL_DISTANCE = 75;\r\n\t\t\t\t\t// Vertical distance should not be more than a fraction of the horizontal distance.\r\n\t\t\t\t\tvar MAX_VERTICAL_RATIO = 0.3;\r\n\t\t\t\t\t// At least a 30px lateral motion is necessary for a swipe.\r\n\t\t\t\t\tvar MIN_HORIZONTAL_DISTANCE = 30;\r\n\r\n\t\t\t\t\tvar startCoords, valid;\r\n\r\n\t\t\t\t\tvar directionOfSwipe = function(coords) {\r\n\t\t\t\t\t\t// Check that it's within the coordinates.\r\n\t\t\t\t\t\t// Absolute vertical distance must be within tolerances.\r\n\t\t\t\t\t\t// Horizontal distance, we take the current X - the starting X.\r\n\t\t\t\t\t\t// This is negative for leftward swipes and positive for rightward swipes.\r\n\t\t\t\t\t\t// After multiplying by the direction (-1 for left, +1 for right), legal swipes\r\n\t\t\t\t\t\t// (ie. same direction as the directive wants) will have a positive delta and\r\n\t\t\t\t\t\t// illegal ones a negative delta.\r\n\t\t\t\t\t\t// Therefore this delta must be positive, and larger than the minimum.\r\n\t\t\t\t\t\tif (!startCoords) {\r\n\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tvar deltaY = Math.abs(coords.y - startCoords.y);\r\n\t\t\t\t\t\tvar deltaX = coords.x - startCoords.x;\r\n\t\t\t\t\t\tif(valid && // Short circuit for already-invalidated swipes.\r\n\t\t\t\t\t\t\tdeltaY < MAX_VERTICAL_DISTANCE &&\r\n\t\t\t\t\t\t\tdeltaX !== 0 &&\r\n\t\t\t\t\t\t\tMath.abs(deltaX) > MIN_HORIZONTAL_DISTANCE &&\r\n\t\t\t\t\t\t\tdeltaY / Math.abs(deltaX) < MAX_VERTICAL_RATIO) {\r\n\t\t\t\t\t\t\treturn (deltaX > 0) ? 'right' : 'left';\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse {\r\n\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t};\r\n\r\n\t\t\t\t\t$swipe.bind($(tableConfig.table), {\r\n\t\t\t\t\t\t'start': function(coords) {\r\n\t\t\t\t\t\t\tstartCoords = coords;\r\n\t\t\t\t\t\t\tvalid = true;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t'cancel': function() {\r\n\t\t\t\t\t\t\tvalid = false;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t'end': function(coords) {\r\n\t\t\t\t\t\t\tvar direction = directionOfSwipe(coords);\r\n\t\t\t\t\t\t\tif (direction) {\r\n\t\t\t\t\t\t\t\tresponsiveTableController.ratchetCols(direction);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t\t//end block of angular-touch code\r\n\r\n\t\t\t\t\t//add indicator bar(s) to show ratcheting is available?\r\n\t\t\t\t\tvar ratchetBar = '<div class=\"ratchet-indicator\"><span>...</span></div>';\r\n\t\t\t\t\t$(tableConfig.table).after(ratchetBar);\r\n\t\t\t\t};\r\n\r\n\t\t\t\tresponsiveTableController.addColumnToggleFeature = function(tableConfig) {\r\n\t\t\t\t\telement.addClass('column-toggle');\r\n\r\n                    $(tableConfig.table).wrap('<div class=\"scroll-table-wrapper\"></div>');\r\n\t\t\t\t\t//add controls to allow the user to hide columns\r\n\r\n\t\t\t\t\tvar columnToggle = '<span class=\"dropdown column-toggle\">' +\r\n\t\t\t\t\t\t'<span name=\"columnToggleDropdown\" data-toggle=\"dropdown\" id=\"'+responsiveTableController.id+'-columnToggleDropdown\">' +\r\n\t\t\t\t\t\t'<span ng-cloak>{{\"manageColumns\" | translate}}</span><span class=\"glyphicon glyphicon-chevron-down\"></span>' +\r\n\t\t\t\t\t\t'</span>' +\r\n\t\t\t\t\t\t'<fieldset class=\"dropdown-menu form-group\" role=\"menu\" aria-labelledby=\"'+responsiveTableController.id+'-columnToggleDropdown\">';\r\n\r\n\t\t\t\t\t$(tableConfig.headerRow).children().each(function(index, item) {\r\n\t\t\t\t\t\tvar columnName =$(item).find('.header-text').text();\r\n\r\n\t\t\t\t\t\tif(item.firstChild.nextSibling && item.firstChild.nextSibling.firstChild.localName == 'wc-row-select-header-checkbox')\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tcolumnName='Checkbox Column' ;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif(item.firstChild.nextSibling && item.firstChild.nextSibling.firstChild.localName == 'wc-row-select-header-radio')\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tcolumnName='Radio Column' ;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tif( item.firstChild !== null )\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tcolumnToggle += '<div role=\"menuitem\" class=\"checkbox\">' +\r\n\t\t\t\t\t\t\t\t'<label for=\"col' + index + '\">' +\r\n\t\t\t\t\t\t\t\t'<input id=\"col' + index + '\" type=\"checkbox\" checked ng-model=\"responsiveTableController.columnsToHide['+index+']\"/>' + columnName +\r\n\t\t\t\t\t\t\t\t'</label></div>';\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t\tcolumnToggle += '</fieldset></span>';\r\n\r\n\t\t\t\t\tscope.$watchCollection(function(){\r\n\t\t\t\t\t\t\treturn responsiveTableController.columnsToHide;\r\n\t\t\t\t\t\t}, function(newValue, oldValue) {\r\n\t\t\t\t\t\t\tif(newValue !== oldValue) {\r\n\t\t\t\t\t\t\t\tfor(var i=0; i<newValue.length; i++) {\r\n\t\t\t\t\t\t\t\t\tif(!newValue[i]) {\r\n\t\t\t\t\t\t\t\t\t\t$('#'+responsiveTableController.id+'.column-toggle .wc-table-column-'+i).hide();\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\telse {\r\n\t\t\t\t\t\t\t\t\t\t$('#'+responsiveTableController.id+'.column-toggle .wc-table-column-'+i).show();\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tfor (var i=0; i<newValue.length; i++) {\r\n\t\t\t\t\t\t\t\t\tnewValue[i] = true;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t$('#'+responsiveTableController.id+'.column-toggle .form-group').click(function(e){\r\n\t\t\t\t\t\t\t\t\te.stopPropagation();\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t);\r\n\t\t\t\t\t$(tableConfig.table).before($compile(columnToggle)(scope));\r\n                };\r\n\r\n\t\t\t\tresponsiveTableController.addListViewFeature = function() {\r\n\t\t\t\t\telement.addClass('table-mobile-stack');\r\n\t\t\t\t};\r\n\r\n\t\t\t\tresponsiveTableController.postSetupTable = function (tableConfig) {\r\n\t\t\t\t\tvar dataRow = tableConfig.dataRow;\r\n\r\n\t\t\t\t\t//$compile(headerRow)(scope);\r\n\r\n\t\t\t\t\tresponsiveTableController.dataRowChildren = dataRow.children().clone();\r\n\t\t\t\t\tdataRow.children().remove();\r\n\r\n\t\t\t\t\tdataRow.attr('wc-row-repeat', '');\r\n\t\t\t\t\t$compile(dataRow)(scope);\r\n\r\n\t\t\t\t\tif (dataRow[0].children.length < 1) {\r\n\t\t\t\t\t\tscope.renderTable();\r\n\t\t\t\t\t}\r\n\t\t\t\t};\r\n\r\n\r\n\t\t\t\tresponsiveTableController.loadTable = angular.bind(responsiveTableController, function() {\r\n\t\t\t\t\t/**\r\n\t\t\t\t\t * Load the table and features\r\n\t\t\t\t\t */\r\n\r\n\t\t\t\t\tthis.setupTableOptions();\r\n\r\n\t\t\t\t\tvar tableConfig = this.preSetupTable();\r\n\r\n\t\t\t\t\tthis.addLoadingIndicator();\r\n\r\n\t\t\t\t\tthis.addColumnFilteringFeature(tableConfig);\r\n\t\t\t\t\tthis.toggleFilterVisibility();\r\n\r\n\t\t\t\t\tthis.addPaginationFeature(tableConfig);\r\n\r\n\t\t\t\t\tthis.addCheckAllNoneFeature(tableConfig);\r\n\r\n\t\t\t\t\tthis.addExportToPdfFeature();\r\n\r\n\t\t\t\t\tthis.addExportToExcelFeature();\r\n\r\n\t\t\t\t\tthis.addResponsiveFeature(tableConfig);\r\n\r\n\t\t\t\t\tthis.postSetupTable(tableConfig);\r\n\t\t\t\t});\r\n\r\n\t\t\t\tresponsiveTableController.loadTable();\r\n\t\t\t}\r\n\t\t};\r\n\t}]);\r\n","/**\r\n * @ngdoc directive\r\n * @name WcResponsiveTableModule.directive:wcRowRepeat\r\n * @description\r\n * The wcRowRepeat directive is responsible for the row repeat operation on a datatable\r\n */\r\n\r\n'use strict';\r\n\r\nangular.module('WcResponsiveTableModule').directive('wcRowRepeat', ['$compile', function($compile) {\r\n\treturn {\r\n        require: ['wcRowRepeat', '^wcResponsiveTable'],\r\n        controllerAs: 'rowRepeatController',\r\n\t\tcontroller: ['$scope', '$element', '$attrs', 'WcTranslateConfiguratorService', function($scope, $element, $attrs, WcTranslateConfiguratorService) {\r\n\r\n            WcTranslateConfiguratorService.loadPartAndRefresh('WC-dataTable');\r\n\r\n\t\t\tvar responsiveTableController = $element.parent().controller('wcResponsiveTable');\r\n\t\t\tvar numberOfCols = responsiveTableController.numberOfCols;\r\n\t\t\tvar noRecordRow = $('<tr><td ng-cloak class=\"text-center\" colspan='+numberOfCols+' >{{\"noRecordFound\" | translate}}</td></tr>');\r\n\r\n\t\t\tthis.collection = responsiveTableController.WcTableCollectionService.getCollection;\r\n\t\t\tthis.rowKey = responsiveTableController.WcTableCollectionService.getRowKey();\r\n\r\n\t\t\tthis.parentElement = $element.parent();\r\n\t\t\tthis.elements = [];\r\n\t\t\tthis.insertRows = function(pageStart, pageEnd) {\r\n\t\t\t\tvar elementsLength = this.elements.length;\r\n\r\n\t\t\t\tvar ngModel = responsiveTableController.ngModel;\r\n\t\t\t\tvar collection = responsiveTableController.WcTableCollectionService.getCollection();\r\n\r\n\t\t\t\tif(elementsLength > 0) {\r\n\t\t\t\t\tfor (var i = 0; i < elementsLength; i++) {\r\n\t\t\t\t\t\tthis.elements[i].el.remove();\r\n\t\t\t\t\t\tthis.elements[i].scope.$destroy();\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.elements = [];\r\n\t\t\t\t}\r\n\r\n\t\t\t\t//TODO make setCollection update pagination instead\r\n\t\t\t\tif(collection.length < pageEnd) {\r\n\t\t\t\t\tpageEnd = collection.length;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfor (var index = pageStart; index < pageEnd; index++) {\r\n\t\t\t\t\tvar childScope = $scope.$new(false, responsiveTableController.WcTableScopeService.getTableScope());\r\n\t\t\t\t\tchildScope.row = collection[index];\r\n\t\t\t\t\tchildScope.rowKey = childScope.row[this.rowKey];\r\n\t\t\t\t\tchildScope.index = index;\r\n\r\n\t\t\t\t\tif(ngModel && ngModel.length > 0) {\r\n\t\t\t\t\t\t// var alreadySelected = ngModel.reduce(function(prev, next) {\r\n\t\t\t\t\t\t// \treturn next === childScope.rowKey ? next : prev;\r\n\t\t\t\t\t\t// }, null);\r\n\t\t\t\t\t\tvar alreadySelected = _.find(ngModel, function(value) { return value === childScope.rowKey; });\r\n\r\n\t\t\t\t\t\tif (alreadySelected) {\r\n\t\t\t\t\t\t\tchildScope.isSelected = true;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tvar newRow = $('<tr></tr>');\r\n\t\t\t\t\t_.forEach($attrs.$attr, function(value, key) {\r\n\t\t\t\t\t\tif (key != 'wcRowRepeat') {\r\n\t\t\t\t\t\t\tnewRow.attr(value, $attrs[key]);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t\tnewRow.append(responsiveTableController.dataRowChildren.clone());\r\n\r\n\t\t\t\t\tvar block = {};\r\n\t\t\t\t\tblock.el = newRow;\r\n\t\t\t\t\tblock.scope = childScope;\r\n\t\t\t\t\tthis.elements.push(block);\r\n\r\n\t\t\t\t\t$(noRecordRow).remove();\r\n\t\t\t\t\tthis.parentElement.append(newRow);\r\n\t\t\t\t\t$compile(newRow)(childScope);\r\n\t\t\t\t}\r\n\r\n                var mappedCollection = _.map(responsiveTableController.columnsToHide, function(value, key) { return {key: key, value: value}; });\r\n                var selectedItems = _.filter(mappedCollection, {value: false});\r\n                var hiddenColumns = _.map(selectedItems, function(value) { return value.key; });\r\n\t\t\t\tfor(var i=0; i < hiddenColumns.length; i++){\r\n                    $('#'+responsiveTableController.id+'.column-toggle .wc-table-column-'+hiddenColumns[i]).hide();\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif(collection.length<1 && this.parentElement[0].children.length<1) {\r\n\r\n\t\t\t\t\tthis.parentElement.append($compile(noRecordRow)($scope));\r\n\t\t\t\t}\r\n\r\n\t\t\t\t$element.remove();\r\n\t\t\t};\r\n\r\n\t\t}],\r\n\t\tlink: function(scope, element, attr, controllers) {\r\n        \t//jshint unused:true\r\n\t\t\tvar rowRepeatController = controllers[0];\r\n            var responsiveTableController = controllers[1];\r\n\r\n\t\t\tscope.$on('table.render.start', function() {\r\n\t\t\t\tvar paginationDefaults = responsiveTableController.WcTablePaginationService.getPaginationDefaults();\r\n\t\t\t\trowRepeatController.insertRows(paginationDefaults.pageStart, paginationDefaults.pageEnd);\r\n\t\t\t\tresponsiveTableController.WcTableScopeService.getTableScope().tableRendered();\r\n\t\t\t});\r\n\r\n\r\n\r\n\t\t}\r\n\t};\r\n}]);\r\n","/**\r\n * @ngdoc directive\r\n * @name WcResponsiveTableModule.directive:wcRowSelectCheckbox\r\n * @restrict E\r\n * @element div\r\n * @description\r\n * The wcRowSelectCheckbox directive is responsible for selecting the row in datatable on a checkbox click.\r\n */\r\n\r\n'use strict';\r\n\r\nangular.module('WcResponsiveTableModule').directive('wcRowSelectCheckbox', function () {\r\n\treturn {\r\n\t\trestrict: 'E',\r\n\t\ttemplate: '<input type=\"checkbox\" class=\"wc-checkbox-column\" name=\"{{responsiveTableController.id}}-checkbox[]\" ng-cloak ng-change=\"rowSelectCheckboxController.selectRow()\" ng-model=\"responsiveTableController.wcRowSelectCheckbox[rowSelectCheckboxController.index]\" ng-true-value=\"{{rowSelectCheckboxController.rowCheckedMap}}\" ng-false-value=\"{{rowSelectCheckboxController.rowUncheckedMap}}\">',\r\n\t\trequire: ['wcRowSelectCheckbox', '^wcResponsiveTable', '^ngModel'],\r\n\t\tscope: true,\r\n\t\tcontrollerAs: 'rowSelectCheckboxController',\r\n\t\tcontroller: ['$scope', '$element', function ($scope, $element) {\r\n\t\t\tthis.checkbox = $element.find('input');\r\n\t\t\tthis.index = $scope.$parent.index;\r\n\t\t\tthis.rowKey = $scope.$parent.rowKey;\r\n\t\t\tthis.rowCheckedMap = {\r\n\t\t\t\tkey: this.rowKey,\r\n\t\t\t\tvalue: true\r\n\t\t\t};\r\n\t\t\tthis.rowUncheckedMap = {\r\n\t\t\t\tkey: this.rowKey,\r\n\t\t\t\tvalue: false\r\n\t\t\t};\r\n\t\t\tthis.checked = this.rowUncheckedMap.value;\r\n\r\n\t\t\tvar responsiveTableController = $element.parent().controller('wcResponsiveTable');\r\n\t\t\tresponsiveTableController.wcRowSelectCheckbox = responsiveTableController.wcRowSelectCheckbox || [];\r\n\t\t\tresponsiveTableController.wcRowSelectCheckbox[this.index] = this.rowUncheckedMap;\r\n\r\n\t\t\tvar tableScope = responsiveTableController.WcTableScopeService.getTableScope();\r\n\r\n\t\t\tthis.selectRow = function () {\r\n\t\t\t\t$scope.$parent.isSelected = this.checked = responsiveTableController.wcRowSelectCheckbox[this.index].value;\r\n\r\n\t\t\t\tvar selectedItems = _.filter(responsiveTableController.wcRowSelectCheckbox, {value: true});\r\n\t\t\t\tvar newModel = _.map(selectedItems, function(value) { return value.key; });\r\n\r\n\t\t\t\tresponsiveTableController.ngModel = newModel;\r\n\t\t\t\tresponsiveTableController.applyModel(responsiveTableController.ngModel);\r\n\t\t\t};\r\n\r\n\t\t\ttableScope.$on('table.render.complete', angular.bind(this, function () {\r\n\t\t\t\tif ($scope.$parent.isSelected) {\r\n\t\t\t\t\tresponsiveTableController.wcRowSelectCheckbox[this.index] = this.rowCheckedMap;\r\n\t\t\t\t\tthis.checked = this.rowCheckedMap.value;\r\n\t\t\t\t}\r\n\t\t\t}));\r\n\r\n\t\t\ttableScope.$on('table.select.checkbox.all', angular.bind(this, function () {\r\n\t\t\t\tif(!this.checked) {\r\n\t\t\t\t\tthis.checkbox.click();\r\n\t\t\t\t}\r\n\t\t\t}));\r\n\r\n\t\t\ttableScope.$on('table.select.checkbox.none', angular.bind(this, function () {\r\n\t\t\t\tif(this.checked) {\r\n\t\t\t\t\tthis.checkbox.click();\r\n\t\t\t\t}\r\n\t\t\t}));\r\n\t\t}],\r\n\t\tlink: function (scope, element) {\r\n\t\t\tvar highlightRow = function (shouldHighlight) {\r\n\t\t\t\tvar row = element.parent().parent();\r\n\t\t\t\tif (shouldHighlight) {\r\n\t\t\t\t\t$(row).addClass('wc-highlight-row');\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\t$(row).removeClass('wc-highlight-row');\r\n\t\t\t\t}\r\n\t\t\t\tvar tableCells = row.children();\r\n\t\t\t\t$(tableCells).each(function (index, cell) {\r\n\t\t\t\t\t// jshint unused:true\r\n\t\t\t\t\tif (shouldHighlight) {\r\n\t\t\t\t\t\t$(cell).addClass('wc-highlight-row');\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\t$(cell).removeClass('wc-highlight-row');\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t};\r\n\r\n\t\t\tscope.$watch('rowSelectCheckboxController.checked', function (boolean) {\r\n\t\t\t\thighlightRow(boolean);\r\n\t\t\t});\r\n\t\t}\r\n\t};\r\n});\r\n","/**\r\n * @ngdoc directive\r\n * @name WcResponsiveTableModule.directive:wcRowSelectRadio\r\n * @restrict E\r\n * @element div\r\n * @description\r\n * The wcRowSelectRadio directive is responsible for radio button select in datatable.\r\n */\r\n\r\n'use strict';\r\n\r\nangular.module('WcResponsiveTableModule').directive('wcRowSelectRadio', function() {\r\n\treturn {\r\n\t\trestrict: 'E',\r\n\t\ttemplate: '<input type=\"radio\" ng-cloak name=\"{{responsiveTableController.id}}-radio\" class=\"wc-radio-column\" ng-click=\"rowSelectRadioController.selectRow()\" ng-model=\"responsiveTableController.wcRowSelectRadio\" ng-value=\"rowSelectRadioController.rowKey\">',\r\n\t\trequire: ['wcRowSelectRadio', '^wcResponsiveTable', '^ngModel'],\r\n\t\tscope: true,\r\n\t\tcontrollerAs: 'rowSelectRadioController',\r\n\t\tcontroller: ['$scope', '$element', function ($scope, $element) {\r\n\t\t\tvar responsiveTableController = $element.parent().controller('wcResponsiveTable');\r\n\r\n\t\t\tthis.rowKey = $scope.$parent.rowKey;\r\n\t\t\tthis.selectRow = function() {\r\n\t\t\t\tresponsiveTableController.ngModel = [this.rowKey];\r\n\t\t\t\tresponsiveTableController.applyModel(responsiveTableController.ngModel);\r\n\t\t\t};\r\n\r\n\t\t\t$scope.$on('table.render.complete', angular.bind(this, function() {\r\n\t\t\t\tif($scope.$parent.isSelected) {\r\n\t\t\t\t\tresponsiveTableController.wcRowSelectRadio = this.rowKey;\r\n\t\t\t\t}\r\n\t\t\t}));\r\n\t\t}],\r\n\t\tlink: function(scope, element, attrs, controllers) {\r\n\t\t\tvar rowSelectRadioController = controllers[0];\r\n\t\t\tvar responsiveTableController = controllers[1];\r\n\r\n\t\t\t var highlightRow = function(shouldHighlight) {\r\n\r\n\t\t\t\tvar row = element.parent().parent();\r\n\t\t\t\tif (shouldHighlight) {\r\n\t\t\t\t\t$(row).addClass('wc-highlight-row');\r\n\t\t\t\t} else {\r\n\t\t\t\t\t$(row).removeClass('wc-highlight-row');\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar tableCells = row.children();\r\n\t\t\t\t$(tableCells).each(function(index, cell) {\r\n\t\t\t\t\t// jshint unused:true\r\n\t\t\t\t\tif(shouldHighlight) {\r\n\t\t\t\t\t\t$(cell).addClass('wc-highlight-row');\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\t$(cell).removeClass('wc-highlight-row');\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t};\r\n\r\n\t\t\tscope.$watch('responsiveTableController.wcRowSelectRadio', function(newRow) {\r\n\t\t\t\tif(responsiveTableController.ngModel) {\r\n\t\t\t\t\tvar highlight = newRow === rowSelectRadioController.rowKey;\r\n\r\n\t\t\t\t\thighlightRow(highlight);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t};\r\n});\r\n","/**\r\n * @ngdoc directive\r\n * @name WcResponsiveTableModule.directive:wcRowSelectAll\r\n * @restrict A\r\n * @description\r\n * The wcRowSelectAll directive is responsible for selecting all rows of the datatable on a single click.\r\n */\r\n\r\n'use strict';\r\n\r\nangular.module('WcResponsiveTableModule').directive('wcRowSelectAll', function() {\r\n\treturn {\r\n\t\trestrict: 'A',\r\n\t\trequire: ['wcRowSelectAll', '^wcResponsiveTable', '^ngModel'],\r\n\t\tscope: {},\r\n\t\tcontrollerAs: 'rowSelectAllController',\r\n\t\tcontroller: ['$scope', '$element', function ($scope, $element) {\r\n\t\t\tvar responsiveTableController = $element.parent().controller('wcResponsiveTable');\r\n\t\t\tthis.viewScope = responsiveTableController.WcTableScopeService.getParentScope();\r\n\r\n\t\t\tthis.selectAll = function() {\r\n\t\t\t\tthis.viewScope.$broadcast('table.select.checkbox.all');\r\n\t\t\t\tthis.viewScope.$broadcast('table.select.button.all');\r\n\t\t\t\t$scope.$apply();\r\n\t\t\t};\r\n\t\t}],\r\n\t\tlink: function(scope, element, attrs, controllers) { //jshint unused:true\r\n\t\t\tvar rowSelectAllController = controllers[0];\r\n\t\t\telement.on('click', function () {\r\n\t\t\t\trowSelectAllController.selectAll();\r\n\t\t\t});\r\n\t\t}\r\n\t};\r\n});\r\n","/**\r\n * @ngdoc directive\r\n * @name WcResponsiveTableModule.directive:wcRowSelectNone\r\n * @restrict A\r\n * @description\r\n * The wcRowSelectNone directive is responsible for un select all the selected rows or headers of the datatable.\r\n */\r\n\r\n'use strict';\r\n\r\nangular.module('WcResponsiveTableModule').directive('wcRowSelectNone', function() {\r\n\treturn {\r\n\t\trestrict: 'A',\r\n\t\trequire: ['wcRowSelectNone', '^wcResponsiveTable', '^ngModel'],\r\n\t\tscope: {},\r\n\t\tcontrollerAs: 'rowSelectNoneController',\r\n\t\tcontroller: ['$scope', '$element', function ($scope, $element) {\r\n\t\t\tvar responsiveTableController = $element.parent().controller('wcResponsiveTable');\r\n\t\t\tthis.viewScope = responsiveTableController.WcTableScopeService.getParentScope();\r\n\r\n\t\t\tthis.selectNone = function() {\r\n\t\t\t\tthis.viewScope.$broadcast('table.select.checkbox.none');\r\n\t\t\t\tthis.viewScope.$broadcast('table.select.button.none');\r\n\t\t\t\t$scope.$apply();\r\n\t\t\t};\r\n\t\t}],\r\n\t\tlink: function(scope, element, attrs, controllers) { //jshint unused:true\r\n\t\t\tvar rowSelectNoneController = controllers[0];\r\n\t\t\telement.on('click', function () {\r\n\t\t\t\trowSelectNoneController.selectNone();\r\n\t\t\t});\r\n\t\t}\r\n\t};\r\n});","/**\r\n * @ngdoc directive\r\n * @name WcResponsiveTableModule.directive:wcTableSelectionInfo\r\n * @restrict E\r\n * @element span\r\n * @description\r\n * The wcTableSelectionInfo directive is responsible for get the number of selected rows from the datatable\r\n */\r\n\r\n'use strict';\r\n\r\nangular.module('WcResponsiveTableModule').directive('wcTableSelectionInfo', function() {\r\n\treturn {\r\n\t\trestrict: 'E',\r\n        template: '<span ng-cloak>{{tableSelectionInfoController.numberOfSelectedRows}} {{\"rowsCurrentlySelected\" | translate}}</span>',\r\n        require: ['wcTableSelectionInfo', '^wcResponsiveTable', '^ngModel'],\r\n\t\tscope: {},\r\n\t\tcontrollerAs: 'tableSelectionInfoController',\r\n\t\tcontroller: ['$scope', '$element', function($scope, $element) {\r\n\t\t\tvar responsiveTableController = $element.parent().controller('wcResponsiveTable');\r\n\t\t\tvar tableScope = responsiveTableController.WcTableScopeService.getTableScope();\r\n\r\n\t\t\tthis.numberOfSelectedRows = responsiveTableController.ngModel.length;\r\n\t\t\ttableScope.$watch(function() {\r\n\t\t\t\treturn responsiveTableController.ngModel.length;\r\n\t\t\t}, angular.bind(this, function(newVal, oldVal) {\r\n\t\t\t\t\tif(newVal != oldVal) {\r\n\t\t\t\t\t\tthis.numberOfSelectedRows = newVal;\r\n\t\t\t\t\t}\r\n\t\t\t}));\r\n\t\t}]\r\n\t};\r\n});\r\n","/**\r\n * @ngdoc directive\r\n * @name WcResponsiveTableModule.directive:wcRowActionSingle\r\n * @restrict A\r\n * @scope\r\n * @param {string} wcRowActionSingle The parameter holds the single row action values\r\n * @description\r\n * The wcRowActionSingle directive is responsible for the single row actions that are carried out in the datatable.\r\n */\r\n\r\n'use strict';\r\n\r\nangular.module('WcResponsiveTableModule').directive('wcRowActionSingle', function() {\r\n\treturn {\r\n\t\trestrict: 'A',\r\n\t\trequire: ['wcRowActionSingle', '^wcResponsiveTable'],\r\n\t\tscope: {},\r\n\t\tbindToController: {\r\n\t\t\twcRowActionSingle: '@'\r\n\t\t},\r\n\t\tcontrollerAs: 'rowActionSingleController',\r\n\t\tcontroller: ['$scope', '$element', function ($scope, $element) {\r\n\t\t\tvar responsiveTableController = $element.parent().controller('wcResponsiveTable');\r\n\r\n\t\t\tthis.singleAction = function() {\r\n\t\t\t\tvar rowScope = $scope.$parent;\r\n\t\t\t\tvar viewScope = responsiveTableController.WcTableScopeService.getParentScope();\r\n\r\n\t\t\t\tvar data = [].concat(rowScope.rowKey);\r\n\r\n\t\t\t\tviewScope.$broadcast(this.wcRowActionSingle, data);\r\n\t\t\t};\r\n\t\t}],\r\n\t\tlink: function (scope, element, attrs, controllers) { //jshint unused:true\r\n\t\t\tvar rowActionSingleController = controllers[0];\r\n\r\n\t\t\telement.on('click', function() {\r\n\t\t\t\trowActionSingleController.singleAction();\r\n\t\t\t});\r\n\t\t}\r\n\t};\r\n});","/**\r\n * @ngdoc directive\r\n * @name WcResponsiveTableModule.directive:wcRowSelectHeaderCheckbox\r\n * @restrict E\r\n * @element div\r\n * @description\r\n * The wcRowSelectHeaderCheckbox directive is responsible for selecting the header in datatable on a checkbox click.\r\n */\r\n\r\n'use strict';\r\n\r\nangular.module('WcResponsiveTableModule')\r\n\t.directive('wcRowSelectHeaderCheckbox', ['$timeout', function ($timeout) {\r\n\t\treturn {\r\n\t\t\trestrict: 'E',\r\n\t\t\ttemplate: '<input ng-cloak type=\"checkbox\" class=\"wc-header-checkbox\" name=\"{{rowSelectHeaderCheckboxController.id}}-header-checkbox\" ng-change=\"rowSelectHeaderCheckboxController.selectAllRows()\" ng-model=\"rowSelectHeaderCheckboxController.isChecked\">',\r\n\t\t\trequire: ['wcRowSelectHeaderCheckbox', '^wcResponsiveTable', '^ngModel'],\r\n            scope: {},\r\n            bindToController: {\r\n                wcRowSelectHeaderCheckbox: '@'\r\n            },\r\n\t\t\tcontrollerAs: 'rowSelectHeaderCheckboxController',\r\n\t\t\tcontroller: ['$scope', '$element', function ($scope, $element) {\r\n\t\t\t\tvar responsiveTableController = $element.parent().controller('wcResponsiveTable');\r\n\t\t\t\tvar tableScope = responsiveTableController.WcTableScopeService.getTableScope();\r\n\r\n                this.id = responsiveTableController.id;\r\n\t\t\t\tthis.checkbox = $element.find('input');\r\n\r\n\t\t\t\tthis.checkIfAllChecked = function () {\r\n\t\t\t\t\tvar allCheckboxes = responsiveTableController.table.find('tbody input[type=\"checkbox\"]');\r\n\t\t\t\t\tfor (var i = 0; i < allCheckboxes.length; i++) {\r\n\t\t\t\t\t\tif (!angular.element(allCheckboxes[i]).is(':checked')) {\r\n\t\t\t\t\t\t\tthis.isChecked = false;\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t};\r\n\r\n\t\t\t\tthis.selectAllRows = function () {\r\n\t\t\t\t\tvar event = this.isChecked ? 'table.select.checkbox.all' : 'table.select.checkbox.none';\r\n\t\t\t\t\ttableScope.$broadcast(event);\r\n\t\t\t\t};\r\n\r\n\t\t\t\ttableScope.$watch(function () {\r\n\t\t\t\t\treturn responsiveTableController.ngModel;\r\n\t\t\t\t}, angular.bind(this, function () {\r\n\t\t\t\t\tthis.checkIfAllChecked();\r\n\t\t\t\t}));\r\n\r\n\t\t\t\ttableScope.$on('table.render.complete', angular.bind(this, function () {\r\n\t\t\t\t\t$timeout(angular.bind(this, function () {\r\n\t\t\t\t\t\tthis.isChecked = true;\r\n\t\t\t\t\t\tthis.checkIfAllChecked();\r\n\t\t\t\t\t}));\r\n\t\t\t\t}));\r\n\t\t\t}]\r\n\t\t};\r\n\t}]);","'use strict';\r\nangular.module('WcResponsiveTableModule').directive('wcRowSelectHeaderRadio', function() {\r\n        return {\r\n            restrict: 'E',\r\n            template:'',\r\n            scope: {\r\n                wcRowSelectHeaderRadio: '@'\r\n            },\r\n            controller: ['$scope',function($scope){\r\n\r\n\r\n            }]\r\n        };\r\n    }\r\n);","/**\r\n * @ngdoc directive\r\n * @name WcResponsiveTableModule.directive:wcRowActionMultiple\r\n * @restrict A\r\n * @scope\r\n * @param {string} wcRowActionMultiple The parameter holds the multiple row action values\r\n * @description\r\n * The wcRowActionMultiple directive is responsible for the multiple actions that are carried out in the datatable.\r\n */\r\n\r\n'use strict';\r\n\r\nangular.module('WcResponsiveTableModule').directive('wcRowActionMultiple', function() {\r\n\treturn {\r\n\t\trestrict: 'A',\r\n\t\trequire: ['wcRowActionMultiple', '?^wcResponsiveTable'],\r\n\t\tscope: {},\r\n\t\tbindToController: {\r\n\t\t\twcRowActionMultiple: '@'\r\n\t\t},\r\n\t\tcontrollerAs: 'rowActionMultipleController',\r\n\t\tcontroller: ['$scope', '$element', function ($scope, $element) { //jshint unused:true\r\n\t\t\tvar responsiveTableController = $element.parent().controller('wcResponsiveTable');\r\n\r\n\t\t\tthis.multipleAction = function() {\r\n\t\t\t\tvar ngModel = responsiveTableController.ngModel;\r\n\t\t\t\tvar viewScope = responsiveTableController.WcTableScopeService.getParentScope();\r\n\r\n\t\t\t\tif(ngModel.length) {\r\n\t\t\t\t\tviewScope.$broadcast(this.wcRowActionMultiple, [].concat(ngModel));\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t}],\r\n\t\tlink: function (scope, element, attrs, controllers) { //jshint unused:true\r\n\t\t\tvar rowActionMultipleController = controllers[0];\r\n\r\n\t\t\telement.on('click', function() {\r\n\t\t\t\trowActionMultipleController.multipleAction();\r\n\t\t\t});\r\n\t\t}\r\n\t};\r\n});","/**\r\n * @ngdoc directive\r\n * @name WcResponsiveTableModule.directive:wcTablePagination\r\n * @description\r\n * The wcTablePagination directive is responsible for pagination operation in datatable\r\n */\r\n\r\n'use strict';\r\nangular.module('WcResponsiveTableModule').directive('wcTablePagination', ['$compile', '$window', '_', function ($compile, $window, _) {\r\n\treturn {\r\n\t\trequire: ['wcTablePagination'],\r\n\t\tscope: {},\r\n\t\tbindToController: {},\r\n\t\tcontrollerAs: 'tablePaginationController',\r\n\t\tcontroller: ['$scope', '$element', 'WcTranslateConfiguratorService',\r\n\t\t\t\t\tfunction ($scope, $element, WcTranslateConfiguratorService) {\r\n\r\n\t\t\t//TODO: The wcResponsiveTable directive is not a parent of wcTablePagination, figure out why?\r\n\t\t\t// In the mean time, grab the wcResponsiveTable controller off the scope\r\n\t\t\tvar responsiveTableController = $element.parent().controller('wcResponsiveTable');\r\n\t\t\tresponsiveTableController = responsiveTableController || $scope.responsiveTableController || $scope.$parent.responsiveTableController;\r\n\t\t\tvar tableScope = responsiveTableController.WcTableScopeService.getTableScope();\r\n\t\t\tvar pagination;\r\n\r\n\t\t\tthis.tableWrapper = responsiveTableController.element;\r\n\t\t\tthis.table = responsiveTableController.table;\r\n\t\t\tthis.id = responsiveTableController.id + '-pagination';\r\n\r\n\r\n\t\t\tWcTranslateConfiguratorService.loadPartAndRefresh('WC-dataTable');\r\n\r\n\t\t\tthis.pagination = responsiveTableController.WcTablePaginationService.getPaginationDefaults();\r\n\t\t\tpagination = this.pagination;\r\n\r\n\t\t\ttableScope.$on('table.pagination.update', angular.bind(this, function (event, resetCurrentPage) {\r\n\t\t\t\tif (resetCurrentPage) {\r\n\t\t\t\t\tpagination.currentPage = 1;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tpagination.totalItems = responsiveTableController.WcTableCollectionService.getCollectionLength();\r\n\t\t\t\tpagination.totalPages = Math.ceil(pagination.totalItems / pagination.resultsPerPage);\r\n\t\t\t\tthis.updatePaginationControls(pagination.currentPage);\r\n\t\t\t\tthis.createPaginationControlNumbers();\r\n\t\t\t}));\r\n\r\n\t\t\tpagination.boundaryLinks = true;\r\n\t\t\tpagination.currentBreakpoint = '';\r\n\t\t\tpagination.currentPage = 1;\r\n\t\t\tpagination.paginationPageControls = [];\r\n\t\t\tpagination.totalItems = responsiveTableController.WcTableCollectionService.getCollectionLength();\r\n\t\t\tpagination.totalPages = Math.ceil(pagination.totalItems / pagination.resultsPerPage);\r\n\r\n\t\t\tthis.createPaginationControlNumbers = function () {\r\n\t\t\t\tvar array = [];\r\n\r\n\t\t\t\tvar paginationNoOfPages = pagination.totalPages>pagination.numberOfPageControls? pagination.numberOfPageControls:pagination.totalPages;\r\n\r\n\t\t\t\tvar paginationOffset = Math.floor(paginationNoOfPages / 2);\r\n\r\n\t\t\t\tfor (var index = 0; index < paginationNoOfPages; index++) {\r\n\t\t\t\t\tif (pagination.currentPage - paginationOffset > 0 &&\r\n\t\t\t\t\t\tpagination.currentPage - paginationOffset <= pagination.totalPages) {\r\n\t\t\t\t\t\tarray.push(pagination.currentPage - paginationOffset);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tpaginationOffset--;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (array.length < paginationNoOfPages) {\r\n\t\t\t\t\tvar checkValue = Math.floor(pagination.currentPage - paginationNoOfPages / 2);\r\n\t\t\t\t\tvar numberOfPagesNeeded = Math.abs(array.length - paginationNoOfPages);\r\n\t\t\t\t\tvar pageNumberToAdd;\r\n\t\t\t\t\tvar i;\r\n\r\n\t\t\t\t\tif (checkValue <= 0) {\r\n\t\t\t\t\t\tvar lastPageAdded = array[array.length - 1];\r\n\t\t\t\t\t\tfor (i = 1; i <= numberOfPagesNeeded; i++) {\r\n\t\t\t\t\t\t\tpageNumberToAdd = lastPageAdded + i;\r\n\t\t\t\t\t\t\tif (pagination.totalPages >= pageNumberToAdd) {\r\n\t\t\t\t\t\t\t\tarray.push(pageNumberToAdd);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tvar firstPageAdded = array[0];\r\n\t\t\t\t\t\tfor (i = 1; i <= numberOfPagesNeeded; i++) {\r\n\t\t\t\t\t\t\tpageNumberToAdd = firstPageAdded - i;\r\n\t\t\t\t\t\t\tarray.unshift(pageNumberToAdd);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tpagination.paginationPageControls = array;\r\n\t\t\t};\r\n\r\n\t\t\tthis.changeResultsPerPage = function () {\r\n\t\t\t\tif (pagination.resultsPerPage === 'All') {\r\n\t\t\t\t\tpagination.resultsPerPage = pagination.totalItems;\r\n\t\t\t\t\tpagination.pageStart = 0;\r\n\t\t\t\t\tpagination.pageEnd = pagination.totalItems;\r\n\t\t\t\t\tpagination.totalPages = 1;\r\n\t\t\t\t\tthis.changePage(1);\r\n\r\n\t\t\t\t} else {\r\n\t\t\t\t\tpagination.totalPages = Math.ceil(pagination.totalItems / pagination.resultsPerPage);\r\n\t\t\t\t\tvar newPage = Math.ceil(pagination.pageStart / pagination.resultsPerPage);\r\n\t\t\t\t\tthis.changePage(newPage ? newPage : 1);\r\n\t\t\t\t}\r\n\t\t\t};\r\n\r\n\t\t\tthis.updatePaginationControls = function (pageNumber) {\r\n\t\t\t\tpagination.currentPage = pageNumber;\r\n\t\t\t\tpagination.pageStart = (pageNumber * pagination.resultsPerPage) - pagination.resultsPerPage;\r\n\r\n\t\t\t\tvar newPageEnd = pagination.pageStart + pagination.resultsPerPage;\r\n\r\n\t\t\t\tif (newPageEnd > pagination.totalItems) {\r\n\t\t\t\t\tpagination.pageEnd = pagination.totalItems;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tpagination.pageEnd = newPageEnd;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tresponsiveTableController.WcTablePaginationService.setPaginationDefaults({\r\n\t\t\t\t\tpageStart: pagination.pageStart,\r\n\t\t\t\t\tpageEnd: pagination.pageEnd\r\n\t\t\t\t});\r\n\r\n\t\t\t};\r\n\r\n\t\t\tthis.changePage = function (pageNumber) {\r\n\t\t\t\tif (pageNumber > 0 && pageNumber <= pagination.totalPages) {\r\n\t\t\t\t\tthis.updatePaginationControls(pageNumber);\r\n\t\t\t\t\tthis.createPaginationControlNumbers();\r\n\r\n\t\t\t\t\ttableScope.renderTable();\r\n\r\n\t\t\t\t} else {\r\n\t\t\t\t\tif (isNaN(pageNumber)) {\r\n\t\t\t\t\t\tthrow 'Invaild Page Number: ' + pageNumber + '. Must be a number, no other characters allowed';\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\telse if (pageNumber <= 0) {\r\n\t\t\t\t\t\tthrow 'Invaild Page Number: ' + pageNumber + '. Must be greater than 0';\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\telse if (pageNumber > pagination.totalPages) {\r\n\t\t\t\t\t\tthrow 'Invaild Page Number: ' + pageNumber + '. Must be smaller than ' + pagination.totalPages;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\telse {\r\n\t\t\t\t\t\tthrow 'Invaild Page Number: ' + pageNumber + '. Not sure what you did, but it is invalid';\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t};\r\n\r\n\t\t\tthis.nextPage = function () {\r\n\t\t\t\tvar nextPageNumber = pagination.currentPage;\r\n\t\t\t\tif (nextPageNumber + 1 <= pagination.totalPages) {\r\n\t\t\t\t\tthis.changePage(++nextPageNumber);\r\n\t\t\t\t}\r\n\t\t\t};\r\n\r\n\t\t\tthis.previousPage = function () {\r\n\t\t\t\tvar nextPageNumber = pagination.currentPage;\r\n\t\t\t\tif (nextPageNumber - 1 > 0) {\r\n\t\t\t\t\tthis.changePage(--nextPageNumber);\r\n\t\t\t\t}\r\n\t\t\t};\r\n\r\n\t\t\t//// Make sure the pagination controls are refreshed after a sort. If the table is sorted on a page greater\r\n\t\t\t//// than 1, the controls will not update\r\n\t\t\t//tableScope.$on('table.sort.complete', function() {\r\n\t\t\t//\tthis.updatePaginationControls(1);\r\n\t\t\t//\tthis.createPaginationControlNumbers();\r\n\t\t\t//\r\n\t\t\t//\ttableScope.$broadcast('table.render.start', pagination);\r\n\t\t\t//});\r\n\r\n\t\t\t//responsive stuff\r\n\t\t\ttableScope.$watch(function () {\r\n\t\t\t\treturn pagination.currentBreakpoint;\r\n\t\t\t}, angular.bind(this, function (newValue, oldValue) {\r\n\t\t\t\tif (newValue !== oldValue) {\r\n\t\t\t\t\tif (newValue === 'xs') {\r\n\t\t\t\t\t\t//pagination.resultsPerPage = 'All';\r\n\t\t\t\t\t\t//this.changeResultsPerPage();\r\n\t\t\t\t\t\tpagination.numberOfPageControls = 0;\r\n\t\t\t\t\t\tpagination.boundaryLinks = false;\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse if (newValue === 'sm') {\r\n\t\t\t\t\t\t//pagination.resultsPerPage = this.resultsPerPage || pagination.resultsPerPage;\r\n\t\t\t\t\t\t//this.changeResultsPerPage();\r\n\t\t\t\t\t\tpagination.numberOfPageControls = 0;\r\n\t\t\t\t\t\tpagination.boundaryLinks = false;\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse if (newValue === 'md') {\r\n\t\t\t\t\t\t//pagination.resultsPerPage = this.resultsPerPage || pagination.resultsPerPage;\r\n\t\t\t\t\t\t//this.changeResultsPerPage();\r\n\t\t\t\t\t\tpagination.numberOfPageControls = 0;\r\n\t\t\t\t\t\tpagination.boundaryLinks = false;\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse if (newValue === 'lg') {\r\n\t\t\t\t\t\t//pagination.resultsPerPage = this.resultsPerPage || pagination.resultsPerPage;\r\n\t\t\t\t\t\t//this.changeResultsPerPage();\r\n\t\t\t\t\t\tpagination.numberOfPageControls = 3;\r\n\t\t\t\t\t\tpagination.boundaryLinks = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse {\r\n\t\t\t\t\t\tpagination.numberOfPageControls = responsiveTableController.WcTablePaginationService.getPaginationDefaults().numberOfPageControls;\r\n\t\t\t\t\t\tpagination.boundaryLinks = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.createPaginationControlNumbers();\r\n\t\t\t\t}\r\n\t\t\t}));\r\n\r\n\t\t\tvar resizeHandler = function () {\r\n\t\t\t\t//<=430 is default\r\n\t\t\t\tif (window.innerWidth <= pagination.responsiveBreakpoints[0] && pagination.currentBreakpoint !== 'xs') {\r\n\t\t\t\t\tpagination.currentBreakpoint = 'xs';\r\n\t\t\t\t}\r\n\t\t\t\t//>430 and <=500 is default\r\n\t\t\t\telse if ((window.innerWidth > pagination.responsiveBreakpoints[0] &&\r\n\t\t\t\t\twindow.innerWidth <= pagination.responsiveBreakpoints[1]) && pagination.currentBreakpoint !== 'sm') {\r\n\t\t\t\t\tpagination.currentBreakpoint = 'sm';\r\n\t\t\t\t}\r\n\t\t\t\t//>500 and <=600 is default\r\n\t\t\t\telse if ((window.innerWidth > pagination.responsiveBreakpoints[1] &&\r\n\t\t\t\t\twindow.innerWidth <= pagination.responsiveBreakpoints[2]) && pagination.currentBreakpoint !== 'md') {\r\n\t\t\t\t\tpagination.currentBreakpoint = 'md';\r\n\t\t\t\t}\r\n\t\t\t\t//>600 and <=900 is default\r\n\t\t\t\telse if ((window.innerWidth > pagination.responsiveBreakpoints[2] &&\r\n\t\t\t\t\twindow.innerWidth <= pagination.responsiveBreakpoints[3]) && pagination.currentBreakpoint !== 'lg') {\r\n\t\t\t\t\tpagination.currentBreakpoint = 'lg';\r\n\t\t\t\t}\r\n\t\t\t\t//>900 is default\r\n\t\t\t\telse if (window.innerWidth > pagination.responsiveBreakpoints[3] && pagination.currentBreakpoint !== 'xl') {\r\n\t\t\t\t\tpagination.currentBreakpoint = 'xl';\r\n\t\t\t\t}\r\n\r\n\t\t\t\ttableScope.$digest();\r\n\t\t\t};\r\n\t\t\t//debounce this handler to avoid rapid-fire resize events\r\n\t\t\tangular.element($window).bind('resize', _.debounce(resizeHandler, 300));\r\n\r\n\t\t\t//finally, call the resizeHandler once to initialize our breakpoint var\r\n\t\t\tsetTimeout(resizeHandler, 0);\r\n\t\t}],\r\n\t\tlink: function (scope, element, attr, controllers) {\r\n\t\t\tvar tablePaginationController = controllers[0];\r\n\r\n\t\t\tvar resultsPerPageTemplate =\r\n\t\t\t\t'<div class=\"col-xs-3 result-page-count\" ng-cloak>' +\r\n\t\t\t\t\t'<label>{{\"pagination.resultsPerPage\" | translate}}: ' +\r\n\t\t\t\t\t\t'<select class=\"form-control form-inline input-sm pagination-results-per-page\" ng-options=\"result for result in tablePaginationController.pagination.selectResultsPerPage\"' +\r\n\t\t\t\t\t\t' ng-model=\"tablePaginationController.pagination.resultsPerPage\" ng-change=\"tablePaginationController.changeResultsPerPage()\">' +\r\n\t\t\t\t\t\t'</select>' +\r\n\t\t\t\t\t'</label>' +\r\n\t\t\t\t'</div>';\r\n\r\n\t\t\tvar paginationLegendTemplate =\r\n\t\t\t\t'<div class=\"col-xs-4 text-right\">' +\r\n\t\t\t\t\t'<p class=\"hidden-xs hidden-sm results-data\">' +\r\n\t\t\t\t\t\t'<span ng-cloak ng-if=\"tablePaginationController.pagination.totalItems==0\">{{\"pagination.paginationNoRecordLegend\" | translate:tablePaginationController.pagination}}</span>' +\r\n\t\t\t\t\t\t'<span ng-cloak ng-if=\"tablePaginationController.pagination.totalItems>0\"> {{\"pagination.paginationLegend\" | translate:tablePaginationController.pagination}}</span>' +\r\n\t\t\t\t\t'</p>' +\r\n\t\t\t\t'</div>';\r\n\r\n\t\t\tvar paginationControlsTemplate = '' +\r\n\t\t\t\t'<div class=\"col-xs-5 pagination-control text-right\" ng-cloak>' +\r\n\t\t\t\t\t'<ul class=\"hidden-xs pagination pagination-sm\">' +\r\n\t\t\t\t\t\t'<li ng-hide=\"!tablePaginationController.pagination.boundaryLinks\" class=\"pagination-page\" ng-class=\"{disabled: tablePaginationController.pagination.currentPage == 1}\">' +\r\n\t\t\t\t\t\t'\t<button type=\"button\" ng-disabled=\"tablePaginationController.pagination.currentPage == 1\" ng-click=\"tablePaginationController.changePage(1)\">&#xe069</button>' +\r\n\t\t\t\t\t\t'</li>' +\r\n\t\t\t\t\t\t'<li class=\"pagination-page\"  ng-class=\"{disabled: tablePaginationController.pagination.currentPage == 1}\">' +\r\n\t\t\t\t\t\t\t'<button type=\"button\"  ng-disabled=\"tablePaginationController.pagination.currentPage == 1\" class=\"previous\" ng-click=\"tablePaginationController.previousPage()\">&#xe071</button>' +\r\n\t\t\t\t\t\t'</li>' +\r\n\t\t\t\t\t\t'<li class=\"pagination-page pagination-page-number\" ng-class=\"{active: tablePaginationController.pagination.currentPage === number}\" ng-repeat=\"number in tablePaginationController.pagination.paginationPageControls\">' +\r\n\t\t\t\t\t\t\t'<button type=\"button\" ng-cloak ng-click=\"tablePaginationController.changePage(number)\">{{number}}</button>' +\r\n\t\t\t\t\t\t'</li>' +\r\n\t\t\t\t\t\t'<li class=\"pagination-page\" ng-class=\"{disabled: tablePaginationController.pagination.currentPage == tablePaginationController.pagination.totalPages}\">' +\r\n\t\t\t\t\t\t\t'<button type=\"button\" ng-disabled=\"tablePaginationController.pagination.currentPage == tablePaginationController.pagination.totalPages\" class=\"next\" ng-click=\"tablePaginationController.nextPage()\">&#xe075</button>' +\r\n\t\t\t\t\t\t'</li>' +\r\n\t\t\t\t\t\t'<li ng-hide=\"!tablePaginationController.pagination.boundaryLinks\" class=\"pagination-page\"  ng-class=\"{disabled: tablePaginationController.pagination.currentPage == tablePaginationController.pagination.totalPages}\">' +\r\n\t\t\t\t\t\t\t'<button type=\"button\" ng-disabled=\"tablePaginationController.pagination.currentPage == tablePaginationController.pagination.totalPages\" ng-click=\"tablePaginationController.changePage(tablePaginationController.pagination.totalPages)\">&#xe077</button>' +\r\n\t\t\t\t\t\t'</li>' +\r\n\t\t\t\t\t'</ul>' +\r\n\t\t\t\t'<div>';\r\n\r\n\t\t\tvar navigateToPageTemplate =\r\n\t\t\t\t'<div class=\"col-xs-12 pagination-navigation hidden-sm hidden-md hidden-lg hidden-xl text-center\">' +\r\n\t\t\t\t\t'<ul class=\"pagination pagination-sm\">' +\r\n\t\t\t\t\t\t'<li class=\"pagination-page\" ng-class=\"{disabled: tablePaginationController.pagination.currentPage == 1}\" ng-cloak>' +\r\n\t\t\t\t\t\t\t'<button type=\"button\" class=\"previous\" ng-click=\"tablePaginationController.previousPage()\">&#xe071</button>' +\r\n\t\t\t\t\t\t'</li>' +\r\n\t\t\t\t\t\t'<li>' +\r\n\t\t\t\t\t\t\t'<input type=\"text\" pattern=\"[0-9]*\" ng-model=\"tablePaginationController.pagination.newInputPage\" ng-change=\"tablePaginationController.changePage(tablePaginationController.pagination.newInputPage)\" placeholder=\"{{\\'pagination.jumpTo\\' | translate}}\"  />' +\r\n\t\t\t\t\t\t'</li>' +\r\n\t\t\t\t\t\t'<li class=\"pagination-page\" ng-class=\"{disabled: tablePaginationController.pagination.currentPage == tablePaginationController.pagination.totalPages}\">' +\r\n\t\t\t\t\t\t\t'<button type=\"button\" class=\"next\" ng-click=\"tablePaginationController.nextPage()\">&#xe075</button>' +\r\n\t\t\t\t\t\t'</li>' +\r\n\t\t\t\t\t'</ul>' +\r\n\t\t\t\t\t'<p class=\"text-center\">{{\"pagination.paginationLegendMobile\" | translate:tablePaginationController.pagination}}</p>' +\r\n\t\t\t\t'</div>';\r\n\r\n\t\t\t//TODO: Is the data-table-name attribute documented?\r\n\t\t\tvar action = tablePaginationController.tableWrapper.attr('data-table-name');\r\n\r\n\t\t\tvar actionDropdownTemplate = [];\r\n\t\t\tif (action) {\r\n\t\t\t\tactionDropdownTemplate = '' +\r\n\t\t\t\t\t'<div class=\"col-xs-12 hidden action-dropdown\">' +\r\n\t\t\t\t\t\t'<div class=\"row\">' +\r\n\t\t\t\t\t\t\t'<div ng-cloak class=\"col-xs-4\">' +\r\n\t\t\t\t\t\t\t\t'<strong>{{\"pagination.rowActions\" | translate}} :</strong>' +\r\n\t\t\t\t\t\t\t'</div>' +\r\n\t\t\t\t\t\t\t'<div class=\"col-xs-8 text-left\">' +\r\n\t\t\t\t\t\t\t\t'<select class=\"row-action-control\">' +\r\n\t\t\t\t\t\t\t\t\t'<option ng-cloak>{{\"pagination.select\" | translate}}</option>' +\r\n\t\t\t\t\t\t\t\t\t'<option ng-cloak>{{\"pagination.delete\" | translate}}</option>' +\r\n\t\t\t\t\t\t\t\t'</select>' +\r\n\t\t\t\t\t\t\t\t'<button type=\"button\" ng-cloak class=\"btn ml-5 mt-neg-3 btn-primary\" wc-row-action-multiple=\"delete-' + action + '\">' +\r\n\t\t\t\t\t\t\t\t\t'{{\"pagination.submit\" | translate}}' +\r\n\t\t\t\t\t\t\t\t'</button>' +\r\n\t\t\t\t\t\t\t'</div>' +\r\n\t\t\t\t\t\t'</div>' +\r\n\t\t\t\t\t'</div>';\r\n\t\t\t}\r\n\r\n\t\t\tvar template =\r\n\t\t\t\t'<div class=\"row\">' +\r\n\t\t\t\t\tresultsPerPageTemplate +\r\n\t\t\t\t\tpaginationLegendTemplate +\r\n\t\t\t\t\tpaginationControlsTemplate +\r\n\t\t\t\t'</div>' +\r\n\t\t\t\t'<div class=\"row\">' +\r\n\t\t\t\t\tnavigateToPageTemplate +\r\n\t\t\t\t'</div>' +\r\n\t\t\t\t'<div class=\"row\">' +\r\n\t\t\t\t\tactionDropdownTemplate +\r\n\t\t\t\t'</div>';\r\n\r\n\t\t\tvar controlsPlacement = tablePaginationController.pagination.paginationControlsPlacement;\r\n\t\t\ttablePaginationController.createPaginationControlNumbers();\r\n\r\n\t\t\tif(tablePaginationController.pagination.totalItems>0){\r\n\t\t\t\tif (controlsPlacement === 'top' || controlsPlacement === 'both') {\r\n\t\t\t\t\tvar paginationTop = $compile(template)(scope);\r\n\t\t\t\t\tpaginationTop.addClass('pagination-top');\r\n\t\t\t\t\tpaginationTop.prop('ng-cloak');\r\n\t\t\t\t\ttablePaginationController.tableWrapper.prepend(paginationTop);\r\n\t\t\t\t}\r\n\t\t\t\tif (controlsPlacement === 'bottom' || controlsPlacement === 'both') {\r\n\t\t\t\t\tvar paginationBottom = $compile(template)(scope);\r\n\t\t\t\t\tpaginationBottom.addClass('pagination-bottom');\r\n                    paginationBottom.prop('ng-cloak');\r\n                    tablePaginationController.table.after(paginationBottom);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n}]);\r\n","/**\r\n * @ngdoc directive\r\n * @name WcResponsiveTableModule.directive:wcColumnSort\r\n * @restrict A\r\n * @scope\r\n * @param {string} wcColumnSort The parameter holds the column sort values\r\n * @param {string} wcColumnSortDefault The parameter holds the default column sort values\r\n * @param {string} specialChars The string value holds the special characters\r\n * @param {string} columnIndex The variable holds the column index value\r\n * @description\r\n * The wcColumnSort directive adds column sort option to a column in a wcResponsiveTable data table, this directive holds methods that are\r\n * related to column sort operation.\r\n */\r\n\r\n'use strict';\r\n\r\nangular.module('WcResponsiveTableModule').directive('wcColumnSort', [ '$timeout', '_', function ($timeout, _) {\r\n\treturn {\r\n\t\trestrict: 'A',\r\n\t\trequire: ['wcColumnSort', '^wcResponsiveTable'],\r\n\t\tscope: {},\r\n\t\tbindToController: {\r\n\t\t\twcColumnSort: '@',\r\n\t\t\twcColumnSortDefault: '@',\r\n\t\t\tspecialChars: '@',\r\n\t\t\tcolumnIndex: '@'\r\n\t\t},\r\n\t\tcontrollerAs: 'columnSortController',\r\n\t\tcontroller: ['$scope', '$element', function ($scope, $element) {\r\n\t\t\tvar responsiveTableController = $element.parent().controller('wcResponsiveTable');\r\n\r\n\r\n\t\t\t/**\r\n\t\t\t * @ngdoc property\r\n\t\t\t * @name wcColumnSort.element\r\n\t\t\t * @propertyOf WcResponsiveTableModule.directive:wcColumnSort\r\n\t\t\t * @returns {Object} returns a jQuery object describing the element the sort directive is an attribute of\r\n\t\t\t *//**\r\n\t\t\t * @ngdoc property\r\n\t\t\t * @name wcColumnSort.tableScope\r\n\t\t\t * @propertyOf WcResponsiveTableModule.directive:wcColumnSort\r\n\t\t\t * @returns {Object} an AngularJS scope object that is the scope of the table this sort directive is within\r\n\t\t\t *//**\r\n\t\t\t * @ngdoc property\r\n\t\t\t * @name wcColumnSort.collectionLength\r\n\t\t\t * @propertyOf WcResponsiveTableModule.directive:wcColumnSort\r\n\t\t\t * @returns {Integer} The number of rows in the collection\r\n\t\t\t *//**\r\n\t\t\t * @ngdoc property\r\n\t\t\t * @name wcColumnSort.resultsPerPage\r\n\t\t\t * @propertyOf WcResponsiveTableModule.directive:wcColumnSort\r\n\t\t\t * @returns {Integer} the number of rows to be displayed per page\r\n\t\t\t *//**\r\n\t\t\t * @ngdoc property\r\n\t\t\t * @name wcColumnSort.sortReverse\r\n\t\t\t * @propertyOf WcResponsiveTableModule.directive:wcColumnSort\r\n\t\t\t * @returns {Boolean} whether or not the sort is to be performed in reverse\r\n\t\t\t */\r\n\t\t\tthis.element = $element;\r\n\t\t\tthis.tableScope = responsiveTableController.WcTableScopeService.getTableScope();\r\n\t\t\tthis.collectionLength = responsiveTableController.WcTableCollectionService.getCollectionLength();\r\n\t\t\tthis.resultsPerPage = responsiveTableController.WcTablePaginationService.getPaginationDefaults().resultsPerPage;\r\n\t\t\tthis.sortReverse = false;\r\n\r\n\t\t\tthis.sortOn = function (arr, prop, reverse, specialChars) {\r\n\t\t\t\treverse = reverse ? 1 : -1;\r\n\r\n\t\t\t\tif (!specialChars) {\r\n\t\t\t\t\treturn arr.sort(function (a, b) {\r\n\t\t\t\t\t\tif (_.get(a, prop) < _.get(b, prop)) {\r\n\t\t\t\t\t\t\treturn 1 * reverse;\r\n\t\t\t\t\t\t} else if (_.get(a, prop) > _.get(b, prop)) {\r\n\t\t\t\t\t\t\treturn -1 * reverse;\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\treturn 0;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn arr.sort(function (a, b) {\r\n\t\t\t\t\t\treturn reverse === 1 ? _.get(b, prop).localeCompare(_.get(a, prop)) : _.get(a, prop).localeCompare(_.get(b, prop));\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t};\r\n\r\n\t\t\tthis.sortCollection = function (isRefresh) {\r\n\r\n\t\t\t\tresponsiveTableController.WcTableCollectionService.sortEnabled = true;\r\n\t\t\t\t//induce a delay to limit the FOUC\r\n\t\t\t\t$timeout(angular.bind(this, function () {\r\n\t\t\t\t\tvar collection = responsiveTableController.WcTableCollectionService.getCollection();\r\n\r\n\t\t\t\t\tvar columnClass = $element.attr('class').match(/wc-table-column-\\d+/);\r\n\t\t\t\t\tvar index = (columnClass) ? Number(columnClass[0].match(/\\d+/)[0]) : null;\r\n\t\t\t\t\tthis.columnIndex = this.columnIndex || index;\r\n\r\n\t\t\t\t\tresponsiveTableController.previousSortColumn = responsiveTableController.activeSortColumn;\r\n\t\t\t\t\tresponsiveTableController.activeSortColumn = this.columnIndex;\r\n\r\n\t\t\t\t\tif(isRefresh) {\r\n\t\t\t\t\t\tthis.sortReverse = this.sortReverse ? false : true;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tthis.refreshCollection(collection);\r\n\r\n\t\t\t\t\tthis.sortReverse = this.sortReverse ? false : true;\r\n\t\t\t\t}), 30);\r\n\t\t\t};\r\n\r\n\t\t\tthis.refreshCollection = function(collection) {\r\n\t\t\t\tresponsiveTableController.WcTableCollectionService.setCollection(this.sortOn(collection, this.wcColumnSort, this.sortReverse, this.specialChars), responsiveTableController.WcTableCollectionService.sortEnabled, responsiveTableController.WcTableCollectionService.filterEnabled);\r\n\t\t\t\tresponsiveTableController.sortedColumn = {column: $element, binding: this.wcColumnSort, reverse: this.sortReverse, index: this.columnIndex};\r\n\t\t\t\tthis.tableScope.$broadcast('table.sort.complete', this.wcColumnSort, this.sortReverse);\r\n\t\t\t};\r\n\r\n\t\t\tvar defaultSorts = responsiveTableController.table.find('th[wc-column-sort-default]');\r\n\t\t\tif(defaultSorts.length > 1){\r\n\t\t\t\tconsole.error(\"Cannot have more than one default sort. Found \" + defaultSorts.length + \" \", defaultSorts);\r\n\t\t\t}\r\n\r\n\t\t}],\r\n\t\tlink: function (scope, element, attrs, controllers) {\r\n\t\t\t//jshint unused:true\r\n\t\t\tvar columnSortController = controllers[0];\r\n\t\t\tvar responsiveTableController = controllers[1];\r\n\r\n\r\n\t\t\tif (columnSortController.wcColumnSortDefault) {\r\n\t\t\t\tif (columnSortController.wcColumnSortDefault == 'desc') {\r\n\t\t\t\t\tcolumnSortController.sortReverse = true;\r\n\t\t\t\t}\r\n\t\t\t\tcolumnSortController.sortCollection();\r\n\t\t\t}\r\n\r\n\t\t\telement.addClass('wc-table-column-sort-heading');\r\n\r\n\t\t\tvar updateSortClasses = function (event, column, reverse) {\r\n\t\t\t\tvar columnClass = element.attr('class').match(/wc-table-column-\\d+/)[0];\r\n\t\t\t\tif (column === columnSortController.wcColumnSort) {\r\n\t\t\t\t\tcolumnSortController.sortIcon.removeClass('glyphicon-sort');\r\n\t\t\t\t\tif (!reverse) {\r\n\t\t\t\t\t\tcolumnSortController.sortIcon.removeClass('glyphicon-sort-by-alphabet-alt');\r\n\t\t\t\t\t\tcolumnSortController.sortIcon.addClass('glyphicon-sort-by-alphabet');\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse {\r\n\t\t\t\t\t\tcolumnSortController.sortIcon.removeClass('glyphicon-sort-by-alphabet');\r\n\t\t\t\t\t\tcolumnSortController.sortIcon.addClass('glyphicon-sort-by-alphabet-alt');\r\n\t\t\t\t\t}\r\n\t\t\t\t\t$('#' + responsiveTableController.id + ' .' + columnClass).addClass('wc-table-column-highlight');\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\tcolumnSortController.sortIcon.removeClass('glyphicon-sort-by-alphabet glyphicon-sort-by-alphabet-alt');\r\n\t\t\t\t\tcolumnSortController.sortIcon.addClass('glyphicon-sort');\r\n\t\t\t\t\t$('#' + responsiveTableController.id + ' .' + columnClass).removeClass('wc-table-column-highlight');\r\n\t\t\t\t\tcolumnSortController.sortReverse = false;\r\n\t\t\t\t}\r\n\t\t\t};\r\n\r\n\t\t\tresponsiveTableController.WcTableScopeService.getTableScope().$on('table.sort.complete', updateSortClasses);\r\n\t\t\tresponsiveTableController.WcTableScopeService.getTableScope().$on('table.filter.complete', function() {\r\n\t\t\t\tconsole.log('responsiveTableController.activeSortColumn', responsiveTableController.activeSortColumn, 'columnSortController.columnIndex', columnSortController.columnIndex);\r\n\t\t\t\tif(responsiveTableController.activeSortColumn && responsiveTableController.activeSortColumn === columnSortController.columnIndex) {\r\n\t\t\t\t\tcolumnSortController.sortCollection(true);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\t$timeout(function () {\r\n\t\t\t\tif (element[0].children.length) {\r\n\t\t\t\t\telement.find('.header-text-wrapper').append('<span class=\"header-icons pull-right\"><span class=\"glyphicon glyphicon-sort\"></span></span>');\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\telement.append('<span class=\"glyphicon glyphicon-sort\"></span>');\r\n\t\t\t\t}\r\n\r\n\t\t\t\tcolumnSortController.sortIcon = element.find('span[class*=glyphicon-sort]');\r\n\r\n\t\t\t\tvar clickableElem = element.find('.header-text');\r\n\r\n\t\t\t\t$(clickableElem).add(columnSortController.sortIcon).on('click', function () {\r\n\t\t\t\t\tvar collectionLength = columnSortController.collectionLength;\r\n\t\t\t\t\tvar showLoadingIndicator = false;\r\n\r\n\t\t\t\t\tif (columnSortController.resultsPerPage <= 25) {\r\n\t\t\t\t\t\tif (collectionLength >= 100000) {\r\n\t\t\t\t\t\t\tshowLoadingIndicator = true;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else if (columnSortController.resultsPerPage <= 75) {\r\n\t\t\t\t\t\tif (collectionLength >= 10000) {\r\n\t\t\t\t\t\t\tshowLoadingIndicator = true;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse {\r\n\t\t\t\t\t\tif (collectionLength >= 1000) {\r\n\t\t\t\t\t\t\tshowLoadingIndicator = true;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (showLoadingIndicator) {\r\n\t\t\t\t\t\tcolumnSortController.tableScope.tableIsLoading();\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tcolumnSortController.sortCollection();\r\n\t\t\t\t});\r\n\t\t\t}, 0);\r\n\t\t}\r\n\t};\r\n}]);\r\n","/**\r\n * @ngdoc directive\r\n * @name WcResponsiveTableModule.directive:wcColumnFilter\r\n * @restrict A\r\n * @scope\r\n * @param {string} wcColumnFilter The string of filter values of a datatable\r\n * @param {string} wcColumnFilterDelay The string of filter delay values of a datatable\r\n * @description\r\n * The wcColumnFilter directive adds filters to jquery datatable, this directive holds methods that are\r\n * related to filter operation.\r\n */\r\n\r\n'use strict';\r\n\r\nangular.module('WcResponsiveTableModule').directive('wcColumnFilter', ['$compile', '$timeout', '$document', '$filter', '_', 'WcTranslateConfiguratorService', '$translate', function ($compile, $timeout, $document, $filter, _, WcTranslateConfiguratorService, $translate) {\r\n\treturn {\r\n\t\trestrict: 'A',\r\n\t\trequire: ['wcColumnFilter', '^wcResponsiveTable'],\r\n\t\tscope: true,\r\n\t\tbindToController: {\r\n\t\t\twcColumnFilter: '@',\r\n\t\t\twcColumnFilterDelay: '@'\r\n\t\t},\r\n\t\tcontrollerAs: 'columnFilterController',\r\n\t\tcontroller: ['$scope', '$element', function ($scope, $element) {\r\n\t\t\tWcTranslateConfiguratorService.loadPartAndRefresh('WC-dataTable');\r\n\r\n            /**\r\n             * @ngdoc property\r\n             * @name wcColumnFilter.defaultDropdownOption\r\n             * @propertyOf WcResponsiveTableModule.directive:wcColumnFilter\r\n             * @returns {String} The string that should be the default option in a dropdown filter.\r\n             */\r\n\t\t\tthis.defaultDropdownOption = $translate.instant('columnFilter.selectDefaultText');\r\n\r\n\t\t\tvar htmlDecode = function (input) {\r\n\t\t\t\tvar e = $document[0].createElement('div');\r\n\t\t\t\te.innerHTML = input;\r\n\t\t\t\treturn e.childNodes[0].nodeValue;\r\n\t\t\t};\r\n\r\n\t\t\tvar responsiveTableController = $element.parent().controller('wcResponsiveTable');\r\n\r\n\r\n\r\n\r\n\r\n            /**\r\n             * @ngdoc property\r\n             * @name wcColumnFilter.tableScope\r\n             * @propertyOf WcResponsiveTableModule.directive:wcColumnFilter\r\n             * @returns {String} The string identifier for the tableScope object\r\n             */\r\n\t\t\tthis.tableScope = responsiveTableController.WcTableScopeService.getTableScope();\r\n\t\t\tvar collection = responsiveTableController.WcTableCollectionService.getCollection();\r\n\r\n            /**\r\n             * @ngdoc property\r\n             * @name wcColumnFilter.collection\r\n             * @propertyOf WcResponsiveTableModule.directive:wcColumnFilter\r\n             * @returns {Array} The array of objects that is the collection for the data table\r\n             */\r\n\t\t\tthis.collection = collection;\r\n\r\n            /**\r\n             * @ngdoc property\r\n             * @name wcColumnFilter.predicate\r\n             * @propertyOf WcResponsiveTableModule.directive:wcColumnFilter\r\n             * @returns {String} the string predicate describing the column this filter is on\r\n             */\r\n            /**\r\n             * @ngdoc property\r\n             * @name wcColumnFilter.wcColumnFilterDelay\r\n             * @propertyOf WcResponsiveTableModule.directive:wcColumnFilter\r\n             * @returns {Integer} This number describes the amount of delay in milliseconds the filter should wait before executing (helps performance)\r\n             */\r\n            /**\r\n             * @ngdoc property\r\n             * @name wcColumnFilter.isMultiSelect\r\n             * @propertyOf WcResponsiveTableModule.directive:wcColumnFilter\r\n             * @returns {Boolean} This boolean tells whether the filter is a multiselect filter or not meaning whether it is a dropdown menu filter or text filter.\r\n             */\r\n\t\t\tthis.predicate = this.wcColumnFilter;\r\n\t\t\tthis.wcColumnFilterDelay = this.wcColumnFilterDelay || 0;\r\n\t\t\tthis.isMultiSelect = false;\r\n\r\n            /**\r\n             * @ngdoc property\r\n             * @name wcColumnFilter.mathFilterOptions\r\n             * @propertyOf WcResponsiveTableModule.directive:wcColumnFilter\r\n             * @returns {Object} This Object has the set of possible options for a math filter\r\n             */\r\n\t\t\tthis.mathFilterOptions = [\r\n\t\t\t\t{id: '==', name: '='},\r\n\t\t\t\t{id: '<', name: htmlDecode('&lt;')},\r\n\t\t\t\t{id: '<=', name: htmlDecode('&le;')},\r\n\t\t\t\t{id: '>', name: htmlDecode('&gt;')},\r\n\t\t\t\t{id: '>=', name: htmlDecode('&ge;')},\r\n\t\t\t\t{id: '!=', name: htmlDecode('&ne;')}\r\n\t\t\t];\r\n\r\n\r\n\t\t\t//reassign our local collection var when an update has occurred.\r\n\t\t\t//also rerun the filters\r\n\t\t\tthis.tableScope.$on('table.collection.update', angular.bind(this, function () {\r\n\t\t\t\tcollection = responsiveTableController.WcTableCollectionService.getCollection();\r\n\t\t\t\t$timeout(angular.bind(this, function () {\r\n\t\t\t\t\tthis.filterColumn();\r\n\t\t\t\t}), 0);\r\n\t\t\t}));\r\n\r\n            /**\r\n             * @ngdoc method\r\n             * @name wcColumnFilter.filterColumn\r\n             * @methodOf WcResponsiveTableModule.directive:wcColumnFilter\r\n             * @description\r\n             * This method executes the filtering logic on the collection for the responsive table based on the properties of this directive and the criterion\r\n\t\t\t * from the input or dropdown box for this directive.\r\n             */\r\n\t\t\tthis.filterColumn = function () {\r\n\r\n\t\t\t\tvar activeFilterWrapper = responsiveTableController.element.find(\".active-filters\");\r\n\r\n\t\t\t\tresponsiveTableController.WcTableCollectionService.filterEnabled = true;\r\n\r\n\t\t\t\tvar filterEnabled = responsiveTableController.WcTableCollectionService.filterEnabled;\r\n\t\t\t\tvar sortEnabled = responsiveTableController.WcTableCollectionService.sortEnabled;\r\n\r\n\t\t\t\t//TODO only handle one copy of the collection\r\n\t\t\t\tvar filterArray = responsiveTableController.WcColumnFilterService.getColumnsToFilter();\r\n\r\n                if(filterArray.length === 0) {\r\n                    activeFilterWrapper.toggleClass(\"hidden\", true);\r\n                    responsiveTableController.WcTableCollectionService.filterEnabled = false;\r\n                    responsiveTableController.WcTableCollectionService.setCollection(collection, sortEnabled, filterEnabled);\r\n                }\r\n                else {\r\n                \tactiveFilterWrapper.toggleClass(\"hidden\", false);\r\n                    var filteredCollection = _.filter(collection, angular.bind(this, function(row) {\r\n                        var match = false;\r\n                        for (var i = 0; i < filterArray.length; i++) {\r\n                        \tif(filterArray[i].value == \"\"){\r\n                        \t\tmatch = true;\r\n\t\t\t\t\t\t\t}else if (_.get(row, filterArray[i].predicate) !== undefined && _.get(row, filterArray[i].predicate) !== null ){\r\n\t\t\t\t\t\t\t\tif (angular.isArray(filterArray[i].value)) {\r\n                                    for (var j = 0; j < filterArray[i].value.length; j++) {\r\n                                        if (_.get(row, filterArray[i].predicate).toString().toLowerCase().indexOf(filterArray[i].value[j].toLowerCase()) > -1) {\r\n                                            match = true;\r\n                                        } else {\r\n                                            return false;\r\n                                        }\r\n                                    }\r\n                                }\r\n                                else if (filterArray[i].isMathFilter) { //if mathFilter is true\r\n                                    var mathOp = responsiveTableController.selectedMathFilterOption[filterArray[i].predicate].id;\r\n                                    var filterString = filterArray[i].value;\r\n                                    var filterNum = Number(filterString);\r\n                                    var rowValue = Number(_.get(row, filterArray[i].predicate));\r\n                                    if($scope.$eval(rowValue + mathOp + filterNum)){\r\n                                        match = true;\r\n                                    } else {\r\n                                        return false;\r\n                                    }\r\n                                }else if (_.get(row, filterArray[i].predicate, 'default') !== 'default' && _.get(row, filterArray[i].predicate).toString().toLowerCase().indexOf(filterArray[i].value.toLowerCase()) > -1) {\r\n                                    match = true;\r\n                                }else{\r\n                                    return false;\r\n                                }\r\n                            } else {\r\n                                return false;\r\n                            }\r\n\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\treturn match;\r\n\t\t\t\t\t}));\r\n\r\n\t\t\t\t\tresponsiveTableController.WcTableCollectionService.setCollection(filteredCollection, sortEnabled, filterEnabled);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.tableScope.$broadcast('table.filter.complete');\r\n\t\t\t};\r\n\r\n            /**\r\n             * @ngdoc method\r\n             * @name wcColumnFilter.dismissFilter\r\n             * @methodOf WcResponsiveTableModule.directive:wcColumnFilter\r\n\t\t\t * @param {String} id This string is the id of the filter to be dismissed\r\n             * @description\r\n             * This method removes the filter selection from the filter box and re-filters the table using the default settings for the filter with 'id'\r\n\t\t\t * as well as resetting the glypicons for the column of the table of the id passed in as a parameter.\r\n             */\r\n\t\t\tthis.dismissFilter = function (id) {\r\n\t\t\t\tvar filterInput = $('#' + responsiveTableController.id + ' input[wc-column-filter=\"' + id + '\"], #' + responsiveTableController.id + 'select[wc-column-filter=\"' + id + '\"]');\r\n\t\t\t\tfilterInput.val(\"\");\r\n\t\t\t\tresponsiveTableController.WcColumnFilterService.removeColumnToFilter(id);\r\n\t\t\t\tthis.filterColumn();\r\n                $('#' + responsiveTableController.id + ' .active-filters .' + id.replace(\".\", \"-\")).remove();\r\n                $element.parents(\"th\").find('span.glyphicon-filter').remove();\r\n\t\t\t};\r\n\r\n            /**\r\n             * @ngdoc method\r\n             * @name wcColumnFilter.filterListener\r\n             * @methodOf WcResponsiveTableModule.directive:wcColumnFilter\r\n             * @description\r\n             * This method gathers all of the information required to execute filtering functionality and then calls the filterColumn function if there has been a change in the\r\n\t\t\t * value of the input being filtered on. After the filter action has completed this method then adjusts the styling of elements pertaining to filtering so that the\r\n\t\t\t * page accurately reflects the current state. This includes adjusting glyphicons as well as the active filter bar when it is appropriate. After all adjustments have\r\n\t\t\t * been made, the method broadcasts that the filter is complete.\r\n             */\r\n\t\t\tthis.filterListener = function () {\r\n\t\t\t\tvar htmlPredicate = this.predicate.replace(\".\", \"-\");\r\n\t\t\t\tvar elementVal = $element.val();\r\n\t\t\t\tvar oldVal;\r\n\t\t\t\tif (_.find(responsiveTableController.WcColumnFilterService.getColumnsToFilter(), {'predicate': this.predicate})) {\r\n\t\t\t\t\toldVal = _.find(responsiveTableController.WcColumnFilterService.getColumnsToFilter(), {'predicate': this.predicate}).value;\r\n\t\t\t\t}\r\n\t\t\t\tif (elementVal !== undefined && (elementVal !== \"\" || oldVal !== \"\") && (elementVal !== \"\" || oldVal !== undefined) && (elementVal !== oldVal || $element.attr('wc-math-filter') === \"\")) {\r\n\t\t\t\t\tresponsiveTableController.WcColumnFilterService.setColumnsToFilter(this.predicate, elementVal, $element.attr('wc-math-filter') === \"\");\r\n\t\t\t\t\tthis.filterColumn();\r\n                    var filterIconFinder = $element.parents(\"th\").find('span.glyphicon-filter');\r\n\r\n\t\t\t\t\t//in this section, we are working in the html. we can't use a dotted predicate there, as it will break the selectors.\r\n\t\t\t\t\t//so, replace the dots with hyphens so we can still use them.\r\n\t\t\t\t\thtmlPredicate = this.predicate.replace(\".\", \"-\");\r\n\r\n\t\t\t\t\t//if we have a value, we know we are filtering.\r\n\t\t\t\t\t//add or remove the heading indicator and adjust the active filter spans\r\n\t\t\t\t\tvar activeFilterButton = responsiveTableController.element.find(\".active-filters .\" + htmlPredicate);\r\n\r\n\t\t\t\t\tif (elementVal !== \"\") {\r\n                        var label = $element.parents(\"th\").find('.header-text').text();\r\n                        if (!filterIconFinder.length) {\r\n                            if($element.parents(\"th\").find('.header-icons').length>0 && !filterIconFinder.length ){\r\n                                $element.parents(\"th\").find('.header-icons').append('<span class=\"glyphicon glyphicon-filter\"></span>');\r\n                            }\r\n                            else {\r\n                                $timeout(function () {\r\n                                    $element.parents(\"th\").find('.header-text-wrapper').append('<span class=\"header-icons pull-right\"><span class=\"glyphicon glyphicon-filter\"></span></span>');\r\n                                }, 0);\r\n                            }\r\n                        }\r\n\t\t\t\t\t\t/* Use this to display filter value*/\r\n\t\t\t\t\t\t/*if (activeFilterButton.length) {\r\n\t\t\t\t\t\t // activeF\tilterButton.find('span:last-child').text(label + ': ' + JSON.stringify(elementVal, null, 1));\r\n\t\t\t\t\t\t }\r\n\t\t\t\t\t\t else {\r\n\t\t\t\t\t\t responsiveTableController.element.find('.active-filters').append($compile('<button class=\"btn btn-active-filter ' + htmlPredicate + '\" ng-click=\"columnFilterController.dismissFilter(\\'' + columnFilterController.predicate + '\\')\"><span>' + label +'</span>&nbsp;&nbsp;<span class=\"glyphicon glyphicon-remove\"></span></button>')($scope));\r\n\t\t\t\t\t\t }*/\r\n\t\t\t\t\t\tif (!activeFilterButton.length) {\r\n\t\t\t\t\t\t\tresponsiveTableController.element.find('.active-filters').append($compile('<button class=\"btn btn-active-filter ' + htmlPredicate + '\" ng-click=\"columnFilterController.dismissFilter(\\'' + this.predicate + '\\')\"><span>' + label + '</span>&nbsp;&nbsp;<span class=\"glyphicon glyphicon-remove\"></span></button>')($scope));\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse if (elementVal === \"\") {\r\n\t\t\t\t\t\tfilterIconFinder.remove();\r\n\t\t\t\t\t\tvar activeFilterBox = activeFilterButton.parent();\r\n\t\t\t\t\t\tactiveFilterButton.remove();\r\n\t\t\t\t\t\tif (!activeFilterBox.children().length) {\r\n\t\t\t\t\t\t\tresponsiveTableController.element.find('.active-filters').toggleClass(\"hidden\", true);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\r\n\t\t\t};\r\n\r\n\t\t}],\r\n\t\tlink: function (scope, element, attrs, controllers) { // jshint ignore:line\r\n\t\t\tvar columnFilterController = controllers[0];\r\n\t\t\tvar responsiveTableController = controllers[1];\r\n\r\n            if(element.attr('wc-math-filter') === \"\") {\r\n                responsiveTableController.selectedMathFilterOption[columnFilterController.predicate] = columnFilterController.mathFilterOptions[0];\r\n                element.wrap('<div class=\"row wc-math-filter-row\"><div class=\"col-xs-8\">' +\r\n                    '</div></div>');\r\n                element.parent().before($compile('<div class=\"col-xs-4 math-dropdown\"><select class=\"form-control input-sm\" ng-change=\"columnFilterController.filterListener()\" ' +\r\n                    'ng-options=\"option.name for option in columnFilterController.mathFilterOptions track by option.id\" ' +\r\n                    'ng-model=\"columnFilterController.tableScope.responsiveTableController.selectedMathFilterOption[columnFilterController.predicate]\" id=\"wc-math-filter-'+columnFilterController.predicate.replace(\".\", \"-\")+'\">' +\r\n                    '</select></div>')(scope));\r\n\r\n            }\r\n\r\n\t\t\tif (element.prop('tagName') === 'SELECT' && !element.attr('wc-math-filter')) {\r\n\t\t\t\tcolumnFilterController.isMultiSelect = element.attr(\"multiple\");\r\n\t\t\t\tvar options = (_.uniq(_.map(columnFilterController.collection, columnFilterController.predicate))).sort();\r\n\r\n\t\t\t\tvar option = $('<option></option>');\r\n\t\t\t\tif (!columnFilterController.isMultiSelect) {\r\n\t\t\t\t\toption.attr('value', '');\r\n\t\t\t\t\toption.text = columnFilterController.defaultDropdownOption;\r\n\t\t\t\t\telement.append(option);\r\n\t\t\t\t}\r\n\r\n\t\t\t\t_.each(options, function (item) {\r\n\t\t\t\t\tvar option = $('<option></option>');\r\n\t\t\t\t\toption.attr('value', item);\r\n\t\t\t\t\toption.text(item);\r\n\t\t\t\t\telement.append(option);\r\n\t\t\t\t});\r\n\r\n\t\t\t\telement.on('change', columnFilterController.filterListener.bind(columnFilterController));\r\n\t\t\t} else {\r\n\t\t\t\telement.keyup(_.debounce(columnFilterController.filterListener.bind(columnFilterController), columnFilterController.wcColumnFilterDelay));\r\n\t\t\t}\r\n\r\n\t\t\t//prevent sort action from firing when a click happens in a filter box\r\n\t\t\telement.on('click', function (event) {\r\n\t\t\t\tevent.stopPropagation();\r\n\t\t\t});\r\n\r\n\t\t}\r\n\t};\r\n}]);\r\n","/**\r\n * @ngdoc directive\r\n * @name WcResponsiveTableModule.directive:wcExportToExcel\r\n * @description\r\n * The wcExportToExcel directive is responsible for export the whole table to xlsx.\r\n */\r\n\r\n'use strict';\r\nangular.module('WebCoreModule').directive('wcExportToExcel', ['$window', 'XLSX', 'saveAs', '_', 'WcTranslateConfiguratorService', function($window, XLSX, saveAs, _, WcTranslateConfiguratorService) {\r\n    return {\r\n        restrict: 'E',\r\n        template: '<button type=\"button\" class=\"btn icon icon-excel\" ng-cloak ng-click=\"exportToXslxController.makeExcel()\" aria-label=\"{{\"exportTo.excelButtonAriaLabel\" | translate}}\"> <i class=\"fa fa-file-excel-o\"  aria-hidden=\"true\" ng-cloak title=\"{{\"exportTo.excelButtonTitle\" | translate}}\"></i><span class=\"hidden-xs\">{{\"exportTo.excelButtonText\" | translate}}</span></button>',\r\n        replace: true,\r\n        require: ['wcExportToExcel'],\r\n        scope: {},\r\n        controllerAs: 'exportToXslxController',\r\n        controller: [ '$scope', '$element',  function($scope, $element){\r\n            WcTranslateConfiguratorService.loadPartAndRefresh('WC-dataTable');\r\n\r\n            var responsiveTableController = $element.parent().controller('wcResponsiveTable');\r\n            responsiveTableController = responsiveTableController || $scope.responsiveTableController || $scope.$parent.responsiveTableController;\r\n\r\n            /**\r\n             * @ngdoc method\r\n             * @name wcExportToExcel.exportToExcel\r\n             * @methodOf WcResponsiveTableModule.directive:wcExportToExcel\r\n             * @param {Array} columnHeadText array of strings that is the description of each column from the header\r\n             * @param {Array} dataAttributes array of strings that is the description of the data property that each column represents\r\n             * @param {String} tableId the string that is the ID of the table that is being exported\r\n             * @description\r\n             * This method sets up the array correlating to the table data and headers and puts this array inside a workbook object. It sets up the properties of the workbook\r\n             * and then writes an XLSX file titled the same as the tableId.\r\n             */\r\n            this.exportToExcel = function(columnHeadText, dataAttributes, tableId) {\r\n                var collection = responsiveTableController.WcTableCollectionService.getCollection();\r\n                var collectionLength = collection.length;\r\n\r\n                var exportArray = [];\r\n\r\n                //Add header text to data to export\r\n                exportArray.push(columnHeadText);\r\n                //Assemble row data from the collection array in export array\r\n                var rowLen = exportArray[0].length;\r\n                for (var r = 0; r < collectionLength; ++r) {\r\n                    var row = [];\r\n                    for (var c = 0; c < rowLen; c++) {\r\n                        var value = _.get(collection[r], dataAttributes[c]);\r\n                        row.push(value);\r\n                    }\r\n                    exportArray.push(row);\r\n                }\r\n\r\n                //tableId to identify the export and filename\r\n                tableId = tableId.toString();\r\n                var fileName = tableId + \".xlsx\";\r\n\r\n                //Set up xlsx workbook/worksheet objects to be written to distributable workbook\r\n                var workbook = {SheetNames:[], Sheets:{}}, worksheet = this.sheetFromArrayOfArrays(exportArray);\r\n\r\n                //Add column width details\r\n                var wsColumnWidths = [];\r\n                for(var c = 0; c < dataAttributes.length; ++c){\r\n                    var wch = {};\r\n                    var maxLength = 0;\r\n                    maxLength = Math.max.apply(Math, exportArray.map(function (v) {\r\n                        if(v[c]==null) return 0;\r\n                        return v[c].toString().length;\r\n                    }));\r\n                    wch['wch'] = maxLength;\r\n                    wsColumnWidths.push(wch);\r\n                }\r\n                worksheet['!cols'] = wsColumnWidths;\r\n\r\n                //Can be expanded to use cell ranges (merged cells), at the moment including '!merges' ranges as a formality\r\n                var ranges = [];\r\n                worksheet['!merges'] = ranges;\r\n\r\n                //Add Sheet to Workbook\r\n                workbook.SheetNames.push(tableId);\r\n                workbook.Sheets[tableId] = worksheet;\r\n\r\n                var outWorkbook = XLSX.write(workbook, {type:'binary'});\r\n                saveAs(new $window.Blob([this.s2ab(outWorkbook)],{type:\"application/octet-stream\"}), fileName);\r\n            };\r\n\r\n            /**\r\n             * @ngdoc method\r\n             * @name wcExportToExcel.s2ab\r\n             * @methodOf WcResponsiveTableModule.directive:wcExportToExcel\r\n             * @param {String} s String object to convert to array buffer\r\n             * @description\r\n             * This method reformats the data in the string to array buffer.\r\n             */\r\n            this.s2ab = function(s){\r\n                if(typeof ArrayBuffer !== 'undefined') {\r\n                    var buf = new ArrayBuffer(s.length);\r\n                    var view = new Uint8Array(buf);\r\n                    for (var i=0; i!=s.length; ++i) view[i] = s.charCodeAt(i) & 0xFF;\r\n                    return buf;\r\n                } else {\r\n                    var buf = new Array(s.length);\r\n                    for (var i=0; i!=s.length; ++i) buf[i] = s.charCodeAt(i) & 0xFF;\r\n                    return buf;\r\n                }\r\n            };\r\n\r\n            /**\r\n             * @ngdoc method\r\n             * @name wcExportToExcel.sheetFromArrayOfArrays\r\n             * @methodOf WcResponsiveTableModule.directive:wcExportToExcel\r\n             * @param {String} data An array of arrays to be converted to sheet format\r\n             * @description\r\n             * This method reformats the data in the input object to a sheet object.\r\n             */\r\n            this.sheetFromArrayOfArrays = function(data){\r\n                var ws = {};\r\n                var range = {s: {c:10000000, r:10000000}, e:{c:0, r:0}};\r\n                for(var R = 0; R!=data.length; ++R){\r\n                    for(var C = 0; C!=data[R].length; ++C){\r\n                        if(range.s.r > R) range.s.r = R;\r\n                        if(range.s.c > C) range.s.c = C;\r\n                        if(range.e.r < R) range.e.r = R;\r\n                        if(range.e.c < C) range.e.c = C;\r\n                        var cell = {v: data[R][C] };\r\n                        if(cell.v == null) continue;\r\n                        var cell_ref = XLSX.utils.encode_cell({c:C,r:R});\r\n\r\n                        if(typeof cell.v === 'number') cell.t = 'n';\r\n                        else if(typeof cell.v === 'boolean') cell.t = 'b';\r\n                        else if(cell.v instanceof Date) {\r\n                            cell.t = 'n'; cell.z = XLSX.SSF._table[14];\r\n                            cell.v = this.dateNum(cell.v);\r\n                        }\r\n                        else cell.t = 's';\r\n                        ws[cell_ref] = cell;\r\n                        if(R===0) {ws[cell_ref]['bold'] = true;}\r\n                    }\r\n                }\r\n                if(range.s.c < 10000000) ws['!ref'] = XLSX.utils.encode_range(range);\r\n                return ws;\r\n            };\r\n\r\n            //Formats a passed in date (v) for excel export\r\n            this.dateNum = function(v/*:Date*/, date1904/*:?boolean*/)/*:number*/ {\r\n                var epoch = v.getTime();\r\n                if(date1904) epoch += 1462*24*60*60*1000;\r\n                return (epoch + 2209161600000) / (24 * 60 * 60 * 1000);\r\n            };\r\n\r\n            this.makeExcel = function(){\r\n\r\n                //get table headers\r\n                var tableId = responsiveTableController.id;\r\n\r\n                //Gather column Header text and names of associated data\r\n                var columnHeaders =  $(responsiveTableController.table).find('th');\r\n                var columnHeadText = [];\r\n\r\n                for (var i=0; i<columnHeaders.length; i++){\r\n                    var text = $(columnHeaders[i]).find('.header-text').text();\r\n                    if (text !== \"Actions\" && text.trim() !== \"\" ){\r\n                        columnHeadText.push(text.trim());\r\n                    }\r\n                }\r\n\r\n                var firstRowData = $(responsiveTableController.table).find('tbody tr:first-child td');\r\n                var dataAttributes = [];\r\n\r\n                for (var c=0; c<columnHeaders.length; c++){\r\n                    if(firstRowData[c].getAttribute('ng-bind')){\r\n                        var attr = firstRowData[c].getAttribute('ng-bind');\r\n                        dataAttributes.push(attr.substr(attr.indexOf('.')+1));\r\n                    } else if(columnHeaders[c].getAttribute(\"wc-column-sort\")){\r\n                        dataAttributes.push(columnHeaders[c].getAttribute('wc-column-sort'));\r\n                    }\r\n                }\r\n\r\n                this.exportToExcel(columnHeadText, dataAttributes, tableId);\r\n            };\r\n        }]\r\n    };\r\n}]);\r\n\r\n","/**\r\n * @ngdoc directive\r\n * @name WcResponsiveTableModule.directive:wcExportToPdf\r\n * @restrict E\r\n * @description\r\n * The wcExportToPdf directive is responsible for export the whole table to PDF.\r\n *\r\n * This directive has a requirement that\r\n */\r\n\r\n'use strict';\r\nangular.module('WebCoreModule').directive('wcExportToPdf', ['pdfMake', 'WcTranslateConfiguratorService', '$filter', '_', function (pdfMake, WcTranslateConfiguratorService, $filter ,_) {\r\n    return {\r\n\t\trestrict: 'E',\r\n        template: '<button type=\"button\" class=\"btn icon icon-pdf\" ng-click=\"exportToPdfController.makePDF()\" ng-cloak aria-label=\"{{\"exportTo.pdfButtonAriaLabel\" | translate}}\"><i class=\"fa fa-file-pdf-o\" aria-hidden=\"true\" ng-cloak title=\"{{\"exportTo.pdfButtonTitle\" | translate}}\"></i><span class=\"hidden-xs\">{{\"exportTo.pdfButtonText\" | translate}}</span></button>',\r\n\t\treplace: true,\r\n\t\trequire: ['wcExportToPdf'],\r\n\t\tscope: {},\r\n\t\tcontrollerAs: 'exportToPdfController',\r\n\t\tcontroller: ['$scope', '$element', '_', function ($scope, $element, _) {\r\n            WcTranslateConfiguratorService.loadPartAndRefresh('WC-dataTable');\r\n\r\n\t\t\tvar responsiveTableController = $element.parent().controller('wcResponsiveTable');\r\n\t\t\tresponsiveTableController = responsiveTableController || $scope.responsiveTableController || $scope.$parent.responsiveTableController;\r\n\r\n            this.exportToPDF = function (tableheaders, locationInCollection, tableId) {\r\n\r\n                var collection = responsiveTableController.WcTableCollectionService.getCollection();\r\n                var collectionLength= collection.length; //number of rows\r\n                var outputTDLength =  tableheaders.length; //number of columns you want in the pdf\r\n\r\n\r\n                var tableContent = [];\r\n                var rowContent = [];\r\n                var columnContent = \"\";\r\n\r\n                //header formatting\r\n                for (var i = 0; i<outputTDLength; i++){\r\n                    tableheaders[i] = {text: tableheaders[i],  bold: true};//making the title bold\r\n                }\r\n                tableContent.push(tableheaders);\r\n\r\n                //pdf table formatting\r\n                var pdfTableBodyFormatting = [];\r\n                for (var x= 0; x<outputTDLength; x++){\r\n                    pdfTableBodyFormatting.push(\"auto\");\r\n                }\r\n\r\n                if(collectionLength>0) {\r\n                    for (var i = 0; i < collectionLength; i++) {\r\n                        var row = collection[i];\r\n                        for (var j = 0; j < outputTDLength; j++) {\r\n                            var str = locationInCollection[j].toString();\r\n                            if (str.indexOf('.') == -1) { // . not found\r\n                                columnContent = row[locationInCollection[j]];\r\n                            } else {\r\n                                var stringArr = str.split(\".\");\r\n                                var innerTxt = row;\r\n\r\n                                for (var k = 0; k < stringArr.length; k++) {\r\n                                    innerTxt = innerTxt[stringArr[k]];\r\n                                }\r\n                                columnContent = innerTxt;\r\n                            }\r\n                            if(columnContent) {\r\n                                if(_.isDate(columnContent)){\r\n                                    rowContent.push($filter('date')(columnContent,'MMM-dd-yyyy'));\r\n                                }else {\r\n                                    rowContent.push(columnContent.toString());\r\n                                }\r\n                           } else {\r\n                                rowContent.push(\"\");\r\n                            }\r\n\r\n                        }\r\n                        tableContent.push(rowContent);\r\n                        rowContent = [];\r\n                    }\r\n                }\r\n                var docDefinition = {\r\n                    content: [\r\n                        {\r\n                            table: {\r\n                                // headers are automatically repeated if the table spans over multiple pages\r\n                                // you can declare how many rows should be treated as headers\r\n                                headerRows: 1,\r\n                                widths: pdfTableBodyFormatting,\r\n\r\n                                body: tableContent\r\n                            }\r\n                        }\r\n                    ]\r\n                }; //end doc def\r\n                tableId = tableId.toString() + \".pdf\";\r\n                return pdfMake.createPdf(docDefinition).download(tableId);\r\n            };\r\n\r\n\t\t\tthis.makePDF =  function() {\r\n\r\n\t\t\t\t//get table headers\r\n\t\t\t\tvar tableId = responsiveTableController.id;\r\n\r\n                var tableHeader = $(responsiveTableController.table).find('th');\r\n\t\t\t\t//var tableHeader = $element.parent().children('table').children('thead').children('tr').children('th');\r\n\t\t\t\tvar tableHeadersArray = [];\r\n\r\n\t\t\t\tfor (var i = 0; i < tableHeader.length; i++) {\r\n\t\t\t\t    var text = $(tableHeader[i]).find('.header-text').text();\r\n\t\t\t\t\tif (text !== \"Actions\" && text.trim() !== \"\" ) {\r\n\t\t\t\t\t\ttableHeadersArray.push(text.trim());\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\t//get table ng-bind\r\n\t\t\t\tvar tableBodyArray = [];\r\n\t\t\t\tvar bodyLength = responsiveTableController.WcTableCollectionService.getCollection().length;\r\n\r\n\t\t\t\tif (bodyLength > 0) {\r\n                    var td = $(responsiveTableController.table).find('tbody tr:first-child td');\r\n\t\t\t\t\t//var tableRow = $element.parent().children('table').children('tbody').children('tr');\r\n\r\n\t\t\t\t\tfor (var j = 0; j < td.length; j++) {\r\n\r\n\t\t\t\t\t\tif (td[j].getAttribute(\"ng-bind\")) { //.getAttribute(\"ng-bind\") returns row.region\r\n\t\t\t\t\t\t\tvar fullStr = td[j].getAttribute(\"ng-bind\");\r\n\t\t\t\t\t\t\tvar substring = fullStr.substr(fullStr.indexOf('.') + 1); //this gets string after the period\r\n\t\t\t\t\t\t\ttableBodyArray.push(substring);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse if (tableHeader[j].getAttribute(\"wc-column-sort\")) {\r\n\t\t\t\t\t\t\ttableBodyArray.push(tableHeader[j].getAttribute(\"wc-column-sort\"));\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tthis.exportToPDF(tableHeadersArray, tableBodyArray, tableId);\r\n\t\t\t};\r\n\t\t}]\r\n    };\r\n}]);\r\n","\t\t\t/**\r\n\t\t\t * @ngdoc service\r\n\t\t\t * @name WcResponsiveTableModule.service:WcTableScopeService\r\n\t\t\t * @description\r\n\t\t\t * The WcTableScopeService is responsible for maintain the scope of the table, the service holds the methods\r\n\t\t\t * that are related to table scope.\r\n\t\t\t */\r\n\r\n'use strict';\r\n\r\nangular.module('WcResponsiveTableModule')\r\n\t.factory('WcTableScopeService', function() {\r\n\t\tfunction WcTableScopeService() {\r\n\r\n            this.parentScope = null;\r\n            this.tableScope = null;\r\n        }\r\n\r\n\r\n\t\tWcTableScopeService.prototype = {\r\n            /**\r\n             * @ngdoc method\r\n             * @name getParentScope\r\n             * @methodOf WcResponsiveTableModule.service:WcTableScopeService\r\n             * @returns {String} This string holds parent scope value.\r\n             * @description\r\n             * The method is to get the parent scope value\r\n             */\r\n\r\n            getParentScope: function () {\r\n                return this.parentScope;\r\n            },\r\n\r\n            /**\r\n             * @ngdoc method\r\n             * @name getTableScope\r\n             * @methodOf WcResponsiveTableModule.service:WcTableScopeService\r\n             * @returns {String} This string holds table scope value.\r\n             * @description\r\n             * The method is to get the table scope value\r\n             */\r\n\r\n            getTableScope: function () {\r\n                return this.tableScope;\r\n            },\r\n\r\n            /**\r\n             * @ngdoc method\r\n             * @name setParentScope\r\n             * @methodOf WcResponsiveTableModule.service:WcTableScopeService\r\n             * @param {String} newParentScope This string value holds the new parent scope\r\n             * @description\r\n             * The method is to set the parent scope value\r\n             */\r\n\r\n            setParentScope: function (newParentScope) {\r\n                if (newParentScope.$id !== 0 && !newParentScope.$id) {\r\n                    this.parentScope = null;\r\n                    console.error('WcTableScopeService: setTableScope(); You must pass in a valid Angular Scope');\r\n                } else if (this.tableScope && newParentScope.$id === this.tableScope.$id) {\r\n                    this.parentScope = null;\r\n                    console.error('WcTableScopeService: setTableScope(); parent scope and table scope can not be the same scope');\r\n                } else {\r\n                    this.parentScope = newParentScope;\r\n                }\r\n            },\r\n\r\n            /**\r\n             * @ngdoc method\r\n             * @name setTableScope\r\n             * @methodOf WcResponsiveTableModule.service:WcTableScopeService\r\n             * @param {String} newTableScope This string value holds the new table scope\r\n             * @description\r\n             * The method is to set the table scope value\r\n             */\r\n\r\n            setTableScope: function (newTableScope) {\r\n                if (newTableScope.$id !== 0 && !newTableScope.$id) {\r\n                    this.tableScope = null;\r\n                    console.error('WcTableScopeService: setTableScope(); You must pass in a valid Angular Scope');\r\n                } else if (this.parentScope && newTableScope.$id === this.parentScope.$id) {\r\n                    this.tableScope = null;\r\n                    console.error('WcTableScopeService: setTableScope(); parent scope and table scope can not be the same scope');\r\n                } else {\r\n                    this.tableScope = newTableScope;\r\n                }\r\n            }\r\n        };\r\n\r\n\t\treturn WcTableScopeService;\r\n\t}\r\n\r\n);","/**\r\n* @ngdoc service\r\n* @name WcResponsiveTableModule.service:WcColumnFilterService\r\n* @description\r\n* The wcColumnFilterService service filters the column names of the datatable on key press.\r\n*/\r\n\r\n'use strict';\r\n\r\nangular.module('WcResponsiveTableModule')\r\n\t.factory('WcColumnFilterService',['_', function (_) {\r\n\t\tfunction WcColumnFilterService() {\r\n\t\t\tthis.columnsToFilter = [];\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t * @ngdoc method\r\n\t\t * @name WcColumnFilterService.getColumnsToFilter\r\n\t\t * @methodOf WcResponsiveTableModule.service:WcColumnFilterService\r\n\t\t * @returns {String} This string holds the list of columns to be filtered\r\n\t\t * @description\r\n\t\t * The method returns the columns that needs to be filtered\r\n\t\t */\r\n\r\n\t\tWcColumnFilterService.prototype.getColumnsToFilter = function () {\r\n\t\t\treturn this.columnsToFilter;\r\n\t\t};\r\n\r\n\t\t/**\r\n\t\t * @ngdoc method\r\n\t\t * @name WcColumnFilterService.setColumnsToFilter\r\n\t\t * @methodOf WcResponsiveTableModule.service:WcColumnFilterService\r\n\t\t * @param {Integer} key This integer value holds the index of the array\r\n\t\t * @param {String} value This string value holds the value of the array\r\n         * @param {Boolean} mathFilter This boolean tells whether this filter is intended as a conditional math filter\r\n\t\t * @description\r\n\t\t * The method set the columns to the array\r\n\t\t */\r\n\r\n\t\tWcColumnFilterService.prototype.setColumnsToFilter = function (key, value, mathFilter) {\r\n\t\t\t//this.columnsToFilter[key] = [value, mathFilter];\r\n\t\t\tvar index = _.findIndex(this.columnsToFilter, ['predicate', key]);\r\n\t\t\tif(index == -1) {\r\n                this.columnsToFilter.push({\r\n                    predicate: key,\r\n                    value: value,\r\n                    isMathFilter: mathFilter\r\n                });\r\n            } else {\r\n\t\t\t\tthis.columnsToFilter[index].value = value;\r\n\t\t\t\tthis.columnsToFilter[index].isMathFilter = mathFilter;\r\n\t\t\t}\r\n\t\t};\r\n\r\n        /**\r\n         * @ngdoc method\r\n         * @name WcColumnFilterService.removeColumnsToFilter\r\n         * @methodOf WcResponsiveTableModule.service:WcColumnFilterService\r\n         * @param {String} key This string value holds the key for the column to remove from the filtering\r\n         * @description\r\n         * Removes a filter based on the key that is passed in.\r\n         */\r\n\t\tWcColumnFilterService.prototype.removeColumnToFilter = function (key){\r\n\t\t\tvar index = _.findIndex(this.columnsToFilter, ['predicate', key]);\r\n\t\t\tif(index != -1){\r\n\t\t\t\tthis.columnsToFilter.splice(index, 1);\r\n\t\t\t}\r\n\t\t};\r\n\r\n        /**\r\n         * @ngdoc method\r\n         * @name WcColumnFilterService.getBlankFilters\r\n         * @methodOf WcResponsiveTableModule.service:WcColumnFilterService\r\n         * @description\r\n         * Removes all filters that have an empty string value\r\n         */\r\n\t\tWcColumnFilterService.prototype.getBlankFilters = function () {\r\n\t\t\tvar blankFilters = [];\r\n\t\t\tfor(var i = this.columnsToFilter.length-1; i >= 0; i--){\r\n\t\t\t\tif(this.columnsToFilter[i].value === \"\"){\r\n                    blankFilters.push(this.columnsToFilter[i]);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn blankFilters;\r\n        };\r\n\r\n\t\treturn WcColumnFilterService;\r\n\t}]);","\t\t/**\r\n\t\t * @ngdoc service\r\n\t\t * @name WcResponsiveTableModule.service:WcTableCollectionService\r\n\t\t * @requires WcTableScopeService\r\n\t\t * @description\r\n\t\t * The WcTableCollectionService manages the collection of table operations, this service is responsible to get the\r\n\t\t * collection information from the table.\r\n */'use strict';\r\n\r\nangular.module('WcResponsiveTableModule')\r\n\t.factory('WcTableCollectionService', function() {\r\n\r\n        function WcTableCollectionService(WcTableScopeService) {\r\n            this.WcTableScopeService = WcTableScopeService;\r\n        \tthis.collection = [];\r\n            this.rowKey = '';\r\n\r\n            this.sortEnabled = false;\r\n            this.filterEnabled = false;\r\n        }\r\n\r\n\t\t/**\r\n\t\t * @ngdoc method\r\n\t\t * @name getCollection\r\n\t\t * @methodOf WcResponsiveTableModule.service:WcTableCollectionService\r\n\t\t * @returns {Array} This array holds table collection values\r\n\t\t * @description\r\n\t\t * The method returns the table collection array.\r\n\t\t */\r\n\r\n\t\tWcTableCollectionService.prototype.getCollection = function () {\r\n\t\t\treturn this.collection;\r\n\t\t};\r\n\r\n\t\t/**\r\n\t\t * @ngdoc method\r\n\t\t * @name getCollectionLength\r\n\t\t * @methodOf WcResponsiveTableModule.service:WcTableCollectionService\r\n\t\t * @returns {Integer} This integer value holds length of the collection array\r\n\t\t * @description\r\n\t\t * The method returns the collection length\r\n\t\t */\r\n\r\n\t\tWcTableCollectionService.prototype.getCollectionLength = function () {\r\n\t\t\treturn this.collection.length;\r\n\t\t};\r\n\r\n\t\t/**\r\n\t\t * @ngdoc method\r\n\t\t * @name getRowKey\r\n\t\t * @methodOf WcResponsiveTableModule.service:WcTableCollectionService\r\n\t\t * @returns {Integer} This integer value holds the index of the array\r\n\t\t * @description\r\n\t\t * The method returns the index of the array\r\n\t\t */\r\n\r\n\t\tWcTableCollectionService.prototype.getRowKey = function () {\r\n\t\t\treturn this.rowKey;\r\n\t\t};\r\n\r\n\t\t/**\r\n\t\t * @ngdoc method\r\n\t\t * @name setCollection\r\n\t\t * @methodOf WcResponsiveTableModule.service:WcTableCollectionService\r\n\t\t * @param {Array} newCollection This array holds the collection data\r\n\t\t * @param {Boolean} sorted This boolean value decides whether the collection is sorted or not\r\n\t\t * @param {Boolean} filtered This boolean value decides whether the collection is filtered or not\r\n\t\t * @description\r\n\t\t * The method set the collection to an array based on sorting and filtered value.\r\n\t\t */\r\n\r\n\t\tWcTableCollectionService.prototype.setCollection = function (newCollection, sorted, filtered) {\r\n\t\t\tthis.collection = newCollection;\r\n\r\n\t\t\t//need to broadcast out that our collection has changed so the filter directives can update\r\n\t\t\tif (sorted === undefined && filtered === undefined) {\r\n\t\t\t\tthis.WcTableScopeService.tableScope.$broadcast('table.collection.update');\r\n\t\t\t}\r\n\r\n\t\t\tthis.WcTableScopeService.tableScope.renderTable((sorted || filtered));\r\n\t\t};\r\n\r\n\t\t/**\r\n\t\t * @ngdoc method\r\n\t\t * @name setInitialCollection\r\n\t\t * @methodOf WcResponsiveTableModule.service:WcTableCollectionService\r\n\t\t * @param {Array} initialCollection This array holds the collection data\r\n\t\t * @description\r\n\t\t * The method set the initial collection values to an array\r\n\t\t */\r\n\r\n\t\tWcTableCollectionService.prototype.setInitialCollection = function (initialCollection) {\r\n\t\t\tthis.collection = initialCollection;\r\n\t\t};\r\n\r\n\t\t/**\r\n\t\t * @ngdoc method\r\n\t\t * @name setRowKey\r\n\t\t * @methodOf WcResponsiveTableModule.service:WcTableCollectionService\r\n\t\t * @param {Integer} newRowKey This integer value holds the new index of the array.\r\n\t\t * @description\r\n\t\t * The method set the new index to the current index value.\r\n\t\t */\r\n\r\n\t\tWcTableCollectionService.prototype.setRowKey = function (newRowKey) {\r\n\t\t\tif (newRowKey) {\r\n\t\t\t\tthis.rowKey = newRowKey;\r\n\t\t\t} else {\r\n\t\t\t\tthis.rowKey = 'id';\r\n\t\t\t\tthis.collection.forEach(angular.bind(this, function (obj, index) {\r\n\t\t\t\t\tobj[this.rowKey] = index;\r\n\t\t\t\t}));\r\n\t\t\t}\r\n\t\t};\r\n\r\n        return WcTableCollectionService;\r\n\t}\r\n);","\t\t/**\r\n\t\t * @ngdoc service\r\n\t\t * @name WcResponsiveTableModule.service:WcTablePaginationService\r\n\t\t * @requires WcTableCollectionService\r\n\t\t * @description\r\n\t\t * The WcTablePaginationService manages the pagination operations, this service is responsible for all pagination methods.\r\n\t\t * All pagination action will come through this service.\r\n\t\t */\r\n\r\n'use strict';\r\n\r\nangular.module('WcResponsiveTableModule')\r\n\t.factory('WcTablePaginationService', function() {\r\n\r\n        function WcTablePaginationService(WcTableCollectionService) {\r\n        \tthis.WcTableCollectionService = WcTableCollectionService;\r\n\t\t\tthis.collectionLength = this.WcTableCollectionService.getCollectionLength();\r\n\r\n            this.paginationEnabled = false;\r\n\r\n            this.paginationDefaults = {\r\n                pageStart: 0,\r\n                pageEnd: 10,\r\n                resultsPerPage: 10,\r\n                numberOfPageControls: 5,\r\n                selectResultsPerPage: [10, 25, 50, 100],\r\n                responsiveBreakpoints: [430, 500, 600, 900],\r\n                paginationControlsPlacement: 'both'\r\n            };\r\n        }\r\n\r\n\t\t/**\r\n\t\t * @ngdoc method\r\n\t\t * @name getPaginationDefaults\r\n\t\t * @methodOf WcResponsiveTableModule.service:WcTablePaginationService\r\n\t\t * @returns {json} This json holds pagination default values\r\n\t\t * @description\r\n\t\t * This method is to get the pagination default values.\r\n\t\t */\r\n\r\n\t\tWcTablePaginationService.prototype.getPaginationDefaults = function () {\r\n\t\t\tif (this.paginationEnabled) {\r\n\t\t\t\treturn angular.copy(this.paginationDefaults);\r\n\t\t\t} else {\r\n\t\t\t\t// var collectionLength = this.WcTableCollectionService.getCollectionLength();\r\n\t\t\t\treturn {\r\n\t\t\t\t\tpageStart: 0,\r\n\t\t\t\t\tpageEnd: this.collectionLength\r\n\t\t\t\t};\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\t/**\r\n\t\t * @ngdoc method\r\n\t\t * @name isPaginationEnabled\r\n\t\t * @methodOf WcResponsiveTableModule.service:WcTablePaginationService\r\n\t\t * @returns {Boolean} This boolean value returns a true or false.\r\n\t\t * @description\r\n\t\t * This method is to set the pagination option for datatable.\r\n\t\t */\r\n\r\n\t\tWcTablePaginationService.prototype.isPaginationEnabled = function () {\r\n\t\t\treturn this.paginationEnabled;\r\n\t\t};\r\n\r\n\t\t/**\r\n\t\t * @ngdoc method\r\n\t\t * @name setPaginationDefaults\r\n\t\t * @methodOf WcResponsiveTableModule.service:WcTablePaginationService\r\n\t\t * @param {json} newDefaults The json string holds the new default values for pagination\r\n\t\t * @description\r\n\t\t * This method is to set the pagination default values.\r\n\t\t */\r\n\r\n\t\tWcTablePaginationService.prototype.setPaginationDefaults = function (newDefaults) {\r\n\t\t\tfor (var property in newDefaults) {\r\n\t\t\t\tif (this.paginationDefaults[property] !== 0 && !this.paginationDefaults[property]) {\r\n\t\t\t\t\tconsole.error('WcTablePaginationService: setPaginationDefaults(); Property ' + property + ' is not a pagination default');\r\n\t\t\t\t\t//remember that 0 is a valid possibility\r\n\t\t\t\t} else if (newDefaults[property] || (typeof newDefaults[property] == 'number' && newDefaults[property] > -1)) {\r\n\t\t\t\t\tthis.paginationDefaults[property] = newDefaults[property];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\t/**\r\n\t\t * @ngdoc method\r\n\t\t * @name setPaginationState\r\n\t\t * @methodOf WcResponsiveTableModule.service:WcTablePaginationService\r\n\t\t * @param {Boolean} boolean This boolean value returns a true or false.\r\n\t\t * @description\r\n\t\t * This method is to set the pagination enabled option for datatable\r\n\t\t */\r\n\t\tWcTablePaginationService.prototype.setPaginationState = function (boolean) {\r\n\t\t\tthis.paginationEnabled = boolean;\r\n\t\t};\r\n\r\n        return WcTablePaginationService;\r\n\t});"]}