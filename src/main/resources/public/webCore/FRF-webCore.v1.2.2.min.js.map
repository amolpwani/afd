{"version":3,"sources":["../../../build/src/webCore/WebCoreModule.js","../../../build/src/webCore/services/wcAlertConsoleService/WcAlertConsoleService.js","../../../build/src/webCore/services/wcAuthorizationService/WcAuthorizationCacheHelper.js","../../../build/src/webCore/services/wcAuthorizationService/WcAuthorizationService.js","../../../build/src/webCore/services/wcCameraService/WcCameraService.js","../../../build/src/webCore/services/wcDataFileService/WcDataFileService.js","../../../build/src/webCore/services/wcHttpRequestService/WcHttpRequestService.js","../../../build/src/webCore/services/wcImageFileService/WcImageFileService.js","../../../build/src/webCore/services/wcTranslateConfiguratorService/WcTranslateConfiguratorService.js","../../../build/src/webCore/services/wcWebtrendsService/WcWebtrendsService.js","../../../build/src/webCore/prototypes/wcDateRangePickerPrototype/WcDateRangePickerPrototype.js","../../../build/src/webCore/prototypes/wcHttpEndpointPrototype/WcHttpEndpointPrototype.js","../../../build/src/webCore/directives/requiredDirective/requiredDirective.js","../../../build/src/webCore/directives/formDirective/formDirective.js","../../../build/src/webCore/directives/ngrequiredDirective/ngrequiredDirective.js","../../../build/src/webCore/directives/wcAlertConsoleDirective/wcAlertConsoleDirective.js","../../../build/src/webCore/directives/wcChartDirective/wcChartDirective.js","../../../build/src/webCore/directives/wcCheckAllNoneDirective/wcCheckAllNoneDirective.js","../../../build/src/webCore/directives/wcClickOnceDirective/wcClickOnceDirective.js","../../../build/src/webCore/directives/wcContinueIfValidDirective/wcContinueIfValidDirective.js","../../../build/src/webCore/directives/wcFileUploadImageDirective/wcFileUploadImageDirective.js","../../../build/src/webCore/directives/wcInputFileDirective/wcInputFileDirective.js","../../../build/src/webCore/directives/wcLoadingIndicatorDirective/wcLoadingIndicatorDirective.js","../../../build/src/webCore/directives/wcNavMenuDirective/wcNavMenuDirective.js","../../../build/src/webCore/directives/wcNgModelDirectiveDecorator/wcNgModelDirectiveDecorator.js","../../../build/src/webCore/directives/wcOfflineIndicatorDirective/wcOfflineIndicatorDirective.js","../../../build/src/webCore/directives/wcPageTitleDirective/wcPageTitleDirective.js","../../../build/src/webCore/directives/wcPaginationDirective/wcPaginationDirective.js","../../../build/src/webCore/directives/wcProtectedResourceDirective/wcProtectedResourceDirective.js","../../../build/src/webCore/directives/wcValidationIndicatorDirective/wcValidationIndicatorDirective.js","../../../build/src/webCore/directives/wcDataTableDirective/wcDataTableDirective.js","../../../build/src/webCore/directives/wcDataTableDirective/WcDataTableService.js","../../../build/src/webCore/directives/wcDataTableDirective/dataTables.bootstrap.paging.js","../../../build/src/webCore/directives/ngPrismDirective/ngPrismDirective.js","../../../build/src/webCore/filters/wcPriceFilter/WcPriceFilter.js","../../../build/src/webCore/modules/wcResponsiveTable/WcResponsiveTableModule.js","../../../build/src/webCore/modules/wcResponsiveTable/components/directives/wcResponsiveTableDirective/wcResponsiveTableDirective.js","../../../build/src/webCore/modules/wcResponsiveTable/components/directives/wcRowRepeatDirective.js","../../../build/src/webCore/modules/wcResponsiveTable/components/directives/wcRowSelectCheckboxDirective.js","../../../build/src/webCore/modules/wcResponsiveTable/components/directives/wcRowSelectRadioDirective.js","../../../build/src/webCore/modules/wcResponsiveTable/components/directives/wcRowSelectAllDirective.js","../../../build/src/webCore/modules/wcResponsiveTable/components/directives/wcRowSelectNoneDirective.js","../../../build/src/webCore/modules/wcResponsiveTable/components/directives/wcTableSelectionInfoDirective.js","../../../build/src/webCore/modules/wcResponsiveTable/components/directives/wcRowActionSingleDirective.js","../../../build/src/webCore/modules/wcResponsiveTable/components/directives/wcRowSelectHeaderCheckboxDirective.js","../../../build/src/webCore/modules/wcResponsiveTable/components/directives/wcRowSelectHeaderRadioDirective.js","../../../build/src/webCore/modules/wcResponsiveTable/components/directives/wcRowActionMultipleDirective.js","../../../build/src/webCore/modules/wcResponsiveTable/components/directives/wcTablePaginationDirective.js","../../../build/src/webCore/modules/wcResponsiveTable/components/directives/wcColumnSortDirective.js","../../../build/src/webCore/modules/wcResponsiveTable/components/directives/wcColumnFilterDirective.js","../../../build/src/webCore/modules/wcResponsiveTable/components/directives/wcExportToExcelDirective.js","../../../build/src/webCore/modules/wcResponsiveTable/components/directives/wcExportToPdfDirective.js","../../../build/src/webCore/modules/wcResponsiveTable/components/services/wcTableScopeService/WcTableScopeService.js","../../../build/src/webCore/modules/wcResponsiveTable/components/services/wcColumnFilterService/WcColumnFilterService.js","../../../build/src/webCore/modules/wcResponsiveTable/components/services/wcTableCollectionService/WcTableCollectionService.js","../../../build/src/webCore/modules/wcResponsiveTable/components/services/wcTablePaginationService/WcTablePaginationService.js"],"names":["angular","module","config","$httpProvider","useApplyAsync","constant","window","_","XLSX","saveAs","pdfMake","Chart","local","wslBaseUrl","authorization","any","all","version","name","Prism","jQuery","fn","exists","this","length","outerHTML","append","eq","clone","html","merge","dst","forEach","arguments","obj","value","key","constructor","Object","service","$timeout","$interval","$sce","configureDefaults","undefined","visible","visibleDefault","multiple","multipleDefault","persist","persistDefault","timeout","parseInt","timeoutDefault","errorOnStateChange","removeErrorOnStateChange","getSettings","fadeOutAnimationLengthMS","messages","isMessageDuplicate","msg","isDuplicate","i","message","$$unwrapTrustedValue","addMessage","messageInstance","trustAsHtml","uniqueishID","uniqueId","type","push","f","fadeOut","bind","removeMessage","updateTimeout","manualFade","foo","splice","removeMessages","includingPersistent","removeErrorMessages","getMessages","onlyVisible","messagesToReturn","getMessagesByType","typeToMatch","$q","$window","setSessionCache","sessionStorage","policyCache","toJson","cache","getSessionCache","fromJson","resetCache","retrievePolicyAuthorization","formattedPolicy","foundPolicy","find","policy","promise","then","resolved","data","authorized","when","formatPolicy","promiseOrData","resolvedPolicy","policyLocation","cachePolicy","localPolicy","copy","resource","action","addPolicy","policyName","policyPromise","WcHttpEndpointPrototype","WcAuthorizationCacheHelper","WcConstants","$state","authorizationEndpoint","requestAuthorization","get","params","authorizationString","response","isAuthorizedFromCache","isStateAuthorized","stateName","state","policies","criteria","isAuthorized","policySet","isArray","authorizations","each","isCached","arrayOfAuths","some","every","$rootScope","WcImageFileService","navigator","$on","stopCamera","onbeforeunload","cameraIsOn","height","width","setCameraSize","x","y","mediaDevices","getUserMedia","mozGetUserMedia","webkitGetUserMedia","c","Promise","n","call","generateVideo","document","createElement","returnVideoElement","videoElement","setAttribute","style","audio","video","stream","src","URL","createObjectURL","$","catch","error","console","checkForCamera","enumerateDevices","devices","filter","device","kind","err","log","takePicture","canvas","generateCanvas","getContext","drawImage","toDataURL","startCamera","play","getVideoTracks","tracks","stop","getFileType","fileDef","replace","prepareForFileUpload","base64DataUri","MIMEType","match","base64String","readFile","deferred","defer","reader","FileReader","onload","loadEvent","dataUri","target","result","resolve","onerror","reject","readAsDataURL","$http","$interpolate","WcAlertConsoleService","configuration","xsrfCookieName","withCredentials","headers","baseUrl","pingTrustPeriodMS","unAuthenticatedCallback","unprotectedPingRoute","queuedRequestMessages","extend","requestConfigurationMapper","httpConfig","urlBuilder","url","indexOf","interceptedParams","triggerRequestInterceptors","urlForCache","retString","keys","parseParams","alwaysRefresh","forceRefresh","cachedData","getFromLocalStorage","getFromSessionStorage","$broadcast","triggerResponseInterceptors","storeInLocalStorage","storeInSessionStorage","status","triggerErrorInterceptors","getNetworkState","finally","post","offline","fromQueue","queueRequest","put","delete","localStorage","getItem","isString","setItem","removeFromLocalStorage","removeItem","removeFromSessionStorage","addMessageForQueuedRequest","verb","substring","lastIndexOf","processOfflineQueue","deregisterListener","currentQueue","item","shift","requestPromise","handler","setupQueueTrigger","requestInterceptors","responseInterceptors","errorInterceptors","addRequestInterceptor","interceptor","index","newParms","addResponseInterceptor","newResponse","addErrorInterceptor","_lastPingRequestTimestamp","_trustedResponse","_pendingRequests","_currentPingRequestPromise","_networkStatusResponses","currentTime","Date","loadImage","imageSrc","context","image","Image","createImageURI","imageURI","provider","$translateProvider","translateProvider","sanitizationStrategy","loader","loaderObj","urlTemplate","langKeyArray","langKeyObj","en_*","en-*","zh_CN","zh_HK","ru_RU","fallbackLang","configureTranslateService","useSanitizeValueStrategy","useLoader","registerAvailableLanguageKeys","determinePreferredLanguage","fallbackLanguage","use","preferredLanguage","$get","$translate","$translatePartialLoader","loadPartAndRefresh","partString","addPart","refresh","_enabled","enable","trackData","uri","urlPart","location","hash","search","$current","dcsMultiTrack","$apply","factory","WcDateRangePickerPrototype","startDate","endDate","minDate","maxDate","startDateFieldName","endDateFieldName","form","isStartDateOpen","isEndDateOpen","load","$watch","newValue","oldValue","minEndDate","maxStartDate","dateDisabledArray","$error","newVal","$viewValue","$setValidity","prototype","minStartDate","maxEndDate","openStartDate","$event","preventDefault","stopPropagation","openEndDate","WcHttpRequestService","Endpoint","route","baseURL","subRoute","id","options","directive","WcTranslateConfiguratorService","$compile","restrict","require","controller","$scope","$element","$attrs","insertionPoint","closest","formElem","addLabels","scope","attrs","has","disabled","readonly","prepend","hasAttribute","formGroup","first","link","elem","ctrls","remove","ngRequired","getFormControls","formController","formControls","hasOwnProperty","calculateNumRequiredFields","numRequiredFields","required","removeLabels","ngRequiredController","template","visibleMessages","closeAlert","newMsgs","oldMsgs","userYpos","scrollTop","msgYpos","last","offset","top","animate","chartObj","defaultOptions","responsive","maintainAspectRatio","wrap","cvs","destroyChart","resize","destroy","update","targetContainerId","controllerAs","responsiveTableController","element","viewScope","$parent","toggleCheckAllExists","setToggleCheckAllExists","getToggleCheckAllExists","checkAll","WcTableScopeService","getTableScope","prop","checkBoxList","checked","click","checkNone","controllers","datatableController","priority","onClick","evt","stopImmediatePropagation","off","on","workflow","isWorkflowEnabled","getWorkflowData","navigateToState","callingValues","nextState","reload","go","clickHandler","viewCtrl","callback","controllerContinueCallbackFunctionName","retVal","attr","ctrl","formName","formCtrl","$valid","$setPristine","bindToController","onUpload","fileTypes","join","WcCameraService","WcDataFileService","cameraElement","chooseImageUpload","snapshotToUpload","webcamPresent","webCamIsPresnet","cancel","previewImageElement","capturePicture","snapShot","prepareForUpload","imageToUpload","imageToUploadObject","imageFileData","imageBase64String","imageMIMEType","fileType","description","thumbnailURI","thumbnailFileData","thumbnailBase64String","thumbnailMIMEType","imageObject","original","imageData","thumb","thumbnailData","turnCameraOff","turnCameraOn","addImages","wcInputFile","vm","onChange","changeEvent","files","map","extension","val","file","requestCount","pendingStateChange","showLoadingIndicator","show","opacity","hideLoadingIndicator","hide","incrementPendingCounterAndShow","decrementPendingCounterAndHide","hideLoadingIndicatorCallback","loadingIndicator","menuData","menuDataUrl","transclude","success","removeClass","collapseNavbar","navbarCollapsed","MainMenuCollpase","event","parentElement","parent","not","toggleClass","toggleNavbarCollpase","collapasesubMenu","menu","replaceWith","$provide","decorator","$delegate","shouldSetBlurUpdateEvent","nodeName","toLowerCase","nodeType","classList","contains","compileFn","compile","apply","pre","ngModelOptions","$options","updateOn","updateOnDefault","checking","showOfflineIndicator","alertBox","addClass","scrollTo","hideOfflineIndicator","showUnavailableOffline","hideUnavailableOffline","showUnauthIndicator","hideUnauthIndicator","checkNetworkState","wslLogin","href","encodeURIComponent","current","unavailableOffline","offlineIndicator","firstRun","pageTitle","cleanUpName","cleanName","m","toUpperCase","updatePageTitle","parentStateName","appName","tempPageTitle","titleTag","wc-page-title","ng-bind","$templateCache","wcPagination","resultsPerPage","resultsPerPageText","showingResultsText","resultsItemCount","responsiveBreakpoints","searchResults","isNumber","totalItems","itemsPerPage","currentPage","boundaryLinks","maxSize","filteredSearchResults","updatePageResultsCount","begin","end","$watchCollection","slice","currentBreakpoint","resizeHandler","innerWidth","debounce","setTimeout","before","after","WcAuthorizationService","checkAuthorization","wcProtectedResource","toString","trim","split","protectedResourceCtrl","datatableCtrl","tagName","attributes","ngFormObj","elemName","wcResponsiveTable","ctrlName","nodeValue","insertBefore","errType","errorMessage","errorMessageDOM","min","max","validatorAttrs","errorMsgId","requiredText","fieldNameTranslateString","wcValidationIndicator","errorTypes","defaultMsg","email","minlength","maxlength","minMaxRange","tableRequired","date","pattern","number","inValid","buildErrorMsg","instant","fieldName","elemNameSnakeCase","buildErrorMsgDOM","watchListener","$submitted","errorCases","toPairs","headerTemplate","overrideOptions","columns","columnDefs","responsiveColumnDefs","checkBoxCol","radioButtonCol","selectedValue","ngModel","WcDataTableService","bAutoWidth","bStateSave","bPaginate","sPaginationType","sDom","bLengthChange","bFilter","bDestroy","fnCreatedRow","row","dataIndex","theRow","theCells","cellWithLinks","setClickedRowData","contents","aaSorting","useResponsiveColumns","previousBreakPoint","toggleCheckAll","initialize","ngModelController","alert","nativeAlert","warn","table","$eval","aoColumns","showcheckBoxColumn","showRadioColumn","inValidCombination","hasInputField","requiredString","inputName","sTitle","sClass","mData","mRender","full","String","bSortable","aoColumnDefs","initial","maxBreakpoint","breakpoints","defineTable","dataTable","fnAddData","oldVal","fnClearTable","createInputColumn","jqTable","rows","fnGetNodes","$setViewValue","latestChecked","oldView","newView","uniq","concat","without","$root","$$phase","defaults","fnDestroy","adjustColumns","settings","fnSettings","columnsToHide","currentBreakPoint","paging","dom","pagination","oLanguage","oPaginate","sShowPagingText","showPagingText","paginationOptions","fnSetColumnVis","bVisible","TEMPLATE_REGEXP","iElement","test","ajax","async","responseText","thead","iAttrs","clickedRowData","getClickedRowData","sLengthMenu","sInfo","dataTableExt","oStdClasses","sWrapper","oPagination","bootstrap_two_button","fnInit","oSettings","nPaging","fnCallbackDraw","oLang","oClasses","disabledClass","sPageButtonStaticDisabled","sAppend","sPageButton","sPagePrevious","iTabIndex","sPagePreviousText","sPrevious","sPageNext","sPageNextText","sNext","els","nPrevious","nNext","aanFeatures","p","sTableId","fnClickHandler","e","oApi","_fnPageChange","_fnBindAction","fnUpdate","iPages","Math","ceil","fnRecordsDisplay","_iDisplayLength","iCurrentPage","_iDisplayStart","an","bootstrap_normal","iStartButton","iEndButton","iPageCount","iFullNumbersShowPages","iPageCountHalf","floor","activeClass","sPageButtonActive","sList","fnFormatNumber","hasChildNodes","j","page","bootstrap_full_numbers","sPageButtonText","sPageFirst","sFirst","sPageLast","sLast","nFirst","nLast","DataTable","TableTools","classes","container","buttons","normal","collection","print","info","select","DEFAULTS","oTags","button","liner","ready","highlightElement","detectFilterType","filterMax","items","propertyName","num","filterMin","filterRange","newItems","isNaN","$swipe","WcTableCollectionService","WcTablePaginationService","WcColumnFilterService","rowKey","paginationControlsPlacement","responsiveView","columnData","selectResultsPerPage","paginationEnabled","checkallnoneEnabled","exporttopdfEnabled","exporttoexcelEnabled","parentScope","setParentScope","setTableScope","setInitialCollection","setRowKey","lastCollectionRendered","renderTable","resetToPageOne","tableIsLoading","tableIsFinishedLoading","tableRendered","previousSortColumn","activeSortColumn","selectedMathFilterOption","toggleFilterVisibility","currentText","text","toggle","staticFilter","showFilterLabel","hideFilterLabel","setupRachetingColumns","ratchetIndex","ratchetCols","direction","numberOfCols","args","animating","setupPaginationDefaults","numberOfPageControls","setPaginationState","setPaginationDefaults","setupTableValidation","$name","$parsers","viewValue","$formatters","modelValue","applyModel","$$parentForm","$addControl","preSetupTable","children","dataRow","headerRow","headerTxtNode","headerTxtPreWrap","appendTo","columnHeadingText","tableConfig","addLoadingIndicator","addColumnFilteringFeature","addPaginationFeature","addCheckAllNoneFeature","checkAllNone","next","addExportToPdfFeature","tableButtonGroup","addExportToExcelFeature","addResponsiveFeature","addScrollingTableFeature","addRachetingColumnsFeature","addColumnToggleFeature","addListViewFeature","setMatchingHeights","selector","css","columnResizeHandler","scrollHandler","currentTarget","scrollLeft","scroll","startCoords","valid","directionOfSwipe","coords","deltaY","abs","deltaX","start","columnToggle","columnName","firstChild","nextSibling","localName","postSetupTable","dataRowChildren","noRecordRow","getCollection","getRowKey","elements","insertRows","pageStart","pageEnd","elementsLength","el","$destroy","childScope","$new","isSelected","newRow","$attr","block","mappedCollection","selectedItems","hiddenColumns","rowRepeatController","paginationDefaults","getPaginationDefaults","checkbox","rowCheckedMap","rowUncheckedMap","wcRowSelectCheckbox","tableScope","selectRow","newModel","highlightRow","shouldHighlight","tableCells","cell","boolean","wcRowSelectRadio","rowSelectRadioController","highlight","getParentScope","selectAll","rowSelectAllController","selectNone","rowSelectNoneController","numberOfSelectedRows","wcRowActionSingle","singleAction","rowScope","rowActionSingleController","wcRowSelectHeaderCheckbox","checkIfAllChecked","allCheckboxes","is","isChecked","selectAllRows","wcRowSelectHeaderRadio","wcRowActionMultiple","multipleAction","rowActionMultipleController","tableWrapper","resetCurrentPage","getCollectionLength","totalPages","updatePaginationControls","createPaginationControlNumbers","paginationPageControls","array","paginationNoOfPages","paginationOffset","pageNumberToAdd","checkValue","numberOfPagesNeeded","lastPageAdded","firstPageAdded","unshift","changeResultsPerPage","changePage","newPage","pageNumber","newPageEnd","nextPage","nextPageNumber","previousPage","$digest","tablePaginationController","resultsPerPageTemplate","paginationLegendTemplate","paginationControlsTemplate","navigateToPageTemplate","actionDropdownTemplate","controlsPlacement","paginationTop","paginationBottom","wcColumnSort","wcColumnSortDefault","specialChars","columnIndex","collectionLength","sortReverse","sortCollection","sortEnabled","setCollection","arr","reverse","sort","a","b","localeCompare","sortOn","filterEnabled","columnSortController","column","thSpan","columnClass","hasClass","clickableElem","$document","$filter","wcColumnFilter","wcColumnFilterDelay","htmlDecode","input","innerHTML","childNodes","predicate","isMultiSelect","mathFilterOptions","filterColumn","activeFilterWrapper","filterArray","getColumnsToFilter","filteredCollection","isMathFilter","mathOp","filterString","filterNum","Number","rowValue","dismissFilter","removeColumnToFilter","parents","filterListener","htmlPredicate","elementVal","setColumnsToFilter","filterIconFinder","activeFilterButton","label","activeFilterBox","columnFilterController","keyup","option","exportToExcel","columnHeadText","dataAttributes","tableId","exportArray","rowLen","r","fileName","workbook","SheetNames","Sheets","worksheet","sheetFromArrayOfArrays","wsColumnWidths","wch","maxLength","v","ranges","outWorkbook","write","Blob","s2ab","s","ArrayBuffer","buf","view","Uint8Array","charCodeAt","Array","ws","range","R","C","cell_ref","utils","encode_cell","t","z","SSF","_table","dateNum","encode_range","date1904","epoch","getTime","makeExcel","columnHeaders","firstRowData","getAttribute","substr","exportToPDF","tableheaders","locationInCollection","outputTDLength","tableContent","rowContent","columnContent","bold","pdfTableBodyFormatting","str","stringArr","innerTxt","k","isDate","docDefinition","content","headerRows","widths","body","createPdf","download","makePDF","tableHeader","tableHeadersArray","tableBodyArray","td","fullStr","newParentScope","$id","newTableScope","columnsToFilter","mathFilter","findIndex","getBlankFilters","blankFilters","newCollection","sorted","filtered","initialCollection","newRowKey","isPaginationEnabled","newDefaults","property"],"mappings":"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","file":"FRF-webCore.min.js","sourcesContent":["/**\r\n * @ngdoc overview\r\n * @name WebCoreModule\r\n * @description\r\n * WebCore is a collection of internally developed components and extensions and is the majority of the custom code developed for the\r\n * Ford Responsive Framework (FRF). The WebCoreModule includes all needed vendor scripts as dependencies and also includes the custom\r\n * developed scripts. Applications can take advantage of all vendor and custom code via inclusion of WebCoreModule.\r\n */\r\n'use strict';\r\nangular.module('WebCoreModule', [\r\n    'ngSanitize',\r\n    'ngTouch',\r\n    'pascalprecht.translate',\r\n    'ui.bootstrap',\r\n    'ui.mask',\r\n    'ui.router',\r\n    'ui.select',\r\n    'WcResponsiveTableModule'\r\n]).config(['$httpProvider', function ($httpProvider) {\r\n    //override default $http behavior to trigger any webCore http requests to be batched into similar digest cycles.\r\n    $httpProvider.useApplyAsync(true);\r\n}]);\r\n\r\n/**\r\n * @ngdoc service\r\n * @name WebCoreModule.service:_\r\n * @description\r\n * WebCore includes the underscore library. Since it's not defined in the Angular context, we define an Angular constant for it here.\r\n */\r\nangular.module('WebCoreModule').constant('_', window._);\r\n\r\n/**\r\n * @ngdoc service\r\n * @name WebCoreModule.service:XLSX\r\n * @description\r\n * WebCore includes the js-xlsx library. Since it's not defined in the Angular context, we define an Angular constant for it here.\r\n */\r\nangular.module('WebCoreModule').constant('XLSX', window.XLSX);\r\n\r\n\r\n/**\r\n * @ngdoc service\r\n * @name WebCoreModule.service:saveAs\r\n * @description\r\n * WebCore includes the file-saver library. Since it's not defined in the Angular context, we define an Angular constant for it here.\r\n */\r\nangular.module('WebCoreModule').constant('saveAs', window.saveAs);\r\n\r\n/**\r\n * @ngdoc service\r\n * @name WebCoreModule.service:pdfMake\r\n * @description\r\n * WebCore includes the pdfMake library. Since it's not defined in the Angular context, we define an Angular constant for it here.\r\n */\r\nangular.module('WebCoreModule').constant('pdfMake', window.pdfMake);\r\n\r\n/**\r\n * @ngdoc service\r\n * @name WebCoreModule.service:Chart\r\n * @description\r\n * WebCore includes the Chart.js library. Since it's not defined in the Angular context, we define an Angular constant for it here.\r\n */\r\nangular.module('WebCoreModule').constant('Chart', window.Chart);\r\n\r\n/**\r\n * @ngdoc service\r\n * @name WebCoreModule.service:WcConstants\r\n * @description\r\n * WebCore includes a few constant values that are applicable module-wide. They are defined here as a constant service for use\r\n * throughout the module.\r\n */\r\nangular.module('WebCoreModule').constant('WcConstants', {\r\n    'local': 'local',\r\n    'wslBaseUrl': 'https://www.wsl.ford.com/login.cgi?portstripping=no&back=',\r\n    'authorization': {\r\n        'any': 'Any',\r\n        'all': 'All'\r\n    },\r\n    'version': '1.2.2',\r\n    'name' : 'Ford Responsive Framework (FRF)'\r\n});\r\nangular.module('WebCoreModule').constant('Prism', window.Prism);\r\n\r\njQuery.fn.exists = function () {\r\n    return this.length !== 0;\r\n};\r\n\r\njQuery.fn.outerHTML = function () {\r\n    return jQuery('<div>').append(this.eq(0).clone()).html();\r\n};\r\n\r\n//credit to stack overflow posters 'Michael Herold and Ryan O'Neill': http://stackoverflow.com/a/15311842\r\nangular.merge = function (dst) {\r\n    angular.forEach(arguments, function (obj) {\r\n        if (obj !== dst) {\r\n            angular.forEach(obj, function (value, key) {\r\n                if (dst[key] && dst[key].constructor && dst[key].constructor === Object) {\r\n                    angular.merge(dst[key], value);\r\n                } else {\r\n                    dst[key] = value;\r\n                }\r\n            });\r\n        }\r\n    });\r\n    return dst;\r\n};\r\n","\t\t/**\r\n\t\t * @ngdoc service\r\n\t\t * @name WebCoreModule.service:WcAlertConsoleService\r\n\t\t * @requires $timeout\r\n\t\t * @requires _\r\n\t\t * @requires $interval\r\n\t\t * @description\r\n\t\t * The WcAlertConsoleService manages the array of app-wide alert messages that are made visible to the user. The service exposes\r\n\t\t * a configureDefaults function and an addMessage function. Messages added to the service are then displayed by the wcAlertConsole directive.\r\n\t\t */\r\n'use strict';\r\nangular.module('WebCoreModule')\r\n\t.service('WcAlertConsoleService', ['$timeout', '_', '$interval', '$sce', function($timeout, _, $interval, $sce) {\r\n\r\n\t\t/**\r\n\t\t * @ngdoc method\r\n\t\t * @name WcAlertConsoleService.configureDefaults\r\n\t\t * @methodOf WebCoreModule.service:WcAlertConsoleService\r\n\t\t * @param {Object} config Options object to configure default values used by the WcAlertConsoleService. Config properties that can be set in this object include:\r\n\t\t *  - visible: set to true to make the messages visible (default). Set to false to hide the messages in the console.\r\n\t\t *  - multiple: set to true to allow multiple copies of the same message in the console (default). Set to false to allow only a single copy to be displayed in the console.\r\n\t\t *  - persist: set to false to allow the messages to be cleared from the console (default). Set to true to make the messages persist in the console.\r\n\t\t *  - timeout: set an {Integer} value for the length of time in seconds a message should stay in the console. (default, 7sec)\r\n\t\t *  - errorOnStateChange: set to true to have messages removed when a state change occurs (default). Set to false to allow the messages to stay in the console across states.\r\n\t\t * @description\r\n\t\t * The WcAlertConsoleService configures itself with application-wide defaults when it starts up. The configureDefaults function allows\r\n\t\t * you to override those defaults at the app level, so that the new parameters will apply to any message added to the console.\r\n\t\t */\r\n\t\tthis.configureDefaults = function(config) { // jshint ignore:line\r\n\r\n\t\t\tif(config) {\r\n\t\t\t\tif(config.visible !== undefined && (config.visible === true || config.visible === false)) {\r\n\t\t\t\t\tvisibleDefault = config.visible;\r\n\t\t\t\t}\r\n\t\t\t\tif(config.multiple !== undefined && (config.multiple === true || config.multiple === false)) {\r\n\t\t\t\t\tmultipleDefault = config.multiple;\r\n\t\t\t\t}\r\n\t\t\t\tif(config.persist !== undefined && (config.persist === true || config.persist === false)) {\r\n\t\t\t\t\tpersistDefault = config.persist;\r\n\t\t\t\t}\r\n\t\t\t\tif(config.timeout !== undefined && (parseInt(config.timeout) !== 'NaN')) {\r\n\t\t\t\t\ttimeoutDefault = config.timeout;\r\n\t\t\t\t}\r\n\t\t\t\tif(config.errorOnStateChange && (config.errorOnStateChange === true || config.errorOnStateChange === false)) {\r\n\t\t\t\t\tremoveErrorOnStateChange = config.errorOnStateChange;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\tvar visibleDefault = true;\r\n\t\tvar multipleDefault = true;\r\n\t\tvar persistDefault = false;\r\n\t\tvar timeoutDefault = 7;\r\n\t\tvar fadeOutAnimationLengthMS = 350;\r\n\t\tvar removeErrorOnStateChange = true;\r\n\r\n\t\tthis.getSettings = function() {\r\n\t\t\t//noinspection UnnecessaryLocalVariableJS\r\n            var settings = {\r\n\t\t\t\tvisible: visibleDefault,\r\n\t\t\t\tmultiple: multipleDefault,\r\n\t\t\t\tpersist: persistDefault,\r\n\t\t\t\ttimeout: timeoutDefault,\r\n\t\t\t\tfadeOutAnimationLengthMS: fadeOutAnimationLengthMS,\r\n\t\t\t\tremoveErrorOnStateChange: removeErrorOnStateChange\r\n\t\t\t};\r\n\t\t\treturn settings;\r\n\t\t};\r\n\r\n\t\tvar messages = [];\r\n\r\n\t\tthis.isMessageDuplicate = function(msg) {\r\n\r\n\t\t\tvar isDuplicate = false;\r\n\r\n\t\t\tfor(var i = 0; i < messages.length; i++) {\r\n\t\t\t\tif(messages[i].message.$$unwrapTrustedValue() === msg.$$unwrapTrustedValue()) {\r\n\t\t\t\t\tisDuplicate = true;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\treturn isDuplicate;\r\n\r\n\t\t};\r\n\t\t/**\r\n\t\t * @ngdoc method\r\n\t\t * @name WcAlertConsoleService.addMessage\r\n\t\t * @methodOf WebCoreModule.service:WcAlertConsoleService\r\n\t\t * @param {Object} messageInstance Object to configure the message to add to the console. Config properties that can be set in this object include:\r\n\t\t *  - message: Required. The string of text that will be added to the console as a message.\r\n\t\t *  - type: Required. The type of message styling to apply. Can be success, info, warning, or danger.\r\n\t\t *  - visible: set to true to make the messages visible (default). Set to false to hide the messages in the console.\r\n\t\t *  - multiple: set to true to allow multiple copies of the same message in the console (default). Set to false to allow only a single copy to be displayed in the console.\r\n\t\t *  - persist: set to false to allow the messages to be cleared from the console (default). Set to true to make the messages persist in the console.\r\n\t\t *  - timeout: set an {Integer} value for the length of time in seconds a message should stay in the console. (default, 7sec)\r\n\t\t *  - errorOnStateChange: set to true to have messages removed when a state change occurs (default). Set to false to allow the messages to stay in the console across states.\r\n\t\t * @description\r\n\t\t * The WcAlertConsoleService allows you to add messages to the alert console by leveraging the addMessage function.\r\n\t\t * Messages will assume all app-wide configuration defaults, but those defaults can be overridden here by passing in the new configuration as a part of the messageInstance object.\r\n\t\t */\r\n\t\tthis.addMessage = function(messageInstance) {\r\n\r\n\t\t\t//first, trust the alert text as html\r\n\t\t\tmessageInstance.message = $sce.trustAsHtml(messageInstance.message);\r\n\r\n\t\t\tif(messageInstance) {\r\n\t\t\t\tif(messageInstance.visible === undefined) {\r\n\t\t\t\t\tmessageInstance.visible = visibleDefault;\r\n\t\t\t\t}\r\n\t\t\t\tif(messageInstance.multiple === undefined) {\r\n\t\t\t\t\tmessageInstance.multiple = multipleDefault;\r\n\t\t\t\t}\r\n\t\t\t\tif(messageInstance.persist === undefined) {\r\n\t\t\t\t\tmessageInstance.persist = persistDefault;\r\n\t\t\t\t}\r\n\t\t\t\tif(messageInstance.timeout === undefined) {\r\n\t\t\t\t\tmessageInstance.timeout = timeoutDefault;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t// create identifier for message\r\n\t\t\t//noinspection UnnecessaryLocalVariableJS\r\n            var uniqueishID = _.uniqueId('alert_');\r\n\t\t\tmessageInstance.uniqueishID = uniqueishID;\r\n\r\n\t\t\t// persist danger messages by default\r\n\t\t\tif(messageInstance.type === 'danger') {\r\n\t\t\t\tmessageInstance.persist = true;\r\n\t\t\t}\r\n\r\n\t\t\t// prevent duplicate message if multiple=false\r\n\t\t\tif(messageInstance.multiple === false) {\r\n\t\t\t\tif(!this.isMessageDuplicate(messageInstance.message)) {\r\n\t\t\t\t\tmessages.push(messageInstance);\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tmessages.push(messageInstance);\r\n\t\t\t}\r\n\r\n\t\t\tif(messageInstance.persist === false) {\r\n\t\t\t\t$interval(function() {\r\n\t\t\t\t\tfor(var f = 0; f < messages.length; f++) {\r\n\t\t\t\t\t\tif(messages[f].uniqueishID === messageInstance.uniqueishID) {\r\n\t\t\t\t\t\t\tmessages[f].fadeOut = true;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}, messageInstance.timeout * 1000 - fadeOutAnimationLengthMS,1);\r\n\r\n\t\t\t\t$interval(angular.bind(this, function() {\r\n\t\t\t\t\tthis.removeMessage(messageInstance.uniqueishID);\r\n\t\t\t\t}), messageInstance.timeout * 1000,1);\r\n\r\n\t\t\t\t$interval(angular.bind(this, function() {\r\n\t\t\t\t\tthis.updateTimeout(messageInstance.uniqueishID);\r\n\t\t\t\t}), 1000, messageInstance.timeout);\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\tthis.updateTimeout = function(uniqueishID) {\r\n\t\t\tfor(var i = 0; i < messages.length; i++) {\r\n\t\t\t\tif(messages[i].uniqueishID === uniqueishID) {\r\n\t\t\t\t\tmessages[i].timeout --;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\t// removes a specific message\r\n\t\tthis.removeMessage = function(uniqueishID, manualFade) {\r\n\r\n\t\t\tfunction foo(uniqueishID) {\r\n\t\t\t\treturn function() {\r\n\t\t\t\t\tthis.removeMessage(uniqueishID);\r\n\t\t\t\t};\r\n\t\t\t}\r\n\r\n\t\t\tfor(var i in messages) {\r\n\t\t\t\tif(messages[i].uniqueishID === uniqueishID) {\r\n\r\n\t\t\t\t\tif(manualFade) {\r\n\t\t\t\t\t\tmessages[i].fadeOut = true;\r\n\t\t\t\t\t\t$timeout(angular.bind(this, foo(uniqueishID)), fadeOutAnimationLengthMS);\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tmessages.splice(i, 1);\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\t// removes all messages (includingPersistent - set to true to remove persistent msg)\r\n\t\tthis.removeMessages = function(includingPersistent) {\r\n\r\n\t\t\tfor(var i = 0; i < messages.length; i++) {\r\n\t\t\t\tif(messages[i].persist === false || includingPersistent === true) {\r\n\t\t\t\t\tmessages.splice(i, 1);\r\n\t\t\t\t\t// reset index for accurate loop\r\n\t\t\t\t\ti = i - 1;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t};\r\n\r\n\t\tthis.removeErrorMessages = function() {\r\n\t\t\tfor(var i = 0; i < messages.length; i++) {\r\n\t\t\t\tif(messages[i].type === 'danger') {\r\n\t\t\t\t\tmessages.splice(i, 1);\r\n\t\t\t\t\t// reset index for accurate loop\r\n\t\t\t\t\ti = i - 1;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\t// returns all messages (onlyVisible to only get visible messages)\r\n\t\tthis.getMessages = function(onlyVisible) {\r\n\t\t\tvar messagesToReturn = [];\r\n\r\n\t\t\tfor(var i = 0; i < messages.length; i++) {\r\n\t\t\t\tif((onlyVisible === true && messages[i].visible === true) || onlyVisible === undefined) {\r\n\t\t\t\t\tmessagesToReturn.push(messages[i]);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\treturn messagesToReturn;\r\n\t\t};\r\n\r\n\t\t// returns messages that match specific type\r\n\t\tthis.getMessagesByType = function(typeToMatch) {\r\n\r\n\t\t\tvar messagesToReturn = [];\r\n\r\n\t\t\tfor(var i = 0; i < messages.length; i++) {\r\n\t\t\t\tif(messages[i].type === typeToMatch) {\r\n\t\t\t\t\tmessagesToReturn.push(messages[i]);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\treturn messagesToReturn;\r\n\t\t};\r\n\r\n\r\n\t}]);","\t\t/**\r\n\t\t * @ngdoc service\r\n\t\t * @name WebCoreModule.service:WcAuthorizationCacheHelper\r\n\t\t * @requires _\r\n\t\t * @requires $q\r\n\t\t * @requires $window\r\n\t\t * @description\r\n\t\t * The WcAuthorizationCacheHelper is utilized by the WcAuthorizationService to cache authorization results for the application.\r\n\t\t * Results from authorization checks are stored in the browser's session storage, limiting the number of network requests that are required.\r\n\t\t * The WcAuthorizationCacheHelper is a private helper specific to the WcAuthorizationService, so its properties and methods are not\r\n\t\t * documented here.\r\n\t\t */\r\n'use strict';\r\nangular.module('WebCoreModule')\r\n\t.service('WcAuthorizationCacheHelper', ['_', '$q', '$window', function(_, $q, $window) {\r\n\r\n\t\tthis.setSessionCache = function() {\r\n\t\t\t$window.sessionStorage.policyCache = angular.toJson(this.cache);\r\n\t\t};\r\n\r\n\t\tthis.getSessionCache = function() {\r\n\t\t\treturn angular.fromJson($window.sessionStorage.policyCache);\r\n\t\t};\r\n\r\n\t\tthis.cache = this.getSessionCache();\r\n\r\n\t\tif (!this.cache) {\r\n\t\t\tthis.cache = [];\r\n\t\t}\r\n\r\n\t\tthis.resetCache = function() {\r\n\t\t\tthis.cache = [];\r\n\t\t};\r\n\r\n\t\tthis.retrievePolicyAuthorization = function(formattedPolicy) {\r\n\t\t\tvar foundPolicy = _.find(this.cache, {\r\n\t\t\t\t'policy': formattedPolicy\r\n\t\t\t});\r\n\t\t\tif (foundPolicy !== undefined) {\r\n\t\t\t\tif (foundPolicy.promise && foundPolicy.promise.then) {\r\n\t\t\t\t\treturn foundPolicy.promise.then(function(resolved) {\r\n\t\t\t\t\t\tresolved = resolved.data ? resolved.data : resolved;\r\n\r\n\t\t\t\t\t\treturn resolved.authorized;\r\n\t\t\t\t\t});\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn $q.when(foundPolicy.authorized);\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\treturn null;\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\tthis.formatPolicy = function(name, promiseOrData) {\r\n\t\t\t// detect if policy is a promise\r\n\t\t\tif (promiseOrData.then) {\r\n\t\t\t\tpromiseOrData.then(angular.bind(this, function(resolvedPolicy) {\r\n\t\t\t\t\tvar policyLocation;\r\n\t\t\t\t\tfor (policyLocation = 0; policyLocation < this.cache.length; policyLocation++) {\r\n\t\t\t\t\t\tif (this.cache[policyLocation].policy === name) {\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tresolvedPolicy = resolvedPolicy.data ? resolvedPolicy.data : resolvedPolicy;\r\n\r\n\t\t\t\t\tthis.cache[policyLocation] = this.formatPolicy(name, resolvedPolicy);\r\n\t\t\t\t\tthis.setSessionCache();\r\n\r\n\t\t\t\t}));\r\n\t\t\t\tvar cachePolicy = {};\r\n\t\t\t\tcachePolicy.policy = name;\r\n\t\t\t\tcachePolicy.promise = promiseOrData;\r\n\t\t\t\treturn cachePolicy;\r\n\t\t\t} else {\r\n\t\t\t\tvar localPolicy = angular.copy(promiseOrData);\r\n\t\t\t\tlocalPolicy.policy = name;\r\n\t\t\t\tdelete localPolicy.resource;\r\n\t\t\t\tdelete localPolicy.action;\r\n\t\t\t\treturn localPolicy;\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\tthis.addPolicy = function(policyName, policyPromise) {\r\n\t\t\tthis.cache.push(this.formatPolicy(policyName, policyPromise));\r\n\t\t\tthis.setSessionCache();\r\n\t\t};\r\n\r\n\t}]);","\t\t/**\r\n\t\t * @ngdoc service\r\n\t\t * @name WebCoreModule.service:WcAuthorizationService\r\n\t\t * @requires WebCoreModule.service:WcHttpEndpointPrototype\r\n\t\t * @requires WebCoreModule.service:WcAuthorizationCacheHelper\r\n\t\t * @requires _\r\n\t\t * @requires $q\r\n\t\t * @requires WcConstants\r\n\t\t * @requires $state\r\n\t\t * @description\r\n\t\t * The WcAuthorizationService communicates with a specified restful endpoint to determine whether a user is authorized for a\r\n\t\t * resource or not. The service exposes functions to assist in decisions for whole states or even specific resources.\r\n\t\t */\r\n'use strict';\r\nangular.module('WebCoreModule')\r\n\t.service('WcAuthorizationService', ['WcHttpEndpointPrototype', 'WcAuthorizationCacheHelper', '_', '$q', 'WcConstants', '$state', function(WcHttpEndpointPrototype, WcAuthorizationCacheHelper, _, $q, WcConstants, $state) {\r\n\t\tthis.authorizationEndpoint = new WcHttpEndpointPrototype('authorizations');\r\n\r\n\t\tthis.requestAuthorization = function(name) {\r\n\t\t\tWcAuthorizationCacheHelper.addPolicy(name, this.authorizationEndpoint.get({params: {\r\n\t\t\t\t'authorizationString': name\r\n\t\t\t}}).then(function(response) {\r\n\t\t\t\treturn response.data[0];\r\n\t\t\t}));\r\n\t\t};\r\n\r\n\t\tthis.isAuthorizedFromCache = function(policy) {\r\n\t\t\treturn WcAuthorizationCacheHelper.retrievePolicyAuthorization(policy);\r\n\t\t};\r\n\r\n\t\t/**\r\n\t\t * @ngdoc method\r\n\t\t * @name WcAuthorizationService.isStateAuthorized\r\n\t\t * @methodOf WebCoreModule.service:WcAuthorizationService\r\n\t\t * @param {String} stateName String identifying the state to check the user's authoization for.\r\n\t\t * @returns {Promise} Promise object containing the results of the authorization check for the given state's policies.\r\n\t\t * @description\r\n\t\t * The isStateAuthorized function is a wrapper for the isAuthorized call when working with states. The function will\r\n\t\t * find the authorization policies associated with the given state name and invoke isAuthorized to determine if the\r\n\t\t * user is authorized to access the state.\r\n\t\t */\r\n\t\tthis.isStateAuthorized = function(stateName) {\r\n\r\n\t\t\t// Grab applicable policies from state's definition\r\n\t\t\tvar state = $state.get(stateName);\r\n\t\t\tvar policies = null,\r\n\t\t\t\tcriteria = null;\r\n\r\n\t\t\tif (state.data) {\r\n\t\t\t\tpolicies = state.data.policies ? state.data.policies : null;\r\n\t\t\t\tcriteria = state.data.criteria ? state.data.criteria : null;\r\n\t\t\t}\r\n\r\n\t\t\t// If state does not require any policy permissions, return true.\r\n\t\t\tif (!policies) {\r\n\t\t\t\treturn $q.when(true);\r\n\t\t\t}\r\n\r\n\t\t\t// Set criteria to 'All' by default if not specified\r\n\t\t\tif (policies && !criteria) {\r\n\t\t\t\tcriteria = WcConstants.authorization.all;\r\n\t\t\t}\r\n\r\n\t\t\treturn this.isAuthorized(policies, criteria);\r\n\t\t};\r\n\r\n\t\t/**\r\n\t\t * @ngdoc method\r\n\t\t * @name WcAuthorizationService.isAuthorized\r\n\t\t * @methodOf WebCoreModule.service:WcAuthorizationService\r\n\t\t * @param {String|Array} policySet Set of policies to check authorization against.\r\n\t\t * @param {String} criteria String identifying if the check should be for authorization against any or all of the policies.\r\n\t\t * @returns {Promise} Promise object containing the results of the authorization check for the given policySet and criteria.\r\n\t\t * @description\r\n\t\t * The isAuthorized function checks if the current user is authorized for the given policy set. Checks are made via\r\n\t\t * restful communications to the application server. The authorization service caches responses, to limit network\r\n\t\t * traffic if multiple checks are required for the same policy. The function returns a promise that will resolve based\r\n\t\t * on the given criteria. If 'All' is specified, the promise will be true if the user is authorized for all policies.\r\n\t\t * If 'Any' is specified, the promise will be true if the user is authorized for any of the policies.\r\n\t\t */\r\n\t\tthis.isAuthorized = function(policySet, criteria) {\r\n\r\n\t\t\tif (!criteria) {\r\n\t\t\t\tcriteria = WcConstants.authorization.all;\r\n\t\t\t}\r\n\r\n\t\t\tif (!angular.isArray(policySet)) {\r\n\t\t\t\tpolicySet = [policySet];\r\n\t\t\t}\r\n\r\n\t\t\tvar authorizations = [];\r\n\r\n\t\t\t_.each(policySet, angular.bind(this, function(policy) {\r\n\t\t\t\tvar isCached = this.isAuthorizedFromCache(policy);\r\n\t\t\t\tif (isCached === null) {\r\n\t\t\t\t\tthis.requestAuthorization(policy);\r\n\t\t\t\t\tisCached = this.isAuthorizedFromCache(policy);\r\n\t\t\t\t}\r\n\t\t\t\tauthorizations.push(isCached);\r\n\t\t\t}));\r\n\r\n\t\t\treturn $q.all(authorizations).then(function(arrayOfAuths) {\r\n\t\t\t\tswitch (criteria) {\r\n\t\t\t\t\tcase 'Any':\r\n\t\t\t\t\t\treturn _.some(arrayOfAuths);\r\n\t\t\t\t\tcase 'All':\r\n\t\t\t\t\t\treturn _.every(arrayOfAuths);\r\n\t\t\t\t\tdefault:\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t};\r\n\t}]);","\t\t/**\r\n\t\t * @ngdoc service\r\n\t\t * @constructor\r\n\t\t * @name WebCoreModule.service:WcCameraService\r\n\t\t * @requires $window\r\n\t\t * @requires $rootScope\r\n\t\t * @requires $window\r\n\t\t * @description\r\n\t\t * The WcCameraService service is used for taking pictures from user's camera for uploading the image to the application.\r\n\t\t *\r\n\t\t * To leverage the WcCameraService, create a new instance using 'new WcCameraService()' in calling code.\r\n\t\t * The WcCameraService constructor creates a new instance of the WcCameraService. This prototype\r\n\t\t * establishes the necessary properties and functions for taking pictures from camera.\r\n\t\t */\r\n\r\n'use strict';\r\nangular.module('WebCoreModule')\r\n\t.service('WcCameraService', ['$window', '$rootScope', 'WcImageFileService',\r\n\t\tfunction($window, $rootScope, WcImageFileService) {\r\n\t\t\tvar navigator = $window.navigator;\r\n\r\n\t\t\t//Events to ensure Webcam is disengaged when navigated away.\r\n\t\t\t$rootScope.$on('$stateChangeStart', angular.bind(this, function() {\r\n\t\t\t\tthis.stopCamera();\r\n\t\t\t}));\r\n\r\n\t\t\t$window.onbeforeunload = angular.bind(this, function() {\r\n\t\t\t\tthis.stopCamera();\r\n\t\t\t});\r\n\r\n\t\t\tthis.cameraIsOn = false;\r\n\t\t\tthis.height = 0;\r\n\t\t\tthis.width = 0;\r\n\r\n\t\t\tthis.setCameraSize = function(x, y) {\r\n\t\t\t\tthis.height = y;\r\n\t\t\t\tthis.width = x;\r\n\t\t\t};\r\n\r\n\t\t\t// WebcamJS's solution for finding the correct getUserMedia function\r\n\t\t\t// https://github.com/jhuckaby/webcamjs/blob/master/webcam.js\r\n\t\t\tthis.mediaDevices = (navigator.mediaDevices && navigator.mediaDevices.getUserMedia) ?\r\n\t\t\t\tnavigator.mediaDevices : ((navigator.mozGetUserMedia || navigator.webkitGetUserMedia) ? {\r\n\t\t\t\tgetUserMedia: function(c) {\r\n\t\t\t\t\t// TODO use $q\r\n\t\t\t\t\treturn new Promise(function(y, n) {\r\n\t\t\t\t\t\t(navigator.mozGetUserMedia ||\r\n\t\t\t\t\t\tnavigator.webkitGetUserMedia).call(navigator, c, y, n);\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t} : null);\r\n\t\t\t//end webcamjs\r\n\r\n\t\t\t// Only for testing. We have yet to find out how to mock document.createElement without\r\n\t\t\t// blowing up angular-mock. We have a Stack Overflow question out there to hopefully\r\n\t\t\t// find an answer.\r\n\t\t\t//\r\n\t\t\t// TODO: try $document instead of document\r\n\t\t\t// http://stackoverflow.com/questions/35369629/using-jasmine-to-spy-on-document-createelement-throws-error-from-angular-mock\r\n\t\t\t//\r\n\t\t\tthis.generateVideo = function() {\r\n\t\t\t\treturn document.createElement('video');\r\n\t\t\t};\r\n\r\n\t\t\t// https://github.com/jhuckaby/webcamjs/blob/master/webcam.js\r\n\t\t\tthis.returnVideoElement = function() {\r\n\t\t\t\t// We don't use jQuery for the video element because you must call the play() function\r\n\t\t\t\t// on the actual HTML element, not a jquery object.\r\n\t\t\t\tthis.videoElement = this.generateVideo();\r\n\t\t\t\tthis.videoElement.setAttribute('autoplay', 'autoplay');\r\n\t\t\t\tthis.videoElement.style.width = '' + this.width + 'px';\r\n\t\t\t\tthis.videoElement.style.height = '' + this.height + 'px';\r\n\r\n\t\t\t\treturn this.mediaDevices.getUserMedia({\r\n\t\t\t\t\taudio: false,\r\n\t\t\t\t\tvideo: true\r\n\t\t\t\t}).then(angular.bind(this, function(stream) {\r\n\t\t\t\t\tthis.stream = stream;\r\n\t\t\t\t\tthis.videoElement.src = $window.URL.createObjectURL(stream);\r\n\r\n\t\t\t\t\treturn $(this.videoElement);\r\n\t\t\t\t})).catch(function(error) {\r\n\t\t\t\t\tconsole.error(error);\r\n\t\t\t\t});\r\n\t\t\t};\r\n\t\t\t//end webcamjs\r\n\r\n\t\t\t/**\r\n\t\t\t * @ngdoc method\r\n\t\t\t * @name WcCameraService.checkForCamera\r\n\t\t\t * @methodOf WebCoreModule.service:WcCameraService\r\n\t\t\t * @returns {Promise} The data retrieved from the backing service wrapped in a promise.\r\n\t\t\t * @description\r\n\t\t\t * The WcCameraService provides a checkForCamera function to check the availability of the user's camera.\r\n\t\t\t */\r\n\t\t\tthis.checkForCamera = function() {\r\n\t\t\t\treturn $window.navigator.mediaDevices.enumerateDevices()\r\n\t\t\t\t\t.then(function(devices) {\r\n\t\t\t\t\t\tdevices = devices.filter(function(device) {\r\n\t\t\t\t\t\t\treturn device.kind === 'videoinput';\r\n\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\treturn (devices.length > 0);\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.catch(function(err) {\r\n\t\t\t\t\t\tconsole.log(err.name + \": \" + err.message);\r\n\t\t\t\t\t});\r\n\t\t\t};\r\n\r\n\t\t\t/**\r\n\t\t\t * @ngdoc method\r\n\t\t\t * @name WcCameraService.takePicture\r\n\t\t\t * @methodOf WebCoreModule.service:WcCameraService\r\n\t\t\t * @returns {Object} The data retrieved from the backing service will be an image in jpeg format.\r\n\t\t\t * @description\r\n\t\t\t * The WcCameraService provides a takePicture function to take the picture from user's camera.\r\n\t\t\t */\r\n\r\n\t\t\tthis.takePicture = function() {\r\n\t\t\t\tvar canvas = WcImageFileService.generateCanvas();\r\n\t\t\t\tcanvas.width = this.width;\r\n\t\t\t\tcanvas.height = this.height;\r\n\r\n\t\t\t\tvar context = canvas.getContext('2d');\r\n\t\t\t\tcontext.drawImage(this.videoElement, 0, 0, this.width, this.height);\r\n\r\n\t\t\t\treturn canvas.toDataURL('image/jpeg', 100);\r\n\t\t\t};\r\n\r\n\t\t\t/**\r\n\t\t\t * @ngdoc method\r\n\t\t\t * @name WcCameraService.startCamera\r\n\t\t\t * @methodOf WebCoreModule.service:WcCameraService\r\n\t\t\t * @description\r\n\t\t\t * The WcCameraService provides an stopCamera function to start the camera.\r\n\t\t\t */\r\n\t\t\tthis.startCamera = function() {\r\n\t\t\t\tthis.videoElement.play();\r\n\t\t\t\tthis.cameraIsOn = true;\r\n\t\t\t};\r\n\r\n\t\t\t/**\r\n\t\t\t * @ngdoc method\r\n\t\t\t * @name WcCameraService.stopCamera\r\n\t\t\t * @methodOf WebCoreModule.service:WcCameraService\r\n\t\t\t * @description\r\n\t\t\t * The WcCameraService provides an stopCamera function to stop the camera.\r\n\t\t\t */\r\n\t\t\tthis.stopCamera = function() {\r\n\t\t\t\tif(this.cameraIsOn) {\r\n\t\t\t\t\t// https://github.com/jhuckaby/webcamjs/blob/master/webcam.js\r\n\t\t\t\t\tif (this.stream.getVideoTracks) {\r\n\t\t\t\t\t\t// get video track to call stop on it\r\n\t\t\t\t\t\tvar tracks = this.stream.getVideoTracks();\r\n\t\t\t\t\t\tif (tracks && tracks[0] && tracks[0].stop) {\r\n\t\t\t\t\t\t\ttracks[0].stop();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else if (this.stream.stop) {\r\n\t\t\t\t\t\t// deprecated, may be removed in future\r\n\t\t\t\t\t\tthis.stream.stop();\r\n\t\t\t\t\t}\r\n\t\t\t\t\t//end webcamjs\r\n\r\n\t\t\t\t\tthis.cameraIsOn = false;\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t}\r\n\t]);","\t\t/**\r\n\t\t * @ngdoc service\r\n\t\t * @name WebCoreModule.service:WcDataFileService\r\n\t\t * @requires $q\r\n\t\t * @requires $window\r\n\t\t * @description\r\n\t\t * The WcDataFileService manages the file related operations while uploading the file.\r\n\t\t */\r\n\r\n'use strict';\r\nangular.module('WebCoreModule')\r\n\t.service('WcDataFileService', ['$q', '$window', function($q, $window) {\r\n\t\tthis.getFileType = function(fileDef) {\r\n\t\t\t//noinspection UnnecessaryLocalVariableJS\r\n            var fileType = fileDef.type.replace(/[a-z]+\\//, '');\r\n\t\t\treturn fileType;\r\n\t\t};\r\n\r\n\t\t/**\r\n\t\t * @ngdoc method\r\n\t\t * @name WcImageFileService.prepareForFileUpload\r\n\t\t * @methodOf WebCoreModule.service:WcDataFileService\r\n\t\t * @param {String} base64DataUri This string value holds the data uri\r\n\t\t * @returns {Object} The object value holds the file\r\n\t\t * @description\r\n\t\t * The WcImageFileService provides a prepareForFileUpload function to create a file  object from the provided url.\r\n\t\t */\r\n\r\n\t\tthis.prepareForFileUpload = function(base64DataUri) {\r\n\t\t\t//noinspection UnnecessaryLocalVariableJS\r\n            var fileObj = {\r\n\t\t\t\tMIMEType: base64DataUri.match(/^[^,]*,/, '')[0],\r\n\t\t\t\tbase64String: base64DataUri.replace(/^[^,]*,/, '')\r\n\t\t\t};\r\n\r\n\t\t\treturn fileObj;\r\n\t\t};\r\n\r\n\t\t/**\r\n\t\t * @ngdoc method\r\n\t\t * @name WcImageFileService.readFile\r\n\t\t * @methodOf WebCoreModule.service:WcDataFileService\r\n\t\t * @param {Object} fileDef This object value holds definition of the file.\r\n\t\t * @returns {Promise} Return dataURI as a promise\r\n\t\t * @description\r\n\t\t * The WcImageFileService provides a readFile function to read the uploaded file.\r\n\t\t */\r\n\r\n\t\tthis.readFile = function(fileDef) {\r\n\t\t\t// Return dataURI as a promise\r\n\t\t\t//https://gist.github.com/jollytoad/4201905\r\n\t\t\tvar deferred = $q.defer();\r\n\t\t\tvar reader = new $window.FileReader();\r\n\r\n\t\t\treader.onload = function(loadEvent){\r\n\t\t\t\tvar dataUri = loadEvent.target.result;\r\n\t\t\t\tdeferred.resolve(dataUri);\r\n\t\t\t};\r\n\r\n\t\t\treader.onerror = function(){\r\n\t\t\t\tdeferred.reject(fileDef);\r\n\t\t\t};\r\n\r\n\t\t\treader.readAsDataURL(fileDef);\r\n\r\n\t\t\treturn deferred.promise;\r\n\t\t};\r\n\t}]\r\n);","\t\t\t/**\r\n\t\t\t * @ngdoc service\r\n\t\t\t * @name WebCoreModule.service:WcHttpRequestService\r\n\t\t\t * @requires $rootScope\r\n\t\t\t * @requires $q\r\n\t\t\t * @requires $http\r\n\t\t\t * @requires $window\r\n\t\t\t * @requires $timeout\r\n\t\t\t * @description\r\n\t\t\t * The WcHttpRequestService wraps Angular's $http service. The wrapper provides caching, interceptors and default config params\r\n\t\t\t * that apply app-wide to all requests. The service also provides wrappers for each of the http verbs, but these functions are\r\n\t\t\t * better used when interacted with via the WcHttpEndpointPrototype, so they will not be documented here.\r\n\t\t\t */\r\n'use strict';\r\nangular.module('WebCoreModule')\r\n\t.service('WcHttpRequestService', ['$rootScope', '$q', '$http', '$window', '$timeout', '$interpolate', 'WcAlertConsoleService',\r\n\t\tfunction($rootScope, $q, $http, $window, $timeout, $interpolate, WcAlertConsoleService) {\r\n\r\n\t\t\tthis.configuration = {\r\n\t\t\t\txsrfCookieName: 'WSL-credential',\r\n\t\t\t\twithCredentials: true,\r\n\t\t\t\theaders: {},\r\n\t\t\t\ttimeout: 10000,\r\n\t\t\t\tbaseUrl: '',\r\n\t\t\t\tcache: false,\r\n\t\t\t\tpingTrustPeriodMS: 1000,\r\n\t\t\t\tunAuthenticatedCallback: function() {\r\n\t\t\t\t},\r\n\t\t\t\tunprotectedPingRoute: 'unprotected/ping',\r\n\t\t\t\tqueuedRequestMessages: {}\r\n\t\t\t};\r\n\r\n\t\t\t/**\r\n\t\t\t * @ngdoc method\r\n\t\t\t * @name WcHttpRequestService.configureDefaults\r\n\t\t\t * @methodOf WebCoreModule.service:WcHttpRequestService\r\n\t\t\t * @param {Object} config Options object to configure default values used by the WcHttpRequestService. Config properties that can be set in this object include:\r\n\t\t\t *  - baseUrl: String value identifying the base url to build requests from (e.g., wwwdev.jab.ford.com/Jab7Web/api). Defaults to ''\r\n\t\t\t *  - xsrfCookieName: String value used to identify a cookie that should always be sent. Defaults to 'WSL-credential'.\r\n\t\t\t *  - withCredentials: Boolean value for whether or not credentials should be sent on requests. Defaults to true.\r\n\t\t\t *  - headers: Object containing headers to send on each request. Defaults to {}.\r\n\t\t\t *  - timeout: Integer to identify how long to wait, in MS, before timing out a connection attempt. Defaults to 10000ms.\r\n\t\t\t *  - cache: Boolean to determine app-wide caching. Defaults to false, and typically should not be changed.\r\n\t\t\t *  - pingTrustPeriodMS: Integer to identify a trust period when calling an endpoint to check connectivity. Defaults to 1000ms, and typically doesn't need to be changed.\r\n\t\t\t *  - unAuthenticatedCallback: Function to be called when the service determines it has lost authentication.\r\n\t\t\t *  - unprotectedPingRoute: String value identifying the route to use for the unprotected ping request\r\n\t\t\t * @description\r\n\t\t\t * The WcHttpRequestService configures itself with application-wide defaults when it starts up. The configureDefaults function allows\r\n\t\t\t * you to override those defaults at the app level, so that the new parameters will apply to any request made via the service.\r\n\t\t\t */\r\n\t\t\tthis.configureDefaults = function(config) {\r\n\t\t\t\tangular.extend(this.configuration, config);\r\n\t\t\t};\r\n\r\n\t\t\tthis.requestConfigurationMapper = function(config) {\r\n\t\t\t\tvar httpConfig = angular.copy(this.configuration);\r\n\t\t\t\tdelete httpConfig.baseUrl;\r\n\t\t\t\tdelete httpConfig.pingTrustPeriodMS;\r\n\t\t\t\tdelete httpConfig.unAuthenticatedCallback;\r\n\t\t\t\tdelete httpConfig.unprotectedPingRoute;\r\n\t\t\t\tdelete httpConfig.queuedRequestMessages;\r\n\r\n\t\t\t\tangular.extend(httpConfig, config);\r\n\r\n\t\t\t\tdelete httpConfig.cache;\r\n\r\n\t\t\t\treturn httpConfig;\r\n\t\t\t};\r\n\r\n\t\t\tthis.urlBuilder = function(url) {\r\n\t\t\t\t// if we detect that the url contains a protocol from the endpoint, it's already a full url\r\n\t\t\t\tif(url.indexOf('http://') > -1 || url.indexOf('https://') > -1) {\r\n\t\t\t\t\treturn url;\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn this.configuration.baseUrl + url;\r\n\t\t\t\t}\r\n\t\t\t};\r\n\r\n\t\t\tthis.get = function(url, config) {\r\n\t\t\t\tvar interceptedParams = this.triggerRequestInterceptors(url, null, config);\r\n\t\t\t\turl = interceptedParams.url;\r\n\t\t\t\tconfig = interceptedParams.config;\r\n\r\n\t\t\t\t//if params are passed in, they go on the url only after hitting $http. we need them sooner for cache storage purposes\r\n\t\t\t\tvar parseParams = function(params){\r\n\t\t\t\t\tvar retString = '/';\r\n\t\t\t\t\tObject.keys(params).forEach(function(key){\r\n\t\t\t\t\t\tif(retString === '/') {\r\n\t\t\t\t\t\t\tretString = retString + key + ':' + params[key];\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse {\r\n\t\t\t\t\t\t\tretString = retString + '-' + key + ':' + params[key];\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t\treturn retString;\r\n\t\t\t\t};\r\n\t\t\t\tvar urlForCache = url;\r\n\t\t\t\tif(config && config.params) {\r\n\t\t\t\t\turlForCache = url + parseParams(config.params);\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// if cache is enabled, should we attempt to use cached data or refresh from the server?\r\n\t\t\t\t// set alwaysRefresh to never use cache unless offline\r\n\t\t\t\t// set forceRefresh to true to override default behavior and request from the server on demand\r\n\t\t\t\tif(config && config.cache && !config.alwaysRefresh && !config.forceRefresh) {\r\n\t\t\t\t\tvar cachedData;\r\n\t\t\t\t\tif(config.cache === 'localStorage') {\r\n\t\t\t\t\t\tcachedData = {data: this.getFromLocalStorage(urlForCache)};\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse if(config.cache === 'sessionStorage') {\r\n\t\t\t\t\t\tcachedData = this.getFromSessionStorage(urlForCache);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif(cachedData && cachedData.data) {\r\n\t\t\t\t\t\treturn $q.when(cachedData);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn $http.get(this.urlBuilder(url), this.requestConfigurationMapper(config)).then(angular.bind(this, function(response) {\r\n\t\t\t\t\t$rootScope.$broadcast('Online');\r\n\t\t\t\t\tresponse = this.triggerResponseInterceptors(response);\r\n\r\n\t\t\t\t\tif(config) {\r\n\t\t\t\t\t\tif(config.cache === 'localStorage') {\r\n\t\t\t\t\t\t\tthis.storeInLocalStorage(urlForCache, response.data);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse if(config.cache === 'sessionStorage') {\r\n\t\t\t\t\t\t\tthis.storeInSessionStorage(urlForCache, response.data);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\t//SHANIKIA\r\n\t\t\t\t\treturn {data: response.data, status: response.status};\r\n\t\t\t\t}), angular.bind(this, function(error) {\r\n\r\n\t\t\t\t\tthis.triggerErrorInterceptors(error);\r\n\r\n\t\t\t\t\t//we got to the server, but it errored out. since we know the server is available, return the error object and let the app decide what to do.\r\n\t\t\t\t\tif(error.status > 0) {\r\n\t\t\t\t\t\treturn $q.reject(error);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\treturn this.getNetworkState().then(angular.bind(this, function(state) {\r\n\t\t\t\t\t\tif(state === 'offline' && config) {\r\n\t\t\t\t\t\t\tvar cachedData;\r\n\t\t\t\t\t\t\tif(config.cache === 'localStorage') {\r\n\t\t\t\t\t\t\t\tcachedData = {data: this.getFromLocalStorage(urlForCache)};\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\telse if(config.cache === 'sessionStorage') {\r\n\t\t\t\t\t\t\t\tcachedData = this.getFromSessionStorage(urlForCache);\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tif(!cachedData || !cachedData.data) {\r\n\t\t\t\t\t\t\t\treturn $q.reject('Offline: No cached data available!');\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\telse {\r\n\t\t\t\t\t\t\t\treturn $q.when(cachedData).finally(function() {\r\n\t\t\t\t\t\t\t\t\t// we are not rejecting the promise but are still operating 'offline'\r\n\t\t\t\t\t\t\t\t\t$timeout(function() {\r\n\t\t\t\t\t\t\t\t\t\t$rootScope.$broadcast('Offline');\r\n\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse {\r\n\t\t\t\t\t\t\treturn $q.reject(error);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}));\r\n\t\t\t\t}));\r\n\t\t\t};\r\n\r\n\t\t\tthis.post = function(url, data, config) {\r\n\t\t\t\tvar interceptedParams = this.triggerRequestInterceptors(url, data, config);\r\n\t\t\t\turl = interceptedParams.url;\r\n\t\t\t\tdata = interceptedParams.data;\r\n\t\t\t\tconfig = interceptedParams.config;\r\n\r\n\t\t\t\treturn $http.post(this.urlBuilder(url), data, this.requestConfigurationMapper(config)).then(angular.bind(this, function(response) {\r\n\t\t\t\t\t$rootScope.$broadcast('Online');\r\n\t\t\t\t\tresponse = this.triggerResponseInterceptors(response);\r\n\t\t\t\t\treturn {data: response.data, status: response.status};\r\n\t\t\t\t}), angular.bind(this, function(error) {\r\n\t\t\t\t\tthis.triggerErrorInterceptors(error);\r\n\t\t\t\t\t//only queue for unrecoverable errors\r\n\t\t\t\t\tif(error.status <= 0 && (config && config.offline === 'queue' && !config.fromQueue)) {\r\n\t\t\t\t\t\tthis.queueRequest('post', url, data, config);\r\n\t\t\t\t\t\t//if we queue, return a success promise resolution\r\n\t\t\t\t\t\terror.status = 'queue';\r\n\t\t\t\t\t\treturn $q.when(error);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\t//and if we don't, make it an error\r\n\t\t\t\t\t\treturn $q.reject(error);\r\n\t\t\t\t\t}\r\n\t\t\t\t}));\r\n\t\t\t};\r\n\r\n\t\t\tthis.put = function(url, data, config) {\r\n\t\t\t\tvar interceptedParams = this.triggerRequestInterceptors(url, data, config);\r\n\t\t\t\turl = interceptedParams.url;\r\n\t\t\t\tdata = interceptedParams.data;\r\n\t\t\t\tconfig = interceptedParams.config;\r\n\r\n\t\t\t\treturn $http.put(this.urlBuilder(url), data, this.requestConfigurationMapper(config)).then(angular.bind(this, function(response) {\r\n\t\t\t\t\t$rootScope.$broadcast('Online');\r\n\t\t\t\t\tresponse = this.triggerResponseInterceptors(response);\r\n\t\t\t\t\treturn {data: response.data, status: response.status};\r\n\t\t\t\t}), angular.bind(this, function(error) {\r\n\t\t\t\t\tthis.triggerErrorInterceptors(error);\r\n\t\t\t\t\t//only queue for unrecoverable errors\r\n\t\t\t\t\tif(error.status <= 0 && (config && config.offline === 'queue' && !config.fromQueue)) {\r\n\t\t\t\t\t\tthis.queueRequest('put', url, data, config);\r\n\t\t\t\t\t\t//if we queue, return a success promise resolution\r\n\t\t\t\t\t\terror.status = 'queue';\r\n\t\t\t\t\t\treturn $q.when(error);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\t//and if we don't, make it an error\r\n\t\t\t\t\t\treturn $q.reject(error);\r\n\t\t\t\t\t}\r\n\t\t\t\t}));\r\n\t\t\t};\r\n\r\n\t\t\tthis.delete = function(url, config) {\r\n\t\t\t\tvar interceptedParams = this.triggerRequestInterceptors(url, null, config);\r\n\t\t\t\turl = interceptedParams.url;\r\n\t\t\t\tconfig = interceptedParams.config;\r\n\r\n\t\t\t\treturn $http.delete(this.urlBuilder(url), this.requestConfigurationMapper(config)).then(angular.bind(this, function(response) {\r\n\t\t\t\t\t$rootScope.$broadcast('Online');\r\n\t\t\t\t\tresponse = this.triggerResponseInterceptors(response);\r\n\t\t\t\t\treturn {data: response.data, status: response.status};\r\n\t\t\t\t}), angular.bind(this, function(error) {\r\n\t\t\t\t\tthis.triggerErrorInterceptors(error);\r\n\t\t\t\t\t//only queue for unrecoverable errors\r\n\t\t\t\t\tif(error.status <= 0 && (config && config.offline === 'queue' && !config.fromQueue)) {\r\n\t\t\t\t\t\tthis.queueRequest('delete', url, undefined, config);\r\n\t\t\t\t\t\t//if we queue, return a success promise resolution\r\n\t\t\t\t\t\terror.status = 'queue';\r\n\t\t\t\t\t\treturn $q.when(error);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\t//and if we don't, make it an error\r\n\t\t\t\t\t\treturn $q.reject(error);\r\n\t\t\t\t\t}\r\n\t\t\t\t}));\r\n\t\t\t};\r\n\r\n\t\t\tthis.getFromLocalStorage = function(key) {\r\n\t\t\t\tvar cachedData = $window.localStorage.getItem(key);\r\n\r\n\t\t\t\ttry {\r\n\t\t\t\t\tcachedData = angular.fromJson(cachedData);\r\n\t\t\t\t}\r\n\t\t\t\tfinally {\r\n\t\t\t\t\t//noinspection ReturnInsideFinallyBlockJS\r\n                    return cachedData;\r\n\t\t\t\t}\r\n\t\t\t};\r\n\r\n\t\t\tthis.getFromSessionStorage = function(key) {\r\n\t\t\t\tvar cachedData = $window.sessionStorage.getItem(key);\r\n\r\n\t\t\t\ttry {\r\n\t\t\t\t\tcachedData = angular.fromJson(cachedData);\r\n\t\t\t\t}\r\n\t\t\t\tfinally {\r\n\t\t\t\t\t//noinspection ReturnInsideFinallyBlockJS\r\n                    return !cachedData ? cachedData : {data: cachedData};\r\n\t\t\t\t}\r\n\t\t\t};\r\n\r\n\t\t\tthis.storeInLocalStorage = function(key, value) {\r\n\t\t\t\tif(!angular.isString(value)) {\r\n\t\t\t\t\tvalue = angular.toJson(value);\r\n\t\t\t\t}\r\n\t\t\t\t$window.localStorage.setItem(key, value);\r\n\t\t\t};\r\n\r\n\t\t\tthis.storeInSessionStorage = function(key, value) {\r\n\t\t\t\tif(!angular.isString(value)) {\r\n\t\t\t\t\tvalue = angular.toJson(value);\r\n\t\t\t\t}\r\n\t\t\t\t$window.sessionStorage.setItem(key, value);\r\n\t\t\t};\r\n\r\n\t\t\tthis.removeFromLocalStorage = function(key) {\r\n\t\t\t\t$window.localStorage.removeItem(key);\r\n\t\t\t};\r\n\r\n\t\t\tthis.removeFromSessionStorage = function(key) {\r\n\t\t\t\t$window.sessionStorage.removeItem(key);\r\n\t\t\t};\r\n\r\n\t\t\tthis.addMessageForQueuedRequest = function(verb, url, data, config, response){\r\n\t\t\t\t//set up default messages\r\n\t\t\t\tvar message, type;\r\n\t\t\t\tif(response.status === 200) {\r\n\t\t\t\t\tmessage = 'Queued request submitted successfully: ' + verb + ' to endpoint ' + url + ', status: ' + response.status;\r\n\t\t\t\t\ttype = 'success';\r\n\t\t\t\t}\r\n\t\t\t\telse if(response.status === 409) {\r\n\t\t\t\t\tmessage = 'Queued request failed to be submitted due to a conflict: ' + verb + ' to endpoint ' + url + ', status: ' + response.status;\r\n\t\t\t\t\ttype = 'danger';\r\n\t\t\t\t}\r\n\t\t\t\telse if(response.status === 500) {\r\n\t\t\t\t\tmessage = 'Queued request failed to be submitted due to a server error: ' + verb + ' to endpoint ' + url + ', status: ' + response.status;\r\n\t\t\t\t\ttype = 'danger';\r\n\t\t\t\t}\r\n\r\n\t\t\t\t//ensure a message object has been passed in\r\n\t\t\t\tif(this.configuration.queuedRequestMessages && Object.keys(this.configuration.queuedRequestMessages).length !== 0) {\r\n\t\t\t\t\t//if we can't match our url identically, we likely are dealing with a put or delete with an id on the url\r\n\t\t\t\t\tvar messageExp;\r\n\t\t\t\t\tif(!this.configuration.queuedRequestMessages[verb][url]) {\r\n\t\t\t\t\t\tif(this.configuration.queuedRequestMessages[verb][url.substring(0, url.lastIndexOf('/'))][response.status]) {\r\n\t\t\t\t\t\t\tmessage = this.configuration.queuedRequestMessages[verb][url.substring(0, url.lastIndexOf('/'))][response.status];\r\n\t\t\t\t\t\t\t messageExp = $interpolate(message);\r\n\t\t\t\t\t\t\tmessage = messageExp({verb: verb, url: url, data: data, config: config, response: response});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse {\r\n\t\t\t\t\t\tif(this.configuration.queuedRequestMessages[verb][url][response.status]) {\r\n\t\t\t\t\t\t\tmessage = this.configuration.queuedRequestMessages[verb][url][response.status];\r\n\t\t\t\t\t\t\t messageExp = $interpolate(message);\r\n\t\t\t\t\t\t\tmessage = messageExp({verb: verb, url: url, data: data, config: config, response: response});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\t//add the message\r\n\t\t\t\tWcAlertConsoleService.addMessage({\r\n\t\t\t\t\tmessage: message,\r\n\t\t\t\t\ttype: type,\r\n\t\t\t\t\tmultiple: false,\r\n\t\t\t\t\terrorOnStateChange: false,\r\n\t\t\t\t\ttimeout: 20\r\n\t\t\t\t});\r\n\t\t\t};\r\n\r\n\t\t\tthis.processOfflineQueue = function(deregisterListener) {\r\n\t\t\t\t//retrieve the current queue then clear it and the associated listener so it won't be triggered again.\r\n\t\t\t\t//remember that each attempted request could add itself back to the queue if it fails\r\n\t\t\t\tvar currentQueue = this.getFromLocalStorage('offlineQueue');\r\n\t\t\t\tthis.removeFromLocalStorage('offlineQueue');\r\n\t\t\t\tderegisterListener();\r\n\r\n\t\t\t\tvar item = currentQueue.shift();\r\n\t\t\t\twhile(item) {\r\n\t\t\t\t\titem.config.fromQueue = true;\r\n\t\t\t\t\tvar requestPromise;\r\n\t\t\t\t\tif(item.verb === 'delete') {\r\n\t\t\t\t\t\trequestPromise = this.delete(item.url, item.config);\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse {\r\n\t\t\t\t\t\trequestPromise = this[item.verb](item.url, item.data, item.config);\r\n\t\t\t\t\t}\r\n\t\t\t\t\t//handler for both the success and error cases\r\n\t\t\t\t\tvar handler = angular.bind(this, function(item, response) {\r\n\t\t\t\t\t\tthis.addMessageForQueuedRequest(item.verb, item.url, item.data, item.config, response);\r\n\t\t\t\t\t}, item);\r\n\t\t\t\t\t//chain to add messages, as the verb functions themselves don't add them\r\n\t\t\t\t\trequestPromise.then(handler, handler);\r\n\t\t\t\t\titem = currentQueue.shift();\r\n\t\t\t\t}\r\n\t\t\t};\r\n\r\n\t\t\tthis.setupQueueTrigger = function(){\r\n\t\t\t\tvar deregisterListener = $rootScope.$on('Online', angular.bind(this, function() {\r\n\t\t\t\t\tthis.processOfflineQueue(deregisterListener);\r\n\t\t\t\t}));\r\n\t\t\t};\r\n\r\n\t\t\tthis.queueRequest = function(verb, url, data, config){\r\n\t\t\t\tvar currentQueue = this.getFromLocalStorage('offlineQueue');\r\n\t\t\t\tif(!currentQueue) {\r\n\t\t\t\t\tthis.storeInLocalStorage('offlineQueue', [{verb: verb, url: url, data: data, config: config}]);\r\n\t\t\t\t\tthis.setupQueueTrigger();\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\tcurrentQueue.push({verb: verb, url: url, data: data, config: config});\r\n\t\t\t\t\tthis.storeInLocalStorage('offlineQueue', currentQueue);\r\n\t\t\t\t}\r\n\t\t\t};\r\n\r\n\t\t\t//need to do this when the service is created to establish the queue processing trigger\r\n\t\t\tif(this.getFromLocalStorage('offlineQueue')) {\r\n\t\t\t\tthis.setupQueueTrigger();\r\n\t\t\t}\r\n\r\n\t\t\tthis.requestInterceptors = [];\r\n\t\t\tthis.responseInterceptors = [];\r\n\t\t\tthis.errorInterceptors = [];\r\n\r\n\t\t\t/**\r\n\t\t\t * @ngdoc method\r\n\t\t\t * @name WcHttpRequestService.addRequestIntercetor\r\n\t\t\t * @methodOf WebCoreModule.service:WcHttpRequestService\r\n\t\t\t * @param {Function} interceptor A function to trigger before requests are sent.\r\n\t\t\t * @description\r\n\t\t\t * The WcHttpRequestService allows you to include callback interceptor functions before a request is sent. These\r\n\t\t\t * custom functions can adjust the request before it is sent to the server. Once attached, the service will always\r\n\t\t\t * trigger all request interceptors before triggering the request itself.\r\n\t\t\t */\r\n\t\t\tthis.addRequestInterceptor = function(interceptor) {\r\n\t\t\t\tthis.requestInterceptors.push(interceptor);\r\n\t\t\t};\r\n\r\n\t\t\tthis.triggerRequestInterceptors = function(url, data, config) {\r\n\t\t\t\tvar index = 0;\r\n\t\t\t\twhile(index < this.requestInterceptors.length) {\r\n\t\t\t\t\tvar newParms = this.requestInterceptors[index](url, data, config);\r\n\t\t\t\t\tif(newParms) {\r\n\t\t\t\t\t\tif(newParms.url) url = newParms.url;\r\n\t\t\t\t\t\tif(newParms.data) data = newParms.data;\r\n\t\t\t\t\t\tif(newParms.config) config = newParms.config;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tindex++;\r\n\t\t\t\t}\r\n\t\t\t\treturn {url: url, data: data, config: config};\r\n\t\t\t};\r\n\r\n\t\t\t/**\r\n\t\t\t * @ngdoc method\r\n\t\t\t * @name WcHttpRequestService.addResponseIntercetor\r\n\t\t\t * @methodOf WebCoreModule.service:WcHttpRequestService\r\n\t\t\t * @param {Function} interceptor A function to trigger before responses are processed and returned.\r\n\t\t\t * @description\r\n\t\t\t * The WcHttpRequestService allows you to include callback interceptor functions after a service response is received\r\n\t\t\t * and before the returned data is given to the application code. These custom functions can adjust the response data or\r\n\t\t\t * trigger behaviors before the data is given to the application. Once attached, the service will always trigger all response\r\n\t\t\t * interceptors before returning the data and the control flow back to the application.\r\n\t\t\t */\r\n\t\t\tthis.addResponseInterceptor = function(interceptor) {\r\n\t\t\t\tthis.responseInterceptors.push(interceptor);\r\n\t\t\t};\r\n\r\n\t\t\tthis.triggerResponseInterceptors = function(response) {\r\n\t\t\t\tvar index = 0;\r\n\t\t\t\twhile(index < this.responseInterceptors.length) {\r\n\t\t\t\t\tvar newResponse = this.responseInterceptors[index](response);\r\n\t\t\t\t\tif(newResponse) {\r\n\t\t\t\t\t\tresponse = newResponse;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tindex++;\r\n\t\t\t\t}\r\n\t\t\t\treturn response;\r\n\t\t\t};\r\n\r\n\t\t\t/**\r\n\t\t\t * @ngdoc method\r\n\t\t\t * @name WcHttpRequestService.addErrorIntercetor\r\n\t\t\t * @methodOf WebCoreModule.service:WcHttpRequestService\r\n\t\t\t * @param {Function} interceptor A function to trigger before error responses are processed and returned.\r\n\t\t\t * @description\r\n\t\t\t * The WcHttpRequestService allows you to include callback interceptor functions after an erroneous service response is received\r\n\t\t\t * and before the error is given to the application code. These custom functions can adjust for the error or\r\n\t\t\t * trigger behaviors before control is given back to the application. Once attached, the service will always trigger all error\r\n\t\t\t * interceptors before returning the errors and the control flow back to the application.\r\n\t\t\t */\r\n\t\t\tthis.addErrorInterceptor = function(interceptor) {\r\n\t\t\t\tthis.errorInterceptors.push(interceptor);\r\n\t\t\t};\r\n\r\n\t\t\t/**\r\n\t\t\t These 'Interceptors' currently function more as a callback/event handler\r\n\t\t\t Keeping name as interceptor to align with Restangular and other function names\r\n\t\t\t There is potential for refactoring to support graceful error recovery\r\n\t\t\t **/\r\n\t\t\tthis.triggerErrorInterceptors = function(error) {\r\n\t\t\t\tvar index = 0;\r\n\t\t\t\twhile(index < this.errorInterceptors.length) {\r\n\t\t\t\t\tthis.errorInterceptors[index](error);\r\n\t\t\t\t\tindex++;\r\n\t\t\t\t}\r\n\t\t\t};\r\n\r\n\t\t\t/**\r\n\t\t\t *\r\n\t\t\t *    Network Detection\r\n\t\t\t *\r\n\t\t\t * **/\r\n\t\t\tthis._lastPingRequestTimestamp = 0;\r\n\t\t\tthis._trustedResponse = '';\r\n\t\t\tthis._pendingRequests = 0;\r\n\t\t\tthis._currentPingRequestPromise = {};\r\n\t\t\tthis._networkStatusResponses = ['online', 'unauthenticated', 'offline'];\r\n\r\n\r\n\t\t\t/**\r\n\t\t\t * @ngdoc method\r\n\t\t\t * @name WcHttpRequestService.getNetworkState\r\n\t\t\t * @methodOf WebCoreModule.service:WcHttpRequestService\r\n\t\t\t * @description\r\n\t\t\t * @returns {Promise} Promise wrapped value to identify the current state of the application's connectivity to its server.\r\n\t\t\t * The WcHttpRequestService allows you to interrogate the status of the the application's connectivity to its application\r\n\t\t\t * server. This status check is used behind the scenes across various webCore services to determine proper actions\r\n\t\t\t * when connectivity is lost. This function can also be triggered by application code, if the need arises.\r\n\t\t\t *\r\n\t\t\t * For this function to work properly, the application's services need to expose an endpoint unprotected by authentication\r\n\t\t\t * controls. This service will use that endpoint to determine whether the application is online, unauthenicated, or offline.\r\n\t\t\t */\r\n\t\t\t/* can return statuses defined in _networkStatusResponses\r\n\t\t\t *\r\n\t\t\t * will always resolve promise, never reject - error case is a valid response\r\n\t\t\t * */\r\n\t\t\tthis.getNetworkState = function() {\r\n\r\n\t\t\t\tif(this._pendingRequests > 0) {\r\n\t\t\t\t\t// already pinging server, do not re-request and return saved promise\r\n\t\t\t\t\treturn this._currentPingRequestPromise;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tvar currentTime = new Date();\r\n\t\t\t\t\tif(currentTime - this._lastPingRequestTimestamp > this.configuration.pingTrustPeriodMS) {\r\n\t\t\t\t\t\tthis._pendingRequests++;\r\n\t\t\t\t\t\tthis._lastPingRequestTimestamp = currentTime;\r\n\t\t\t\t\t\tthis._trustedResponse = '';\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\t// we are trusting that our last ping request was close enough\r\n\t\t\t\t\t\treturn $q.when(this._trustedResponse);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\t//needs to use $http itself here to ensure we don't cause issues with the network detection loop.\r\n\t\t\t\tthis._currentPingRequestPromise = $http.get(this.urlBuilder(this.configuration.unprotectedPingRoute), this.requestConfigurationMapper(this.configuration)).then(angular.bind(this, function() {\r\n\t\t\t\t\t// we only query the network when there is an error in retrieving data from the server\r\n\t\t\t\t\t// if we can access the unprotected ping endpoint, we know the issue is most likely that the user is not logged in\r\n\t\t\t\t\tthis._pendingRequests--;\r\n\t\t\t\t\tthis._currentPingRequestPromise = {};\r\n\t\t\t\t\tthis._trustedResponse = this._networkStatusResponses[1]; //unauthenticated\r\n\t\t\t\t\t// perform callback\r\n\t\t\t\t\tthis.configuration.unAuthenticatedCallback();\r\n\t\t\t\t\t$rootScope.$broadcast('Unauthenticated');\r\n\t\t\t\t\treturn $q.when(this._networkStatusResponses[1]);\r\n\t\t\t\t}), angular.bind(this, function() {\r\n\t\t\t\t\t// if we cannot access the unprotected ping endpoint, we must be offline\r\n\t\t\t\t\tthis._pendingRequests--;\r\n\t\t\t\t\tthis._currentPingRequestPromise = {};\r\n\t\t\t\t\tthis._trustedResponse = this._networkStatusResponses[2]; // offline\r\n\t\t\t\t\t$rootScope.$broadcast('Offline');\r\n\t\t\t\t\treturn $q.when(this._networkStatusResponses[2]);\r\n\t\t\t\t}));\r\n\r\n\t\t\t\treturn this._currentPingRequestPromise;\r\n\t\t\t};\r\n\t\t}]);\r\n","\t\t/**\r\n\t\t * @ngdoc service\r\n\t\t * @name WebCoreModule.service:WcImageFileService\r\n\t\t * @requires $q\r\n\t\t * @requires $window\r\n\t\t * @description\r\n\t\t * The WcImageFileService manages the image file related operations.This service is mainly for generating the image related properties.\r\n\t\t */\r\n\r\n'use strict';\r\nangular.module('WebCoreModule')\r\n\t.service('WcImageFileService', ['$q', '$window', function($q) { // jshint ignore:line\r\n\r\n\t\t// I don't want to make this a public method, but we run into problems testing image.onload.\r\n\t\t// If someone finds a way to mock the Image.onload event, do that and make this method private.\r\n\t\tthis.loadImage = angular.bind(this, function(imageSrc, width, height) {\r\n\t\t\tvar deferred = $q.defer();\r\n\r\n\t\t\tvar canvas = this.generateCanvas();\r\n\t\t\tcanvas.width = width;\r\n\t\t\tcanvas.height = height;\r\n\r\n\t\t\tvar context = canvas.getContext('2d');\r\n\r\n\t\t\tvar image = new Image();\r\n\t\t\timage.onload = function() {\r\n\t\t\t\tcontext.drawImage(image, 0, 0, canvas.width, canvas.height);\r\n\r\n\t\t\t\tdeferred.resolve(canvas);\r\n\t\t\t};\r\n\r\n\t\t\timage.src = imageSrc;\r\n\r\n\t\t\treturn deferred.promise;\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t * @ngdoc method\r\n\t\t * @name WcImageFileService.createImageURI\r\n\t\t * @methodOf WebCoreModule.service:WcImageFileService\r\n\t\t * @param {String} imageURI This string value holds the image name\r\n\t\t * @param {Integer} width(optional) This Integer value holds the width of the image. The default value of this field is 200px\r\n\t\t * @param {Integer} height(optional) This Integer value holds the height of the image. The default value of this field is 200px\r\n\t\t * @returns {String} The string value is the image uri\r\n\t\t * @description\r\n\t\t * The WcImageFileService provides a createImageURI function to create the image uri based on image name, width and height.\r\n\t\t */\r\n\r\n\t\tthis.createImageURI = function(imageURI, width, height) {\r\n\t\t\twidth = width || 200;\r\n\t\t\theight = height || 200;\r\n\r\n\t\t\treturn this.loadImage(imageURI, width, height).then(function(canvas) {\r\n\t\t\t\treturn $q.when(canvas.toDataURL('image/jpeg', 1));\r\n\t\t\t});\r\n\t\t};\r\n\r\n\t\t// Only for testing. We have yet to find out how to mock document.createElement without\r\n\t\t// blowing up angular-mock. We have a Stack Overflow question out there to hopefully\r\n\t\t// find an answer.\r\n\t\t// http://stackoverflow.com/questions/35369629/using-jasmine-to-spy-on-document-createelement-throws-error-from-angular-mock\r\n\t\tthis.generateCanvas = function() {\r\n\t\t\treturn document.createElement('canvas');\r\n\t\t};\r\n\t}]\r\n);","\t/**\r\n\t * @ngdoc service\r\n\t * @name WebCoreModule.service:WcTranslateConfiguratorService\r\n\t * @requires $translateProvider\r\n\t * @description\r\n\t * The WcTranslateConfiguratorService allows WebCore to wrap default translation configuration with a construct that is still\r\n\t * accessible in a module's .config() function. This provider also exposes a service, allowing for runtime configuration adjustment.\r\n\t */\r\n\t/**\r\n\t * @ngdoc service\r\n\t * @name WebCoreModule.service:WcTranslateConfiguratorServiceProvider\r\n\t * @requires $translateProvider\r\n\t * @description\r\n\t * The WcTranslateConfiguratorService allows WebCore to wrap default translation configuration with a construct that is still\r\n\t * accessible in a module's .config() function. This provider also exposes a service, allowing for runtime configuration adjustment.\r\n\t */\r\n'use strict';\r\nangular.module('WebCoreModule').provider('WcTranslateConfiguratorService', ['$translateProvider', function($translateProvider) {\r\n\r\n\t//expose the translate provider in case users need to call through to it\r\n\tthis.translateProvider = $translateProvider;\r\n\r\n\tthis.configuration = {\r\n\t\tsanitizationStrategy: 'escape',\r\n\t\tloader: '$translatePartialLoader',\r\n\t\tloaderObj: {urlTemplate: 'translations/{lang}/{part}.json'},\r\n\t\tlangKeyArray: ['en', 'zh', 'ru'],\r\n\t\tlangKeyObj: {\r\n\t\t\t'en_*': 'en',\r\n\t\t\t'en-*': 'en',\r\n\t\t\t'zh_CN': 'zh',\r\n\t\t\t'zh_HK': 'zh',\r\n\t\t\t'ru_RU': 'ru'\r\n\t\t},\r\n\t\tfallbackLang: 'en'\r\n\t};\r\n\r\n\t/**\r\n\t * @ngdoc method\r\n\t * @name WcTranslateConfiguratorServiceProvider.configureTranslateService\r\n\t * @methodOf WebCoreModule.service:WcTranslateConfiguratorServiceProvider\r\n\t * @param {Object} config Options object to configure default values used by the WcTranslateConfiguratorServiceProvider. Config properties that can be set in this object include:\r\n\t *  - loader: String to identify the loader service to use. Defaults to '$translatePartialLoader' and likely does not need to be changed.\r\n\t *  - loaderObj: Object defining loader configuration. Defaults to '{urlTemplate: 'translations/{lang}/{part}.json'}', defining the default location of translation json files.\r\n\t *  - langKeyArray: Array of strings defining the languages the app should support. Defaults to ['en', 'zh', 'ru'].\r\n\t *  - langKeyObj: Object defining mappings between two and four character language codes. Should define mappings for any languages in use.\r\n\t *  - fallbackLang: String identifying the language to use if a non-supported language is requested. Defaults to 'en'\r\n\t * @description\r\n\t * The WcTranslateConfiguratorServiceProvider configures itself with application-wide defaults when it starts up. The configureDefaults function allows\r\n\t * you to override those defaults at the app level, so that the new parameters will apply to the configuration of the translation modules.\r\n\t */\r\n\tthis.configureTranslateService = function(config) {\r\n\t\t//default config is set - if different config is passed in, use it instead\r\n\t\tif(config) {\r\n\t\t\tangular.extend(this.configuration, config);\r\n\t\t}\r\n\t\t$translateProvider.useSanitizeValueStrategy(this.configuration.sanitizationStrategy);\r\n\t\t$translateProvider.useLoader(this.configuration.loader, this.configuration.loaderObj);\r\n\t\t$translateProvider.registerAvailableLanguageKeys(this.configuration.langKeyArray, this.configuration.langKeyObj);\r\n\t\t$translateProvider.determinePreferredLanguage();\r\n\t\t$translateProvider.fallbackLanguage(this.configuration.fallbackLang);\r\n\t\t$translateProvider.use($translateProvider.preferredLanguage());\r\n\t};\r\n\r\n\t//this is essentially a factory function\r\n\tthis.$get = ['$translate', '$translatePartialLoader', function($translate, $translatePartialLoader){\r\n\t/**\r\n\t * @ngdoc method\r\n\t * @name WcTranslateConfiguratorService.loadPartAndRefresh\r\n\t * @methodOf WebCoreModule.service:WcTranslateConfiguratorService\r\n\t * @param {String} partString String defining the language partial file to load. For instance, to load the JabUiApp.json file, pass in 'JabUiApp'\r\n\t * @description\r\n\t * The WcTranslateConfiguratorService exposes a helper function to add a language partial json file to the language database\r\n\t * and refresh the application using it.\r\n\t */\r\n\t\tthis.loadPartAndRefresh = function(partString) {\r\n\t\t\t$translatePartialLoader.addPart(partString);\r\n\t\t\t$translate.refresh();\r\n\t\t};\r\n\r\n\t\t//return our object when all is said and done\r\n\t\treturn this;\r\n\t}];\r\n}]);","\t\t/**\r\n\t\t * @ngdoc service\r\n\t\t * @name WebCoreModule.service:WcWebtrendsService\r\n\t\t * @requires $rootScope\r\n\t\t * @requires $window\r\n\t\t * @requires $state\r\n\t\t * @requires $timeout\r\n\t\t * @description\r\n\t\t * The WcWebtrendsService wraps configuration needed by the Ford webtrends implementation for web analytics.\r\n\t\t */\r\n'use strict';\r\nangular.module('WebCoreModule')\r\n\t.service('WcWebtrendsService', ['$rootScope', '$window', '$state', '$timeout', function($rootScope, $window, $state, $timeout) {\r\n\r\n\t\tthis._enabled = false;\r\n\r\n\t\t/**\r\n\t\t * @ngdoc method\r\n\t\t * @name WcWebtrendsService.enable\r\n\t\t * @methodOf WebCoreModule.service:WcWebtrendsService\r\n\t\t * @description\r\n\t\t * Calling the enable function enables WebTrends tracking for the application.\r\n\t\t */\r\n\t\tthis.enable = function() {\r\n\t\t\tthis._enabled = true;\r\n\t\t};\r\n\r\n\t\tthis.trackData = function() {\r\n\t\t\tvar uri, urlPart;\r\n\r\n\t\t\tif ($window.location.hash !== '') {\r\n\t\t\t\turlPart = $window.location.hash + $window.location.search;\r\n\t\t\t}\r\n\r\n\t\t\tif (urlPart && (urlPart.replace('#/','') !== $state.$current.name)) {\r\n\t\t\t\turi = urlPart + ':' + $state.$current.name;\r\n\t\t\t} else {\r\n\t\t\t\turi = urlPart;\r\n\t\t\t}\r\n\r\n\t\t\tif (!uri) {\r\n\t\t\t\turi = ':' + $state.$current.name;\r\n\t\t\t}\r\n\r\n\t\t\t$window.dcsMultiTrack('DCS.dcsuri', uri);\r\n\t\t\treturn uri;\r\n\t\t};\r\n\r\n\t\t$rootScope.$on('$stateChangeSuccess', angular.bind(this, function() {\r\n\t\t\tif(this._enabled && $window.dcsMultiTrack) {\r\n\t\t\t\t// $timeout required to allow Angular to update browser URL\r\n\t\t\t\t$timeout(angular.bind(this, function(){\r\n\t\t\t\t\t$rootScope.$apply();\r\n\t\t\t\t\tthis.trackData();\r\n\t\t\t\t}));\r\n\t\t\t}\r\n\t\t}));\r\n\r\n\t}]);","\t\t/**\r\n\t\t * @ngdoc service\r\n\t\t * @constructor\r\n\t\t * @name WebCoreModule.service:WcDateRangePickerPrototype\r\n\t\t * @requires $rootScope\r\n\t\t * @param {Object} config Config parameters to pass in to the prototype being created\r\n\t\t * @returns {WcDateRangePickerPrototype} The prototype created with the passed in information. The returned WcDateRangePickerPrototype\r\n\t\t * will expose the following properties and methods:\r\n\t\t * @description\r\n\t\t * The WcDateRangePickerPrototype provides a way to create paired date picker inputs for range selection. The pickers are\r\n\t\t * aware of the dates picked in either picker and disallow selections that are then out of range.\r\n\t\t *\r\n\t\t * To leverage the WcDateRangePickerPrototype, create a new instance using 'new WcDateRangePickerPrototype()' in calling code.\r\n\t\t * The WcDateRangePickerPrototype constructor creates a new instance of the WcDateRangePickerPrototype. This prototype\r\n\t\t * establishes the necessary properties and functions for rendering paired date pickers in your view.\r\n\t\t */\r\n'use strict';\r\nangular.module('WebCoreModule')\r\n\t.factory('WcDateRangePickerPrototype', ['$rootScope',\r\n\r\n\tfunction($rootScope) {\r\n\t\tfunction WcDateRangePickerPrototype(config) {\r\n\t\t\tvar startDate, endDate, minDate, maxDate, startDateFieldName, endDateFieldName, form;\r\n\r\n\t\t\tif(config) {\r\n\t\t\t\tstartDate = config.startDate ? config.startDate : null;\r\n\t\t\t\tendDate = config.endDate ? config.endDate : null;\r\n\t\t\t\tminDate = config.minDate ? config.minDate : null;\r\n\t\t\t\tmaxDate = config.maxDate ? config.maxDate : null;\r\n\t\t\t\tstartDateFieldName = config.startDateFieldName ? config.startDateFieldName : null;\r\n\t\t\t\tendDateFieldName = config.endDateFieldName ? config.endDateFieldName : null;\r\n\t\t\t\tform = config.form ? config.form : null;\r\n\t\t\t}\r\n\r\n\t\t\tthis.isStartDateOpen = false;\r\n\t\t\tthis.isEndDateOpen = false;\r\n\r\n\t\t\tthis.load(startDate, endDate, minDate, maxDate);\r\n\r\n\t\t\t$rootScope.$watch(angular.bind(this, function() {\r\n\t\t\t\treturn this.startDate;\r\n\t\t\t}), angular.bind(this, function(newValue, oldValue) {\r\n\t\t\t\tif(newValue !== oldValue) {\r\n                    this.minEndDate = newValue ? newValue : this.minDate;\r\n                }\r\n\t\t\t}));\r\n\r\n\t\t\t$rootScope.$watch(angular.bind(this, function() {\r\n\t\t\t\treturn this.endDate;\r\n            }), angular.bind(this, function(newValue, oldValue) {\r\n                if(newValue !== oldValue) {\r\n                    this.maxStartDate = newValue ? newValue : this.maxDate;\r\n                }\r\n\t\t\t}));\r\n\r\n\t\t\tif(form && startDateFieldName && endDateFieldName) {\r\n\t\t\t\t$rootScope.$watch(function(){\r\n\t\t\t\t\tvar dateDisabledArray = form.$error[\"date-disabled\"];\r\n\t\t\t\t\tif(dateDisabledArray) {\r\n\t\t\t\t\t\treturn dateDisabledArray.length;\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn 0;\r\n\t\t\t\t}, angular.bind(this, function(newVal) {\r\n\t\t\t\t\tvar dateDisabledArray = form.$error[\"date-disabled\"];\r\n\t\t\t\t\tif(newVal > 0) {\r\n\t\t\t\t\t\tfor(var i=0; i<dateDisabledArray.length; i++) {\r\n\t\t\t\t\t\t\t//this only operates on two date pickers now, so no need to look further in the createBookingForm.\r\n\t\t\t\t\t\t\t//we'd need to augment this if we were using more datepickers\r\n\t\t\t\t\t\t\tif (dateDisabledArray[i].$viewValue === form[startDateFieldName].$viewValue) {\r\n\t\t\t\t\t\t\t\tform[startDateFieldName].$setValidity('dateRange', !(dateDisabledArray[i].$error[\"date-disabled\"]));\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\telse {\r\n\t\t\t\t\t\t\t\tform[endDateFieldName].$setValidity('dateRange', !(dateDisabledArray[i].$error[\"date-disabled\"]));\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tform[startDateFieldName].$setValidity('dateRange', true);\r\n\t\t\t\t\t\tform[endDateFieldName].$setValidity('dateRange', true);\r\n\t\t\t\t\t}\r\n\t\t\t\t}));\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tconsole.log('The DateRangePicker cannot support validation indicators without having been provided the formObj and the field names.');\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t * @ngdoc property\r\n\t\t * @name WcDateRangePickerPrototype.startDate\r\n\t\t * @propertyOf WebCoreModule.service:WcDateRangePickerPrototype\r\n\t\t * @returns {Date} The Date object created to match the date selected by the user in the start date field.\r\n\t\t * @description\r\n\t\t * The startDate property is used as the model variable bound to the start date input field.\r\n\t\t */\r\n\t\t/**\r\n\t\t * @ngdoc property\r\n\t\t * @name WcDateRangePickerPrototype.endDate\r\n\t\t * @propertyOf WebCoreModule.service:WcDateRangePickerPrototype\r\n\t\t * @returns {Date} The Date object created to match the date selected by the user in the end date field.\r\n\t\t * @description\r\n\t\t * The endDate property is used as the model variable bound to the end date input field.\r\n\t\t */\r\n\t\t/**\r\n\t\t * @ngdoc property\r\n\t\t * @name WcDateRangePickerPrototype.minDate\r\n\t\t * @propertyOf WebCoreModule.service:WcDateRangePickerPrototype\r\n\t\t * @returns {Date} The Date object used to identify the minimum valid date for the date range.\r\n\t\t * @description\r\n\t\t * The minDate property defines the minimum date that should be selectable as the start date for the range.\r\n\t\t */\r\n\t\t/**\r\n\t\t * @ngdoc property\r\n\t\t * @name WcDateRangePickerPrototype.maxDate\r\n\t\t * @propertyOf WebCoreModule.service:WcDateRangePickerPrototype\r\n\t\t * @returns {Date} The Date object used to identify the maximum valid date for the date range.\r\n\t\t * @description\r\n\t\t * The maxDate property defines the maximum date that should be selectable as the end date for the range.\r\n\t\t */\r\n\t\t/**\r\n\t\t * @ngdoc property\r\n\t\t * @name WcDateRangePickerPrototype.minStartDate\r\n\t\t * @propertyOf WebCoreModule.service:WcDateRangePickerPrototype\r\n\t\t * @returns {Date} The Date object used to identify the minimum valid date for the start date field.\r\n\t\t * @description\r\n\t\t * The minStartDate property defines the minimum date that should be selectable in the start date field.\r\n\t\t */\r\n\t\t/**\r\n\t\t * @ngdoc property\r\n\t\t * @name WcDateRangePickerPrototype.maxStartDate\r\n\t\t * @propertyOf WebCoreModule.service:WcDateRangePickerPrototype\r\n\t\t * @returns {Date} The Date object used to identify the maximum valid date for the start date field.\r\n\t\t * @description\r\n\t\t * The maxStartDate property defines the maximum date that should be selectable in the start date field.\r\n\t\t */\r\n\t\t/**\r\n\t\t * @ngdoc property\r\n\t\t * @name WcDateRangePickerPrototype.minEndDate\r\n\t\t * @propertyOf WebCoreModule.service:WcDateRangePickerPrototype\r\n\t\t * @returns {Date} The Date object used to identify the minimum valid date for the end date field.\r\n\t\t * @description\r\n\t\t * The minEndDate property defines the minimum date that should be selectable in the end date field.\r\n\t\t */\r\n\t\t/**\r\n\t\t * @ngdoc property\r\n\t\t * @name WcDateRangePickerPrototype.maxEndDate\r\n\t\t * @propertyOf WebCoreModule.service:WcDateRangePickerPrototype\r\n\t\t * @returns {Date} The Date object used to identify the maximum valid date for the end date field.\r\n\t\t * @description\r\n\t\t * The maxEndDate property defines the maximum date that should be selectable in the end date field.\r\n\t\t */\r\n\t\tWcDateRangePickerPrototype.prototype.load = function(startDate, endDate, minDate, maxDate) {\r\n\t\t\tthis.startDate = startDate || null; //The day the start datepicker defaults to\r\n\t\t\tthis.endDate = endDate || null; //The day the end datepicker defaults to\r\n\r\n\t\t\tthis.minDate = minDate || null; //The minimum day the start datepicker can have\r\n\t\t\tthis.maxDate = maxDate || null; //The maximum day the end datepicker can have\r\n\r\n\t\t\tthis.minStartDate = this.minDate;\r\n\t\t\tthis.maxStartDate = this.endDate ? this.endDate : this.maxDate; //TODO: verify endDate <= maxDate\r\n\r\n\t\t\tthis.minEndDate = this.startDate ? this.startDate : this.minDate; //TODO: verify startDate >= minDate\r\n\t\t\tthis.maxEndDate = this.maxDate;\r\n\t\t};\r\n\r\n\t\t/**\r\n\t\t * @ngdoc method\r\n\t\t * @name WcDateRangePickerPrototype.openStartDate\r\n\t\t * @methodOf WebCoreModule.service:WcDateRangePickerPrototype\r\n\t\t * @param {Event} $event Event object describing what happened when the function was called.\r\n\t\t * @description\r\n\t\t * The WcDateRangePickerPrototype provides an openStartDate function to appropriately trigger the date picker control\r\n\t\t * to open and to keep track of open status of the control.\r\n\t\t */\r\n\t\tWcDateRangePickerPrototype.prototype.openStartDate = function($event) {\r\n\t\t\t$event.preventDefault();\r\n\t\t\t$event.stopPropagation();\r\n\r\n\t\t\tif (this.isStartDateOpen === true) {\r\n\t\t\t\tthis.isStartDateOpen = false;\r\n\t\t\t} else {\r\n\t\t\t\tthis.isStartDateOpen = true;\r\n\t\t\t\tthis.isEndDateOpen = false;\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\t/**\r\n\t\t * @ngdoc method\r\n\t\t * @name WcDateRangePickerPrototype.openEndDate\r\n\t\t * @methodOf WebCoreModule.service:WcDateRangePickerPrototype\r\n\t\t * @param {Event} $event Event object describing what happened when the function was called.\r\n\t\t * @description\r\n\t\t * The WcDateRangePickerPrototype provides an openEndDate function to appropriately trigger the date picker control\r\n\t\t * to open and to keep track of open status of the control.\r\n\t\t */\r\n\t\tWcDateRangePickerPrototype.prototype.openEndDate = function($event) {\r\n\t\t\t$event.preventDefault();\r\n\t\t\t$event.stopPropagation();\r\n\r\n\t\t\tif (this.isEndDateOpen === true) {\r\n\t\t\t\tthis.isEndDateOpen = false;\r\n\t\t\t} else {\r\n\t\t\t\tthis.isEndDateOpen = true;\r\n\t\t\t\tthis.isStartDateOpen = false;\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\treturn WcDateRangePickerPrototype;\r\n\t}]);","\t\t/**\r\n\t\t * @ngdoc service\r\n\t\t * @constructor\r\n\t\t * @name WebCoreModule.service:WcHttpEndpointPrototype\r\n\t\t * @requires WebCoreModule.service:WcHttpRequestService\r\n\t\t * @param {String} route The url endpoint string to use for this endpoint. This value will be appended to the application's base url.\r\n\t\t * @param {String} baseURL If passed in, this base url will be used instead of the value set application-wide.\r\n\t\t * @returns {WcHttpEndpointPrototype} The prototype created with the passed in information. The returned WcHttpEndpointPrototype\r\n\t\t * will expose the following properties and methods:\r\n\t\t * @description\r\n\t\t * The WcHttpEndpointPrototype wraps the WcHttpRequestService to make calls against a restful endpoint easy. Creating a new\r\n\t\t * endpoint prototype exposes all http verbs for that endpoint, making calls to the restful service easy to manage.\r\n\t\t *\r\n\t\t * To leverage the WcHttpEndpointPrototype, create a new instance using 'new WcHttpEndpointPrototype()' in calling code.\r\n\t\t * The WcHttpEndpointPrototype constructor creates a new instance of the WcHttpEndpointPrototype. This prototype\r\n\t\t * establishes the url for an endpoint and provides functions to call for the HTTP verbs (GET, PUT, POST, DELETE).\r\n\t\t */\r\n'use strict';\r\nangular.module('WebCoreModule')\r\n\t.factory('WcHttpEndpointPrototype', ['WcHttpRequestService', function(WcHttpRequestService) {\r\n\t\t/**\r\n\t\t * @ngdoc property\r\n\t\t * @name WcHttpEndpointPrototype.route\r\n\t\t * @propertyOf WebCoreModule.service:WcHttpEndpointPrototype\r\n\t\t * @returns {String} String defining the endpoint route to append to the baseURL for this endpoint.\r\n\t\t * @description\r\n\t\t * Passing in the required route string for an endpoint will establish the URL this endpoint should operate on\r\n\t\t * by appending the route to the end of the baseURL.\r\n\t\t */\r\n\t\t/**\r\n\t\t * @ngdoc property\r\n\t\t * @name WcHttpEndpointPrototype.baseURL\r\n\t\t * @propertyOf WebCoreModule.service:WcHttpEndpointPrototype\r\n\t\t * @returns {String} String defining a baseURL to override the application wide baseURL for this endpoint.\r\n\t\t * @description\r\n\t\t * Passing in an optional baseURL allows the user to override the baseURL for this endpoint with the passed in baseURL.\r\n\t\t */\r\n\t\tfunction Endpoint(route, baseURL) {\r\n\t\t\tthis.baseUrl = baseURL;\r\n\t\t\tthis.route = route;\r\n\t\t\tif(baseURL) {\r\n\t\t\t\tthis.route = this.baseUrl+this.route;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tEndpoint.prototype = {\r\n\t\t\tsubRoute: function(id) {\r\n\t\t\t\treturn new Endpoint(this.route + '/' + id);\r\n\t\t\t},\r\n\t\t\t/**\r\n\t\t\t * @ngdoc method\r\n\t\t\t * @name WcHttpEndpointPrototype.get\r\n\t\t\t * @methodOf WebCoreModule.service:WcHttpEndpointPrototype\r\n\t\t\t * @param {Object} options Options object to configure what happens when this verb is called. Config properties that can be set in this object include:\r\n\t\t\t *  - cache: set to 'localStorage' or 'sessionStorage' to enable caching for this call\r\n\t\t\t *  - alwaysRefresh: set to true to have the request always directed to the server when operating online. Each time the results are cached, making them available for offline usage. set to false to have only the first request directed to the server when operating online. Every subsequent request, online or offline, will be retrieved from the cache.\r\n\t\t\t * @returns {Promise} The data retreived from the backing service wrapped in a promise.\r\n\t\t\t * @description\r\n\t\t\t * The WcHttpEndpointPrototype provides a get function to trigger an HTTP GET against the established endpoint URL.\r\n\t\t\t *\r\n\t\t\t * A get call can be configured to cache the returned results from the server call. These results can be stored in\r\n\t\t\t * localStorage or session storage. Caching behavior can also be configured to happen in one of two ways:\r\n\t\t\t *  - An always refreshing cache will always go to the server when operating online, storing a copy of the data retrieved in the specified cache.\r\n\t\t\t *  - A non refreshing cache will go to the server with the first request when operating online, caching the results, but all subsequent requests will be retrieved from the cache, not from the server.\r\n\t\t\t */\r\n\t\t\tget: function(options) {\r\n\t\t\t\treturn WcHttpRequestService.get(this.route, options);\r\n\t\t\t},\r\n\t\t\t/**\r\n\t\t\t * @ngdoc method\r\n\t\t\t * @name WcHttpEndpointPrototype.post\r\n\t\t\t * @methodOf WebCoreModule.service:WcHttpEndpointPrototype\r\n\t\t\t * @param {Object} data Data to send to the endpoint when this verb is called.\r\n\t\t\t * @param {Object} options Options object to configure what happens when this verb is called.\r\n\t\t\t * @returns {Promise} The data retreived from the backing service wrapped in a promise.\r\n\t\t\t * @description\r\n\t\t\t * The WcHttpEndpointPrototype provides a post function to trigger an HTTP POST against the established endpoint URL.\r\n\t\t\t */\r\n\t\t\tpost: function(data, options) {\r\n\t\t\t\treturn WcHttpRequestService.post(this.route, data, options);\r\n\t\t\t},\r\n\t\t\t/**\r\n\t\t\t * @ngdoc method\r\n\t\t\t * @name WcHttpEndpointPrototype.put\r\n\t\t\t * @methodOf WebCoreModule.service:WcHttpEndpointPrototype\r\n\t\t\t * @param {String} id Identifier for which record we should operate on when this verb is called.\r\n\t\t\t * @param {Object} data Data to send to the endpoint when this verb is called.\r\n\t\t\t * @param {Object} options Options object to configure what happens when this verb is called.\r\n\t\t\t * @returns {Promise} The data retreived from the backing service wrapped in a promise.\r\n\t\t\t * @description\r\n\t\t\t * The WcHttpEndpointPrototype provides a put function to trigger an HTTP PUT against the established endpoint URL.\r\n\t\t\t */\r\n\t\t\tput: function(id, data, options) {\r\n\t\t\t\treturn WcHttpRequestService.put(this.route+'/'+id, data, options);\r\n\t\t\t},\r\n\t\t\t/**\r\n\t\t\t * @ngdoc method\r\n\t\t\t * @name WcHttpEndpointPrototype.delete\r\n\t\t\t * @methodOf WebCoreModule.service:WcHttpEndpointPrototype\r\n\t\t\t * @param {String} id Identifier for which record we should operate on when this verb is called.\r\n\t\t\t * @param {Object} options Options object to configure what happens when this verb is called.\r\n\t\t\t * @returns {Promise} The data retreived from the backing service wrapped in a promise.\r\n\t\t\t * @description\r\n\t\t\t * The WcHttpEndpointPrototype provides a delete function to trigger an HTTP DELETE against the established endpoint URL.\r\n\t\t\t */\r\n\t\t\tdelete: function(id, options){\r\n\t\t\t\treturn WcHttpRequestService.delete(this.route+'/'+id, options);\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\treturn Endpoint;\r\n\t}]);","/**\r\n * @ngdoc directive\r\n * @name WebCoreModule.directive:required\r\n * @restrict A\r\n * @element input|select|textarea\r\n * @description\r\n * The required directive adds behavior to HTML's required attribute. With this directive in use, any tag with a\r\n * required attribute will have a required field indicator added to the label for the field. The directive will also\r\n * add an appropriate legend to the form of the field, indicating what the required field indicator means.\r\n */\r\n'use strict';\r\nangular.module('WebCoreModule')\r\n    .directive('required', ['WcTranslateConfiguratorService', '$compile', '$timeout', function (WcTranslateConfiguratorService, $compile, $timeout) {\r\n        return {\r\n            restrict: 'A',\r\n            require: ['required'],\r\n            controller: ['$scope', '$element', '$attrs', 'WcTranslateConfiguratorService', function ($scope, $element, $attrs, WcTranslateConfiguratorService) { // jshint ignore:line\r\n\r\n                WcTranslateConfiguratorService.loadPartAndRefresh('WC-dataTable');\r\n\r\n                // Look for the label to insert the required abbreviation\r\n                this.insertionPoint = $('label[for=\"' + $attrs.id + '\"]');\r\n                // If it's a radio or checkbox, try to find legend for fieldset instead\r\n                if ($element[0].type == 'checkbox' || $element[0].type == 'radio') {\r\n                    this.insertionPoint = $element.closest('fieldset').find('legend');\r\n                }\r\n\r\n\r\n                // Look for the parent form to insert the required legend\r\n                this.formElem = this.insertionPoint.closest('form');\r\n\r\n\r\n                this.addLabels = function (scope, attrs) {\r\n\r\n                    WcTranslateConfiguratorService.loadPartAndRefresh('WC-required');\r\n                    $timeout(angular.bind(this, function () {\r\n                        // check to make sure abbr is not already there before adding\r\n                        if (this.insertionPoint.has('abbr[title=\"Required\"]').length === 0 && !attrs.disabled && !attrs.readonly) {\r\n                            this.insertionPoint.prepend('<abbr class=\"required h6\" title=\"Required\">*</abbr>');\r\n                        }\r\n\r\n                         // Responsive table - row selection required\r\n                        if ($element[0].hasAttribute('wc-responsive-table')) {\r\n                            this.formGroup = $element.closest('form').find('.form-group').first();\r\n                            this.formGroup.prepend($compile('<div><abbr class=\"required h6\" title=\"Required\">*</abbr> <span>{{\"tableSelectionRequired\" | translate}}</span></div>')($scope));\r\n                            this.formElem = $element.closest('form');\r\n                        }\r\n\r\n                        //lastly, check for the form legend and add it if necessary\r\n                        if ((this.formElem.has('div.required-legend').length === 0 && !attrs.disabled && !attrs.readonly) || ($element[0].hasAttribute('wc-responsive-table'))) {\r\n                            this.formElem.prepend($compile('<div class=\"required-legend hidden-xs\"><span class=\"required-text\"><abbr class=\"required h6\" title=\"Required\">*</abbr> {{\"required.requiredText\" | translate}}</span></div>')(scope));\r\n                        }\r\n                    }), 100);\r\n                };\r\n\r\n            }],\r\n            link: function (scope, elem, attrs, ctrls) {\r\n                var requiredController = ctrls[0];\r\n\r\n                requiredController.addLabels(scope, attrs);\r\n            }\r\n        };\r\n    }]);","/**\r\n * @ngdoc directive\r\n * @name WebCoreModule.directive:form\r\n * @restrict E\r\n * @element form\r\n * @description\r\n * The required directive adds a legend to the form if one doesn't exist. This directive removes the legend if\r\n * no required fields exist on the page.\r\n */\r\n'use strict';\r\nangular.module('WebCoreModule')\r\n    .directive('form', function () {\r\n        return {\r\n            restrict: 'E',\r\n            link: function (scope) { // jshint ignore:line\r\n                scope.$on('$viewContentLoaded', angular.bind(this, function () {\r\n                    var required = $('[required]');\r\n                    if(required.length<1) {\r\n                        var legend = $('.required-legend');\r\n                        legend.remove();\r\n                    }\r\n                }));\r\n\r\n            }\r\n        };\r\n    });\r\n","/**\r\n * @ngdoc directive\r\n * @name WebCoreModule.directive:ngRequired\r\n * @restrict A\r\n * @element input|select|textarea\r\n * @description\r\n * The ngRequired directive adds behavior to Angular's ngRequired attribute. With this directive in use, any tag with a\r\n * ng-required attribute will have a required field indicator added to the label for the field. The directive will also\r\n * add an appropriate legend to the form of the field, indicating what the required field indicator means.\r\n */\r\n'use strict';\r\nangular.module('WebCoreModule')\r\n    .directive('ngRequired', ['WcTranslateConfiguratorService', '$compile', '$timeout', function (WcTranslateConfiguratorService, $compile, $timeout) {\r\n        return {\r\n            restrict: 'A',\r\n            require: ['ngRequired', '^form'],\r\n            scope: {\r\n                ngRequired: '='\r\n            },\r\n            controller: ['$scope', '$element', '$attrs', function ($scope, $element, $attrs) { // jshint ignore:line\r\n                // Look for the label to insert the required abbreviation\r\n                this.insertionPoint = $('label[for=\"' + $attrs.id + '\"]');\r\n                // If it's a radio or checkbox, try to find legend for fieldset instead\r\n                if ($element[0].type === 'checkbox' || $element[0].type === 'radio') {\r\n                    this.insertionPoint = $element.closest('fieldset').find('legend');\r\n                }\r\n\r\n                // Look for the parent form to insert the required legend\r\n                this.formElem = this.insertionPoint.closest('form');\r\n\r\n                var getFormControls = function (formController) {\r\n                    var formControls = [];\r\n\r\n                    angular.forEach(formController, function (value) { // jshint ignore:line\r\n                        if (typeof value === 'object' && value.hasOwnProperty('$valid')) {\r\n                            this.push(value);\r\n                        }\r\n                    }, formControls);\r\n\r\n                    return formControls;\r\n                };\r\n\r\n                this.calculateNumRequiredFields = function (formController) {\r\n                    var formControls = getFormControls(formController);\r\n\r\n                    var numRequiredFields = 0;\r\n                    angular.forEach(formControls, function (value) { // jshint ignore:line\r\n                        if (value.$error.required) {\r\n                            numRequiredFields++;\r\n                        }\r\n                    });\r\n\r\n                    return numRequiredFields;\r\n                };\r\n\r\n\r\n                this.addLabels = function (scope, attrs) { // jshint ignore:line\r\n\r\n                    WcTranslateConfiguratorService.loadPartAndRefresh('WC-required');\r\n                    $timeout(angular.bind(this, function () {\r\n                        // check to make sure abbr is not already there before adding\r\n                        if (this.insertionPoint.has('abbr[title=\"Required\"]').length === 0 && !attrs.disabled && !attrs.readonly) {\r\n                            this.insertionPoint.prepend('<abbr class=\"required h6\" title=\"Required\">*</abbr>');\r\n                        }\r\n\r\n                        //lastly, check for the form legend and add it if necessary\r\n                        if (this.formElem.has('div.required-legend').length === 0 && !attrs.disabled && !attrs.readonly) {\r\n                            this.formElem.prepend($compile('<div class=\"required-legend hidden-xs\"><span class=\"required-text\"><abbr class=\"required h6\" title=\"Required\">*</abbr> {{\"required.requiredText\" | translate}}</span></div>')(scope));\r\n                        }\r\n                    }), 0);\r\n                };\r\n\r\n                this.removeLabels = function (formController) {\r\n                    this.insertionPoint.find('abbr.required').remove();\r\n                    var numRequiredFields = this.calculateNumRequiredFields(formController);\r\n                    if (numRequiredFields === 0) {\r\n                        this.formElem.find('div.required-legend').remove();\r\n                    }\r\n                };\r\n            }],\r\n\r\n            link: function (scope, elem, attrs, ctrls) { // jshint ignore:line\r\n                var ngRequiredController = ctrls[0];\r\n                var formController = ctrls[1];\r\n\r\n                scope.$watch(function () {\r\n                    return scope.ngRequired;\r\n                }, function (newValue) {\r\n                    if (newValue) {\r\n                        ngRequiredController.addLabels(scope, attrs);\r\n                    } else {\r\n                        ngRequiredController.removeLabels(formController);\r\n                    }\r\n                });\r\n            }\r\n        };\r\n    }]);\r\n","/**\r\n * @ngdoc directive\r\n * @name WebCoreModule.directive:wcAlertConsole\r\n * @restrict A\r\n * @element div\r\n * @description\r\n * The wcAlertConsole directive adds an alert console div to the page. The directive also watches the array of visible\r\n * messages, and updates the view to display all messages that should currently be visible. This directive works with\r\n * WebCore's WcAlertConsoleService, which adds the messages into the arrays.\r\n */\r\n'use strict';\r\nangular.module('WebCoreModule')\r\n\t.directive('wcAlertConsole', function() {\r\n\t\treturn {\r\n\t\t\trestrict: 'A',\r\n\t\t\ttemplate: \"<div id=\\\"alert-console\\\"><div class=\\\"alert alert-dismissable\\\"ng-swipe-right=\\\"closeAlert(alert.uniqueishID)\\\" role=\\\"alert\\\" ng-repeat=\\\"alert in visibleMessages\\\" type=\\\"{{alert.type}}\\\" ng-class=\\\"{'zoom-out-animate': alert.fadeOut, 'fade-out': alert.fadeOut, 'alert-success' : alert.type == 'success', 'alert-danger' : alert.type == 'danger', 'alert-warning' : alert.type == 'warning', 'alert-info' : alert.type == 'info'}\\\"> <span class=\\\"glyphicon\\\" ng-class=\\\"{'glyphicon-ok': alert.type == 'success', 'glyphicon-warning-sign': alert.type == 'warning', 'glyphicon-remove-circle': alert.type == 'danger', 'glyphicon-info-sign' : alert.type == 'info'}\\\"></span><button class=\\\"close\\\" ng-click=\\\"closeAlert(alert.uniqueishID)\\\"><span aria-hidden=\\\"true\\\">&#120;</span><span class=\\\"sr-only\\\">Close</span></button><div><span ng-bind-html=\\\"alert.message\\\"></span><!--<progressbar ng-if=\\\"!alert.persist\\\" class=\\\"progress-striped active\\\" value=\\\"100 - alert.timeout*10\\\" type=\\\"{{alert.type}}\\\"></progressbar>--></div></div></div>\",\r\n\t\t\treplace: false,\r\n\t\t\tcontroller: ['$scope', 'WcAlertConsoleService', '$timeout', function($scope, WcAlertConsoleService, $timeout) {\r\n\r\n\t\t\t\t$scope.visibleMessages = [];\r\n\r\n\t\t\t\t$scope.closeAlert = function(uniqueishID) {\r\n\t\t\t\t\t// manually trigger fade out\r\n\t\t\t\t\tWcAlertConsoleService.removeMessage(uniqueishID, true);\r\n\t\t\t\t};\r\n\r\n\t\t\t\tif(WcAlertConsoleService.getSettings().removeErrorOnStateChange) {\r\n\t\t\t\t\t$scope.$on('$stateChangeStart', function() {\r\n\t\t\t\t\t\tWcAlertConsoleService.removeErrorMessages();\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// watch on alert messages\r\n\t\t\t\t$scope.$watch(function() {\r\n\t\t\t\t\t//noinspection UnnecessaryLocalVariableJS\r\n                    var messages = WcAlertConsoleService.getMessages(true);\r\n\t\t\t\t\treturn messages;\r\n\t\t\t\t}, function(newMsgs, oldMsgs) {\r\n\t\t\t\t\t$scope.visibleMessages = newMsgs;\r\n\r\n\t\t\t\t\t// move user to focus on alert if new message is added\r\n\t\t\t\t\t$timeout(function() {\r\n\t\t\t\t\t\tif(newMsgs.length > oldMsgs.length) {\r\n\t\t\t\t\t\t\tvar userYpos = $(document).scrollTop(); // jshint ignore:line\r\n\t\t\t\t\t\t\tvar msgYpos = $('div.alert').last().offset();\r\n\t\t\t\t\t\t\tmsgYpos = msgYpos.top - 15;\r\n\r\n\t\t\t\t\t\t\tif(msgYpos < userYpos) {\r\n\t\t\t\t\t\t\t\t$('html, body').animate({ scrollTop: msgYpos},100);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}, 0);\r\n\r\n\t\t\t\t}, true);\r\n\r\n\r\n\t\t\t}]\r\n\t\t};\r\n\t});","/**\r\n * @ngdoc directive\r\n * @name WebCoreModule.directive:wcChart\r\n * @restrict E\r\n * @scope\r\n * @param {array} data The array of data to render a chart from\r\n * @param {string} type The type of chart to render. Can be Line, Bar or Pie\r\n * @param {object} options An object with configuration options for the chart\r\n * @param {number} height the height of the canvas\r\n * @description\r\n * The wcChart directive utilizes the Chart.js library to provide charting capabilities via an Angular directive.\r\n * The directive provides customization for various chart types via the passed in attributes on the tag.\r\n */\r\n'use strict';\r\nangular.module('WebCoreModule')\r\n    .directive('wcChart', ['Chart',  function (Chart) {\r\n        return {\r\n            restrict: 'E',\r\n            scope: {\r\n                data: '&data',\r\n                options: '&options',\r\n                type: '@',\r\n                height: \"=\"\r\n            },\r\n            replace: true,\r\n            template: '<canvas></canvas>',\r\n            link: function ($scope, $element) { // jshint ignore:line\r\n                // jshint unused:true\r\n                var chartObj;\r\n                $scope.data = $scope.data();\r\n                $scope.options = $scope.options();\r\n\r\n                this.defaultOptions = {\r\n                    responsive: true,\r\n                    maintainAspectRatio: false\r\n                };\r\n\r\n                $.extend($scope.options, this.defaultOptions );\r\n\r\n                this.height = $scope.height || 300;\r\n\r\n                $element.wrap(\"<div style='height:\" + this.height + \"px ' class='chart-container'></div>\");\r\n\r\n                var cvs = $element[0];\r\n\r\n                // Watch for Changes to Data Set & options\r\n\r\n\r\n                $scope.$watch('data', angular.bind(this, function(value) {\r\n                    if(value) {\r\n                        this.destroyChart();\r\n\r\n                        chartObj = new Chart(cvs, {\r\n                            type: $scope.type,\r\n                            data: $scope.data,\r\n                            options: $scope.options\r\n                        });\r\n                        chartObj.resize();\r\n                    }\r\n                }, true));\r\n\r\n                $scope.$on('$destroy', angular.bind(this, function () {\r\n                    this.destroyChart();\r\n                }));\r\n\r\n                this.destroyChart = function () {\r\n                    if (chartObj) {\r\n                        chartObj.destroy();\r\n                    }\r\n                };\r\n\r\n\r\n                /* Update chart when changes occure on data */\r\n                $scope.$on('update', angular.bind(this, function () {\r\n                    chartObj.update();\r\n                }));\r\n\r\n            }\r\n        };\r\n    }]);","/**\r\n * @ngdoc directive\r\n * @name WebCoreModule.directive:wcCheckAllNone\r\n * @restrict AE\r\n * @scope\r\n * @requires dataTable\r\n * @param {string} targetContainerId The html id of the tag this directive should target\r\n * @description\r\n * The wcCheckAllNone directive sets up check all/none functionality for an array of checkboxes. It can be used in conjunction\r\n * with a Data table. The directive will inject check all/none links and provide the necessary functions to make them function.\r\n */\r\n'use strict';\r\nangular.module('WebCoreModule')\r\n\t.directive('wcCheckAllNone', function() {\r\n\t\treturn {\r\n\t\t\trestrict: 'AE',\r\n\t\t\trequire: ['wcCheckAllNone', '?^datatable'],\r\n\t\t\tscope: {\r\n\t\t\t\ttargetContainerId: '@targetContainerId'\r\n\t\t\t},\r\n\t\t\ttemplate: '<a class=\"select-all\" href=\"javascript:;\" ng-click=\"checkAllNoneController.checkAll()\">{{\"actions.selectAll\" | translate}}</a> | <a class=\"select-none\" href=\"javascript:;\" ng-click=\"checkAllNoneController.checkNone()\">{{\"actions.selectNone\"| translate}}</a>',\r\n\t\t\tcontrollerAs: 'checkAllNoneController',\r\n\t\t\tcontroller: ['$scope', '$element', 'WcTranslateConfiguratorService', function($scope, $element, WcTranslateConfiguratorService) {\r\n\r\n\t\t\t\tWcTranslateConfiguratorService.loadPartAndRefresh('WC-checkAllNone');\r\n\r\n\t\t\t\tthis.responsiveTableController = angular.element('#'+$scope.targetContainerId).controller('wcResponsiveTable');\r\n\r\n\t\t\t\t$scope.viewScope = $scope.$parent;\r\n\r\n\t\t\t\t$scope.toggleCheckAllExists = false;\r\n\r\n\t\t\t\t$scope.setToggleCheckAllExists = function(exists) {\r\n\t\t\t\t\t$scope.toggleCheckAllExists = exists;\r\n\t\t\t\t};\r\n\r\n\t\t\t\t$scope.getToggleCheckAllExists = function() {\r\n\t\t\t\t\treturn $scope.toggleCheckAllExists;\r\n\t\t\t\t};\r\n\r\n\r\n\t\t\t\t/* Start Select All Functionality */\r\n\r\n\t\t\t\tthis.checkAll = function() {\r\n\t\t\t\t\tif(this.responsiveTableController){\r\n\t\t\t\t\t\tthis.responsiveTableController.WcTableScopeService.getTableScope().$broadcast('table.select.checkbox.all');\r\n\t\t\t\t\t\tthis.responsiveTableController.WcTableScopeService.getTableScope().$broadcast('table.select.button.all');\r\n                        var checkbox = $('#' + $scope.targetContainerId).find('input[type=\"checkbox\"].wc-header-checkbox');\r\n\t\t\t\t\t\tcheckbox.prop('checked', true);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tvar checkBoxList = $('#' + $scope.targetContainerId).find('input[type=\"checkbox\"]:not(.toggle-check-all)');\r\n\t\t\t\t\t\tangular.forEach(checkBoxList, function (item) {\r\n\t\t\t\t\t\t\t// item.checked = false;\r\n\t\t\t\t\t\t\t// item.click();\r\n\r\n\t\t\t\t\t\t\tif(!item.checked) {\r\n\t\t\t\t\t\t\t\titem.click();\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\titem.checked = true;\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t};\r\n\t\t\t\t/* End Select All Functionality */\r\n\r\n\t\t\t\t/* Start Select None Functionality */\r\n\r\n\t\t\t\tthis.checkNone = function() {\r\n\t\t\t\t\tif(this.responsiveTableController){\r\n                        this.responsiveTableController.WcTableScopeService.getTableScope().$broadcast('table.select.checkbox.none');\r\n                        this.responsiveTableController.WcTableScopeService.getTableScope().$broadcast('table.select.button.none');\r\n                        var checkbox = $('#' + $scope.targetContainerId).find('input[type=\"checkbox\"].wc-header-checkbox');\r\n                        checkbox.prop('checked', false);\r\n                    } else {\r\n\t\t\t\t\t\tvar checkBoxList = $('#' + $scope.targetContainerId).find('input[type=\"checkbox\"]:not(.toggle-check-all)');\r\n\t\t\t\t\t\tangular.forEach(checkBoxList, function (item) {\r\n\t\t\t\t\t\t\t// item.checked = true;\r\n\t\t\t\t\t\t\t// item.click();\r\n\r\n\t\t\t\t\t\t\tif(item.checked) {\r\n\t\t\t\t\t\t\t\titem.click();\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\titem.checked = false;\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t};\r\n\t\t\t}],\r\n\t\t\tlink: function(scope, elem, attrs, controllers) {\r\n\t\t\t\tvar datatableController = controllers[1];\r\n\r\n\t\t\t\tif (datatableController) {\r\n\t\t\t\t\tscope.setToggleCheckAllExists(datatableController.getToggleCheckAllExists());\r\n\t\t\t\t}\r\n\r\n\r\n\t\t\t}\r\n\r\n\t\t};\r\n\t});\r\n","/**\r\n * @ngdoc directive\r\n * @name WebCoreModule.directive:wcClickOnce\r\n * @restrict A\r\n * @priority -1\r\n * @description\r\n * The wcClickOnce directive is applied as an attribute on any item a user can interact with. It will ensure the user\r\n * cannot accidentally double click the control. This is handy in preventing double submissions of forms or actions.\r\n */\r\n'use strict';\r\nangular.module('WebCoreModule')\r\n\t.directive('wcClickOnce', ['$timeout', function($timeout) {\r\n\t\tvar delay = 500;   // min milliseconds between clicks\r\n\r\n\t\treturn {\r\n\t\t\trestrict: 'A',\r\n\t\t\tpriority: -1,   // cause out postLink function to execute before native `ngClick`'s\r\n\t\t\t\t\t\t\t// ensuring that we can stop the propagation of the 'click' event\r\n\t\t\t\t\t\t\t// before it reaches `ngClick`'s listener\r\n\t\t\tlink: function(scope, elem) {\r\n\t\t\t\tvar disabled = false;\r\n\r\n\t\t\t\tvar onClick = function(evt) {\r\n\t\t\t\t\tif(disabled) {\r\n\t\t\t\t\t\tscope.$broadcast('onClickOnce');\r\n\t\t\t\t\t\tevt.preventDefault();\r\n\t\t\t\t\t\tevt.stopImmediatePropagation();\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tdisabled = true;\r\n\t\t\t\t\t\t$timeout(function() {\r\n\t\t\t\t\t\t\tdisabled = false;\r\n\t\t\t\t\t\t}, delay, false);\r\n\t\t\t\t\t}\r\n\t\t\t\t};\r\n\r\n\r\n\t\t\t\tscope.$on('$destroy', function() {\r\n\t\t\t\t\telem.off('click', onClick);\r\n\t\t\t\t});\r\n\t\t\t\telem.on('click', onClick);\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t}]);\r\n","/**\r\n * @ngdoc directive\r\n * @name WebCoreModule.directive:wcContinueIfValid\r\n * @restrict A\r\n * @requires ngController\r\n * @description\r\n * The wcContinueIfValid directive encorporates form validation into the submit button action. By applying this directive,\r\n * a click on the submit button will first check form validation. If the form is valid, the app will continue to the next\r\n * state defined in the state's 'workflow' data property. If the form is invalid, the app will not navigate and the user\r\n * will be allowed to make adjustments to their entries before trying navigation again.\r\n */\r\n'use strict';\r\nangular.module('WebCoreModule')\r\n\t.directive('wcContinueIfValid', ['$timeout', function($timeout) {\r\n\t\treturn {\r\n\t\t\trestrict: 'A',\r\n\t\t\trequired: '^ngController',\r\n\t\t\tcontroller: ['$state', '$element', '$scope', function($state, $element, $scope) {\r\n\t\t\t\t// jshint unused:true\r\n\t\t\t\t//written as a function so we can mock it in test code\r\n\r\n\t\t\t\t$state.$current.data = $state.$current.data || {};\r\n\r\n\t\t\t\t$state.$current.data.workflow = $state.$current.data.workflow|| null;\r\n\r\n\t\t\t\tif($state.$current.data.workflow) {\r\n\t\t\t\t\tthis.isWorkflowEnabled = true;\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\tthis.isWorkflowEnabled = false;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.getWorkflowData = function(){\r\n\t\t\t\t\t\treturn $state.$current.data.workflow;\r\n\t\t\t\t};\r\n\r\n\t\t\t\tthis.navigateToState = function(name, params, options) {\r\n\t\t\t\t\tvar callingValues = {name: this.getWorkflowData().nextState, params: {}, options: {location: false, reload: false}};\r\n\r\n\t\t\t\t\t//if a single arg is passed, assume it's a state name and nav to it with other options as defaults\r\n\t\t\t\t\tif(arguments.length == 1) {\r\n\t\t\t\t\t\tcallingValues.name = name;\r\n\t\t\t\t\t}\r\n\t\t\t\t\t//determine what was passed in and use it accordingly\r\n\t\t\t\t\telse if(arguments.length > 1) {\r\n\t\t\t\t\t\tif(name) {\r\n\t\t\t\t\t\t\tcallingValues.name = name;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif(params) {\r\n\t\t\t\t\t\t\tcallingValues.params = params;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif(options) {\r\n\t\t\t\t\t\t\tangular.extend(callingValues.options, options);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t$state.go(callingValues.name, callingValues.params, callingValues.options);\r\n\t\t\t\t};\r\n\r\n\t\t\t\tthis.clickHandler = angular.bind(this, function(viewCtrl) {\r\n\t\t\t\t\t\tvar callback = this.getWorkflowData().controllerContinueCallbackFunctionName;\r\n\t\t\t\t\t\tif(callback) {\r\n\t\t\t\t\t\t\tvar retVal = viewCtrl[callback]($element);\r\n\t\t\t\t\t\t\tif(retVal) {\r\n\t\t\t\t\t\t\t\t//async case\r\n\t\t\t\t\t\t\t\tif(retVal.then) {\r\n\t\t\t\t\t\t\t\t\tretVal.then(angular.bind(this, function(obj){\r\n\t\t\t\t\t\t\t\t\t\tthis.navigateToState(obj.name, obj.params, obj.options);\r\n\t\t\t\t\t\t\t\t\t}), angular.bind(this, function(obj) {\r\n\t\t\t\t\t\t\t\t\t\tthis.navigateToState(obj.name, obj.params, obj.options);\r\n\t\t\t\t\t\t\t\t\t}));\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t//sync case\r\n\t\t\t\t\t\t\t\telse {\r\n\t\t\t\t\t\t\t\t\tthis.navigateToState(retVal.name, retVal.params, retVal.options);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t//nothing returned - do default nav\r\n\t\t\t\t\t\t\telse {\r\n\t\t\t\t\t\t\t\tthis.navigateToState();\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t//no callback - do default nav\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tthis.navigateToState();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}],\r\n\t\t\tlink: function(scope, elem, attr, ctrl) {\r\n\t\t\t\t//these pieces aren't set up in a way that is easily unit testable.\r\n\t\t\t\t//leave them here in the link and allow e2e testing to pick them up.\r\n\t\t\t\telem.on('click', function() {\r\n\t\t\t\t\t$timeout(function(){\r\n\t\t\t\t\t\tvar viewCtrl = elem.controller();\r\n\t\t\t\t\t\tvar formName = elem[0].form.name;\r\n\r\n\r\n                        var formCtrl = scope[formName];\r\n\r\n                        if(!formCtrl) {\r\n                            //break out of isolate scope and then walk the tree for the form obj\r\n                            formCtrl = scope.$parent[formName];\r\n                        }\r\n\r\n\t\t\t\t\t\t// enable display of validation errors\r\n\t\t\t\t\t\t// viewCtrl.isFormSubmitted = true;\r\n\r\n\t\t\t\t\t\t// if form is valid, navigate to requested state and call the given function\r\n\t\t\t\t\t\tif(formCtrl.$valid) {\r\n\t\t\t\t\t\t\tformCtrl.$setPristine();\r\n\t\t\t\t\t\t\tif(ctrl.isWorkflowEnabled) {\r\n\t\t\t\t\t\t\t\tctrl.clickHandler(viewCtrl);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\telse  {\r\n\t\t\t\t\t\t\t\tscope.$broadcast('navigateToNextState');\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}, 0);\r\n\t\t\t\t});\r\n\r\n\t\t\t}\r\n\t\t};\r\n\t}]);","/**\r\n * @ngdoc directive\r\n * @name WebCoreModule.directive:wcFileUploadImage\r\n * @restrict E\r\n * @element div\r\n * @description\r\n * The wcFileUploadImage directive includes the html for upload photo.The upload can be done in two ways\r\n * one using uploading the image that is already available with the user and the other way is to take a photo\r\n * using the user's webcam and upload the image.\r\n */\r\n'use strict';\r\nangular.module('WebCoreModule')\r\n\t.directive('wcFileUploadImage', function() {\r\n\t\tvar template = [\r\n\t\t\t'<div ng-show=\"ctrl.webcamPresent\" class=\"row\">',\r\n\t\t\t\t'<div class=\"col-md-12\">',\r\n\t\t\t\t\t'<div class=\"row\">',\r\n\t\t\t\t\t\t'<div class=\"col-md-3 col-md-offset-1\" id=\"wc-file-upload-image-camera\"></div>',\r\n\t\t\t\t\t'</div>',\r\n\t\t\t\t\t'<div class=\"row\">',\r\n\t\t\t\t\t\t'<div class=\"col-md-4 col-md-offset-1\">',\r\n\t\t\t\t\t\t\t'<button type=\"button\" class=\"btn btn-tertiary \" ng-click=\"ctrl.turnCameraOff()\">Camera Off</button>',\r\n\t\t\t\t\t\t\t'<button type=\"button\" class=\"btn btn-tertiary\" ng-click=\"ctrl.turnCameraOn()\">Camera On</button>',\r\n\t\t\t\t\t\t\t'<button type=\"button\" class=\"btn btn-primary\" ng-click=\"ctrl.capturePicture()\">Take Picture</button>',\r\n\t\t\t\t\t\t'</div>',\r\n\t\t\t\t\t'</div>',\r\n\t\t\t\t'</div>',\r\n\t\t\t'</div>',\r\n\t\t\t'<div class=\"row\">',\r\n                '<div class=\"col-md-12\">',\r\n                    '<div class=\"row\">',\r\n                        '<div class=\"col-md-3 col-md-offset-1\">',\r\n                            '<input wc-input-file=\"ctrl.chooseImageUpload\" file-types=\"ctrl.fileTypes()\" class=\"form-control\" type=\"file\" accept=\"image/\">',\r\n                        '</div>',\r\n                    '</div>',\r\n                    '<div class=\"row\">',\r\n                        '<div class=\"col-md-2 col-md-offset-1\">',\r\n                            '<button type=\"button\" class=\"btn btn-primary\" type=\"submit\" ng-click=\"ctrl.prepareForUpload()\">Upload Photo</button>',\r\n                            '<button type=\"button\" class=\"btn btn-secondary\" type=\"reset\" ng-click=\"ctrl.cancel()\">Cancel</button>',\r\n                            '<button type=\"button\" class=\"btn btn-secondary\" type=\"submit\" ng-click=\"ctrl.addImages()\">Add Images</button>',\r\n                        '</div>',\r\n                    '</div>',\r\n                '</div>',\r\n\t\t\t'</div>'\r\n\t\t].join('');\r\n\t\treturn {\r\n\t\t\trestrict: 'E',\r\n\t\t\tscope: {},\r\n\t\t\tbindToController: {\r\n\t\t\t\tonUpload: '&',\r\n\t\t\t\tfileTypes: '&'\r\n\t\t\t\t// thumbnail: '&'\r\n\t\t\t},\r\n\t\t\ttemplate: template,\r\n\t\t\tcontrollerAs: 'ctrl',\r\n\t\t\tcontroller: ['$rootScope', 'WcCameraService', 'WcImageFileService', 'WcDataFileService', '$scope',\r\n\t\t\t\tfunction ($rootScope, WcCameraService, WcImageFileService, WcDataFileService) { // jshint ignore:line\r\n\r\n\t\t\t\tthis.cameraElement = $('#wc-file-upload-image-camera');\r\n\t\t\t\tthis.chooseImageUpload = null;\r\n\t\t\t\tthis.snapshotToUpload = null;\r\n\t\t\t\tthis.webcamPresent = false;\r\n\r\n\t\t\t\tWcCameraService.checkForCamera().then(angular.bind(this, function(webCamIsPresnet) {\r\n\t\t\t\t\tif(webCamIsPresnet) {\r\n\t\t\t\t\t\tWcCameraService.setCameraSize(800, 600);\r\n\t\t\t\t\t\tthis.webcamPresent = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t})).catch(function(error) {\r\n\t\t\t\t\tconsole.log(error);\r\n\t\t\t\t});\r\n\r\n\t\t\t\tthis.cancel = function() {\r\n\t\t\t\t\tthis.chooseImageUpload = null;\r\n\t\t\t\t\tthis.snapshotToUpload = null;\r\n\r\n\t\t\t\t\tif(this.previewImageElement) {\r\n\t\t\t\t\t\tthis.previewImageElement.remove();\r\n\t\t\t\t\t\tdelete this.previewImageElement;\r\n\r\n\t\t\t\t\t\tthis.cameraElement.append(this.videoElement);\r\n\t\t\t\t\t\tthis.videoElement.get(0).play();\r\n\t\t\t\t\t}\r\n\t\t\t\t};\r\n\r\n\t\t\t\tthis.capturePicture = function() {\r\n\t\t\t\t\tvar snapShot;\r\n\r\n\t\t\t\t\tif(this.cameraElement.find('img').length === 0 && WcCameraService.cameraIsOn) {\r\n\t\t\t\t\t\tsnapShot = WcCameraService.takePicture();\r\n\t\t\t\t\t\tthis.previewImageElement = $('<img>').attr('src', snapShot);\r\n\r\n\t\t\t\t\t\tthis.videoElement.remove();\r\n\r\n\t\t\t\t\t\tthis.cameraElement.append(this.previewImageElement);\r\n\r\n\t\t\t\t\t\tthis.snapshotToUpload = snapShot;\r\n\t\t\t\t\t}\r\n\t\t\t\t};\r\n\r\n\t\t\t\tthis.prepareForUpload = function() {\r\n\t\t\t\t\tvar imageToUpload = this.chooseImageUpload || this.snapshotToUpload;\r\n\t\t\t\t\tvar imageToUploadObject = {};\r\n\r\n\t\t\t\t\tif(imageToUpload && typeof imageToUpload !== 'string' && imageToUpload.length > 0) {\r\n\t\t\t\t\t\tWcDataFileService.readFile(imageToUpload[0]).then(function(imageURI) {\r\n\t\t\t\t\t\t\tvar imageFileData = WcDataFileService.prepareForFileUpload(imageURI);\r\n\t\t\t\t\t\t\timageToUploadObject.imageBase64String =imageFileData.base64String;\r\n\t\t\t\t\t\t\timageToUploadObject.imageMIMEType =imageFileData.MIMEType;\r\n\t\t\t\t\t\t\timageToUploadObject.fileType = WcDataFileService.getFileType(imageToUpload[0]);\r\n\t\t\t\t\t\t\timageToUploadObject.description = '...';\r\n\r\n\t\t\t\t\t\t\treturn WcImageFileService.createImageURI(imageURI);\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.then(angular.bind(this, function(thumbnailURI) {\r\n\t\t\t\t\t\t\tvar thumbnailFileData = WcDataFileService.prepareForFileUpload(thumbnailURI);\r\n\t\t\t\t\t\t\timageToUploadObject.thumbnailBase64String =thumbnailFileData.base64String;\r\n\t\t\t\t\t\t\timageToUploadObject.thumbnailMIMEType =thumbnailFileData.MIMEType;\r\n\r\n\t\t\t\t\t\t\tthis.onUpload({imageObject: imageToUploadObject});\r\n\t\t\t\t\t\t\tthis.cancel();\r\n\r\n\t\t\t\t\t\t\tthis.original = $('<img>').attr('src', imageToUploadObject.imageData);\r\n\t\t\t\t\t\t\tthis.thumb = $('<img>').attr('src', thumbnailURI);\r\n\t\t\t\t\t\t}));\r\n\r\n\t\t\t\t\t} else if (typeof imageToUpload === 'string') {\r\n\t\t\t\t\t\tWcImageFileService.createImageURI(imageToUpload).then(angular.bind(this, function(thumbnailURI) {\r\n\t\t\t\t\t\t\timageToUploadObject.imageData = imageToUpload;\r\n\t\t\t\t\t\t\timageToUploadObject.thumbnailData =\tthumbnailURI;\r\n\t\t\t\t\t\t\timageToUploadObject.fileType = 'jpeg';\r\n\t\t\t\t\t\t\timageToUploadObject.description = '...';\r\n\r\n\t\t\t\t\t\t\tthis.original = $('<img>').attr('src', imageToUploadObject.imageData);\r\n\t\t\t\t\t\t\tthis.thumb = $('<img>').attr('src', imageToUploadObject.thumbnailData);\r\n\r\n\t\t\t\t\t\t\tthis.onUpload({imageObject: imageToUploadObject});\r\n\t\t\t\t\t\t\tthis.cancel();\r\n\r\n\t\t\t\t\t\t}));\r\n\t\t\t\t\t}\r\n\t\t\t\t};\r\n\r\n\t\t\t\tthis.turnCameraOff = function() {\r\n\t\t\t\t\tWcCameraService.stopCamera();\r\n\t\t\t\t\tthis.videoElement.remove();\r\n\t\t\t\t};\r\n\r\n\t\t\t\tthis.turnCameraOn = function() {\r\n\t\t\t\t\tif(this.webcamPresent && !WcCameraService.cameraIsOn) {\r\n\r\n\t\t\t\t\t\tWcCameraService.returnVideoElement().then(angular.bind(this, function(videoElement) {\r\n\t\t\t\t\t\t\tthis.videoElement = videoElement;\r\n\r\n\t\t\t\t\t\t\t$('#wc-file-upload-image-camera').append(this.videoElement);\r\n\t\t\t\t\t\t\tWcCameraService.startCamera();\r\n\t\t\t\t\t\t})).catch(function(error) {\r\n\t\t\t\t\t\t\tconsole.log(error);\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t};\r\n\t\t\t}],\r\n\t\t\tlink: function(scope, element, attr, ctrl) { // jshint ignore:line\r\n\t\t\t\tctrl.addImages = function() {\r\n\t\t\t\t\telement.append(ctrl.original);\r\n\t\t\t\t\telement.append(ctrl.thumb);\r\n\t\t\t\t};\r\n\t\t\t}\r\n\r\n\t\t};\r\n\t}\r\n);\r\n","/**\r\n * @ngdoc directive\r\n * @name WebCoreModule.directive:wcInputFile\r\n * @description\r\n * The wcInputFile directive holds the input file related operations. This module is widely used in file upload operations.\r\n */\r\n\r\n'use strict';\r\n\r\n// http://stackoverflow.com/questions/17063000/ng-model-for-input-type-file\r\nangular.module('WebCoreModule')\r\n\t.directive(\"wcInputFile\", ['_', function (_) {\r\n\t\treturn {\r\n\t\t\tscope: {},\r\n\t\t\tbindToController: {\r\n\t\t\t\twcInputFile: '=',\r\n\t\t\t\tfileTypes: '&'\r\n\t\t\t},\r\n\t\t\tcontrollerAs: 'ctrl',\r\n\t\t\tcontroller: ['$scope', '$element', 'WcDataFileService', function($scope, $element, WcDataFileService) {\r\n\t\t\t\tvar vm = this;\r\n\r\n\t\t\t\tthis.onChange = function (changeEvent) {\r\n\t\t\t\t\t// TODO Just do one at a time\r\n\t\t\t\t\tvar files = changeEvent.target.files;\r\n\t\t\t\t\tvar fileTypes;\r\n\t\t\t\t\t$scope.$apply(function () {\r\n\t\t\t\t\t\tif(vm.fileTypes() !== undefined && vm.fileTypes().length > 0) {\r\n\t\t\t\t\t\t\tfileTypes =_.map(files, function(item) {\r\n\t\t\t\t\t\t\t\t//noinspection UnnecessaryLocalVariableJS\r\n                                var fileType = WcDataFileService.getFileType(item);\r\n\t\t\t\t\t\t\t\treturn fileType;\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t.filter(function(extension) {\r\n\t\t\t\t\t\t\t\t\treturn vm.fileTypes().indexOf(extension) >= 0;\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tif(!fileTypes || fileTypes.length === files.length) {\r\n\t\t\t\t\t\t\tvm.wcInputFile = files;\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t$element.val(null);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t};\r\n\r\n\r\n\t\t\t}],\r\n\t\t\tlink: function (scope, element, attrs, ctrl) { // jshint ignore:line\r\n\t\t\t\telement.bind('change', ctrl.onChange);\r\n\r\n\t\t\t\tscope.$watch(function() {\r\n\t\t\t\t\treturn ctrl.wcInputFile;\r\n\t\t\t\t}, function(file) {\r\n\t\t\t\t\tconsole.log('log');\r\n\t\t\t\t\tif(file === null) {\r\n\t\t\t\t\t\telement.val(null);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t};\r\n\t}]);","/**\r\n * @ngdoc directive\r\n * @name WebCoreModule.directive:wcLoadingIndicator\r\n * @restrict A\r\n * @description\r\n * The wcLoadingIndicator directive includes the html for a visual loading indicator and a cover to prevent the user from\r\n * clicking on things as the app loads. The directive adds interceptors to the request/response process, which are used\r\n * to hide and show the indicator accordingly.\r\n */\r\n'use strict';\r\nangular.module('WebCoreModule')\r\n\t.directive('wcLoadingIndicator', function() {\r\n\t\treturn {\r\n\t\t\trestrict: 'A',\r\n\t\t\ttemplate: '<div id=\"loading-cover\"></div><div id=\"loading-indicator\"><span>Loading...</span></div>',\r\n\t\t\tcontroller: ['$scope', 'WcHttpRequestService', function($scope, WcHttpRequestService) {\r\n\r\n\t\t\t\tvar requestCount = 0;\r\n\t\t\t\tvar pendingStateChange = false;\r\n\r\n\t\t\t\tthis.showLoadingIndicator = function() {\r\n\t\t\t\t\t$('#loading-cover').show().animate({opacity: 1.0}, 300);\r\n\t\t\t\t\t$('#loading-indicator').show().animate({opacity: 1.0}, 300);\r\n\t\t\t\t};\r\n\r\n\t\t\t\tthis.hideLoadingIndicator = function() {\r\n\t\t\t\t\t$('#loading-indicator').hide().animate({opacity:0}, 10);\r\n\t\t\t\t\t$('#loading-cover').hide().animate({opacity:0}, 10);\r\n\t\t\t\t};\r\n\r\n\t\t\t\tthis.incrementPendingCounterAndShow = angular.bind(this, function() {\r\n\t\t\t\t\t//increment the counter\r\n\t\t\t\t\trequestCount++;\r\n\r\n\t\t\t\t\t//only call to show the indicator when incrementing from 0 to 1.\r\n\t\t\t\t\t//will not need to do so for subsequent calls, as it will already be shown\r\n\t\t\t\t\tif(requestCount === 1) {\r\n\t\t\t\t\t\tthis.showLoadingIndicator();\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\r\n\t\t\t\tthis.decrementPendingCounterAndHide = angular.bind(this, function() {\r\n\t\t\t\t\t//decrement the counter\r\n\t\t\t\t\trequestCount--;\r\n\r\n\t\t\t\t\t//only call to hide the indicator when decrementing from 1 to 0.\r\n\t\t\t\t\tif(requestCount === 0) {\r\n\t\t\t\t\t\tthis.hideLoadingIndicator();\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\r\n\t\t\t\tWcHttpRequestService.addRequestInterceptor(angular.bind(this, function() {\r\n\t\t\t\t\tthis.incrementPendingCounterAndShow();\r\n\t\t\t\t}));\r\n\r\n\t\t\t\tWcHttpRequestService.addErrorInterceptor(angular.bind(this, function() {\r\n\t\t\t\t\tif(!pendingStateChange) {\r\n\t\t\t\t\t\tthis.decrementPendingCounterAndHide();\r\n\t\t\t\t\t}\r\n\t\t\t\t}));\r\n\r\n\t\t\t\tWcHttpRequestService.addResponseInterceptor(angular.bind(this, function() {\r\n\t\t\t\t\tvar data = arguments[0];\r\n\r\n\t\t\t\t\tif(!pendingStateChange) {\r\n\t\t\t\t\t\tthis.decrementPendingCounterAndHide();\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn data;\r\n\t\t\t\t}));\r\n\r\n\t\t\t\t$scope.$on('$stateChangeStart', angular.bind(this, function() {\r\n\t\t\t\t\tpendingStateChange = true;\r\n\t\t\t\t}));\r\n\r\n\t\t\t\tthis.hideLoadingIndicatorCallback = angular.bind(this, function() {\r\n\t\t\t\t\trequestCount = 0;\r\n\t\t\t\t\tpendingStateChange = false;\r\n\t\t\t\t\tthis.hideLoadingIndicator();\r\n\t\t\t\t});\r\n\r\n\t\t\t\t$scope.$on('$stateChangeError', this.hideLoadingIndicatorCallback);\r\n\t\t\t\t$scope.$on('$viewContentLoaded', this.hideLoadingIndicatorCallback);\r\n\t\t\t\t$scope.$on('Unauthenticated', this.hideLoadingIndicatorCallback);\r\n\t\t\t\t$scope.$on('Offline', this.hideLoadingIndicatorCallback);\r\n\r\n\t\t\t\treturn $scope.loadingIndicator = this;\r\n\t\t\t}]\r\n\t\t};\r\n\t});\r\n","/**\r\n * @ngdoc directive\r\n * @name WebCoreModule.directive:wcNavMenu\r\n * @restrict A\r\n * @scope\r\n * @param {object} menuData The property to assign the menu data into so the view can access it\r\n * @param {array} menuDataUrl Array of objects defining the menu's structure and text\r\n * @description\r\n * The wcNavMenu directive generates a navigation menu from the given menu data url. The url should expose an array of objects\r\n * defining the menu's structure and text.\r\n */\r\n'use strict';\r\nangular.module('WebCoreModule')\r\n\t.directive('wcNavMenu',  function() { // jshint ignore:line\r\n\t\treturn {\r\n\t\t\trestrict: 'A',\r\n\t\t\tscope: {\r\n\t\t\t\tmenuData: '=menuData',\r\n\t\t\t\tmenuDataUrl: '@menuDataUrl'\r\n\t\t\t},\r\n\t\t\ttransclude: true,\r\n\t\t\ttemplate: \t\"<nav class=\\\"navbar navbar-default\\\" role=\\\"navigation\\\">\" +\r\n\t\t\t\t\t\t\t\"<div class=\\\"container-fluid\\\">\" +\r\n\t\t\t\t\t\t\t\t\"<div class=\\\"navbar-header visible-xxs\\\">\" +\r\n\t\t\t\t\t\t\t\t\t\"<button id=\\\"toggle-nav-menu-collapse\\\" type=\\\"button\\\" class=\\\"navbar-toggle collapsed\\\" ng-click=\\\"toggleNavbarCollpase($event)\\\" aria-expanded=\\\"false\\\">\" +\r\n\t\t\t\t\t\t\t\t\t\t\"<span class=\\\"sr-only\\\">{{'application.navigation.toggleTitle' | translate}}</span>\" +\r\n\t\t\t\t\t\t\t\t\t\t\"<span class=\\\"icon-bar\\\"></span>\" +\r\n\t\t\t\t\t\t\t\t\t\t\"<span class=\\\"icon-bar\\\"></span>\" +\r\n\t\t\t\t\t\t\t\t\t\t\"<span class=\\\"icon-bar\\\"></span>\" +\r\n\t\t\t\t\t\t\t\t\t\"</button>\" +\r\n\t\t\t\t\t\t\t\t\"</div>\" +\r\n\t\t\t\t\t\t\t\t\"<div uib-collapse=\\\"navbarCollapsed\\\" class=\\\"collapse navbar-collapse\\\" id=\\\"primary-nav\\\" role=\\\"menu\\\">\" +\r\n\t\t\t\t\t\t\t\t\t\"<ul class=\\\"nav navbar-nav\\\">\" +\r\n\t\t\t\t\t\t\t\t\t\t\"<li role=\\\"menuitem\\\"  wc-protected-resource=\\\"{{menu.protected}}\\\" ng-repeat=\\\"menu in menuData\\\" ng-class=\\\"{dropdown:menu.subMenu}\\\" ui-sref-active=\\\"active\\\">\" +\r\n\t\t\t\t\t\t\t\t\t\t\t\"<a ng-click=\\\"collapseNavbar()\\\" ng-if=\\\"!menu.subMenu\\\" ui-sref=\\\"{{menu.state | translate}}\\\" ui-sref-opts=\\\"{reload: true, notify: true}\\\">\" +\r\n\t\t\t\t\t\t\t\t\t\t\t\t\"{{menu.label | translate}}\" +\r\n\t\t\t\t\t\"\t\t\t\t\t\t</a>\" +\r\n\t\t\t\t\t\t\t\t\t\t\t\"<a ng-if=\\\"menu.subMenu\\\" ng-click=\\\"MainMenuCollpase($event)\\\"  role=\\\"button\\\"  aria-expanded=\\\"false\\\" href class=\\\"dropdown-toggle\\\" data-toggle=\\\"dropdown\\\">{{menu.label | translate}}\" +\r\n\t\t\t\t\t\t\t\t\t\t\t\t\"<span ng-if=\\\"menu.subMenu\\\" class=\\\"caret\\\"></span>\" +\r\n\t\t\t\t\t\t\t\t\t\t\t\"</a>\" +\r\n\t\t\t\t\t\t\t\t\t\t\t\"<wc-sub-menu></wc-sub-menu>\" +\r\n\t\t\t\t\t\t\t\t\t\t\"</li>\" +\r\n\t\t\t\t\t\t\t\t\t\"</ul>\" +\r\n\t\t\t\t\t\t\t\t\t\"<span ng-transclude></span>\" +\r\n\t\t\t\t\t\t\t\t\"</div>\" +\r\n\t\t\t\t\t\t\t\"</div>\" +\r\n\t\t\t\t\t\t\"</nav>\",\r\n\t\t\tcontroller: ['$scope', '$element', '$attrs', '$http',\r\n\t\t\t\tfunction($scope, $element, $attrs, $http) { // jshint ignore:line\r\n\r\n\t\t\t\t\tif($scope.menuDataUrl){\r\n\t\t\t\t\t\t$http.get($scope.menuDataUrl).success(function(response) {\r\n\t\t\t\t\t\t\t$scope.menuData = response;\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t$scope.$on('$stateChangeStart', function() {\r\n\r\n\t\t\t\t\t\t$('nav .in, nav .open').removeClass('in open');\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t\t$scope.$on('collapseNavBar', function() {\r\n\t\t\t\t\t\t$scope.collapseNavbar();\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t\t$scope.navbarCollapsed = true;\r\n\r\n\t\t\t\t\t$scope.MainMenuCollpase = function(event) {\r\n\t\t\t\t\t\tevent.stopPropagation();\r\n\t\t\t\t\t\tvar nav=$(event.target.parentElement).parent();\r\n\t\t\t\t\t\tnav.find('li.dropdown,li.dropdown-submenu').not(event.target.parentElement).removeClass(\"open\");\r\n\t\t\t\t\t\t$(event.target.parentElement).toggleClass(\"open\");\r\n\t\t\t\t\t};\r\n\r\n\t\t\t\t\t$scope.toggleNavbarCollpase = function() { // jshint ignore:line\r\n\t\t\t\t\t\t$scope.navbarCollapsed = !$scope.navbarCollapsed;\r\n\t\t\t\t\t};\r\n\r\n\t\t\t\t\t$scope.collapseNavbar = function() { // jshint ignore:line\r\n\t\t\t\t\t};\r\n\t\t\t\t}]\r\n\r\n\r\n\t\t};\r\n\t})\r\n\t.directive('wcSubMenu', ['$compile', function($compile) {\r\n\t\treturn {\r\n\t\t\trestrict: 'E',\r\n\t\t\tscope: true,\r\n\t\t\tlink: function(scope, element) {\r\n\t\t\t\t//scope.subMenu = scope.menu;\r\n\r\n\t\t\t\tscope.collapasesubMenu=function(event){\r\n\t\t\t\t\tevent.stopPropagation();\r\n\t\t\t\t\telement=event.target.parentElement;\r\n\t\t\t\t\t$( element).toggleClass(\"open\");\r\n\t\t\t\t};\r\n\r\n\t\t\t\tif(scope.menu) {\r\n\t\t\t\t\tvar template = angular.element('<ul class=\"dropdown-menu\">' +\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t'<li wc-protected-resource=\"{{menu.protected}}\" ng-repeat=\"menu in menu.subMenu\" ng-class=\\\"{\\'dropdown-submenu\\':menu.subMenu}\\\" ui-sref-active=\\\"active\\\">' +\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t'<a  ng-if=\\\"!menu.subMenu\\\" ui-sref=\"{{menu.state | translate}}\" ui-sref-opts=\"{reload: true, notify: true}\">{{menu.label | translate}}</a>' +\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t'<a ng-if=\\\"menu.subMenu\\\" ng-click=\\\"collapasesubMenu($event)\\\" href>{{menu.label | translate}}</a>' +\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t'<wc-sub-menu  ng-if=\\\"menu.subMenu\\\"></wc-sub-menu>' +\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t'</li>' +\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t'</ul>');\r\n\r\n\t\t\t\t\tvar linkFunction = $compile(template);\r\n\t\t\t\t\tlinkFunction(scope);\r\n\t\t\t\t\telement.replaceWith(template);\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\telement.remove();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t};\r\n\t}]);\r\n","//credit to stack overflow for a lot of this one. http://stackoverflow.com/questions/24707508/angularjs-set-global-ngmodeloptions#answer-26537212\r\n\r\n/**\r\n * @ngdoc directive\r\n * @name WebCoreModule.directive:ngModelDirective\r\n * @description\r\n * The ngModelDirective is a decorative directive mainly for HTML control operations,\r\n * this directive is responsible for set blur option in HTML fields.\r\n */\r\n\r\n'use strict';\r\nangular.module('WebCoreModule').config(['$provide', function($provide) {\r\n\r\n\t$provide.decorator('ngModelDirective', ['$delegate', function($delegate) {\r\n\t\tvar directive = $delegate[0];\r\n\t\tvar link = directive.link; // jshint ignore:line\r\n\t\tvar shouldSetBlurUpdateEvent = function (element) {\r\n\t\t\t// The blur event is only really applicable to input controls so\r\n\t\t\t// we want to stick with the default events for selects, checkboxes & radio buttons.\r\n\t\t\t// also stick with default events for typeahead controls and the ui-select\r\n\r\n\t\t\tvar nodeName = element.nodeName.toLowerCase();\r\n\t\t\t//for some reason comments end up in here at times. short circuit this if that's the case.\r\n\t\t\tif(element.nodeName.toLowerCase() === '#comment') return false;\r\n\t\t\tvar nodeType = undefined;\r\n\t\t\tif(typeof element.type === 'string') {\r\n\t\t\t\tnodeType = element.type.toLowerCase();\r\n\t\t\t}\r\n\r\n\t\t\treturn\t(nodeName === 'textarea' && !element.hasAttribute('maxlength')) ||\r\n\t\t\t\t\t(nodeName === 'div' && !element.classList.contains('ui-select-bootstrap') && !element.hasAttribute('wc-data-table') && !element.hasAttribute('uib-datepicker-popup-wrap')) ||\r\n\t\t\t\t\t(nodeName === 'input' && nodeType !== 'checkbox' && nodeType !== 'radio' && !element.hasAttribute('uib-typeahead') && !element.hasAttribute('uib-datepicker-popup'));\r\n\t\t};\r\n\r\n\t\t// save a reference to the original compile function\r\n\t\tvar compileFn = directive.compile;\r\n\t\tdirective.compile = function() {\r\n\t\t\tvar link = compileFn.apply(this, arguments);\r\n\t\t\treturn {\r\n\t\t\t\tpre: function ngModelPostLink(scope, element, attr, ctrls) {\r\n\t\t\t\t\t// jshint unused:true\r\n\t\t\t\t\tif(!ctrls[2]) {\r\n\t\t\t\t\t\tctrls[2] = {};\r\n\t\t\t\t\t}\r\n\t\t\t\t\tvar ngModelOptions = ctrls[2];\r\n\t\t\t\t\tif (ngModelOptions.$options === undefined && shouldSetBlurUpdateEvent(element[0])) {\r\n\t\t\t\t\t\tngModelOptions.$options = {\r\n\t\t\t\t\t\t\tupdateOn: 'blur',\r\n\t\t\t\t\t\t\tupdateOnDefault: false\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t}\r\n\t\t\t\t\tlink.pre.apply(this, arguments);\r\n\t\t\t\t},\r\n\t\t\t\tpost: link.post\r\n\t\t\t};\r\n\t\t};\r\n\r\n\t\treturn $delegate;\r\n\t}]);\r\n}]);","/**\r\n * @ngdoc directive\r\n * @name WebCoreModule.directive:wcOfflineIndicator\r\n * @restrict A\r\n * @description\r\n * The wcOfflineIndicator directive includes a response interceptor to watch for when requests over the network fail. When things\r\n * fail, this directive will add an AlertConsole like message to notify the user of the situation.\r\n */\r\n'use strict';\r\nangular.module('WebCoreModule')\r\n\t.directive('wcOfflineIndicator', function() {\r\n\t\treturn {\r\n\t\t\trestrict: 'A',\r\n\t\t\ttemplate: '<div><div id=\"offline-indicator\" class=\"container-fluid\" ng-switch=\"checking\">' +\r\n\t\t\t'<uib-alert type=\"warning\"><span class=\"glyphicon glyphicon-warning-sign\" ng-switch-when=\"false\"></span><span class=\"glyphicon glyphicon-refresh glyphicon-refresh-animate\" ng-switch-when=\"true\"></span>' +\r\n\t\t\t'<span>{{\\'offlineIndicator.offlineMessage\\'|translate}} ' +\r\n\t\t\t'<a href ng-click=\"checkNetworkState()\">{{\\'offlineIndicator.retryConnection\\'|translate}}</a></span></uib-alert></div>' +\r\n\t\t\t'<div id=\"unavailable-offline\" class=\"container-fluid\" ng-switch=\"checking\">' +\r\n\t\t\t'<uib-alert type=\"danger\"><span class=\"glyphicon glyphicon-remove-circle\" ng-switch-when=\"false\"></span><span class=\"glyphicon glyphicon-refresh glyphicon-refresh-animate\" ng-switch-when=\"true\"></span>' +\r\n\t\t\t'<span>{{\\'offlineIndicator.unavailableMessage\\'|translate}} ' +\r\n\t\t\t'<a href ng-click=\"checkNetworkState()\">{{\\'offlineIndicator.retryConnection\\'|translate}}</a></span></uib-alert></div>' +\r\n\t\t\t'<div id=\"unauth-indicator\" class=\"container-fluid\" ng-switch=\"checking\">' +\r\n\t\t\t'<uib-alert type=\"warning\"><span class=\"glyphicon glyphicon-warning-sign\" ng-switch-when=\"false\"></span><span class=\"glyphicon glyphicon-refresh glyphicon-refresh-animate\" ng-switch-when=\"true\"></span>' +\r\n\t\t\t\t'<span>{{\\'unauthIndicator.unauthMessage\\'|translate}} ' +\r\n\t\t\t'<a href ng-click=\"wslLogin()\">{{\\'unauthIndicator.wslLogin\\'|translate}}</a></span></uib-alert></div></div>',\r\n\t\t\treplace: true,\r\n\t\t\tcontroller: ['WcHttpRequestService', '$scope', '$window', '$timeout', '$state', 'WcTranslateConfiguratorService', 'WcConstants',\r\n\t\t\t\tfunction(WcHttpRequestService, $scope, $window, $timeout, $state, WcTranslateConfiguratorService, WcConstants) {\r\n\r\n\t\t\t\tWcTranslateConfiguratorService.loadPartAndRefresh('WC-offlineIndicator');\r\n\r\n\t\t\t\t// Ensure directive is hidden initially\r\n\t\t\t\t$('#offline-indicator').hide();\r\n\t\t\t\t$('#unavailable-offline').hide();\r\n\t\t\t\t$('#unauth-indicator').hide();\r\n\r\n\t\t\t\t$scope.checking = false;\r\n\r\n\t\t\t\tthis.showOfflineIndicator = function() {\r\n\t\t\t\t\t$('#offline-indicator').show();\r\n\t\t\t\t\tvar alertBox = $('#offline-indicator .alert');\r\n\t\t\t\t\talertBox.addClass('pulse');\r\n\t\t\t\t\t$timeout(function(){\r\n\t\t\t\t\t\talertBox.removeClass('pulse');\r\n\t\t\t\t\t},2000);\r\n\t\t\t\t\t$window.scrollTo(0,1);\r\n\t\t\t\t};\r\n\r\n\t\t\t\tthis.hideOfflineIndicator = function() {\r\n\t\t\t\t\t$('#offline-indicator').hide();\r\n\t\t\t\t};\r\n\r\n\t\t\t\tthis.showUnavailableOffline = function() {\r\n\t\t\t\t\t$('#unavailable-offline').show();\r\n\t\t\t\t\tvar alertBox = $('#unavailable-offline .alert');\r\n\t\t\t\t\talertBox.addClass('pulse');\r\n\t\t\t\t\t$timeout(function(){\r\n\t\t\t\t\t\talertBox.removeClass('pulse');\r\n\t\t\t\t\t},2000);\r\n\t\t\t\t\t$window.scrollTo(0,1);\r\n\t\t\t\t};\r\n\r\n\t\t\t\tthis.hideUnavailableOffline = function() {\r\n\t\t\t\t\t$('#unavailable-offline').hide();\r\n\t\t\t\t};\r\n\r\n\t\t\t\tthis.showUnauthIndicator = function() {\r\n\t\t\t\t\t$('#unauth-indicator').show();\r\n\t\t\t\t\tvar alertBox = $('#unauth-indicator .alert');\r\n\t\t\t\t\talertBox.addClass('pulse');\r\n\t\t\t\t\t$timeout(function(){\r\n\t\t\t\t\t\talertBox.removeClass('pulse');\r\n\t\t\t\t\t},2000);\r\n\t\t\t\t\t$window.scrollTo(0,1);\r\n\t\t\t\t};\r\n\r\n\t\t\t\tthis.hideUnauthIndicator = function() {\r\n\t\t\t\t\t$('#unauth-indicator').hide();\r\n\t\t\t\t};\r\n\r\n\t\t\t\t$scope.checkNetworkState = function() {\r\n\t\t\t\t\t$scope.checking = true;\r\n\t\t\t\t\tWcHttpRequestService.getNetworkState().then(function(state){\r\n\t\t\t\t\t\t//after clicking the check link, force a redirect to wsl if needed\r\n\t\t\t\t\t\tif(state === 'unauthenticated') {\r\n\t\t\t\t\t\t\t$scope.wslLogin();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t$scope.checking = false;\r\n\t\t\t\t\t});\r\n\t\t\t\t};\r\n\r\n\t\t\t\t$scope.wslLogin = function() {\r\n\t\t\t\t\t$window.location.href = WcConstants.wslBaseUrl + encodeURIComponent($window.location.href);\r\n\t\t\t\t};\r\n\r\n\t\t\t\tWcHttpRequestService.addResponseInterceptor(angular.bind(this, function(){\r\n\t\t\t\t\t// hide indicators if we have a successful ReST response\r\n\t\t\t\t\tthis.hideOfflineIndicator();\r\n\t\t\t\t\tthis.hideUnavailableOffline();\r\n\t\t\t\t\tthis.hideUnauthIndicator();\r\n\t\t\t\t}));\r\n\r\n\t\t\t\t$scope.$on('Offline', angular.bind(this, function() {\r\n\t\t\t\t\tif($state.current.data && $state.current.data.unavailableOffline) {\r\n\t\t\t\t\t\tthis.hideOfflineIndicator();\r\n\t\t\t\t\t\tthis.showUnavailableOffline();\r\n\t\t\t\t\t\tthis.hideUnauthIndicator();\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse {\r\n\t\t\t\t\t\tthis.showOfflineIndicator();\r\n\t\t\t\t\t\tthis.hideUnavailableOffline();\r\n\t\t\t\t\t\tthis.hideUnauthIndicator();\r\n\t\t\t\t\t}\r\n\t\t\t\t}));\r\n\r\n\t\t\t\t$scope.$on('Unauthenticated', angular.bind(this, function() {\r\n\t\t\t\t\tthis.showUnauthIndicator();\r\n\t\t\t\t\tthis.hideOfflineIndicator();\r\n\t\t\t\t\tthis.hideUnavailableOffline();\r\n\t\t\t\t}));\r\n\r\n\t\t\t\treturn $scope.offlineIndicator = this;\r\n\t\t\t}]\r\n\t\t};\r\n\t});","/**\r\n * @ngdoc directive\r\n * @name WebCoreModule.directive:wcPageTitle\r\n * @restrict A\r\n * @description\r\n * The wcPageTitle directive will update the page's title by modifying the text of the title tag to include the name of the\r\n * application (the app-wide module name) and the current state of the application.\r\n */\r\n'use strict';\r\nangular.module('WebCoreModule')\r\n\t.directive('wcPageTitle', function() {\r\n\t\treturn {\r\n\t\t\trestrict: 'A',\r\n\t\t\tcontroller: ['$scope', '$state', '$compile', function($scope, $state, $compile) {\r\n\r\n\t\t\t\tvar firstRun = true;\r\n\r\n\t\t\t\t$scope.pageTitle = '';\r\n\r\n\t\t\t\tthis.cleanUpName = function(name) {\r\n\r\n\t\t\t\t\tvar cleanName = name;\r\n\r\n\t\t\t\t\tcleanName = cleanName.replace(/-/g, ' ');\r\n\r\n\t\t\t\t\tcleanName = cleanName.replace(/\\b./g, function(m) {\r\n\t\t\t\t\t\treturn m.toUpperCase();\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t\treturn cleanName;\r\n\t\t\t\t};\r\n\r\n\t\t\t\tthis.updatePageTitle = function() {\r\n\r\n\t\t\t\t\t// grab app name\r\n\t\t\t\t\tvar appName = $('#ng-app').attr('ng-app').replace('Module','');\r\n\r\n\t\t\t\t\t// grab state name\r\n\t\t\t\t\tvar stateName = this.cleanUpName($state.$current.name);\r\n\r\n\t\t\t\t\t// grab parent state's name (if applicable - e.g. workflows)\r\n\t\t\t\t\tvar parentStateName;\r\n\t\t\t\t\tif($state.$current.parent) {\r\n\t\t\t\t\t\tparentStateName = this.cleanUpName($state.get($state.$current.parent).name);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tvar tempPageTitle;\r\n\r\n\t\t\t\t\tif(parentStateName && (parentStateName.replace(/ /g,'') !== appName)) {\r\n\t\t\t\t\t\ttempPageTitle = parentStateName + ': ' + stateName + ' | ' + appName;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\ttempPageTitle = stateName + ' | ' + appName;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t$scope.pageTitle = tempPageTitle;\r\n\r\n\t\t\t\t};\r\n\r\n\t\t\t\t$scope.$on('$viewContentLoaded', angular.bind(this, function() {\r\n\t\t\t\t\tif(firstRun) {\r\n\t\t\t\t\t\tvar titleTag = $('title').attr({'wc-page-title':'','ng-bind':'pageTitle'});\r\n\t\t\t\t\t\ttitleTag.replaceWith($compile(titleTag)($scope));\r\n\t\t\t\t\t\tfirstRun = false;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.updatePageTitle();\r\n\t\t\t\t}));\r\n\r\n\t\t\t}]\r\n\r\n\t\t};\r\n\t});","/**\r\n * @ngdoc directive\r\n * @name WebCoreModule.directive:wcPagination\r\n * @restrict A\r\n * @priority 1\r\n * @scope\r\n * @param {array} wcPagination The array of data to filter through\r\n * @param {string} location Where pagination controls should be added. Can be top, bottom or both\r\n * @param {string=} resultsPerPage array literal defining the options that should show in the results per page drop down\r\n * @param {string=} resultsPerPageText string defining the text that should display as a label for the results per page drop down\r\n * @param {string=} showingResultsText string defining the text that should display in the 'showing results x-y of z' text\r\n * @param {number=} resultsItemCount number defining the default number of results to show per page\r\n * @description\r\n * The wcPagination directive adds pagination controls to a list of data in a view.\r\n */\r\n'use strict';\r\nangular.module('WebCoreModule')\r\n\t.directive('wcPagination', ['$templateCache', '$compile', function($templateCache, $compile) { // jshint ignore:line\r\n\t\treturn {\r\n\t\t\trestrict: 'A',\r\n\t\t\tpriority: 1,\r\n\t\t\tscope: {\r\n\t\t\t\twcPagination: '=',\r\n\t\t\t\tlocation: '@',\r\n\t\t\t\tresultsPerPage: '&',\r\n\t\t\t\tresultsPerPageText: '@',\r\n\t\t\t\tshowingResultsText: '@',\r\n\t\t\t\tresultsItemCount: '&',\r\n\t\t\t\tresponsiveBreakpoints: '&'\r\n\t\t\t},\r\n\t\t\tcontroller: ['$scope', '$window', '_', function($scope, $window, _) {\r\n\t\t\t\t$scope.searchResults = $scope.wcPagination;\r\n\r\n\t\t\t\tif(angular.isArray($scope.resultsPerPage())){\r\n\t\t\t\t\t$scope.resultsPerPage = $scope.resultsPerPage();\r\n\t\t\t\t} else {\r\n\t\t\t\t\t//set defaults if a value isn't given\r\n\t\t\t\t\t$scope.resultsPerPage = [10, 25, 50, 100];\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif(angular.isArray($scope.responsiveBreakpoints())){\r\n\t\t\t\t\t$scope.responsiveBreakpoints = $scope.responsiveBreakpoints();\r\n\t\t\t\t} else {\r\n\t\t\t\t\t//set defaults if a value isn't given\r\n\t\t\t\t\t$scope.responsiveBreakpoints = [430, 500, 600, 900];\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif(!$scope.resultsPerPageText){\r\n\t\t\t\t\t$scope.resultsPerPageText = 'Results per page: ';\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif(!$scope.showingResultsText){\r\n\t\t\t\t\t$scope.showingResultsText = 'Showing results ';\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif(angular.isNumber($scope.resultsItemCount())){\r\n\t\t\t\t\t$scope.resultsItemCount = $scope.resultsItemCount();\r\n\t\t\t\t} else {\r\n\t\t\t\t\t$scope.resultsItemCount = $scope.resultsPerPage[0];\r\n\t\t\t\t}\r\n\r\n\t\t\t\t$scope.totalItems = $scope.searchResults.length;\r\n\t\t\t\t$scope.itemsPerPage = $scope.resultsItemCount;\r\n\t\t\t\t$scope.currentPage = 1;\r\n\t\t\t\t$scope.boundaryLinks = true;\r\n\t\t\t\t$scope.maxSize = 5;\r\n\t\t\t\t$scope.filteredSearchResults = [];\r\n\t\t\t\t$scope.updatePageResultsCount = function() {\r\n\t\t\t\t\t$scope.itemsPerPage = $scope.resultsItemCount;\r\n\t\t\t\t};\r\n\t\t\t\t$scope.begin = 1;\r\n\t\t\t\t$scope.end = $scope.begin + $scope.itemsPerPage;\r\n\r\n\t\t\t\t$scope.$watchCollection(function() {\r\n\t\t\t\t\t\treturn $scope.currentPage + $scope.itemsPerPage;\r\n\t\t\t\t\t}, function() {\r\n\t\t\t\t\t\t$scope.begin = (($scope.currentPage - 1) * $scope.itemsPerPage);\r\n\t\t\t\t\t\t$scope.end = $scope.begin + $scope.itemsPerPage;\r\n\t\t\t\t\t\tif($scope.end > $scope.totalItems) {\r\n\t\t\t\t\t\t\t$scope.end = $scope.totalItems;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t$scope.wcPagination = $scope.searchResults.slice($scope.begin, $scope.end);\r\n\t\t\t\t\t\t$window.scrollTo(0, 1);\r\n\t\t\t\t\t}\r\n\t\t\t\t);\r\n\r\n\t\t\t\t$scope.currentBreakpoint = '';\r\n\t\t\t\t//responsive stuff\r\n\t\t\t\t$scope.$watch(function(){\r\n\t\t\t\t\treturn $scope.currentBreakpoint;\r\n\t\t\t\t}, function(newValue, oldValue) {\r\n\t\t\t\t\tif(newValue !== oldValue) {\r\n\t\t\t\t\t\tif(newValue === 'xs') {\r\n\t\t\t\t\t\t\t$(\".pagination-row\").addClass(\"hidden\");\r\n\t\t\t\t\t\t\t$scope.itemsPerPage = $scope.searchResults.length;\r\n\t\t\t\t\t\t\t$scope.maxSize = 0;\r\n\t\t\t\t\t\t\t$scope.boundaryLinks = false;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse if(newValue === 'sm') {\r\n\t\t\t\t\t\t\t$(\".pagination-row\").removeClass(\"hidden\");\r\n\t\t\t\t\t\t\t$scope.itemsPerPage = $scope.resultsItemCount;\r\n\t\t\t\t\t\t\t$scope.maxSize = 0;\r\n\t\t\t\t\t\t\t$scope.boundaryLinks = false;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse if(newValue === 'md') {\r\n\t\t\t\t\t\t\t$(\".pagination-row\").removeClass(\"hidden\");\r\n\t\t\t\t\t\t\t$scope.itemsPerPage = $scope.resultsItemCount;\r\n\t\t\t\t\t\t\t$scope.maxSize = 0;\r\n\t\t\t\t\t\t\t$scope.boundaryLinks = false;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse if(newValue === 'lg') {\r\n\t\t\t\t\t\t\t$(\".pagination-row\").removeClass(\"hidden\");\r\n\t\t\t\t\t\t\t$scope.itemsPerPage = $scope.resultsItemCount;\r\n\t\t\t\t\t\t\t$scope.maxSize = 1;\r\n\t\t\t\t\t\t\t$scope.boundaryLinks = true;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse {\r\n\t\t\t\t\t\t\t$scope.maxSize = 5;\r\n\t\t\t\t\t\t\t$scope.boundaryLinks = true;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\r\n\t\t\t\tvar resizeHandler = function(){\r\n\t\t\t\t\t//<=430 is default\r\n\t\t\t\t\tif(window.innerWidth <= $scope.responsiveBreakpoints[0] && $scope.currentBreakpoint !== 'xs') {\r\n\t\t\t\t\t\t$scope.currentBreakpoint = 'xs';\r\n\t\t\t\t\t\t$scope.$apply();\r\n\t\t\t\t\t}\r\n\t\t\t\t\t//>430 and <=500 is default\r\n\t\t\t\t\telse if((window.innerWidth > $scope.responsiveBreakpoints[0] && window.innerWidth <= $scope.responsiveBreakpoints[1]) && $scope.currentBreakpoint !== 'sm') {\r\n\t\t\t\t\t\t$scope.currentBreakpoint = 'sm';\r\n\t\t\t\t\t\t$scope.$apply();\r\n\t\t\t\t\t}\r\n\t\t\t\t\t//>500 and <=600 is default\r\n\t\t\t\t\telse if((window.innerWidth > $scope.responsiveBreakpoints[1] && window.innerWidth <= $scope.responsiveBreakpoints[2]) && $scope.currentBreakpoint !== 'md') {\r\n\t\t\t\t\t\t$scope.currentBreakpoint = 'md';\r\n\t\t\t\t\t\t$scope.$apply();\r\n\t\t\t\t\t}\r\n\t\t\t\t\t//>600 and <=900 is default\r\n\t\t\t\t\telse if((window.innerWidth > $scope.responsiveBreakpoints[2] && window.innerWidth <= $scope.responsiveBreakpoints[3]) && $scope.currentBreakpoint !== 'lg') {\r\n\t\t\t\t\t\t$scope.currentBreakpoint = 'lg';\r\n\t\t\t\t\t\t$scope.$apply();\r\n\t\t\t\t\t}\r\n\t\t\t\t\t//>900 is default\r\n\t\t\t\t\telse if(window.innerWidth > $scope.responsiveBreakpoints[3] && $scope.currentBreakpoint !== 'xl') {\r\n\t\t\t\t\t\t$scope.currentBreakpoint = 'xl';\r\n\t\t\t\t\t\t$scope.$apply();\r\n\t\t\t\t\t}\r\n\t\t\t\t};\r\n\t\t\t\t//debounce this handler to avoid rapid-fire resize events\r\n\t\t\t\tangular.element($window).bind('resize', _.debounce(resizeHandler, 300));\r\n\r\n\t\t\t\t//finally, call the resizeHandler once to initialize our breakpoint var\r\n\t\t\t\tsetTimeout(resizeHandler, 0);\r\n\t\t\t}],\r\n\t\t\tlink: function(scope, elem/*, attr, ctrl*/) {\r\n\t\t\t\t//leave template here instead of in it's own file, as it's difficult to load the template properly from a file for this type of inclusion.\r\n\t\t\t\tvar templateTop = '<div class=\"row pagination-row\"><div class=\"col-sm-4 col-xs-6\">' +\r\n\t\t\t\t\t'<label for=\"results-per-page-top\" class=\"control-label\">{{resultsPerPageText}}</label>' +\r\n\t\t\t\t\t'<select ng-model=\"resultsItemCount\" ng-options=\"result for result in resultsPerPage\" id=\"results-per-page-top\" name=\"resultsPerPage\" ng-change=\"updatePageResultsCount();\"></select></div><div class=\"col-sm-4 hidden-xs text-center results-data\">{{showingResultsText}} {{begin+1}}-{{end}} of {{totalItems}}</div><div class=\"col-sm-4 col-xs-6 text-right\"><uib-pagination total-items=\"totalItems\" items-per-page=\"resultsItemCount\" ng-model=\"currentPage\" max-size=\"maxSize\" boundary-links=\"boundaryLinks\" previous-text=\"&#xe071\" next-text=\"&#xe075\" first-text=\"&#xe069\" last-text=\"&#xe077\"></uib-pagination></div></div>';\r\n\t\t\t\tvar templateBottom = '<div class=\"row pagination-row\"><div class=\"col-sm-4 col-xs-6\">' +\r\n\t\t\t\t\t'<label for=\"results-per-page-bottom\" class=\"control-label\">{{resultsPerPageText}}</label>' +\r\n\t\t\t\t\t'<select ng-model=\"resultsItemCount\" ng-options=\"result for result in resultsPerPage\" id=\"results-per-page-bottom\" name=\"resultsPerPage\" ng-change=\"updatePageResultsCount();\"></select></div><div class=\"col-sm-4 hidden-xs text-center results-data\">{{showingResultsText}} {{begin+1}}-{{end}} of {{totalItems}}</div><div class=\"col-sm-4 col-xs-6 text-right\"><uib-pagination total-items=\"totalItems\" items-per-page=\"resultsItemCount\" ng-model=\"currentPage\" max-size=\"maxSize\" boundary-links=\"boundaryLinks\" previous-text=\"&#xe071\" next-text=\"&#xe075\" first-text=\"&#xe069\" last-text=\"&#xe077\"></uib-pagination></div></div>';\r\n\r\n\t\t\t\tif(scope.location === 'top' || scope.location === 'both') {\r\n\t\t\t\t\telem.before($compile(templateTop)(scope));\r\n\t\t\t\t}\r\n\t\t\t\tif(scope.location === 'bottom' || scope.location === 'both') {\r\n\t\t\t\t\telem.after($compile(templateBottom)(scope));\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t};\r\n\t}]);","/**\r\n * @ngdoc directive\r\n * @name WebCoreModule.directive:wcProtectedResource\r\n * @restrict A\r\n * @param {string=} wcProtectedResource string or array literal defining the resource:action pairs that define authorization for the tag\r\n * @description\r\n * The wcProtectedResource directive removes a tag from or adds a tag back to the DOM based on authorization rules. The directive\r\n * leverages the wcAuthorizationService to retrieve the authorization status for the current user from a restful endpoint.\r\n */\r\n'use strict';\r\nangular.module('WebCoreModule')\r\n\t.directive('wcProtectedResource', function() {\r\n\t\treturn {\r\n\t\t\tpriority: -500,\r\n\t\t\trestrict: 'A',\r\n\t\t\trequire: ['wcProtectedResource', '?^wcDataTable'],\r\n\t\t\tcontroller: ['WcAuthorizationService', '$element', '$attrs',\r\n\t\t\t\tfunction(WcAuthorizationService, $element, $attrs) {\r\n\t\t\t\t\tthis.checkAuthorization = function() {\r\n\t\t\t\t\t\tvar criteria = null;\r\n\t\t\t\t\t\tvar policies = $attrs.wcProtectedResource;\r\n\r\n\t\t\t\t\t\tif (policies) {\r\n\r\n\t\t\t\t\t\t\t// check to see if we have an authorization criteria in-line\r\n\t\t\t\t\t\t\tif (policies.indexOf('|') > -1) {\r\n\t\t\t\t\t\t\t\t// extract \"any\" or \"all\"\r\n\t\t\t\t\t\t\t\tcriteria = policies.slice(policies.indexOf('|') + 1, policies.length).toString().trim();\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t// if we have a criteria, clean up string so we can easily extract policies\r\n\t\t\t\t\t\t\tif (criteria) {\r\n\t\t\t\t\t\t\t\tpolicies = policies.slice(0, policies.indexOf('|'));\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t// support multiple policies\r\n\t\t\t\t\t\t\tpolicies = policies.split(',');\r\n\r\n\t\t\t\t\t\t\t// remove whitespace\r\n\t\t\t\t\t\t\tfor (var i = 0; i < policies.length; i++) {\r\n\t\t\t\t\t\t\t\tpolicies[i] = policies[i].trim();\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tpolicies = [];\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tvar isAuth = WcAuthorizationService.isAuthorized(policies, criteria);\r\n\r\n\t\t\t\t\t\tisAuth.then(function(authorized) {\r\n\t\t\t\t\t\t\tif (authorized === false) {\r\n\t\t\t\t\t\t\t\t$element.remove();\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t};\r\n\t\t\t\t}\r\n\t\t\t],\r\n\t\t\tcompile: function() {\r\n\t\t\t\treturn {\r\n\t\t\t\t\tpost: function() {\r\n\t\t\t\t\t\tvar controllers = arguments[3];\r\n\t\t\t\t\t\tvar protectedResourceCtrl = controllers[0];\r\n\t\t\t\t\t\tvar datatableCtrl = controllers[1];\r\n\t\t\t\t\t\tif (datatableCtrl) {\r\n\t\t\t\t\t\t\tdatatableCtrl.checkAuthorization = protectedResourceCtrl.checkAuthorization();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tprotectedResourceCtrl.checkAuthorization();\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t};\r\n\t\t\t}\r\n\t\t};\r\n\t});","/**\r\n * @ngdoc directive\r\n * @name WebCoreModule.directive:wcValidationIndicator\r\n * @restrict A\r\n * @priority 1\r\n * @param {string=} wcValidationIndicator string defining the field identifier text that should be used in the validation message\r\n * @description\r\n * The wcValidationIndicator directive utilizes Angular's isValid and isRequired checks to display messages according to the error\r\n * state at the field level. The directive supports all form input types that are currently a part of the FRF.\r\n */\r\n'use strict';\r\nangular.module('WebCoreModule')\r\n\t.directive('wcValidationIndicator', ['_', '$translate', '$timeout', function(_, $translate, $timeout) {\r\n\t\treturn {\r\n\t\t\trestrict: 'A',\r\n\t\t\tpriority: 1,\r\n\t\t\tlink: function(scope, elem, attr) { // jshint ignore:line\r\n\t\t\t\t//wrap in timeout of zero seconds to force a digest. This ensures nested directives finish before the indicator directive runs\r\n\t\t\t\t$timeout(function(){\r\n\t\t\t\t\t//fieldset is caps here thanks to the browser defining it that way\r\n\t\t\t\t\tif(!elem[0].form || elem[0].tagName === 'FIELDSET'){\r\n\t\t\t\t\t\telem = $(elem).find('input');\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tvar formName = elem[0].form.attributes.name.value;\r\n\t\t\t\t\tvar ngFormObj = scope[formName];\r\n\r\n\t\t\t\t\tif(!ngFormObj) {\r\n\t\t\t\t\t\t//break out of isolate scope and then walk the tree for the form obj\r\n\t\t\t\t\t\tngFormObj = scope.$parent[formName];\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t//modals use ctrl.form.formName instead of ctrl.formName\r\n\t\t\t\t\t//handle it here\r\n\t\t\t\t\tif(!ngFormObj && formName.indexOf(\".\") > -1) {\r\n\t\t\t\t\t\tformName = formName.split('.');\r\n\t\t\t\t\t\tngFormObj = scope.$parent[formName[0]][formName[1]];\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tvar elemName = elem[0].name;\r\n\t\t\t\t\t//sometimes the reset element will not carry the name attr (I'm looking at you, ui-select).\r\n\t\t\t\t\t//in this case, instead grab it off of the attr object that was passed in\r\n\t\t\t\t\tif(!elemName) {\r\n\t\t\t\t\t\telemName = attr.name;\r\n\t\t\t\t\t\t//if this still isn't right, see if we are in a datatable\r\n\t\t\t\t\t\tif(!elemName) {\r\n\t\t\t\t\t\t\tif(attr.wcResponsiveTable === \"\") {\r\n\t\t\t\t\t\t\t\telemName = 'wcResponsiveTable';\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tvar elemCtrl;\r\n\t\t\t\t\t//need to select the controller in a different way if we are within a modal\r\n\t\t\t\t\tif(angular.isArray(formName)) {\r\n\t\t\t\t\t\t//take the controller's name off of the ng-model.\r\n\t\t\t\t\t\t//todo - if there's a better way to do this, DO IT!!\r\n\t\t\t\t\t\tvar ctrlName = elem[0].attributes[\"ng-model\"].nodeValue.split('.')[0];\r\n\t\t\t\t\t\telemCtrl = scope.$parent[ctrlName];\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse {\r\n\t\t\t\t\t\telemCtrl = elem.controller();\r\n\t\t\t\t\t}\r\n\t\t\t\t\tvar formGroup = $(elem).closest('.form-group')[0];\r\n\t\t\t\t\t//datatables will not be in a formgroup. add one and refer to it\r\n\t\t\t\t\tif(!formGroup || elemName === 'wcResponsiveTable'){\r\n\t\t\t\t\t\tformGroup = $('<div class=\"form-group col-xs-12\"></div>').insertBefore('#'+elem.context.attributes.id.value);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tvar fieldNameTranslateString = attr.wcValidationIndicator;\r\n\r\n\r\n\t\t\t\t\tvar errorTypes = {\r\n\t\t\t\t\t\tdefaultMsg: 'Please add error message for {{n}}.',\r\n\t\t\t\t\t\temail: 'Please enter a valid email address.',\r\n\t\t\t\t\t\tminlength: 'Please enter at least {{n}} characters.',\r\n\t\t\t\t\t\tmaxlength: 'You have entered more than {{n}} characters.',\r\n\t\t\t\t\t\tmin: 'Please enter the number greater than {{n}}.',\r\n\t\t\t\t\t\tmax: 'Please enter the number lesser than {{n}}.',\r\n\t\t\t\t\t\tminMaxRange: 'Please enter between {{min}} and {{max}}.',\r\n\t\t\t\t\t\trequired: '{{fieldName}} is required.',\r\n\t\t\t\t\t\ttableRequired: '{{fieldName}} selection is required.',\r\n\t\t\t\t\t\tdate: 'Please enter a valid date.',\r\n\t\t\t\t\t\tpattern: 'The pattern entered is incorrect.',\r\n\t\t\t\t\t\tnumber: 'Please enter a valid number.',\r\n\t\t\t\t\t\turl: 'Please enter a valid URL.',\r\n\t\t\t\t\t\tinValid: '{{fieldName}} is invalid.'\r\n\t\t\t\t\t};\r\n\r\n\t\t\t\t\tvar errType, errorMessage, errorMessageDOM, n, min, max, validatorAttrs, errorMsgId, requiredText;\r\n\r\n\t\t\t\t\tvar buildErrorMsg = function (errType) {\r\n\t\t\t\t\t\tif(validatorAttrs.length>0){\r\n\t\t\t\t\t\t\tif(ngFormObj[elemName].$error.hasOwnProperty('required')){\r\n\t\t\t\t\t\t\t\terrorMessage = $translate.instant(errorTypes.required, {fieldName:fieldNameTranslateString});\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\telse {\r\n\t\t\t\t\t\t\t\terrorMessage = $translate.instant(errorTypes.inValid, {fieldName:fieldNameTranslateString});\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse {\r\n\t\t\t\t\t\t\tn =attr[errType];\r\n\t\t\t\t\t\t\tif((errType==='min'||errType==='max')&&(attr.min&&attr.max)) {\r\n\t\t\t\t\t\t\t\terrType = 'minMaxRange';\r\n\t\t\t\t\t\t\t\tmin=attr.min;\r\n\t\t\t\t\t\t\t\tmax=attr.max;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\terrorMessage = $translate.instant(errorTypes[errType], {n: n, fieldName:fieldNameTranslateString, min:min, max:max});\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t};\r\n\r\n\r\n\t\t\t\t\t//handy regex from http://stackoverflow.com/questions/8955533/javascript-jquery-split-camelcase-string-and-add-hyphen-rather-than-space\r\n\t\t\t\t\tvar elemNameSnakeCase = elemName.replace(/([a-z])([A-Z])/g, '$1-$2').toLowerCase();\r\n\t\t\t\t\terrorMsgId = elemNameSnakeCase + '-error';\r\n\r\n\t\t\t\t\tvar buildErrorMsgDOM = function (errType) {\r\n\t\t\t\t\t\tbuildErrorMsg(errType);\r\n\t\t\t\t\t\terrorMessageDOM = $('<span id=\"' + errorMsgId + '\" class=\"label label-danger\"><span class=\"glyphicon glyphicon-remove-sign\"></span><span class=\"label-text\">' + errorMessage + '</span></span>');\r\n\t\t\t\t\t};\r\n\r\n\t\t\t\t\tvar watchListener = function() {\r\n\t\t\t\t\t\t//first, remove potential leftover messages.\r\n\t\t\t\t\t\t$(formGroup).find('#' + errorMsgId).remove();\r\n\r\n\t\t\t\t\t\t//when the validation error occurs, insert the error messages and mark the container\r\n//\t\t\t\t\t\tif(!ngFormObj[elemName].$valid && elemCtrl.isFormSubmitted) {\r\n\t\t\t\t\t\tif(!ngFormObj[elemName].$valid && ngFormObj.$submitted) {\r\n\t\t\t\t\t\t\tvalidatorAttrs = _.filter(_.keys(attr), function(item){\r\n\t\t\t\t\t\t\t\treturn (item.indexOf('Validator') > -1);\r\n\t\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\t\tvar errorCases = _.toPairs(ngFormObj[elemName].$error);\r\n\r\n\t\t\t\t\t\t\tfor(var i=0; i<errorCases.length; i++) {\r\n\t\t\t\t\t\t\t\terrType = errorCases[i][0];\r\n\t\t\t\t\t\t\t\tbuildErrorMsgDOM(errType);\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tif(errType==='tableRequired') {\r\n                                requiredText = $(formGroup).html();\r\n                                $(formGroup).html(errorMessageDOM);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\telse {\r\n                                $(formGroup).append(errorMessageDOM);\r\n                            }\r\n\t\t\t\t\t\t\t$(formGroup).addClass('has-error');\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t$(formGroup).removeClass('has-error');\r\n\t\t\t\t\t\t\t$(formGroup).find('#' + errorMsgId).remove();\r\n                            if(errType==='tableRequired') {\r\n                            \t$(formGroup).html(requiredText);\r\n                            }\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t};\r\n\r\n\t\t\t\t\tscope.$watch(function(){\r\n\t\t\t\t\t\treturn ngFormObj[elemName].$valid;\r\n\t\t\t\t\t}, function(){\r\n\t\t\t\t\t\twatchListener();\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t\tscope.$watch(function(){\r\n\t\t\t\t\t\treturn ngFormObj.$submitted;\r\n\t\t\t\t\t\t//return elemCtrl.isFormSubmitted;\r\n\t\t\t\t\t}, function(){\r\n\t\t\t\t\t\twatchListener();\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t\tscope.$watch(function(){\r\n\t\t\t\t\t\treturn ngFormObj[elemName].$error;\r\n\t\t\t\t\t}, function(){\r\n\t\t\t\t\t\twatchListener();\r\n\t\t\t\t\t}, true);\r\n\t\t\t\t},0);\r\n\t\t\t}\r\n\t\t};\r\n\t}]);\r\n","/**\r\n * @ngdoc directive\r\n * @name WebCoreModule.directive:wcDataTable\r\n * @restrict A\r\n * @requires ngModel\r\n * @scope\r\n * @param {object} wcDataTable Options for overriding the table's default configuration\r\n * @param {string=} headerTemplate Optional string pointing to a file containing HTML defining the table's headers\r\n * @param {array} columns array of objects defining how the columns relate to the dataset and how they should be rendered\r\n * @param {array=} columnDefs array of objects defining how the columns should be hidden or sorted by default\r\n * @param {object=} responsiveColumnDefs array of objects defining how the columns should respond when the viewport with changes\r\n * @param {array} data the array of data to be displayed in the table\r\n * @param {number=} checkBoxCol the index of the column to be used to house the table's checkboxes\r\n * @param {number=} radioButtonCol the index of the column to be used to house the table's radio buttons\r\n * @description\r\n * The wcDataTable directive wraps the functionality of the jQuery DataTables component into an Angular context construct.\r\n * Using the various parameters, the screen designer can implement a table with various features offered by the jQuery component.\r\n */\r\n'use strict';\r\nangular.module('WebCoreModule')\r\n\t.directive('wcDataTable', ['$compile', '$window', '_',\r\n\t\tfunction($compile, $window, _) {\r\n\t\t\treturn {\r\n\t\t\t\trestrict: 'A',\r\n\t\t\t\trequire: ['wcDataTable', '?ngModel'],\r\n\t\t\t\tscope: {\r\n\t\t\t\t\theaderTemplate: '@headerTemplate',\r\n\t\t\t\t\toverrideOptions: '@wcDataTable',\r\n\t\t\t\t\tcolumns: '=columns',\r\n\t\t\t\t\tcolumnDefs: '@columnDefs',\r\n\t\t\t\t\tresponsiveColumnDefs: '@responsiveColumnDefs',\r\n\t\t\t\t\tdata: '=data',\r\n\t\t\t\t\tcheckBoxCol: '@checkBoxCol',\r\n\t\t\t\t\tradioButtonCol: '@radioButtonCol',\r\n\t\t\t\t\tselectedValue: '@selectedValue',\r\n\t\t\t\t\tngModel: '=ngModel',\r\n\t\t\t\t\tname: '@name'\r\n\r\n\t\t\t\t\t// showPaginationButtonText: '@showPaginationButtonText'\r\n\t\t\t\t},\r\n\t\t\t\ttransclude: true,\r\n\t\t\t\treplace: true,\r\n\t\t\t\ttemplate: '<div ng-transclude></div>',\r\n\t\t\t\tcontroller: ['$compile', '$scope', '$element', '$attrs', 'WcDataTableService',\r\n\t\t\t\t\tfunction($compile, $scope, $element, $attrs, WcDataTableService) {\r\n\r\n\t\t\t\t\t\tthis.defaultOptions = {\r\n\t\t\t\t\t\t\tbAutoWidth: false,\r\n\t\t\t\t\t\t\tbStateSave: false,\r\n\t\t\t\t\t\t\tbPaginate: true,\r\n\t\t\t\t\t\t\tsPaginationType: 'bootstrap_full_numbers',\r\n\t\t\t\t\t\t\tsDom: '<\"row paginator paginator-top\"<\"col-xs-3\"l><\"col-xs-4 text-right\"i><\"col-xs-5 text-right\"p>>t<\"row paginator paginator-bottom\"<\"col-xs-3\"l><\"col-xs-4 text-right\"i><\"col-xs-5 text-right\"p>>>',\r\n\t\t\t\t\t\t\tbLengthChange: true,\r\n\t\t\t\t\t\t\tbFilter: false,\r\n\t\t\t\t\t\t\tbDestroy: true,\r\n\t\t\t\t\t\t\tfnCreatedRow: function(row, data, dataIndex) {\r\n\t\t\t\t\t\t\t\t// jshint unused:true\r\n\t\t\t\t\t\t\t\tvar theRow = $(row)[0];\r\n\t\t\t\t\t\t\t\tvar theCells = $(theRow).find('td');\r\n\t\t\t\t\t\t\t\tvar cellWithLinks = $($(theCells)[0]);\r\n\r\n\t\t\t\t\t\t\t\t// updated clickedRowData\r\n\t\t\t\t\t\t\t\t$(theRow).find('a, button').on('click', angular.bind(this, function() {\r\n\t\t\t\t\t\t\t\t\t// use index to find value in original data set because mRender could have overwritten the local copy\r\n\t\t\t\t\t\t\t\t\tWcDataTableService.setClickedRowData($scope.data[dataIndex]);\r\n\t\t\t\t\t\t\t\t}));\r\n\r\n\t\t\t\t\t\t\t\t//we only compile the first cell in each row, as this currently is the only location for angular controls\r\n\t\t\t\t\t\t\t\t$compile(cellWithLinks.contents())($scope.$parent);\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\taaSorting: [\r\n\t\t\t\t\t\t\t\t[2, 'asc']\r\n\t\t\t\t\t\t\t]\r\n\t\t\t\t\t\t};\r\n\r\n\t\t\t\t\t\tthis.options = {};\r\n\t\t\t\t\t\tthis.useResponsiveColumns = false;\r\n\t\t\t\t\t\tthis.currentBreakpoint = -1;\r\n\t\t\t\t\t\tthis.previousBreakPoint = -1;\r\n\t\t\t\t\t\tthis.toggleCheckAll = $scope.checkBoxCol === parseInt($scope.checkBoxCol);\r\n\r\n\t\t\t\t\t\tthis.checkAuthorization = function() {\r\n\t\t\t\t\t\t};\r\n\r\n\t\t\t\t\t\tthis.getToggleCheckAllExists = function() {\r\n\t\t\t\t\t\t\treturn this.toggleCheckAll;\r\n\t\t\t\t\t\t};\r\n\r\n\t\t\t\t\t\tthis.initialize = function(ngModelController) {\r\n\t\t\t\t\t\t\t//first thing - redirect the alert warnings to the console\r\n\t\t\t\t\t\t\t//credit to stack overflow poster 'orad': http://stackoverflow.com/questions/11941876/correctly-suppressing-warnings-in-datatables\r\n\t\t\t\t\t\t\t$window.alert = (function() {\r\n\t\t\t\t\t\t\t\tvar nativeAlert = $window.alert;\r\n\t\t\t\t\t\t\t\treturn function(message) {\r\n\t\t\t\t\t\t\t\t\t$window.alert = nativeAlert;\r\n\t\t\t\t\t\t\t\t\tmessage.indexOf(\"DataTables warning\") === 0 ?\r\n\t\t\t\t\t\t\t\t\t\tconsole.warn(message) :\r\n\t\t\t\t\t\t\t\t\t\tnativeAlert(message);\r\n\t\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\t})();\r\n\r\n\t\t\t\t\t\t\tthis.table = $element.find('table');\r\n\r\n\t\t\t\t\t\t\t// apply DataTable options, use defaults if none specified by user\r\n\t\t\t\t\t\t\tvar options = {};\r\n\t\t\t\t\t\t\tif($scope.overrideOptions) {\r\n\t\t\t\t\t\t\t\toptions = $scope.$eval($scope.overrideOptions);\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t//column configuration\r\n\t\t\t\t\t\t\tif($scope.columns) {\r\n\t\t\t\t\t\t\t\toptions.aoColumns = angular.copy($scope.columns);\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tthis.showcheckBoxColumn = $scope.checkBoxCol === parseInt($scope.checkBoxCol);\r\n\t\t\t\t\t\t\tthis.showRadioColumn = $scope.radioButtonCol === parseInt($scope.radioButtonCol);\r\n\t\t\t\t\t\t\tthis.inValidCombination = this.showcheckBoxColumn && this.showRadioColumn;\r\n\t\t\t\t\t\t\tthis.hasInputField = this.showcheckBoxColumn || this.showRadioColumn;\r\n\r\n\t\t\t\t\t\t\tif(this.inValidCombination) {\r\n\t\t\t\t\t\t\t\tvar errorMessage = 'YOU CANNOT HAVE A DATATABLE WITH BOTH A CHECKBOX COLUMN AND A RADIOBUTTON COLUMN - IT MESSES WITH THE DATA';\r\n\t\t\t\t\t\t\t\tconsole.error(errorMessage);\r\n\t\t\t\t\t\t\t\t$element.prepend('<div class=\"alert alert-danger\"><td colspan=\"\"><p>' + errorMessage + '</p></div>');\r\n\t\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t// Build required text for input attributes\r\n\t\t\t\t\t\t\tvar requiredString = $attrs.required ? 'required' : '';\r\n\t\t\t\t\t\t\tvar inputName = $scope.name ? 'name=\"' + $scope.name + '\"' : '';\r\n\r\n\t\t\t\t\t\t\t// Error msg if has input field without ng-model\r\n\t\t\t\t\t\t\tif(this.hasInputField && !$attrs.ngModel) {\r\n\t\t\t\t\t\t\t\tvar errorMessage = 'Must define the \"ng-model\" attribute IF a checkbox or radio column index is defined.';\r\n\t\t\t\t\t\t\t\tconsole.error(errorMessage);\r\n\t\t\t\t\t\t\t\t$element.prepend('<div class=\"alert alert-danger\"><td colspan=\"\"><p>' + errorMessage + '</p></div>');\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t// Error msg if has input field without name\r\n\t\t\t\t\t\t\tif(this.hasInputField && !inputName) {\r\n\t\t\t\t\t\t\t\tvar errorMessage = 'Must define the \"name\" attribute IF a checkbox or radio column index is defined.';\r\n\t\t\t\t\t\t\t\tconsole.error(errorMessage);\r\n\t\t\t\t\t\t\t\t$element.prepend('<div class=\"alert alert-danger\"><td colspan=\"\"><p>' + errorMessage + '</p></div>');\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t// Error msg if has input field without the selected value (primary key)\r\n\t\t\t\t\t\t\tif(this.hasInputField && !$scope.selectedValue) {\r\n\t\t\t\t\t\t\t\tvar errorMessage = 'Must define the \"selected-value\" attribute IF a checkbox or radio column index is defined.';\r\n\t\t\t\t\t\t\t\tconsole.error(errorMessage);\r\n\t\t\t\t\t\t\t\t$element.prepend('<div class=\"alert alert-danger\"><td colspan=\"\"><p>' + errorMessage + '</p></div>');\r\n\t\t\t\t\t\t\t}\r\n\r\n\r\n\t\t\t\t\t\t\t// Error msg if required without input field\r\n\t\t\t\t\t\t\tif(!this.hasInputField && requiredString) {\r\n\t\t\t\t\t\t\t\tvar errorMessage = 'Must define a checkbox or radio column index IF the HTML5 required attribute is set';\r\n\t\t\t\t\t\t\t\tconsole.error(errorMessage);\r\n\t\t\t\t\t\t\t\t$element.prepend('<div class=\"alert alert-danger\"><td colspan=\"\"><p>' + errorMessage + '</p></div>');\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t//CheckBox column\r\n\t\t\t\t\t\t\tif(this.showcheckBoxColumn) { //so that check boxes show even if chosen column is index 0\r\n\t\t\t\t\t\t\t\tvar checkBoxCol = {\r\n\t\t\t\t\t\t\t\t\tsTitle: '<input type=\"checkbox\" id=\"toggleAll\" class=\"toggle-check-all\"/><label for=\"toggleAll\" class=\"hidden\">Toggle Check All</label>',\r\n\t\t\t\t\t\t\t\t\tsClass: 'text-center',\r\n\t\t\t\t\t\t\t\t\tmData: $scope.selectedValue,\r\n\t\t\t\t\t\t\t\t\tmRender: function(data, type, full) { // jshint ignore:line\r\n\r\n\t\t\t\t\t\t\t\t\t\tif(angular.toJson(data) === angular.toJson(full[$scope.selectedValue]) && (new String(full[$scope.selectedValue]).indexOf('<label') === -1)) {\r\n\t\t\t\t\t\t\t\t\t\t\t// will overwrite row's data value\r\n\t\t\t\t\t\t\t\t\t\t\treturn '<label class=\"sr-only\" for=\"checkbox_' + full[$scope.selectedValue] + '\">Select ' + full[$scope.selectedValue] + '</label><input type=\"checkbox\" id=\"checkbox_' + full[$scope.selectedValue] + '\" ' + inputName + ' ' + requiredString + ' class=\"checkbox table-check-box\" value=\"' + full[$scope.selectedValue] + '\"/>';\r\n\t\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\t\treturn data;\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\r\n\r\n\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\tbSortable: false\r\n\t\t\t\t\t\t\t\t};\r\n\r\n\t\t\t\t\t\t\t\tif(!(angular.toJson(options.aoColumns[$scope.checkBoxCol]) === angular.toJson(checkBoxCol))) {\r\n\t\t\t\t\t\t\t\t\t//check if checkbox column is already here, so we don't add it multiple times\r\n\t\t\t\t\t\t\t\t\toptions.aoColumns.splice($scope.checkBoxCol, 0, checkBoxCol);\r\n\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\t$(this.table).addClass('table-toggle-check-all');\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t//RadioButton column\r\n\t\t\t\t\t\t\tif(this.showRadioColumn) { //so that radio buttons show even if chosen column is index 0\r\n\t\t\t\t\t\t\t\tvar radioButtonCol = {\r\n\t\t\t\t\t\t\t\t\tsTitle: '',\r\n\t\t\t\t\t\t\t\t\tsClass: 'text-center',\r\n\t\t\t\t\t\t\t\t\tmData: $scope.selectedValue,\r\n\t\t\t\t\t\t\t\t\tmRender: function(data) {\r\n\t\t\t\t\t\t\t\t\t\tif(data) {\r\n\t\t\t\t\t\t\t\t\t\t\treturn '<label class=\"sr-only\" for=\"radio_' + data + '\">Select ' + data + '</label><input type=\"radio\" id=\"radio_' + data + '\" ' + inputName + ' ' + requiredString + ' class=\"radio table-radio-button\" value=\"' + data + '\"/>';\r\n\t\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\t\treturn '';\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\tbSortable: false\r\n\t\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\t\tif(!(angular.toJson(options.aoColumns[$scope.radioButtonCol]) === angular.toJson(radioButtonCol))) {\r\n\t\t\t\t\t\t\t\t\t//check if radioButton column is already here, so we don't add it multiple times\r\n\t\t\t\t\t\t\t\t\toptions.aoColumns.splice($scope.radioButtonCol, 0, radioButtonCol);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t//column configuration\r\n\t\t\t\t\t\t\tif($scope.columnDefs) {\r\n\t\t\t\t\t\t\t\toptions.aoColumnDefs = $scope.$eval($scope.columnDefs);\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tif($scope.responsiveColumnDefs) {\r\n\t\t\t\t\t\t\t\tthis.responsiveColumnDefs = $scope.$eval($scope.responsiveColumnDefs);\r\n\t\t\t\t\t\t\t\tif(this.responsiveColumnDefs.initial === undefined) {\r\n\t\t\t\t\t\t\t\t\tthrow 'DataTables Error: No initial state defined.';\r\n\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\tthis.useResponsiveColumns = true;\r\n\t\t\t\t\t\t\t\tthis.maxBreakpoint = _.max(this.responsiveColumnDefs.breakpoints);\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t// pass options to dataTable\r\n\t\t\t\t\t\t\tthis.defineTable(options);\r\n\r\n\t\t\t\t\t\t\tif($scope.data) {\r\n\t\t\t\t\t\t\t\tthis.dataTable.fnAddData($scope.data);\r\n\r\n\t\t\t\t\t\t\t\t// on data change, redo directive with original DOM\r\n\t\t\t\t\t\t\t\t$scope.$watch(function() {\r\n\t\t\t\t\t\t\t\t\treturn $scope.data;\r\n\t\t\t\t\t\t\t\t}, angular.bind(this, function(oldVal, newVal) {\r\n\t\t\t\t\t\t\t\t\tif(oldVal !== newVal) {\r\n\t\t\t\t\t\t\t\t\t\tthis.defineTable(this.options);\r\n\t\t\t\t\t\t\t\t\t\tthis.dataTable.fnClearTable();\r\n\t\t\t\t\t\t\t\t\t\tthis.dataTable.fnAddData($scope.data);\r\n\t\t\t\t\t\t\t\t\t\tthis.createInputColumn(ngModelController);\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}));\r\n\t\t\t\t\t\t\t}\r\n\r\n\r\n\t\t\t\t\t\t\tthis.createInputColumn = function(ngModelController) {\r\n\r\n\t\t\t\t\t\t\t\tvar jqTable = $(this.table);\r\n\r\n\t\t\t\t\t\t\t\tif(this.showRadioColumn) {\r\n\t\t\t\t\t\t\t\t\tvar rows = this.table.fnGetNodes();\r\n\r\n\t\t\t\t\t\t\t\t\t//check if there is a radio button already selected\r\n\t\t\t\t\t\t\t\t\tif($scope.$parent.$eval($attrs.ngModel)) {\r\n\t\t\t\t\t\t\t\t\t\t$(rows).find('input[id=radio_' + $scope.$parent.$eval($attrs.ngModel) + ']').prop('checked', true);\r\n\t\t\t\t\t\t\t\t\t\t$(rows).find('input[id=radio_' + $scope.$parent.$eval($attrs.ngModel) + ']').parent().parent().addClass('selected');\r\n\t\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\t\tangular.element($(rows).find('.table-radio-button')).on('change', function() {\r\n\t\t\t\t\t\t\t\t\t\t$.each(rows, function() {\r\n\t\t\t\t\t\t\t\t\t\t\t$(this).removeClass('selected');\r\n\t\t\t\t\t\t\t\t\t\t\t$(this).find('input[type=\"radio\"]').prop('checked', false);\r\n\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t\t$(this).parent().parent().addClass('selected');\r\n\t\t\t\t\t\t\t\t\t\t$(this).prop('checked', true);\r\n\t\t\t\t\t\t\t\t\t\tngModelController.$setViewValue($(this).val());\r\n\t\t\t\t\t\t\t\t\t\t$scope.$apply();\r\n\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\tif(this.showcheckBoxColumn) {\r\n\r\n\r\n\t\t\t\t\t\t\t\t\t$(this.table).addClass('table-toggle-check-all');\r\n\r\n\t\t\t\t\t\t\t\t\tvar oldView = [];\r\n\t\t\t\t\t\t\t\t\tvar newView = [];\r\n\t\t\t\t\t\t\t\t\tvar latestChecked;\r\n\r\n\t\t\t\t\t\t\t\t\t//this.CheckBoxAdjust = function() {\r\n\t\t\t\t\t\t\t\t\tvar rows = this.table.fnGetNodes();\r\n\r\n\r\n\t\t\t\t\t\t\t\t\t//check if there are check boxes already selected\r\n\t\t\t\t\t\t\t\t\tif($scope.$parent.$eval($attrs.ngModel)) {\r\n\t\t\t\t\t\t\t\t\t\tangular.forEach($scope.$parent.$eval($attrs.ngModel), function(item) {\r\n\t\t\t\t\t\t\t\t\t\t\t$(rows).find('input[id=checkbox_' + item + ']').prop('checked', true);\r\n\t\t\t\t\t\t\t\t\t\t\t$(rows).find('input[id=checkbox_' + item + ']').parent().parent().addClass('selected');\r\n\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\t\tangular.element($(rows).find('.table-check-box')).on('change', function() {\r\n\t\t\t\t\t\t\t\t\t\tif(!ngModelController.$viewValue) { //first time you check a box\r\n\t\t\t\t\t\t\t\t\t\t\t$(this).parent().parent().addClass('selected');\r\n\t\t\t\t\t\t\t\t\t\t\tngModelController.$setViewValue([$(this).val()]);\r\n\t\t\t\t\t\t\t\t\t\t} else if(this.checked) { //checking a box\r\n\t\t\t\t\t\t\t\t\t\t\t$(this).parent().parent().addClass('selected');\r\n\t\t\t\t\t\t\t\t\t\t\toldView = ngModelController.$viewValue;\r\n\t\t\t\t\t\t\t\t\t\t\tlatestChecked = [$(this).val()];\r\n\t\t\t\t\t\t\t\t\t\t\tnewView = _.uniq(oldView.concat(latestChecked));\r\n\t\t\t\t\t\t\t\t\t\t\tngModelController.$setViewValue(newView);\r\n\t\t\t\t\t\t\t\t\t\t} else { //un-checking a box\r\n\t\t\t\t\t\t\t\t\t\t\t$(this).parent().parent().removeClass('selected');\r\n\t\t\t\t\t\t\t\t\t\t\tnewView = _.without(ngModelController.$viewValue, $(this).val());\r\n\t\t\t\t\t\t\t\t\t\t\tngModelController.$setViewValue(newView);\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t/* -----Start Toggle Check All Functionality -------*/\r\n\t\t\t\t\t\t\t\t\t\tvar numCheckBoxes = jqTable.find('.table-check-box').length;\r\n\t\t\t\t\t\t\t\t\t\tvar numSelectedRows = jqTable.find('.selected').length;\r\n\t\t\t\t\t\t\t\t\t\tif(numCheckBoxes === numSelectedRows) {\r\n\t\t\t\t\t\t\t\t\t\t\tjqTable.find('thead th input.toggle-check-all').prop('checked', true);\r\n\t\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\t\tjqTable.find('thead th input.toggle-check-all').prop('checked', false);\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\t\t\tif($scope.$root.$$phase !== '$apply' && $scope.$root.$$phase !== '$digest') {\r\n\t\t\t\t\t\t\t\t\t\t\t//avoid $scope.apply is already in progress error\r\n\t\t\t\t\t\t\t\t\t\t\t$scope.$apply();\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\t\t\t\tangular.element(jqTable.find('thead th input.toggle-check-all')).on('change', function() {\r\n\t\t\t\t\t\t\t\t\t\tif(this.checked) { //checking the box\r\n\t\t\t\t\t\t\t\t\t\t\t$.each(jqTable.find('.table-check-box'), function() {\r\n\t\t\t\t\t\t\t\t\t\t\t\tif($(this).prop('checked') === false) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t$(this).click();\r\n\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t\t} else { //un-checking the box\r\n\t\t\t\t\t\t\t\t\t\t\t$.each(jqTable.find('.table-check-box'), function() {\r\n\t\t\t\t\t\t\t\t\t\t\t\tif($(this).prop('checked')) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t$(this).click();\r\n\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\t\t\t\t//check or uncheck the toggle check all box on pagination and resize\r\n\t\t\t\t\t\t\t\t\tthis.table.bind('draw', function() {\r\n\t\t\t\t\t\t\t\t\t\tvar numCheckBoxes = jqTable.find('.table-check-box').length;\r\n\t\t\t\t\t\t\t\t\t\tvar numSelectedRows = jqTable.find('.selected').length;\r\n\t\t\t\t\t\t\t\t\t\tif(numCheckBoxes === numSelectedRows) {\r\n\t\t\t\t\t\t\t\t\t\t\tjqTable.find('thead th input.toggle-check-all').prop('checked', true);\r\n\t\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\t\tjqTable.find('thead th input.toggle-check-all').prop('checked', false);\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t/* -----End Toggle Check All Functionality -------*/\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t};\r\n\r\n\r\n\t\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t\t};\r\n\r\n\t\t\t\t\t\tthis.defineTable = function(options) {\r\n\r\n\t\t\t\t\t\t\toptions = _.defaults(options, this.defaultOptions);\r\n\t\t\t\t\t\t\tangular.extend(this.options, options);\r\n\r\n\t\t\t\t\t\t\tif(this.dataTable) {\r\n\t\t\t\t\t\t\t\tthis.dataTable.fnDestroy();\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tthis.dataTable = this.table.dataTable(this.options);\r\n\t\t\t\t\t\t};\r\n\r\n\r\n\t\t\t\t\t\tthis.adjustColumns = function() {\r\n\t\t\t\t\t\t\tvar settings = this.dataTable.fnSettings();\r\n\t\t\t\t\t\t\tvar options = {};\r\n\t\t\t\t\t\t\tvar columnsToHide = null;\r\n\t\t\t\t\t\t\tvar pagingTextClass = ''; // jshint ignore:line\r\n\r\n\t\t\t\t\t\t\tif($($window).width() > this.maxBreakpoint) {\r\n\t\t\t\t\t\t\t\tthis.previousBreakPoint = this.currentBreakPoint;\r\n\t\t\t\t\t\t\t\tthis.currentBreakPoint = -1;\r\n\r\n\r\n\t\t\t\t\t\t\t\tcolumnsToHide = this.responsiveColumnDefs.initial.columns;\r\n\t\t\t\t\t\t\t\toptions = {\r\n\t\t\t\t\t\t\t\t\t\"bPaginate\": this.responsiveColumnDefs.initial.paging,\r\n\t\t\t\t\t\t\t\t\t\"sDom\": this.responsiveColumnDefs.initial.dom,\r\n\t\t\t\t\t\t\t\t\t\"sPaginationType\": this.responsiveColumnDefs.initial.pagination,\r\n\t\t\t\t\t\t\t\t\t\"oLanguage\": {\r\n\t\t\t\t\t\t\t\t\t\t\"oPaginate\": {\r\n\t\t\t\t\t\t\t\t\t\t\t\"sShowPagingText\": this.responsiveColumnDefs.initial.showPagingText\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tfor(var i = 0; i <= this.responsiveColumnDefs.breakpoints.length; i++) {\r\n\t\t\t\t\t\t\t\tif($($window).width() < this.responsiveColumnDefs.breakpoints[i]) {\r\n\t\t\t\t\t\t\t\t\tthis.previousBreakPoint = this.currentBreakPoint;\r\n\t\t\t\t\t\t\t\t\tthis.currentBreakPoint = this.responsiveColumnDefs.breakpoints[i];\r\n\r\n\t\t\t\t\t\t\t\t\tcolumnsToHide = this.responsiveColumnDefs.columns[i];\r\n\t\t\t\t\t\t\t\t\toptions = {\r\n\t\t\t\t\t\t\t\t\t\t\"bPaginate\": this.responsiveColumnDefs.paging[i],\r\n\t\t\t\t\t\t\t\t\t\t\"sDom\": this.responsiveColumnDefs.dom[i],\r\n\t\t\t\t\t\t\t\t\t\t\"sPaginationType\": this.responsiveColumnDefs.pagination[i],\r\n\t\t\t\t\t\t\t\t\t\t\"oLanguage\": {\r\n\t\t\t\t\t\t\t\t\t\t\t\"oPaginate\": {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\"sShowPagingText\": this.responsiveColumnDefs.showPagingText[i]\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t};\r\n\r\n\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tif(this.currentBreakPoint !== this.previousBreakPoint) {\r\n\t\t\t\t\t\t\t\t//credit to stack overflow posters 'Michael Herold and Ryan O'Neill': http://stackoverflow.com/a/15311842\r\n\t\t\t\t\t\t\t\tvar paginationOptions = angular.merge(this.options, options);\r\n\t\t\t\t\t\t\t\tthis.defineTable(paginationOptions);\r\n\r\n\t\t\t\t\t\t\t\tfor(var i = 0; i < settings.aoColumns.length; i++) {\r\n\t\t\t\t\t\t\t\t\tif(_.contains(columnsToHide, i)) {\r\n\t\t\t\t\t\t\t\t\t\tthis.dataTable.fnSetColumnVis(i, false);\r\n\t\t\t\t\t\t\t\t\t} else if(!settings.aoColumns[i].bVisible) {\r\n\t\t\t\t\t\t\t\t\t\tthis.dataTable.fnSetColumnVis(i, true);\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\t$element.find('.paginator select').addClass('form-control input-sm');\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t}\r\n\t\t\t\t],\r\n\t\t\t\tcompile: function(/*iElement, iAttrs*/) {\r\n\t\t\t\t\tvar TEMPLATE_REGEXP = /<.+>/;\r\n\r\n\t\t\t\t\treturn {\r\n\t\t\t\t\t\tpre: function($scope, iElement/*, iAttrs, controllers*/) {\r\n\r\n\t\t\t\t\t\t\tif($scope.headerTemplate) {\r\n\t\t\t\t\t\t\t\tvar headerTemplate = $scope.headerTemplate;\r\n\r\n\t\t\t\t\t\t\t\tif(headerTemplate && !TEMPLATE_REGEXP.test(headerTemplate)) {\r\n\t\t\t\t\t\t\t\t\theaderTemplate = $.ajax({\r\n\t\t\t\t\t\t\t\t\t\ttype: \"GET\",\r\n\t\t\t\t\t\t\t\t\t\turl: headerTemplate,\r\n\t\t\t\t\t\t\t\t\t\tasync: false\r\n\t\t\t\t\t\t\t\t\t}).responseText;\r\n\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\theaderTemplate = angular.element(headerTemplate);\r\n\t\t\t\t\t\t\t\t$compile(headerTemplate)($scope);\r\n\r\n\t\t\t\t\t\t\t\tvar table = iElement.find('table');\r\n\t\t\t\t\t\t\t\tvar thead = table.find('thead');\r\n\t\t\t\t\t\t\t\tif(thead.exists()) {\r\n\t\t\t\t\t\t\t\t\tthead.replaceWith(headerTemplate);\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\ttable.append(headerTemplate);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tpost: function($scope, iElement, iAttrs, controllers) {\r\n\t\t\t\t\t\t\t// jshint unused:true\r\n\t\t\t\t\t\t\tvar datatableController = controllers[0];\r\n\t\t\t\t\t\t\tvar ngModelController = controllers[1];\r\n\r\n\t\t\t\t\t\t\tif(datatableController.initialize(ngModelController)) {\r\n\t\t\t\t\t\t\t\tif(datatableController.useResponsiveColumns) {\r\n\t\t\t\t\t\t\t\t\tdatatableController.adjustColumns();\r\n\r\n\t\t\t\t\t\t\t\t\tangular.element($window).bind('resize', function() {\r\n\t\t\t\t\t\t\t\t\t\tdatatableController.adjustColumns();\r\n\t\t\t\t\t\t\t\t\t\tdatatableController.createInputColumn(ngModelController);\r\n\t\t\t\t\t\t\t\t\t\t$scope.$apply();\r\n\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\tdatatableController.createInputColumn(ngModelController);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t};\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t}\r\n\t]);\r\n","/**\r\n * @ngdoc service\r\n * @name WebCoreModule.service:WcDatatableService\r\n * @requires $q\r\n * @description\r\n * Helper service for the wcDataTable directive. This service allows the user to set which row is selected or retrieve data\r\n * from the selected row.\r\n */\r\n'use strict';\r\nangular.module('WebCoreModule')\r\n\t.service('WcDataTableService', ['$q', function($q) {\r\n\r\n\t\tvar clickedRowData = {};\r\n\r\n\t\tthis.setClickedRowData = function(data) {\r\n\t\t\tclickedRowData = data;\r\n\t\t};\r\n\r\n\t\tthis.getClickedRowData = function() {\r\n\t\t\treturn $q.when(clickedRowData);\r\n\t\t};\r\n\r\n\t}]);","/**\r\n * @ngdoc directive\r\n * @name dataTable.bootstrap.paging\r\n * @description\r\n * This directive is responsible for all the paging operation in data table, the module generates\r\n * the paging HTML block that is rendered in data table\r\n */\r\n /* Set the defaults for DataTables initialisation */\r\n'use strict';\r\n$.extend(true, $.fn.dataTable.defaults, {\r\n\t\"sDom\": \"<'row paginator'<'col-xs-6'l><'col-xs-6'f>r>t<'row paginator'<'col-xs-6'i><'col-xs-6'p>>\",\r\n\t\"sPaginationType\": \"bootstrap_full_numbers\",\r\n\t\"oLanguage\": {\r\n\t\t\"sLengthMenu\": \"Results per page: _MENU_\",\r\n\t\t\"sInfo\": \"Showing Results: _START_ - _END_ of _TOTAL_\"\r\n\t}\r\n});\r\n\r\n\r\n/* Default class modification */\r\n$.extend($.fn.dataTableExt.oStdClasses, {\r\n\tsWrapper: \"dataTables_wrapper form-inline\"\r\n});\r\n\r\n/* Bootstrap style pagination control */\r\n$.extend($.fn.dataTableExt.oPagination, {\r\n\t\"bootstrap_two_button\": {\r\n\t\t\"fnInit\": function(oSettings, nPaging, fnCallbackDraw) {\r\n\t\t\tvar oLang = oSettings.oLanguage.oPaginate;\r\n\t\t\tvar oClasses = oSettings.oClasses;\r\n\t\t\tvar disabledClass = 'disabled ' + oClasses.sPageButtonStaticDisabled;\r\n\r\n\t\t\tvar sAppend =\r\n\t\t\t\t'<ul class=\"pagination\">' +\r\n\t\t\t\t'<li class=\"previous ' + disabledClass + '\"><a href=\"javascript:;\" class=\"' + oClasses.sPageButton + \" \" + oClasses.sPagePrevious + '\" tabindex=\"' + oSettings.iTabIndex + '\" role=\"button\"><span class=\"' + oClasses.sPagePreviousText + '\">' + oLang.sPrevious + '</span></a></li>' +\r\n\t\t\t\t'<li class=\"next ' + disabledClass + '\"><a href=\"javascript:;\" class=\"' + oClasses.sPageButton + \" \" + oClasses.sPageNext + '\" tabindex=\"' + oSettings.iTabIndex + '\" role=\"button\"><span class=\"' + oClasses.sPageNextText + '\">' + oLang.sNext + '</span></a></li>' +\r\n\t\t\t\t'</ul>';\r\n\t\t\t$(nPaging).append(sAppend);\r\n\r\n\t\t\tvar els = $('a', nPaging);\r\n\t\t\tvar nPrevious = els[0],\r\n\t\t\t\tnNext = els[1];\r\n\r\n\t\t\t/* ID the first elements only */\r\n\t\t\tif (!oSettings.aanFeatures.p) {\r\n\t\t\t\tnPaging.id = oSettings.sTableId + '_paginate';\r\n\t\t\t\tnPrevious.id = oSettings.sTableId + '_previous';\r\n\t\t\t\tnNext.id = oSettings.sTableId + '_next';\r\n\r\n\t\t\t\tnPrevious.setAttribute('aria-controls', oSettings.sTableId);\r\n\t\t\t\tnNext.setAttribute('aria-controls', oSettings.sTableId);\r\n\t\t\t}\r\n\r\n\t\t\tvar fnClickHandler = function(e) {\r\n\t\t\t\te.preventDefault();\r\n\t\t\t\tif (oSettings.oApi._fnPageChange(oSettings, e.data.action)) {\r\n\t\t\t\t\tfnCallbackDraw(oSettings);\r\n\t\t\t\t}\r\n\t\t\t};\r\n\r\n\t\t\toSettings.oApi._fnBindAction(nPrevious, {\r\n\t\t\t\taction: \"previous\"\r\n\t\t\t}, fnClickHandler);\r\n\t\t\toSettings.oApi._fnBindAction(nNext, {\r\n\t\t\t\taction: \"next\"\r\n\t\t\t}, fnClickHandler);\r\n\t\t},\r\n\r\n\t\t\"fnUpdate\": function(oSettings/*, fnCallbackDraw*/) {\r\n\t\t\tif (!oSettings.aanFeatures.p) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tvar iPages = Math.ceil((oSettings.fnRecordsDisplay()) / oSettings._iDisplayLength);\r\n\t\t\tvar iCurrentPage = Math.ceil(oSettings._iDisplayStart / oSettings._iDisplayLength) + 1;\r\n\t\t\tvar oClasses = oSettings.oClasses;\r\n\t\t\tvar disabledClass = 'disabled ' + oClasses.sPageButtonStaticDisabled;\r\n\r\n\t\t\t/* Loop over each instance of the pager */\r\n\t\t\tvar an = oSettings.aanFeatures.p;\r\n\t\t\tfor (var i = 0; i < an.length; i++) {\r\n\t\t\t\t/* Update the permanent button's classes */\r\n\t\t\t\tif (iCurrentPage === 1) {\r\n\t\t\t\t\t$('li:eq(0)', an[i]).addClass(disabledClass);\r\n\t\t\t\t} else {\r\n\t\t\t\t\t$('li:eq(0)', an[i]).removeClass(disabledClass);\r\n\t\t\t\t}\r\n\t\t\t\tif (iPages === 0 || iCurrentPage === iPages || oSettings._iDisplayLength === -1) {\r\n\t\t\t\t\t$('li:eq(-1)', an[i]).addClass(disabledClass);\r\n\t\t\t\t} else {\r\n\t\t\t\t\t$('li:eq(-1)', an[i]).removeClass(disabledClass);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\t\"bootstrap_normal\": {\r\n\t\t\"fnInit\": function(oSettings, nPaging, fnCallbackDraw) {\r\n\t\t\tvar oLang = oSettings.oLanguage.oPaginate;\r\n\t\t\tvar oClasses = oSettings.oClasses;\r\n\t\t\tvar disabledClass = 'disabled ' + oClasses.sPageButtonStaticDisabled;\r\n\r\n\t\t\tvar sAppend =\r\n\t\t\t\t'<ul class=\"pagination\">' +\r\n\t\t\t\t'<li class=\"previous ' + disabledClass + '\"><a href=\"javascript:;\" class=\"' + oClasses.sPageButton + \" \" + oClasses.sPagePrevious + '\" tabindex=\"' + oSettings.iTabIndex + '\" role=\"button\"><span class=\"' + oClasses.sPagePreviousText + '\">' + oLang.sPrevious + '</span></a></li>' +\r\n\t\t\t\t'<li class=\"next ' + disabledClass + '\"><a href=\"javascript:;\" class=\"' + oClasses.sPageButton + \" \" + oClasses.sPageNext + '\" tabindex=\"' + oSettings.iTabIndex + '\" role=\"button\"><span class=\"' + oClasses.sPageNextText + '\">' + oLang.sNext + '</span></a></li>' +\r\n\t\t\t\t'</ul>';\r\n\t\t\t$(nPaging).append(sAppend);\r\n\r\n\t\t\tvar els = $('a', nPaging);\r\n\t\t\tvar nPrevious = els[0],\r\n\t\t\t\tnNext = els[1];\r\n\r\n\t\t\t/* ID the first elements only */\r\n\t\t\tif (!oSettings.aanFeatures.p) {\r\n\t\t\t\tnPaging.id = oSettings.sTableId + '_paginate';\r\n\t\t\t\tnPrevious.id = oSettings.sTableId + '_previous';\r\n\t\t\t\tnNext.id = oSettings.sTableId + '_next';\r\n\r\n\t\t\t\tnPrevious.setAttribute('aria-controls', oSettings.sTableId);\r\n\t\t\t\tnNext.setAttribute('aria-controls', oSettings.sTableId);\r\n\t\t\t}\r\n\r\n\t\t\tvar fnClickHandler = function(e) {\r\n\t\t\t\te.preventDefault();\r\n\t\t\t\tif (oSettings.oApi._fnPageChange(oSettings, e.data.action)) {\r\n\t\t\t\t\tfnCallbackDraw(oSettings);\r\n\t\t\t\t}\r\n\t\t\t};\r\n\r\n\t\t\toSettings.oApi._fnBindAction(nPrevious, {\r\n\t\t\t\taction: \"previous\"\r\n\t\t\t}, fnClickHandler);\r\n\t\t\toSettings.oApi._fnBindAction(nNext, {\r\n\t\t\t\taction: \"next\"\r\n\t\t\t}, fnClickHandler);\r\n\t\t},\r\n\r\n\t\t\"fnUpdate\": function(oSettings, fnCallbackDraw) {\r\n\t\t\tif (!oSettings.aanFeatures.p) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tvar iPageCount = $.fn.dataTableExt.oPagination.iFullNumbersShowPages;\r\n\t\t\tvar iPageCountHalf = Math.floor(iPageCount / 2);\r\n\t\t\tvar iPages = Math.ceil((oSettings.fnRecordsDisplay()) / oSettings._iDisplayLength);\r\n\t\t\tvar iCurrentPage = Math.ceil(oSettings._iDisplayStart / oSettings._iDisplayLength) + 1;\r\n\t\t\tvar iStartButton, iEndButton;\r\n\t\t\tvar fnBind = function(j) {\r\n\t\t\t\toSettings.oApi._fnBindAction(this, {\r\n\t\t\t\t\t\"page\": j + iStartButton - 1\r\n\t\t\t\t}, function(e) {\r\n\t\t\t\t\t/* Use the information in the element to jump to the required page */\r\n\t\t\t\t\toSettings.oApi._fnPageChange(oSettings, e.data.page);\r\n\t\t\t\t\tfnCallbackDraw(oSettings);\r\n\t\t\t\t\te.preventDefault();\r\n\t\t\t\t});\r\n\t\t\t};\r\n\r\n\t\t\t/* Pages calculation */\r\n\t\t\tif (oSettings._iDisplayLength === -1) {\r\n\t\t\t\tiStartButton = 1;\r\n\t\t\t\tiEndButton = 1;\r\n\t\t\t\tiCurrentPage = 1;\r\n\t\t\t} else if (iPages < iPageCount) {\r\n\t\t\t\tiStartButton = 1;\r\n\t\t\t\tiEndButton = iPages;\r\n\t\t\t} else if (iCurrentPage <= iPageCountHalf) {\r\n\t\t\t\tiStartButton = 1;\r\n\t\t\t\tiEndButton = iPageCount;\r\n\t\t\t} else if (iCurrentPage >= (iPages - iPageCountHalf)) {\r\n\t\t\t\tiStartButton = iPages - iPageCount + 1;\r\n\t\t\t\tiEndButton = iPages;\r\n\t\t\t} else {\r\n\t\t\t\tiStartButton = iCurrentPage - Math.ceil(iPageCount / 2) + 1;\r\n\t\t\t\tiEndButton = iStartButton + iPageCount - 1;\r\n\t\t\t}\r\n\r\n\t\t\t/* Build the dynamic list */\r\n\t\t\tvar oClasses = oSettings.oClasses;\r\n\t\t\tvar activeClass = 'active ' + oClasses.sPageButtonActive;\r\n\t\t\tvar disabledClass = 'disabled ' + oClasses.sPageButtonStaticDisabled;\r\n\r\n\t\t\tvar sList = \"\";\r\n\t\t\tfor (var i = iStartButton; i <= iEndButton; i++) {\r\n\t\t\t\tsList += (iCurrentPage !== i) ?\r\n\t\t\t\t\t'<li><a href=\"javascript:;\" class=\"' + oClasses.sPageButton + '\" tabindex=\"' + oSettings.iTabIndex + '\" role=\"button\">' + oSettings.fnFormatNumber(i) + '</a></li>' :\r\n\t\t\t\t\t'<li class=\"' + activeClass + '\"><a href=\"javascript:;\" class=\"' + oClasses.sPageButton + '\" tabindex=\"' + oSettings.iTabIndex + '\" role=\"button\">' + oSettings.fnFormatNumber(i) + '</a></li>';\r\n\t\t\t}\r\n\r\n\t\t\t/* Loop over each instance of the pager */\r\n\t\t\tvar an = oSettings.aanFeatures.p;\r\n\t\t\tfor (var i = 0; i < an.length; i++) {\r\n\t\t\t\tif (!an[i].hasChildNodes()) {\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t/* Update the permanent button's classes */\r\n\t\t\t\tif (iCurrentPage === 1) {\r\n\t\t\t\t\t$('li:eq(0)', an[i]).addClass(disabledClass);\r\n\t\t\t\t} else {\r\n\t\t\t\t\t$('li:eq(0)', an[i]).removeClass(disabledClass);\r\n\t\t\t\t}\r\n\t\t\t\tif (iPages === 0 || iCurrentPage === iPages || oSettings._iDisplayLength === -1) {\r\n\t\t\t\t\t$('li:eq(-1)', an[i]).addClass(disabledClass);\r\n\t\t\t\t} else {\r\n\t\t\t\t\t$('li:eq(-1)', an[i]).removeClass(disabledClass);\r\n\t\t\t\t}\r\n\r\n\t\t\t\t/* Build up the dynamic list first - html and listeners */\r\n\t\t\t\t$('li:gt(0)', an[i]).filter(':not(li:eq(-1))').remove();\r\n\t\t\t\t$(sList)\r\n\t\t\t\t\t.clone()\r\n\t\t\t\t\t.insertBefore($('li:eq(-1)', an[i]))\r\n\t\t\t\t\t.each(fnBind);\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\t\"bootstrap_full_numbers\": {\r\n\t\t\"fnInit\": function(oSettings, nPaging, fnCallbackDraw) {\r\n\t\t\tvar oLang = oSettings.oLanguage.oPaginate;\r\n\t\t\tvar oClasses = oSettings.oClasses;\r\n\t\t\tvar disabledClass = 'disabled ' + oClasses.sPageButtonStaticDisabled;\r\n\t\t\tvar sPageButtonText = oLang.sShowPagingText ? '' : 'text-hide';\r\n\t\t\tvar sPageButton = oLang.sShowPagingText ? oClasses.sPageButton : oClasses.sPageButton + ' no-text';\r\n\r\n\t\t\tvar sAppend =\r\n\t\t\t\t'<ul class=\"pagination\">' +\r\n\t\t\t\t'<li class=\"first ' + disabledClass + '\"><a href=\"javascript:;\" class=\"' + sPageButton + \" \" + oClasses.sPageFirst + '\" tabindex=\"' + oSettings.iTabIndex + '\" role=\"button\"><span class=\"' + sPageButtonText + '\">' + oLang.sFirst + '</span></a></li>' +\r\n\t\t\t\t'<li class=\"previous ' + disabledClass + '\"><a href=\"javascript:;\" class=\"' + sPageButton + \" \" + oClasses.sPagePrevious + '\" tabindex=\"' + oSettings.iTabIndex + '\" role=\"button\"><span class=\"' + sPageButtonText + '\">' + oLang.sPrevious + '</span></a></li>' +\r\n\t\t\t\t'<li class=\"next ' + disabledClass + '\"><a href=\"javascript:;\" class=\"' + sPageButton + \" \" + oClasses.sPageNext + '\" tabindex=\"' + oSettings.iTabIndex + '\" role=\"button\"><span class=\"' + sPageButtonText + '\">' + oLang.sNext + '</span></a></li>' +\r\n\t\t\t\t'<li class=\"last ' + disabledClass + '\"><a href=\"javascript:;\" class=\"' + sPageButton + \" \" + oClasses.sPageLast + '\" tabindex=\"' + oSettings.iTabIndex + '\" role=\"button\"><span class=\"' + sPageButtonText + '\">' + oLang.sLast + '</span></a></li>' +\r\n\t\t\t\t'</ul>';\r\n\t\t\t$(nPaging).append(sAppend);\r\n\r\n\t\t\tvar els = $('a', nPaging);\r\n\t\t\tvar nFirst = els[0],\r\n\t\t\t\tnPrevious = els[1],\r\n\t\t\t\tnNext = els[2],\r\n\t\t\t\tnLast = els[3];\r\n\r\n\t\t\t/* ID the first elements only */\r\n\t\t\tif (!oSettings.aanFeatures.p) {\r\n\t\t\t\tnPaging.id = oSettings.sTableId + '_paginate';\r\n\t\t\t\tnFirst.id = oSettings.sTableId + '_first';\r\n\t\t\t\tnPrevious.id = oSettings.sTableId + '_previous';\r\n\t\t\t\tnNext.id = oSettings.sTableId + '_next';\r\n\t\t\t\tnLast.id = oSettings.sTableId + '_last';\r\n\r\n\t\t\t\tnFirst.setAttribute('aria-controls', oSettings.sTableId);\r\n\t\t\t\tnPrevious.setAttribute('aria-controls', oSettings.sTableId);\r\n\t\t\t\tnNext.setAttribute('aria-controls', oSettings.sTableId);\r\n\t\t\t\tnLast.setAttribute('aria-controls', oSettings.sTableId);\r\n\t\t\t}\r\n\r\n\t\t\tvar fnClickHandler = function(e) {\r\n\t\t\t\te.preventDefault();\r\n\t\t\t\tif (oSettings.oApi._fnPageChange(oSettings, e.data.action)) {\r\n\t\t\t\t\tfnCallbackDraw(oSettings);\r\n\t\t\t\t}\r\n\t\t\t};\r\n\r\n\t\t\toSettings.oApi._fnBindAction(nFirst, {\r\n\t\t\t\taction: \"first\"\r\n\t\t\t}, fnClickHandler);\r\n\t\t\toSettings.oApi._fnBindAction(nPrevious, {\r\n\t\t\t\taction: \"previous\"\r\n\t\t\t}, fnClickHandler);\r\n\t\t\toSettings.oApi._fnBindAction(nNext, {\r\n\t\t\t\taction: \"next\"\r\n\t\t\t}, fnClickHandler);\r\n\t\t\toSettings.oApi._fnBindAction(nLast, {\r\n\t\t\t\taction: \"last\"\r\n\t\t\t}, fnClickHandler);\r\n\t\t},\r\n\r\n\t\t\"fnUpdate\": function(oSettings, fnCallbackDraw) {\r\n\t\t\tif (!oSettings.aanFeatures.p) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tvar iPageCount = $.fn.dataTableExt.oPagination.iFullNumbersShowPages;\r\n\t\t\tvar iPageCountHalf = Math.floor(iPageCount / 2);\r\n\t\t\tvar iPages = Math.ceil((oSettings.fnRecordsDisplay()) / oSettings._iDisplayLength);\r\n\t\t\tvar iCurrentPage = Math.ceil(oSettings._iDisplayStart / oSettings._iDisplayLength) + 1;\r\n\t\t\tvar iStartButton, iEndButton;\r\n\t\t\tvar fnBind = function(j) {\r\n\t\t\t\toSettings.oApi._fnBindAction(this, {\r\n\t\t\t\t\t\"page\": j + iStartButton - 1\r\n\t\t\t\t}, function(e) {\r\n\t\t\t\t\t/* Use the information in the element to jump to the required page */\r\n\t\t\t\t\toSettings.oApi._fnPageChange(oSettings, e.data.page);\r\n\t\t\t\t\tfnCallbackDraw(oSettings);\r\n\t\t\t\t\te.preventDefault();\r\n\t\t\t\t});\r\n\t\t\t};\r\n\r\n\t\t\t/* Pages calculation */\r\n\t\t\tif (oSettings._iDisplayLength === -1) {\r\n\t\t\t\tiStartButton = 1;\r\n\t\t\t\tiEndButton = 1;\r\n\t\t\t\tiCurrentPage = 1;\r\n\t\t\t} else if (iPages < iPageCount) {\r\n\t\t\t\tiStartButton = 1;\r\n\t\t\t\tiEndButton = iPages;\r\n\t\t\t} else if (iCurrentPage <= iPageCountHalf) {\r\n\t\t\t\tiStartButton = 1;\r\n\t\t\t\tiEndButton = iPageCount;\r\n\t\t\t} else if (iCurrentPage >= (iPages - iPageCountHalf)) {\r\n\t\t\t\tiStartButton = iPages - iPageCount + 1;\r\n\t\t\t\tiEndButton = iPages;\r\n\t\t\t} else {\r\n\t\t\t\tiStartButton = iCurrentPage - Math.ceil(iPageCount / 2) + 1;\r\n\t\t\t\tiEndButton = iStartButton + iPageCount - 1;\r\n\t\t\t}\r\n\r\n\t\t\t/* Build the dynamic list */\r\n\t\t\tvar oClasses = oSettings.oClasses;\r\n\t\t\tvar activeClass = 'active ' + oClasses.sPageButtonActive;\r\n\t\t\tvar disabledClass = 'disabled ' + oClasses.sPageButtonStaticDisabled;\r\n\r\n\t\t\tvar sList = \"\";\r\n\t\t\tfor (var i = iStartButton; i <= iEndButton; i++) {\r\n\t\t\t\tsList += (iCurrentPage !== i) ?\r\n\t\t\t\t\t'<li><a href=\"javascript:;\" class=\"' + oClasses.sPageButton + '\" tabindex=\"' + oSettings.iTabIndex + '\" role=\"button\">' + oSettings.fnFormatNumber(i) + '</a></li>' :\r\n\t\t\t\t\t'<li class=\"' + activeClass + '\"><a href=\"javascript:;\" class=\"' + oClasses.sPageButton + '\" tabindex=\"' + oSettings.iTabIndex + '\" role=\"button\">' + oSettings.fnFormatNumber(i) + '</a></li>';\r\n\t\t\t}\r\n\r\n\t\t\t/* Loop over each instance of the pager */\r\n\t\t\tvar an = oSettings.aanFeatures.p;\r\n\t\t\tfor (var i = 0; i < an.length; i++) {\r\n\t\t\t\tif (!an[i].hasChildNodes()) {\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t/* Update the permanent button's classes */\r\n\t\t\t\tif (iCurrentPage === 1) {\r\n\t\t\t\t\t$('li:eq(0)', an[i]).addClass(disabledClass);\r\n\t\t\t\t\t$('li:eq(1)', an[i]).addClass(disabledClass);\r\n\t\t\t\t} else {\r\n\t\t\t\t\t$('li:eq(0)', an[i]).removeClass(disabledClass);\r\n\t\t\t\t\t$('li:eq(1)', an[i]).removeClass(disabledClass);\r\n\t\t\t\t}\r\n\t\t\t\tif (iPages === 0 || iCurrentPage === iPages || oSettings._iDisplayLength === -1) {\r\n\t\t\t\t\t$('li:eq(-1)', an[i]).addClass(disabledClass);\r\n\t\t\t\t\t$('li:eq(-2)', an[i]).addClass(disabledClass);\r\n\t\t\t\t} else {\r\n\t\t\t\t\t$('li:eq(-1)', an[i]).removeClass(disabledClass);\r\n\t\t\t\t\t$('li:eq(-2)', an[i]).removeClass(disabledClass);\r\n\t\t\t\t}\r\n\r\n\t\t\t\t/* Build up the dynamic list first - html and listeners */\r\n\t\t\t\t$('li:gt(1)', an[i]).filter(':not(li:eq(-2))').filter(':not(li:eq(-1))').remove();\r\n\t\t\t\t$(sList)\r\n\t\t\t\t\t.clone()\r\n\t\t\t\t\t.insertBefore($('li:eq(-2)', an[i]))\r\n\t\t\t\t\t.each(fnBind);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n});\r\n\r\n\r\n/*\r\n * TableTools Bootstrap compatibility\r\n * Required TableTools 2.1+\r\n */\r\nif ($.fn.DataTable.TableTools) {\r\n\t// Set the classes that TableTools uses to something suitable for Bootstrap\r\n\t$.extend(true, $.fn.DataTable.TableTools.classes, {\r\n\t\t\"container\": \"DTTT btn-group\",\r\n\t\t\"buttons\": {\r\n\t\t\t\"normal\": \"btn btn-default\",\r\n\t\t\t\"disabled\": \"disabled\"\r\n\t\t},\r\n\t\t\"collection\": {\r\n\t\t\t\"container\": \"DTTT_dropdown dropdown-menu\",\r\n\t\t\t\"buttons\": {\r\n\t\t\t\t\"normal\": \"\",\r\n\t\t\t\t\"disabled\": \"disabled\"\r\n\t\t\t}\r\n\t\t},\r\n\t\t\"print\": {\r\n\t\t\t\"info\": \"DTTT_print_info\"\r\n\t\t},\r\n\t\t\"select\": {\r\n\t\t\t\"row\": \"active\"\r\n\t\t}\r\n\t});\r\n\r\n\t// Have the collection use a bootstrap compatible dropdown\r\n\t$.extend(true, $.fn.DataTable.TableTools.DEFAULTS.oTags, {\r\n\t\t\"collection\": {\r\n\t\t\t\"container\": \"ul\",\r\n\t\t\t\"button\": \"li\",\r\n\t\t\t\"liner\": \"a\"\r\n\t\t}\r\n\t});\r\n}","/**\r\n * @ngdoc directive\r\n * @name WebCoreModule.directive:ngPrism\r\n * @restrict A\r\n * @description\r\n * The ngPrism directive adds behavior to highlight element.\r\n */\r\nangular.module('WebCoreModule')\r\n    .directive('prism', [function() {\r\n        return {\r\n            restrict: 'A',\r\n            link: function ($scope, element) {\r\n                element.ready(function() {\r\n                    Prism.highlightElement(element[0]);\r\n                });\r\n            }\r\n        };\r\n    }]\r\n);","/**\r\n * @ngdoc filter\r\n * @name WebCoreModule.filter:WcPrice\r\n * @requires _\r\n * @description\r\n * The wcPrice filter assists with view filtering of any price related information.\r\n */\r\n'use strict';\r\nangular.module('WebCoreModule').\r\nfilter('WcPrice', ['_', function(_) {\r\n\r\n\t// Helper Functions\r\n\tfunction detectFilterType(min, max) {\r\n\t\tvar filterType = '';\r\n\r\n\t\tif ((min || min === 0) && (max || max === 0)) {\r\n\t\t\tfilterType = 'range';\r\n\t\t} else if (min && (max === null)) {\r\n\t\t\tfilterType = 'min';\r\n\t\t} else if (max && (min === null)) {\r\n\t\t\tfilterType = 'max';\r\n\t\t} else {\r\n\t\t\tfilterType = 'invalid';\r\n\t\t}\r\n\r\n\t\treturn filterType;\r\n\t}\r\n\r\n\tfunction filterMax(items, max, propertyName) {\r\n\t\tif (propertyName) {\r\n\t\t\treturn _.filter(items, function(num) {\r\n\t\t\t\tif (num[propertyName] <= max) {\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\treturn _.filter(items, function(num) {\r\n\t\t\t\tif (num <= max) {\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\tfunction filterMin(items, min, propertyName) {\r\n\t\tif (propertyName) {\r\n\t\t\treturn _.filter(items, function(num) {\r\n\t\t\t\tif (num[propertyName] >= min) {\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\treturn _.filter(items, function(num) {\r\n\t\t\t\tif (num >= min) {\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\tfunction filterRange(items, min, max, propertyName) {\r\n\t\tif (propertyName) {\r\n\t\t\treturn _.filter(items, function(num) {\r\n\t\t\t\tif (num[propertyName] >= min && num[propertyName] <= max) {\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\treturn _.filter(items, function(num) {\r\n\t\t\t\tif (num >= min && num <= max) {\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\treturn function(items, min, max, propertyName) {\r\n\r\n\t\tvar newItems = [];\r\n\r\n\t\t// Error Checking\r\n\t\tif (min === undefined || isNaN(min)) {\r\n\t\t\tmin = null;\r\n\t\t}\r\n\r\n\t\tif (max === undefined || isNaN(max)) {\r\n\t\t\tmax = null;\r\n\t\t}\r\n\r\n\t\t// Detect Filter Type\r\n\t\tvar filterType = detectFilterType(min, max);\r\n\r\n\t\tswitch (filterType) {\r\n\t\t\tcase 'range':\r\n\t\t\t\tnewItems = filterRange(items, min, max, propertyName);\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'min':\r\n\t\t\t\tnewItems = filterMin(items, min, propertyName);\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'max':\r\n\t\t\t\tnewItems = filterMax(items, max, propertyName);\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'invalid':\r\n\t\t\t\tnewItems = items;\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\r\n\t\treturn newItems;\r\n\t};\r\n}]);","/**\r\n * @ngdoc overview\r\n * @name WcResponsiveTableModule\r\n * @description\r\n * WcResponsiveTableModule is a collection of internally developed components and extensions which brings responsive behaviour\r\n * for jquery datatable, this module is also responsible for some features like sorting and filtering of datatable.\r\n */\r\n\r\n'use strict';\r\nangular.module('WcResponsiveTableModule', []);","/**\r\n * @ngdoc directive\r\n * @name WcResponsiveTableModule.directive:wcResponsiveTable\r\n * @scope\r\n * @require ngModel\r\n * @param {json} data This is a json string data which will be supplied to the datatable\r\n * @param {string} rowKey This string value holds the row key details\r\n * @param {object=} ngModel The model from which he data is supplied to the datatable\r\n * @param {Integer=} resultsPerPage This integer value holds the number of results per page for the datatable\r\n * @param {object=} columnData This object holds the column data for the datatable.\r\n * @param {Integer=} selectResultsPerPage The integer value that holds the number.\r\n * @description\r\n * The wcResponsiveTable directive adds responsive behavior to jquery datatable. With this directive in use, the\r\n * datatable will adjust automatically according to the window size.\r\n */\r\n\r\n'use strict';\r\n\r\nangular.module('WcResponsiveTableModule').directive('wcResponsiveTable', ['$compile', '_', '$timeout', '$swipe', 'WcTableScopeService', 'WcTableCollectionService', 'WcTablePaginationService', 'WcColumnFilterService',\r\n\tfunction ($compile, _, $timeout, $swipe, WcTableScopeService, WcTableCollectionService, WcTablePaginationService, WcColumnFilterService) {\r\n\t\treturn {\r\n\t\t\trequire: ['wcResponsiveTable', '?ngModel'],\r\n\t\t\tscope: {},\r\n\t\t\tbindToController: {\r\n\t\t\t\tdata: '&',\r\n\t\t\t\trowKey: '@',\r\n\t\t\t\t//bind between our ngModel and our interal selectedRows\r\n\t\t\t\t//selectedRows: '=ngModel',\r\n\t\t\t\tngModel: '=?',\r\n\t\t\t\tresultsPerPage: '=',\r\n\t\t\t\tpaginationControlsPlacement: '@',\r\n\t\t\t\tresponsiveView: '@',\r\n\t\t\t\tcolumnData: '=',\r\n\t\t\t\tselectResultsPerPage: '=',\r\n\t\t\t\trequired: '@',\r\n\t\t\t\tpaginationEnabled: '@',\r\n\t\t\t\tcheckallnoneEnabled: '@',\r\n\t\t\t\texporttopdfEnabled: '@',\r\n\t\t\t\texporttoexcelEnabled: '@'\r\n\t\t\t},\r\n\t\t\tcontrollerAs: 'responsiveTableController',\r\n\t\t\tcontroller: ['$scope', '$element', '$attrs', 'WcTranslateConfiguratorService', '$translate', function ($scope, $element, $attrs, WcTranslateConfiguratorService, $translate) {\r\n                WcTranslateConfiguratorService.loadPartAndRefresh('WC-dataTable');\r\n\r\n\t\t\t\tvar parentScope = $scope.$parent;\r\n\r\n\t\t\t\tthis.id = $attrs.id;\r\n\t\t\t\tthis.element = $element;\r\n\r\n\t\t\t\tthis.WcTableScopeService = new WcTableScopeService();\r\n\t\t\t\tthis.WcTableScopeService.setParentScope(parentScope);\r\n\t\t\t\tthis.WcTableScopeService.setTableScope($scope);\r\n\r\n\t\t\t\tthis.WcTableCollectionService = new WcTableCollectionService(this.WcTableScopeService);\r\n\t\t\t\tthis.WcTableCollectionService.setInitialCollection(this.data());\r\n\t\t\t\tthis.WcTableCollectionService.setRowKey(this.rowKey);\r\n\r\n\t\t\t\tthis.WcTablePaginationService = new WcTablePaginationService(this.WcTableCollectionService);\r\n\r\n\t\t\t\tthis.WcColumnFilterService = new WcColumnFilterService();\r\n\r\n\t\t\t\tvar ngModelController = $element.controller('ngModel');\r\n\r\n\t\t\t\t//workaround for directive attributes that we don't want to set equal to true\r\n\t\t\t\tif (this.required === \"\") {\r\n\t\t\t\t\tthis.required = true;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (this.paginationEnabled === \"\") {\r\n\t\t\t\t\tthis.paginationEnabled = true;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (this.checkallnoneEnabled === \"\") {\r\n\t\t\t\t\tthis.checkallnoneEnabled = true;\r\n\t\t\t\t}\r\n\t\t\t\tif (this.exporttopdfEnabled === \"\") {\r\n\t\t\t\t\tthis.exporttopdfEnabled = true;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (this.exporttoexcelEnabled === \"\") {\r\n\t\t\t\t\tthis.exporttoexcelEnabled = true;\r\n\t\t\t\t}\r\n\r\n                if(!this.ngModel) {\r\n                    this.ngModel = [];\r\n                }\r\n\r\n                //TODO: Determine if this variable is used\r\n\t\t\t\tthis.lastCollectionRendered = null;\r\n\t\t\t\t$scope.renderTable = function (resetToPageOne) {\r\n\t\t\t\t\t$scope.$broadcast('table.pagination.update', resetToPageOne);\r\n\t\t\t\t\t$scope.$broadcast('table.render.start');\r\n\t\t\t\t\t$scope.tableIsLoading();\r\n\t\t\t\t};\r\n\r\n\t\t\t\t$scope.tableIsLoading = function () {\r\n\t\t\t\t\t$('.wc-table-loading-indicator').show();\r\n\t\t\t\t\t$('.wc-table-loading-cover').show();\r\n\t\t\t\t};\r\n\r\n\t\t\t\t$scope.tableIsFinishedLoading = function () {\r\n\t\t\t\t\t$('.wc-table-loading-indicator').hide();\r\n\t\t\t\t\t$('.wc-table-loading-cover').hide();\r\n\t\t\t\t};\r\n\r\n\t\t\t\t$scope.tableRendered = function () {\r\n\t\t\t\t\t$('.wc-table-column-' + this.previousSortColumn).removeClass('wc-table-column-highlight');\r\n\t\t\t\t\t$('.wc-table-column-' + this.activeSortColumn).addClass('wc-table-column-highlight');\r\n\r\n\t\t\t\t\t$timeout(angular.bind(this, function () {\r\n\t\t\t\t\t\tparentScope.$broadcast('table.render.complete');\r\n\t\t\t\t\t\t//$scope.$digest();\r\n\t\t\t\t\t\t$scope.tableIsFinishedLoading();\r\n\t\t\t\t\t}), 0);\r\n\t\t\t\t};\r\n\r\n\t\t\t\t//TODO: Update these sections later\r\n                this.selectedMathFilterOption = [];\r\n\t\t\t\tthis.toggleFilterVisibility = function () {\r\n\r\n                    var currentText = this.element.find('.filter-visibility-toggle span:first-child').text();\r\n\r\n\t\t\t\t\tthis.element.find('thead input[wc-column-filter], thead select[wc-column-filter], thead select[id^=\"wc-math-filter\"]').toggle();\r\n\r\n\t\t\t\t\tif (!this.staticFilter) {\r\n                        var showFilterLabel = $translate.instant('columnFilter.showFilters');\r\n                        var hideFilterLabel = $translate.instant('columnFilter.hideFilters');\r\n\r\n                        currentText = currentText===showFilterLabel?  hideFilterLabel : showFilterLabel;\r\n\r\n\t\t\t\t\t\tthis.element.find('.filter-visibility-toggle span:first-child').text(currentText);\r\n\t\t\t\t\t}\r\n\t\t\t\t};\r\n\r\n\t\t\t\tthis.setupRachetingColumns = function () {\r\n\t\t\t\t\t//should match index for the first column of data\r\n\t\t\t\t\tvar ratchetIndex = 2;\r\n\t\t\t\t\tthis.ratchetCols = function(direction) {\r\n\t\t\t\t\t\t//only ratchet at mobile or tablet sizes\r\n\t\t\t\t\t\tif(window.innerWidth < 1200) {\r\n\t\t\t\t\t\t\t$scope.$broadcast('ng-swipe');\r\n\t\t\t\t\t\t\tif(direction == 'left') {\r\n\t\t\t\t\t\t\t\t$('#' + this.id + '.table-ratchet .wc-table-column-'+ratchetIndex).hide();\r\n\t\t\t\t\t\t\t\tif(ratchetIndex < this.numberOfCols) {\r\n\t\t\t\t\t\t\t\t\tratchetIndex++;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\telse if(direction == 'right') {\r\n\t\t\t\t\t\t\t\t$('#' + this.id + '.table-ratchet .wc-table-column-'+(ratchetIndex-1)).show();\r\n\t\t\t\t\t\t\t\tif(ratchetIndex > 2) {\r\n\t\t\t\t\t\t\t\t\tratchetIndex--;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t};\r\n\r\n\t\t\t\t\t$scope.$on('ng-swipe', angular.bind(this, function(event, args) {\r\n\t\t\t\t\t\tif (!this.animating) {\r\n\t\t\t\t\t\t\tthis.animating = true;\r\n\t\t\t\t\t\t\t// pulse effect animation\r\n\t\t\t\t\t\t\t$('#' + this.id + '.table-ratchet table').animate({\r\n\t\t\t\t\t\t\t\topacity : 0.70\r\n\t\t\t\t\t\t\t}, 150, angular.bind(this, function() {\r\n\t\t\t\t\t\t\t\t$('#' + this.id + '.table-ratchet table').animate({\r\n\t\t\t\t\t\t\t\t\topacity : 1\r\n\t\t\t\t\t\t\t\t}, 200, function() {\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t}));\r\n\t\t\t\t\t\t\tthis.animating = false;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}));\r\n\t\t\t\t};\r\n\r\n\t\t\t\tthis.setupPaginationDefaults = function () {\r\n\t\t\t\t\tif (this.paginationEnabled || this.resultsPerPage ||\r\n\t\t\t\t\t\tthis.numberOfPageControls || this.selectResultsPerPage ||\r\n\t\t\t\t\t\tthis.responsiveBreakpoints || this.paginationControlsPlacement) {\r\n\r\n\t\t\t\t\t\tthis.WcTablePaginationService.setPaginationState(true);\r\n\r\n\t\t\t\t\t\tthis.WcTablePaginationService.setPaginationDefaults({\r\n\t\t\t\t\t\t\tnumberOfPageControls: this.numberOfPageControls,\r\n\t\t\t\t\t\t\tresponsiveBreakpoints: this.responsiveBreakpoints,\r\n\t\t\t\t\t\t\tselectResultsPerPage: this.selectResultsPerPage,\r\n\t\t\t\t\t\t\tresultsPerPage: this.resultsPerPage,\r\n\t\t\t\t\t\t\tpaginationControlsPlacement: this.paginationControlsPlacement\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t};\r\n\r\n\t\t\t\tthis.setupTableValidation = function() {\r\n\t\t\t\t\tthis.ngModel = this.ngModel || [];\r\n\r\n\t\t\t\t\tif(ngModelController) {\r\n\t\t\t\t\t\tngModelController.$name = 'wcResponsiveTable';\r\n\r\n\t\t\t\t\t\t//convert $viewValue to $modelValue\r\n\t\t\t\t\t\t//$viewValue is passed in, modify it and return what will be applied to $modelValue\r\n\t\t\t\t\t\tngModelController.$parsers.push(angular.bind(this, function (viewValue) {\r\n\t\t\t\t\t\t\t//add validation here for required fields\r\n\t\t\t\t\t\t\tif (this.required) {\r\n\t\t\t\t\t\t\t\tif (!viewValue || (angular.isArray(viewValue) && viewValue.length === 0)) {\r\n\t\t\t\t\t\t\t\t\tngModelController.$setValidity('tableRequired', false);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\telse {\r\n\t\t\t\t\t\t\t\t\tngModelController.$setValidity('tableRequired', true);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\treturn viewValue;\r\n\t\t\t\t\t\t}));\r\n\r\n\t\t\t\t\t\t//convert $modelValue to $viewValue\r\n\t\t\t\t\t\t//$modelValue is passed in, modify it and return what will be applied to $viewValue\r\n\t\t\t\t\t\tngModelController.$formatters.push(angular.bind(this, function (modelValue) {\r\n\t\t\t\t\t\t\t//add validation here for required fields\r\n\t\t\t\t\t\t\tif (this.required) {\r\n\t\t\t\t\t\t\t\tif (!modelValue || (angular.isArray(modelValue) && modelValue.length === 0)) {\r\n\t\t\t\t\t\t\t\t\tngModelController.$setValidity('tableRequired', false);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\telse {\r\n\t\t\t\t\t\t\t\t\tngModelController.$setValidity('tableRequired', true);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\treturn modelValue;\r\n\t\t\t\t\t\t}));\r\n\r\n\t\t\t\t\t\t//function to call when $viewValue should be updated with a new value after a user interaction\r\n\t\t\t\t\t\tthis.applyModel = function (value) {\r\n\t\t\t\t\t\t\tngModelController.$setViewValue(value);\r\n\t\t\t\t\t\t};\r\n\r\n\t\t\t\t\t\t//register this table with the form obj\r\n\t\t\t\t\t\tngModelController.$$parentForm.$addControl(ngModelController);\r\n\t\t\t\t\t}\r\n\t\t\t\t};\r\n\t\t\t}],\r\n\t\t\tlink: function (scope, element, attrs, controllers) {\r\n\r\n\t\t\t\tvar responsiveTableController = controllers[0];\r\n\t\t\t\tvar ngModelController = controllers[1];\r\n\r\n\t\t\t\tthis.preSetupTable = function () {\r\n\t\t\t\t\t// jshint unused:true\r\n\t\t\t\t\tvar table = element[0].children[0];\r\n\t\t\t\t\tif (table.tagName !== 'TABLE') {\r\n\t\t\t\t\t\t// console.error('Table tag <table> must come right after <wc-responsive-table>');\r\n\t\t\t\t\t\t// console.error('Directive found ' + table[0].tagName + ' instead');\r\n\t\t\t\t\t\tthrow 'Is this an equivalent error message';\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\telement.addClass('wc-table');\r\n\r\n\t\t\t\t\tvar dataRow = $(table).find('tbody tr');\r\n\t\t\t\t\tvar headerRow = $(table).find('thead tr')[0];\r\n\r\n\t\t\t\t\tresponsiveTableController.numberOfCols = headerRow.children.length;\r\n\r\n\t\t\t\t\tresponsiveTableController.columnsToHide = [];\r\n\t\t\t\t\tfor (var i = 0; i < headerRow.children.length; i++) {\r\n\t\t\t\t\t\tresponsiveTableController.columnsToHide[i] = false;\r\n\t\t\t\t\t\t$(headerRow.children[i])\r\n                            .addClass('wc-table-column-' + i);\r\n\r\n                        var headerTxtNode = $(headerRow.children[i]).contents().filter(function(){ return this.nodeType === 3 && $.trim(this.nodeValue) !== '' ; });\r\n                        var headerTxtPreWrap = $(headerRow.children[i]).children()[0];\r\n\r\n                        if(headerTxtNode.length>0) {\r\n                            $(headerTxtNode).wrap(\"<div class='header-text-wrapper'><span class='header-text'></span></div>\");\r\n                        }\r\n                        else {\r\n                            $(headerTxtPreWrap).wrap(\"<div class='header-text-wrapper'></div>\").addClass('header-text');\r\n                        }\r\n\r\n                        if($(headerRow.children[i]).find('[wc-column-filter]').length>0&&$(headerRow.children[i]).find('.form-group').length<1) {\r\n                            $('.wc-table-column-'+ i+' .header-text-wrapper').after(\"<div class='form-group'></div>\");\r\n                            if($(headerRow.children[i]).find('[wc-math-filter]').length>0) {\r\n                                $(headerRow.children[i]).find('label, .wc-math-filter-row').appendTo('.wc-table-column-'+ i+' .form-group');\r\n                            }\r\n                            else {\r\n                                $(headerRow.children[i]).find('label, input, select').appendTo('.wc-table-column-' + i+' .form-group');\r\n                            }\r\n\r\n                        }\r\n\t\t\t\t\t\t//.attr('column-index', i);\r\n\r\n                        //if (responsiveTableController.responsiveView === 'list') {\r\n                        var columnHeading = $(headerRow.children[i]);\r\n                        var columnHeadingText = headerTxtNode[0] ? headerTxtNode[0].nodeValue : '';\r\n                        $(dataRow.children()[i]).attr('data-title', columnHeadingText);\r\n                        console.log('columnHeading', $(dataRow.children()[i]), columnHeadingText);\r\n                        //}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tfor (i = 0; i < dataRow.children().length; i++) {\r\n\t\t\t\t\t\tvar item = $(dataRow.children()[i]);\r\n\r\n\t\t\t\t\t\titem.addClass('wc-table-column-' + i);\r\n\t\t\t\t\t\t//.attr('column-index', i);\r\n\r\n\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tresponsiveTableController.setupTableValidation();\r\n\r\n\t\t\t\t\tvar tableConfig = {\r\n\t\t\t\t\t\ttable: table,\r\n\t\t\t\t\t\tdataRow: dataRow,\r\n\t\t\t\t\t\theaderRow: headerRow\r\n\t\t\t\t\t};\r\n\r\n\t\t\t\t\tresponsiveTableController.table = $(table);\r\n\r\n\t\t\t\t\treturn tableConfig;\r\n\t\t\t\t};\r\n\r\n\t\t\t\tthis.addLoadingIndicator = function () {\r\n\t\t\t\t\tvar loadingElement = '<div class=\"wc-table-loading-cover\"><div class=\"wc-table-loading-indicator\"><span>{{\"loading\" | translate}}</span></div>';\r\n\r\n\t\t\t\t\telement.append($compile(loadingElement)(scope));\r\n\t\t\t\t};\r\n\r\n\t\t\t\tthis.addColumnFilteringFeature = function (tableConfig) {\r\n\t\t\t\t\tif (element.find('thead input[wc-column-filter], thead select[wc-column-filter]').length) {\r\n\t\t\t\t\t\tif (attrs.staticFilter === \"\") {\r\n\t\t\t\t\t\t\tresponsiveTableController.staticFilter = true;\r\n\t\t\t\t\t\t\tresponsiveTableController.toggleFilterVisibility();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse {\r\n\t\t\t\t\t\t\tvar filterToggle = '<div class=\"filter-visibility-toggle\" ng-click=\"responsiveTableController.toggleFilterVisibility()\"><span>{{\"columnFilter.showFilters\" | translate}}</span><span class=\"glyphicon glyphicon-filter\"></span></div>';\r\n                            $(tableConfig.table).before('<div class=\"active-filters hidden\"></div>');\r\n\t\t\t\t\t\t\t$(tableConfig.table).before($compile(filterToggle)(scope));\r\n\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t};\r\n\t\t\t\tresponsiveTableController.toggleFilterVisibility();\r\n\r\n\t\t\t\tthis.addPaginationFeature = function (tableConfig) {\r\n\t\t\t\t\tif (responsiveTableController.paginationEnabled) {\r\n\t\t\t\t\t\tresponsiveTableController.setupPaginationDefaults();\r\n\t\t\t\t\t\t$(tableConfig.table).before($compile('<wc-table-pagination>')(scope));\r\n\t\t\t\t\t}\r\n\t\t\t\t};\r\n\r\n\t\t\t\tthis.addCheckAllNoneFeature = function (tableConfig) {\r\n\t\t\t\t\tif(responsiveTableController.checkallnoneEnabled) {\r\n\t\t\t\t\t\tvar checkAllNone = $compile('<wc-check-all-none target-container-id=\"' + attrs.id + '\">')(scope);\r\n\t\t\t\t\t\t$(tableConfig.table).next().after(checkAllNone);\r\n\t\t\t\t\t}\r\n\t\t\t\t};\r\n\r\n\t\t\t\tthis.addExportToPdfFeature = function () {\r\n\t\t\t\t\tif(responsiveTableController.exporttopdfEnabled) {\r\n\t\t\t\t\t\tvar tableButtonGroup = element.find('.wc-table-buttons');\r\n\t\t\t\t\t\tif(tableButtonGroup.length > 0) {\r\n\t\t\t\t\t\t\ttableButtonGroup.append($compile('<wc-export-to-pdf>')(scope));\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tvar template = angular.element('<div class=\"btn-group wc-table-buttons pull-right\"><wc-export-to-pdf/></div>');\r\n\t\t\t\t\t\t\telement.prepend($compile(template)(scope));\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t};\r\n\r\n\t\t\t\tthis.addExportToExcelFeature = function () {\r\n\t\t\t\t\tif (responsiveTableController.exporttoexcelEnabled){\r\n\t\t\t\t\t\tvar tableButtonGroup = element.find('.wc-table-buttons');\r\n\t\t\t\t\t\tif(tableButtonGroup.length > 0) {\r\n\t\t\t\t\t\t\ttableButtonGroup.append($compile('<wc-export-to-excel>')(scope));\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tvar template = angular.element('<div class=\"btn-group wc-table-buttons pull-right\"><wc-export-to-excel/></div>');\r\n\t\t\t\t\t\t\telement.prepend($compile(template)(scope));\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t};\r\n\r\n\t\t\t\tthis.addResponsiveFeature = function () {\r\n\t\t\t\t\tswitch(responsiveTableController.responsiveView) {\r\n\t\t\t\t\t\tcase 'scroll': {\r\n\t\t\t\t\t\t\tthis.addScrollingTableFeature();\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tcase 'ratchet': {\r\n\t\t\t\t\t\t\tresponsiveTableController.setupRachetingColumns();\r\n\t\t\t\t\t\t\tthis.addRachetingColumnsFeature(tableConfig);\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tcase 'column-toggle': {\r\n\t\t\t\t\t\t\tthis.addColumnToggleFeature(tableConfig);\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tcase 'radio-columns': {\r\n\t\t\t\t\t\t\tthis.addColumnToggleFeature(tableConfig);\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tcase 'list': {\r\n\t\t\t\t\t\t\tthis.addListViewFeature();\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tcase 'drop': {\r\n\t\t\t\t\t\t\t//support dropping cols here eventually\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tdefault: {\r\n\t\t\t\t\t\t\tthis.addScrollingTableFeature();\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t};\r\n\r\n\t\t\t\tthis.addScrollingTableFeature = function() {\r\n\t\t\t\t\telement.addClass('table-responsive');\r\n\r\n\t\t\t\t\tvar setMatchingHeights = function(selector) {\r\n\t\t\t\t\t\t$(selector).each(function(index, item){\r\n\t\t\t\t\t\t\t$(item).css('height', $(item).closest('tr').css('height'));\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t};\r\n\r\n\t\t\t\t\tvar columnResizeHandler = function(){\r\n\t\t\t\t\t\tsetMatchingHeights('#' + responsiveTableController.id + ' .wc-table-column-0');\r\n\t\t\t\t\t\tsetMatchingHeights('#' + responsiveTableController.id + ' .wc-table-column-1');\r\n\t\t\t\t\t};\r\n\r\n\t\t\t\t\t$(window).on('resize', _.debounce(columnResizeHandler,250));\r\n\t\t\t\t\tscope.$on('table.render.complete', _.debounce(columnResizeHandler,10));\r\n\r\n\t\t\t\t\tvar scrollHandler = function(event){\r\n\t\t\t\t\t\t$('#' + responsiveTableController.id + ' .wc-table-column-0').each(function(index, item){\r\n\t\t\t\t\t\t\t$(item).css('left', event.currentTarget.scrollLeft + \"px\");\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\t$('#' + responsiveTableController.id + ' .wc-table-column-1').each(function(index, item){\r\n\t\t\t\t\t\t\t$(item).css('left', (event.currentTarget.scrollLeft + 100) + \"px\");\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\t$('#' + responsiveTableController.id + ' .filter-visibility-toggle').each(function(index, item){\r\n\t\t\t\t\t\t\t$(item).css('left', (event.currentTarget.scrollLeft + 15) + \"px\");\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t};\r\n\r\n\t\t\t\t\telement.scroll(scrollHandler);\r\n\t\t\t\t\telement.on('touchmove', scrollHandler);\r\n\t\t\t\t};\r\n\r\n\t\t\t\tthis.addRachetingColumnsFeature = function(tableConfig) {\r\n\t\t\t\t\telement.addClass('table-ratchet');\r\n\r\n\t\t\t\t\t// The maximum vertical delta for a swipe should be less than 75px.\r\n\t\t\t\t\t//start block of modified code coming from angular-touch library.\r\n\t\t\t\t\tvar MAX_VERTICAL_DISTANCE = 75;\r\n\t\t\t\t\t// Vertical distance should not be more than a fraction of the horizontal distance.\r\n\t\t\t\t\tvar MAX_VERTICAL_RATIO = 0.3;\r\n\t\t\t\t\t// At least a 30px lateral motion is necessary for a swipe.\r\n\t\t\t\t\tvar MIN_HORIZONTAL_DISTANCE = 30;\r\n\r\n\t\t\t\t\tvar startCoords, valid;\r\n\r\n\t\t\t\t\tvar directionOfSwipe = function(coords) {\r\n\t\t\t\t\t\t// Check that it's within the coordinates.\r\n\t\t\t\t\t\t// Absolute vertical distance must be within tolerances.\r\n\t\t\t\t\t\t// Horizontal distance, we take the current X - the starting X.\r\n\t\t\t\t\t\t// This is negative for leftward swipes and positive for rightward swipes.\r\n\t\t\t\t\t\t// After multiplying by the direction (-1 for left, +1 for right), legal swipes\r\n\t\t\t\t\t\t// (ie. same direction as the directive wants) will have a positive delta and\r\n\t\t\t\t\t\t// illegal ones a negative delta.\r\n\t\t\t\t\t\t// Therefore this delta must be positive, and larger than the minimum.\r\n\t\t\t\t\t\tif (!startCoords) {\r\n\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tvar deltaY = Math.abs(coords.y - startCoords.y);\r\n\t\t\t\t\t\tvar deltaX = coords.x - startCoords.x;\r\n\t\t\t\t\t\tif(valid && // Short circuit for already-invalidated swipes.\r\n\t\t\t\t\t\t\tdeltaY < MAX_VERTICAL_DISTANCE &&\r\n\t\t\t\t\t\t\tdeltaX !== 0 &&\r\n\t\t\t\t\t\t\tMath.abs(deltaX) > MIN_HORIZONTAL_DISTANCE &&\r\n\t\t\t\t\t\t\tdeltaY / Math.abs(deltaX) < MAX_VERTICAL_RATIO) {\r\n\t\t\t\t\t\t\treturn (deltaX > 0) ? 'right' : 'left';\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse {\r\n\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t};\r\n\r\n\t\t\t\t\t$swipe.bind($(tableConfig.table), {\r\n\t\t\t\t\t\t'start': function(coords) {\r\n\t\t\t\t\t\t\tstartCoords = coords;\r\n\t\t\t\t\t\t\tvalid = true;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t'cancel': function() {\r\n\t\t\t\t\t\t\tvalid = false;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t'end': function(coords) {\r\n\t\t\t\t\t\t\tvar direction = directionOfSwipe(coords);\r\n\t\t\t\t\t\t\tif (direction) {\r\n\t\t\t\t\t\t\t\tresponsiveTableController.ratchetCols(direction);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t\t//end block of angular-touch code\r\n\r\n\t\t\t\t\t//add indicator bar(s) to show ratcheting is available?\r\n\t\t\t\t\tvar ratchetBar = '<div class=\"ratchet-indicator\"><span>...</span></div>';\r\n\t\t\t\t\t$(tableConfig.table).after(ratchetBar);\r\n\t\t\t\t};\r\n\r\n\t\t\t\tthis.addColumnToggleFeature = function(tableConfig) {\r\n\t\t\t\t\telement.addClass('column-toggle');\r\n\t\t\t\t\t//add controls to allow the user to hide columns\r\n\r\n\t\t\t\t\tvar columnToggle = '<span class=\"dropdown column-toggle\">' +\r\n\t\t\t\t\t\t'<span name=\"columnToggleDropdown\" data-toggle=\"dropdown\" id=\"'+responsiveTableController.id+'-columnToggleDropdown\">' +\r\n\t\t\t\t\t\t'<span>{{\"manageColumns\" | translate}}</span><span class=\"glyphicon glyphicon-chevron-down\"></span>' +\r\n\t\t\t\t\t\t'</span>' +\r\n\t\t\t\t\t\t'<fieldset class=\"dropdown-menu form-group\" role=\"menu\" aria-labelledby=\"'+responsiveTableController.id+'-columnToggleDropdown\">';\r\n\r\n\t\t\t\t\t$(tableConfig.headerRow).children().each(function(index, item) {\r\n\t\t\t\t\t\tvar columnName =$(item).find('.header-text').text();\r\n\r\n\t\t\t\t\t\tif(item.firstChild.nextSibling && item.firstChild.nextSibling.localName == 'wc-row-select-header-checkbox')\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tcolumnName='Checkbox Column' ;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif(item.firstChild.nextSibling && item.firstChild.nextSibling.localName == 'wc-row-select-header-radio')\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tcolumnName='Radio Column' ;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tif( item.firstChild !== null )\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tcolumnToggle += '<div role=\"menuitem\" class=\"checkbox\">' +\r\n\t\t\t\t\t\t\t\t'<label for=\"col' + index + '\">' +\r\n\t\t\t\t\t\t\t\t'<input id=\"col' + index + '\" type=\"checkbox\" checked ng-model=\"responsiveTableController.columnsToHide['+index+']\"/>' + columnName +\r\n\t\t\t\t\t\t\t\t'</label></div>';\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t\tcolumnToggle += '</fieldset></span>';\r\n\r\n\t\t\t\t\tscope.$watchCollection(function(){\r\n\t\t\t\t\t\t\treturn responsiveTableController.columnsToHide;\r\n\t\t\t\t\t\t}, function(newValue, oldValue) {\r\n\t\t\t\t\t\t\tif(newValue !== oldValue) {\r\n\t\t\t\t\t\t\t\tfor(var i=0; i<newValue.length; i++) {\r\n\t\t\t\t\t\t\t\t\tif(!newValue[i]) {\r\n\t\t\t\t\t\t\t\t\t\t$('#'+responsiveTableController.id+'.column-toggle .wc-table-column-'+i).hide();\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\telse {\r\n\t\t\t\t\t\t\t\t\t\t$('#'+responsiveTableController.id+'.column-toggle .wc-table-column-'+i).show();\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tfor (var i=0; i<newValue.length; i++) {\r\n\t\t\t\t\t\t\t\t\tnewValue[i] = true;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t$('#'+responsiveTableController.id+'.column-toggle .form-group').click(function(e){\r\n\t\t\t\t\t\t\t\t\te.stopPropagation();\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t);\r\n\t\t\t\t\t$(tableConfig.table).before($compile(columnToggle)(scope));\r\n                };\r\n\r\n\t\t\t\tthis.addListViewFeature = function() {\r\n\t\t\t\t\telement.addClass('table-mobile-stack');\r\n\t\t\t\t};\r\n\r\n\t\t\t\tthis.postSetupTable = function (tableConfig) {\r\n\t\t\t\t\tvar dataRow = tableConfig.dataRow;\r\n\r\n\t\t\t\t\t//$compile(headerRow)(scope);\r\n\r\n\t\t\t\t\tresponsiveTableController.dataRowChildren = dataRow.children().clone();\r\n\t\t\t\t\tdataRow.children().remove();\r\n\r\n\t\t\t\t\tdataRow.attr('wc-row-repeat', '');\r\n\t\t\t\t\t$compile(dataRow)(scope);\r\n\r\n\t\t\t\t\tif (dataRow[0].children.length < 1) {\r\n\t\t\t\t\t\tscope.renderTable();\r\n\t\t\t\t\t}\r\n\t\t\t\t};\r\n\r\n\r\n\t\t\t\t/**\r\n\t\t\t\t * Load the table and features\r\n\t\t\t\t */\r\n\t\t\t\tvar tableConfig = this.preSetupTable();\r\n\r\n\t\t\t\tthis.addLoadingIndicator();\r\n\r\n\t\t\t\tthis.addColumnFilteringFeature(tableConfig);\r\n\r\n\t\t\t\tthis.addPaginationFeature(tableConfig);\r\n\r\n\t\t\t\tthis.addCheckAllNoneFeature(tableConfig);\r\n\r\n\t\t\t\tthis.addExportToPdfFeature();\r\n\r\n\t\t\t\tthis.addExportToExcelFeature();\r\n\r\n\t\t\t\tthis.addResponsiveFeature(tableConfig);\r\n\r\n\t\t\t\tthis.postSetupTable(tableConfig);\r\n\t\t\t}\r\n\t\t};\r\n\t}]);\r\n","/**\r\n * @ngdoc directive\r\n * @name WcResponsiveTableModule.directive:wcRowRepeat\r\n * @description\r\n * The wcRowRepeat directive is responsible for the row repeat operation on a datatable\r\n */\r\n\r\n'use strict';\r\n\r\nangular.module('WcResponsiveTableModule').directive('wcRowRepeat', ['$compile', function($compile) {\r\n\treturn {\r\n        require: ['wcRowRepeat', '^wcResponsiveTable'],\r\n        controllerAs: 'rowRepeatController',\r\n\t\tcontroller: ['$scope', '$element', '$attrs', 'WcTranslateConfiguratorService', function($scope, $element, $attrs, WcTranslateConfiguratorService) {\r\n\r\n            WcTranslateConfiguratorService.loadPartAndRefresh('WC-dataTable');\r\n\r\n\t\t\tvar responsiveTableController = $element.parent().controller('wcResponsiveTable');\r\n\t\t\tvar numberOfCols = responsiveTableController.numberOfCols;\r\n\t\t\tvar noRecordRow = $('<tr><td class=\"text-center\" colspan='+numberOfCols+' >{{\"noRecordFound\" | translate}}</td></tr>');\r\n\r\n\t\t\tthis.collection = responsiveTableController.WcTableCollectionService.getCollection;\r\n\t\t\tthis.rowKey = responsiveTableController.WcTableCollectionService.getRowKey();\r\n\r\n\t\t\tthis.parentElement = $element.parent();\r\n\t\t\tthis.elements = [];\r\n\t\t\tthis.insertRows = function(pageStart, pageEnd) {\r\n\t\t\t\tvar elementsLength = this.elements.length;\r\n\r\n\t\t\t\tvar ngModel = responsiveTableController.ngModel;\r\n\t\t\t\tvar collection = responsiveTableController.WcTableCollectionService.getCollection();\r\n\r\n\t\t\t\tif(elementsLength > 0) {\r\n\t\t\t\t\tfor (var i = 0; i < elementsLength; i++) {\r\n\t\t\t\t\t\tthis.elements[i].el.remove();\r\n\t\t\t\t\t\tthis.elements[i].scope.$destroy();\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.elements = [];\r\n\t\t\t\t}\r\n\r\n\t\t\t\t//TODO make setCollection update pagination instead\r\n\t\t\t\tif(collection.length < pageEnd) {\r\n\t\t\t\t\tpageEnd = collection.length;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfor (var index = pageStart; index < pageEnd; index++) {\r\n\t\t\t\t\tvar childScope = $scope.$new(false, responsiveTableController.WcTableScopeService.getTableScope());\r\n\t\t\t\t\tchildScope.row = collection[index];\r\n\t\t\t\t\tchildScope.rowKey = childScope.row[this.rowKey];\r\n\t\t\t\t\tchildScope.index = index;\r\n\r\n\t\t\t\t\tif(ngModel && ngModel.length > 0) {\r\n\t\t\t\t\t\t// var alreadySelected = ngModel.reduce(function(prev, next) {\r\n\t\t\t\t\t\t// \treturn next === childScope.rowKey ? next : prev;\r\n\t\t\t\t\t\t// }, null);\r\n\t\t\t\t\t\tvar alreadySelected = _.find(ngModel, function(value) { return value === childScope.rowKey; });\r\n\r\n\t\t\t\t\t\tif (alreadySelected) {\r\n\t\t\t\t\t\t\tchildScope.isSelected = true;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tvar newRow = $('<tr></tr>');\r\n\t\t\t\t\t_.forEach($attrs.$attr, function(value, key) {\r\n\t\t\t\t\t\tif (key != 'wcRowRepeat') {\r\n\t\t\t\t\t\t\tnewRow.attr(value, $attrs[key]);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t\tnewRow.append(responsiveTableController.dataRowChildren.clone());\r\n\r\n\t\t\t\t\tvar block = {};\r\n\t\t\t\t\tblock.el = newRow;\r\n\t\t\t\t\tblock.scope = childScope;\r\n\t\t\t\t\tthis.elements.push(block);\r\n\r\n\t\t\t\t\t$(noRecordRow).remove();\r\n\t\t\t\t\tthis.parentElement.append(newRow);\r\n\t\t\t\t\t$compile(newRow)(childScope);\r\n\t\t\t\t}\r\n\r\n                var mappedCollection = _.map(responsiveTableController.columnsToHide, function(value, key) { return {key: key, value: value}; });\r\n                var selectedItems = _.filter(mappedCollection, {value: false});\r\n                var hiddenColumns = _.map(selectedItems, function(value) { return value.key; });\r\n\t\t\t\tfor(var i=0; i < hiddenColumns.length; i++){\r\n                    $('#'+responsiveTableController.id+'.column-toggle .wc-table-column-'+hiddenColumns[i]).hide();\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif(collection.length<1 && this.parentElement[0].children.length<1) {\r\n\r\n\t\t\t\t\tthis.parentElement.append($compile(noRecordRow)($scope));\r\n\t\t\t\t}\r\n\r\n\t\t\t\t$element.remove();\r\n\t\t\t};\r\n\r\n\t\t}],\r\n\t\tlink: function(scope, element, attr, controllers) {\r\n        \t//jshint unused:true\r\n\t\t\tvar rowRepeatController = controllers[0];\r\n            var responsiveTableController = controllers[1];\r\n\r\n\t\t\tscope.$on('table.render.start', function() {\r\n\t\t\t\tvar paginationDefaults = responsiveTableController.WcTablePaginationService.getPaginationDefaults();\r\n\t\t\t\trowRepeatController.insertRows(paginationDefaults.pageStart, paginationDefaults.pageEnd);\r\n\t\t\t\tresponsiveTableController.WcTableScopeService.getTableScope().tableRendered();\r\n\t\t\t});\r\n\r\n\r\n\r\n\t\t}\r\n\t};\r\n}]);\r\n","/**\r\n * @ngdoc directive\r\n * @name WcResponsiveTableModule.directive:wcRowSelectCheckbox\r\n * @restrict E\r\n * @element div\r\n * @description\r\n * The wcRowSelectCheckbox directive is responsible for selecting the row in datatable on a checkbox click.\r\n */\r\n\r\n'use strict';\r\n\r\nangular.module('WcResponsiveTableModule').directive('wcRowSelectCheckbox', function () {\r\n\treturn {\r\n\t\trestrict: 'E',\r\n\t\ttemplate: '<input type=\"checkbox\" class=\"wc-checkbox-column\" name=\"{{responsiveTableController.id}}-checkbox[]\" ng-change=\"rowSelectCheckboxController.selectRow()\" ng-model=\"responsiveTableController.wcRowSelectCheckbox[rowSelectCheckboxController.index]\" ng-true-value=\"{{rowSelectCheckboxController.rowCheckedMap}}\" ng-false-value=\"{{rowSelectCheckboxController.rowUncheckedMap}}\">',\r\n\t\trequire: ['wcRowSelectCheckbox', '^wcResponsiveTable', '^ngModel'],\r\n\t\tscope: true,\r\n\t\tcontrollerAs: 'rowSelectCheckboxController',\r\n\t\tcontroller: ['$scope', '$element', function ($scope, $element) {\r\n\t\t\tthis.checkbox = $element.find('input');\r\n\t\t\tthis.index = $scope.$parent.index;\r\n\t\t\tthis.rowKey = $scope.$parent.rowKey;\r\n\t\t\tthis.rowCheckedMap = {\r\n\t\t\t\tkey: this.rowKey,\r\n\t\t\t\tvalue: true\r\n\t\t\t};\r\n\t\t\tthis.rowUncheckedMap = {\r\n\t\t\t\tkey: this.rowKey,\r\n\t\t\t\tvalue: false\r\n\t\t\t};\r\n\t\t\tthis.checked = this.rowUncheckedMap.value;\r\n\r\n\t\t\tvar responsiveTableController = $element.parent().controller('wcResponsiveTable');\r\n\t\t\tresponsiveTableController.wcRowSelectCheckbox = responsiveTableController.wcRowSelectCheckbox || [];\r\n\t\t\tresponsiveTableController.wcRowSelectCheckbox[this.index] = this.rowUncheckedMap;\r\n\r\n\t\t\tvar tableScope = responsiveTableController.WcTableScopeService.getTableScope();\r\n\r\n\t\t\tthis.selectRow = function () {\r\n\t\t\t\t$scope.$parent.isSelected = this.checked = responsiveTableController.wcRowSelectCheckbox[this.index].value;\r\n\r\n\t\t\t\tvar selectedItems = _.filter(responsiveTableController.wcRowSelectCheckbox, {value: true});\r\n\t\t\t\tvar newModel = _.map(selectedItems, function(value) { return value.key; });\r\n\r\n\t\t\t\tresponsiveTableController.ngModel = newModel;\r\n\t\t\t\tresponsiveTableController.applyModel(responsiveTableController.ngModel);\r\n\t\t\t};\r\n\r\n\t\t\ttableScope.$on('table.render.complete', angular.bind(this, function () {\r\n\t\t\t\tif ($scope.$parent.isSelected) {\r\n\t\t\t\t\tresponsiveTableController.wcRowSelectCheckbox[this.index] = this.rowCheckedMap;\r\n\t\t\t\t\tthis.checked = this.rowCheckedMap.value;\r\n\t\t\t\t}\r\n\t\t\t}));\r\n\r\n\t\t\ttableScope.$on('table.select.checkbox.all', angular.bind(this, function () {\r\n\t\t\t\tif(!this.checked) {\r\n\t\t\t\t\tthis.checkbox.click();\r\n\t\t\t\t}\r\n\t\t\t}));\r\n\r\n\t\t\ttableScope.$on('table.select.checkbox.none', angular.bind(this, function () {\r\n\t\t\t\tif(this.checked) {\r\n\t\t\t\t\tthis.checkbox.click();\r\n\t\t\t\t}\r\n\t\t\t}));\r\n\t\t}],\r\n\t\tlink: function (scope, element) {\r\n\t\t\tvar highlightRow = function (shouldHighlight) {\r\n\t\t\t\tvar row = element.parent().parent();\r\n\t\t\t\tif (shouldHighlight) {\r\n\t\t\t\t\t$(row).addClass('wc-highlight-row');\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\t$(row).removeClass('wc-highlight-row');\r\n\t\t\t\t}\r\n\t\t\t\tvar tableCells = row.children();\r\n\t\t\t\t$(tableCells).each(function (index, cell) {\r\n\t\t\t\t\t// jshint unused:true\r\n\t\t\t\t\tif (shouldHighlight) {\r\n\t\t\t\t\t\t$(cell).addClass('wc-highlight-row');\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\t$(cell).removeClass('wc-highlight-row');\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t};\r\n\r\n\t\t\tscope.$watch('rowSelectCheckboxController.checked', function (boolean) {\r\n\t\t\t\thighlightRow(boolean);\r\n\t\t\t});\r\n\t\t}\r\n\t};\r\n});\r\n","/**\r\n * @ngdoc directive\r\n * @name WcResponsiveTableModule.directive:wcRowSelectRadio\r\n * @restrict E\r\n * @element div\r\n * @description\r\n * The wcRowSelectRadio directive is responsible for radio button select in datatable.\r\n */\r\n\r\n'use strict';\r\n\r\nangular.module('WcResponsiveTableModule').directive('wcRowSelectRadio', function() {\r\n\treturn {\r\n\t\trestrict: 'E',\r\n\t\ttemplate: '<input type=\"radio\" name=\"{{responsiveTableController.id}}-radio\" class=\"wc-radio-column\" ng-click=\"rowSelectRadioController.selectRow()\" ng-model=\"responsiveTableController.wcRowSelectRadio\" ng-value=\"rowSelectRadioController.rowKey\">',\r\n\t\trequire: ['wcRowSelectRadio', '^wcResponsiveTable', '^ngModel'],\r\n\t\tscope: true,\r\n\t\tcontrollerAs: 'rowSelectRadioController',\r\n\t\tcontroller: ['$scope', '$element', function ($scope, $element) {\r\n\t\t\tvar responsiveTableController = $element.parent().controller('wcResponsiveTable');\r\n\r\n\t\t\tthis.rowKey = $scope.$parent.rowKey;\r\n\t\t\tthis.selectRow = function() {\r\n\t\t\t\tresponsiveTableController.ngModel = [this.rowKey];\r\n\t\t\t\tresponsiveTableController.applyModel(responsiveTableController.ngModel);\r\n\t\t\t};\r\n\r\n\t\t\t$scope.$on('table.render.complete', angular.bind(this, function() {\r\n\t\t\t\tif($scope.$parent.isSelected) {\r\n\t\t\t\t\tresponsiveTableController.wcRowSelectRadio = this.rowKey;\r\n\t\t\t\t}\r\n\t\t\t}));\r\n\t\t}],\r\n\t\tlink: function(scope, element, attrs, controllers) {\r\n\t\t\tvar rowSelectRadioController = controllers[0];\r\n\t\t\tvar responsiveTableController = controllers[1];\r\n\r\n\t\t\t var highlightRow = function(shouldHighlight) {\r\n\r\n\t\t\t\tvar row = element.parent().parent();\r\n\t\t\t\tif (shouldHighlight) {\r\n\t\t\t\t\t$(row).addClass('wc-highlight-row');\r\n\t\t\t\t} else {\r\n\t\t\t\t\t$(row).removeClass('wc-highlight-row');\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar tableCells = row.children();\r\n\t\t\t\t$(tableCells).each(function(index, cell) {\r\n\t\t\t\t\t// jshint unused:true\r\n\t\t\t\t\tif(shouldHighlight) {\r\n\t\t\t\t\t\t$(cell).addClass('wc-highlight-row');\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\t$(cell).removeClass('wc-highlight-row');\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t};\r\n\r\n\t\t\tscope.$watch('responsiveTableController.wcRowSelectRadio', function(newRow) {\r\n\t\t\t\tif(responsiveTableController.ngModel) {\r\n\t\t\t\t\tvar highlight = newRow === rowSelectRadioController.rowKey;\r\n\r\n\t\t\t\t\thighlightRow(highlight);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t};\r\n});\r\n","/**\r\n * @ngdoc directive\r\n * @name WcResponsiveTableModule.directive:wcRowSelectAll\r\n * @restrict A\r\n * @description\r\n * The wcRowSelectAll directive is responsible for selecting all rows of the datatable on a single click.\r\n */\r\n\r\n'use strict';\r\n\r\nangular.module('WcResponsiveTableModule').directive('wcRowSelectAll', function() {\r\n\treturn {\r\n\t\trestrict: 'A',\r\n\t\trequire: ['wcRowSelectAll', '^wcResponsiveTable', '^ngModel'],\r\n\t\tscope: {},\r\n\t\tcontrollerAs: 'rowSelectAllController',\r\n\t\tcontroller: ['$scope', '$element', function ($scope, $element) {\r\n\t\t\tvar responsiveTableController = $element.parent().controller('wcResponsiveTable');\r\n\t\t\tthis.viewScope = responsiveTableController.WcTableScopeService.getParentScope();\r\n\r\n\t\t\tthis.selectAll = function() {\r\n\t\t\t\tthis.viewScope.$broadcast('table.select.checkbox.all');\r\n\t\t\t\tthis.viewScope.$broadcast('table.select.button.all');\r\n\t\t\t\t$scope.$apply();\r\n\t\t\t};\r\n\t\t}],\r\n\t\tlink: function(scope, element, attrs, controllers) { //jshint unused:true\r\n\t\t\tvar rowSelectAllController = controllers[0];\r\n\t\t\telement.on('click', function () {\r\n\t\t\t\trowSelectAllController.selectAll();\r\n\t\t\t});\r\n\t\t}\r\n\t};\r\n});\r\n","/**\r\n * @ngdoc directive\r\n * @name WcResponsiveTableModule.directive:wcRowSelectNone\r\n * @restrict A\r\n * @description\r\n * The wcRowSelectNone directive is responsible for un select all the selected rows or headers of the datatable.\r\n */\r\n\r\n'use strict';\r\n\r\nangular.module('WcResponsiveTableModule').directive('wcRowSelectNone', function() {\r\n\treturn {\r\n\t\trestrict: 'A',\r\n\t\trequire: ['wcRowSelectNone', '^wcResponsiveTable', '^ngModel'],\r\n\t\tscope: {},\r\n\t\tcontrollerAs: 'rowSelectNoneController',\r\n\t\tcontroller: ['$scope', '$element', function ($scope, $element) {\r\n\t\t\tvar responsiveTableController = $element.parent().controller('wcResponsiveTable');\r\n\t\t\tthis.viewScope = responsiveTableController.WcTableScopeService.getParentScope();\r\n\r\n\t\t\tthis.selectNone = function() {\r\n\t\t\t\tthis.viewScope.$broadcast('table.select.checkbox.none');\r\n\t\t\t\tthis.viewScope.$broadcast('table.select.button.none');\r\n\t\t\t\t$scope.$apply();\r\n\t\t\t};\r\n\t\t}],\r\n\t\tlink: function(scope, element, attrs, controllers) { //jshint unused:true\r\n\t\t\tvar rowSelectNoneController = controllers[0];\r\n\t\t\telement.on('click', function () {\r\n\t\t\t\trowSelectNoneController.selectNone();\r\n\t\t\t});\r\n\t\t}\r\n\t};\r\n});","/**\r\n * @ngdoc directive\r\n * @name WcResponsiveTableModule.directive:wcTableSelectionInfo\r\n * @restrict E\r\n * @element span\r\n * @description\r\n * The wcTableSelectionInfo directive is responsible for get the number of selected rows from the datatable\r\n */\r\n\r\n'use strict';\r\n\r\nangular.module('WcResponsiveTableModule').directive('wcTableSelectionInfo', function() {\r\n\treturn {\r\n\t\trestrict: 'E',\r\n        template: '<span>{{tableSelectionInfoController.numberOfSelectedRows}} {{\"rowsCurrentlySelected\" | translate}}</span>',\r\n        require: ['wcTableSelectionInfo', '^wcResponsiveTable', '^ngModel'],\r\n\t\tscope: {},\r\n\t\tcontrollerAs: 'tableSelectionInfoController',\r\n\t\tcontroller: ['$scope', '$element', function($scope, $element) {\r\n\t\t\tvar responsiveTableController = $element.parent().controller('wcResponsiveTable');\r\n\t\t\tvar tableScope = responsiveTableController.WcTableScopeService.getTableScope();\r\n\r\n\t\t\tthis.numberOfSelectedRows = responsiveTableController.ngModel.length;\r\n\t\t\ttableScope.$watch(function() {\r\n\t\t\t\treturn responsiveTableController.ngModel.length;\r\n\t\t\t}, angular.bind(this, function(newVal, oldVal) {\r\n\t\t\t\t\tif(newVal != oldVal) {\r\n\t\t\t\t\t\tthis.numberOfSelectedRows = newVal;\r\n\t\t\t\t\t}\r\n\t\t\t}));\r\n\t\t}]\r\n\t};\r\n});\r\n","/**\r\n * @ngdoc directive\r\n * @name WcResponsiveTableModule.directive:wcRowActionSingle\r\n * @restrict A\r\n * @scope\r\n * @param {string} wcRowActionSingle The parameter holds the single row action values\r\n * @description\r\n * The wcRowActionSingle directive is responsible for the single row actions that are carried out in the datatable.\r\n */\r\n\r\n'use strict';\r\n\r\nangular.module('WcResponsiveTableModule').directive('wcRowActionSingle', function() {\r\n\treturn {\r\n\t\trestrict: 'A',\r\n\t\trequire: ['wcRowActionSingle', '^wcResponsiveTable'],\r\n\t\tscope: {},\r\n\t\tbindToController: {\r\n\t\t\twcRowActionSingle: '@'\r\n\t\t},\r\n\t\tcontrollerAs: 'rowActionSingleController',\r\n\t\tcontroller: ['$scope', '$element', function ($scope, $element) {\r\n\t\t\tvar responsiveTableController = $element.parent().controller('wcResponsiveTable');\r\n\r\n\t\t\tthis.singleAction = function() {\r\n\t\t\t\tvar rowScope = $scope.$parent;\r\n\t\t\t\tvar viewScope = responsiveTableController.WcTableScopeService.getParentScope();\r\n\r\n\t\t\t\tvar data = [].concat(rowScope.rowKey);\r\n\r\n\t\t\t\tviewScope.$broadcast(this.wcRowActionSingle, data);\r\n\t\t\t};\r\n\t\t}],\r\n\t\tlink: function (scope, element, attrs, controllers) { //jshint unused:true\r\n\t\t\tvar rowActionSingleController = controllers[0];\r\n\r\n\t\t\telement.on('click', function() {\r\n\t\t\t\trowActionSingleController.singleAction();\r\n\t\t\t});\r\n\t\t}\r\n\t};\r\n});","/**\r\n * @ngdoc directive\r\n * @name WcResponsiveTableModule.directive:wcRowSelectHeaderCheckbox\r\n * @restrict E\r\n * @element div\r\n * @description\r\n * The wcRowSelectHeaderCheckbox directive is responsible for selecting the header in datatable on a checkbox click.\r\n */\r\n\r\n'use strict';\r\n\r\nangular.module('WcResponsiveTableModule')\r\n\t.directive('wcRowSelectHeaderCheckbox', ['$timeout', function ($timeout) {\r\n\t\treturn {\r\n\t\t\trestrict: 'E',\r\n\t\t\ttemplate: '<input type=\"checkbox\" class=\"wc-header-checkbox\" name=\"{{rowSelectHeaderCheckboxController.id}}-header-checkbox\" ng-change=\"rowSelectHeaderCheckboxController.selectAllRows()\" ng-model=\"rowSelectHeaderCheckboxController.isChecked\">',\r\n\t\t\trequire: ['wcRowSelectHeaderCheckbox', '^wcResponsiveTable', '^ngModel'],\r\n            scope: {},\r\n            bindToController: {\r\n                wcRowSelectHeaderCheckbox: '@'\r\n            },\r\n\t\t\tcontrollerAs: 'rowSelectHeaderCheckboxController',\r\n\t\t\tcontroller: ['$scope', '$element', function ($scope, $element) {\r\n\t\t\t\tvar responsiveTableController = $element.parent().controller('wcResponsiveTable');\r\n\t\t\t\tvar tableScope = responsiveTableController.WcTableScopeService.getTableScope();\r\n\r\n                this.id = responsiveTableController.id;\r\n\t\t\t\tthis.checkbox = $element.find('input');\r\n\r\n\t\t\t\tthis.checkIfAllChecked = function () {\r\n\t\t\t\t\tvar allCheckboxes = responsiveTableController.table.find('tbody input[type=\"checkbox\"]');\r\n\t\t\t\t\tfor (var i = 0; i < allCheckboxes.length; i++) {\r\n\t\t\t\t\t\tif (!angular.element(allCheckboxes[i]).is(':checked')) {\r\n\t\t\t\t\t\t\tthis.isChecked = false;\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t};\r\n\r\n\t\t\t\tthis.selectAllRows = function () {\r\n\t\t\t\t\tvar event = this.isChecked ? 'table.select.checkbox.all' : 'table.select.checkbox.none';\r\n\t\t\t\t\ttableScope.$broadcast(event);\r\n\t\t\t\t};\r\n\r\n\t\t\t\ttableScope.$watch(function () {\r\n\t\t\t\t\treturn responsiveTableController.ngModel;\r\n\t\t\t\t}, angular.bind(this, function () {\r\n\t\t\t\t\tthis.checkIfAllChecked();\r\n\t\t\t\t}));\r\n\r\n\t\t\t\ttableScope.$on('table.render.complete', angular.bind(this, function () {\r\n\t\t\t\t\t$timeout(angular.bind(this, function () {\r\n\t\t\t\t\t\tthis.isChecked = true;\r\n\t\t\t\t\t\tthis.checkIfAllChecked();\r\n\t\t\t\t\t}));\r\n\t\t\t\t}));\r\n\t\t\t}]\r\n\t\t};\r\n\t}]);","'use strict';\r\nangular.module('WcResponsiveTableModule').directive('wcRowSelectHeaderRadio', function() {\r\n        return {\r\n            restrict: 'E',\r\n            template:'',\r\n            scope: {\r\n                wcRowSelectHeaderRadio: '@'\r\n            },\r\n            controller: ['$scope',function($scope){\r\n\r\n\r\n            }]\r\n        };\r\n    }\r\n);","/**\r\n * @ngdoc directive\r\n * @name WcResponsiveTableModule.directive:wcRowActionMultiple\r\n * @restrict A\r\n * @scope\r\n * @param {string} wcRowActionMultiple The parameter holds the multiple row action values\r\n * @description\r\n * The wcRowActionMultiple directive is responsible for the multiple actions that are carried out in the datatable.\r\n */\r\n\r\n'use strict';\r\n\r\nangular.module('WcResponsiveTableModule').directive('wcRowActionMultiple', function() {\r\n\treturn {\r\n\t\trestrict: 'A',\r\n\t\trequire: ['wcRowActionMultiple', '?^wcResponsiveTable'],\r\n\t\tscope: {},\r\n\t\tbindToController: {\r\n\t\t\twcRowActionMultiple: '@'\r\n\t\t},\r\n\t\tcontrollerAs: 'rowActionMultipleController',\r\n\t\tcontroller: ['$scope', '$element', function ($scope, $element) { //jshint unused:true\r\n\t\t\tvar responsiveTableController = $element.parent().controller('wcResponsiveTable');\r\n\r\n\t\t\tthis.multipleAction = function() {\r\n\t\t\t\tvar ngModel = responsiveTableController.ngModel;\r\n\t\t\t\tvar viewScope = responsiveTableController.WcTableScopeService.getParentScope();\r\n\r\n\t\t\t\tif(ngModel.length) {\r\n\t\t\t\t\tviewScope.$broadcast(this.wcRowActionMultiple, [].concat(ngModel));\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t}],\r\n\t\tlink: function (scope, element, attrs, controllers) { //jshint unused:true\r\n\t\t\tvar rowActionMultipleController = controllers[0];\r\n\r\n\t\t\telement.on('click', function() {\r\n\t\t\t\trowActionMultipleController.multipleAction();\r\n\t\t\t});\r\n\t\t}\r\n\t};\r\n});","/**\r\n * @ngdoc directive\r\n * @name WcResponsiveTableModule.directive:wcTablePagination\r\n * @description\r\n * The wcTablePagination directive is responsible for pagination operation in datatable\r\n */\r\n\r\n'use strict';\r\nangular.module('WcResponsiveTableModule').directive('wcTablePagination', ['$compile', '$window', '_', function ($compile, $window, _) {\r\n\treturn {\r\n\t\trequire: ['wcTablePagination'],\r\n\t\tscope: {},\r\n\t\tbindToController: {},\r\n\t\tcontrollerAs: 'tablePaginationController',\r\n\t\tcontroller: ['$scope', '$element', 'WcTranslateConfiguratorService',\r\n\t\t\t\t\tfunction ($scope, $element, WcTranslateConfiguratorService) {\r\n\r\n\t\t\t//TODO: The wcResponsiveTable directive is not a parent of wcTablePagination, figure out why?\r\n\t\t\t// In the mean time, grab the wcResponsiveTable controller off the scope\r\n\t\t\tvar responsiveTableController = $element.parent().controller('wcResponsiveTable');\r\n\t\t\tresponsiveTableController = responsiveTableController || $scope.responsiveTableController || $scope.$parent.responsiveTableController;\r\n\t\t\tvar tableScope = responsiveTableController.WcTableScopeService.getTableScope();\r\n\t\t\tvar pagination;\r\n\r\n\t\t\tthis.tableWrapper = responsiveTableController.element;\r\n\t\t\tthis.table = responsiveTableController.table;\r\n\t\t\tthis.id = responsiveTableController.id + '-pagination';\r\n\r\n\r\n\t\t\tWcTranslateConfiguratorService.loadPartAndRefresh('WC-dataTable');\r\n\r\n\t\t\tthis.pagination = responsiveTableController.WcTablePaginationService.getPaginationDefaults();\r\n\t\t\tpagination = this.pagination;\r\n\r\n\t\t\ttableScope.$on('table.pagination.update', angular.bind(this, function (event, resetCurrentPage) {\r\n\t\t\t\tif (resetCurrentPage) {\r\n\t\t\t\t\tpagination.currentPage = 1;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tpagination.totalItems = responsiveTableController.WcTableCollectionService.getCollectionLength();\r\n\t\t\t\tpagination.totalPages = Math.ceil(pagination.totalItems / pagination.resultsPerPage);\r\n\t\t\t\tthis.updatePaginationControls(pagination.currentPage);\r\n\t\t\t\tthis.createPaginationControlNumbers();\r\n\t\t\t}));\r\n\r\n\t\t\tpagination.boundaryLinks = true;\r\n\t\t\tpagination.currentBreakpoint = '';\r\n\t\t\tpagination.currentPage = 1;\r\n\t\t\tpagination.paginationPageControls = [];\r\n\t\t\tpagination.totalItems = responsiveTableController.WcTableCollectionService.getCollectionLength();\r\n\t\t\tpagination.totalPages = Math.ceil(pagination.totalItems / pagination.resultsPerPage);\r\n\r\n\t\t\tthis.createPaginationControlNumbers = function () {\r\n\t\t\t\tvar array = [];\r\n\r\n\t\t\t\tvar paginationNoOfPages = pagination.totalPages>pagination.numberOfPageControls? pagination.numberOfPageControls:pagination.totalPages;\r\n\r\n\t\t\t\tvar paginationOffset = Math.floor(paginationNoOfPages / 2);\r\n\r\n\t\t\t\tfor (var index = 0; index < paginationNoOfPages; index++) {\r\n\t\t\t\t\tif (pagination.currentPage - paginationOffset > 0 &&\r\n\t\t\t\t\t\tpagination.currentPage - paginationOffset <= pagination.totalPages) {\r\n\t\t\t\t\t\tarray.push(pagination.currentPage - paginationOffset);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tpaginationOffset--;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (array.length < paginationNoOfPages) {\r\n\t\t\t\t\tvar checkValue = Math.floor(pagination.currentPage - paginationNoOfPages / 2);\r\n\t\t\t\t\tvar numberOfPagesNeeded = Math.abs(array.length - paginationNoOfPages);\r\n\t\t\t\t\tvar pageNumberToAdd;\r\n\t\t\t\t\tvar i;\r\n\r\n\t\t\t\t\tif (checkValue <= 0) {\r\n\t\t\t\t\t\tvar lastPageAdded = array[array.length - 1];\r\n\t\t\t\t\t\tfor (i = 1; i <= numberOfPagesNeeded; i++) {\r\n\t\t\t\t\t\t\tpageNumberToAdd = lastPageAdded + i;\r\n\t\t\t\t\t\t\tif (pagination.totalPages >= pageNumberToAdd) {\r\n\t\t\t\t\t\t\t\tarray.push(pageNumberToAdd);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tvar firstPageAdded = array[0];\r\n\t\t\t\t\t\tfor (i = 1; i <= numberOfPagesNeeded; i++) {\r\n\t\t\t\t\t\t\tpageNumberToAdd = firstPageAdded - i;\r\n\t\t\t\t\t\t\tarray.unshift(pageNumberToAdd);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tpagination.paginationPageControls = array;\r\n\t\t\t};\r\n\r\n\t\t\tthis.changeResultsPerPage = function () {\r\n\t\t\t\tif (pagination.resultsPerPage === 'All') {\r\n\t\t\t\t\tpagination.resultsPerPage = pagination.totalItems;\r\n\t\t\t\t\tpagination.pageStart = 0;\r\n\t\t\t\t\tpagination.pageEnd = pagination.totalItems;\r\n\t\t\t\t\tpagination.totalPages = 1;\r\n\t\t\t\t\tthis.changePage(1);\r\n\r\n\t\t\t\t} else {\r\n\t\t\t\t\tpagination.totalPages = Math.ceil(pagination.totalItems / pagination.resultsPerPage);\r\n\t\t\t\t\tvar newPage = Math.ceil(pagination.pageStart / pagination.resultsPerPage);\r\n\t\t\t\t\tthis.changePage(newPage ? newPage : 1);\r\n\t\t\t\t}\r\n\t\t\t};\r\n\r\n\t\t\tthis.updatePaginationControls = function (pageNumber) {\r\n\t\t\t\tpagination.currentPage = pageNumber;\r\n\t\t\t\tpagination.pageStart = (pageNumber * pagination.resultsPerPage) - pagination.resultsPerPage;\r\n\r\n\t\t\t\tvar newPageEnd = pagination.pageStart + pagination.resultsPerPage;\r\n\r\n\t\t\t\tif (newPageEnd > pagination.totalItems) {\r\n\t\t\t\t\tpagination.pageEnd = pagination.totalItems;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tpagination.pageEnd = newPageEnd;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tresponsiveTableController.WcTablePaginationService.setPaginationDefaults({\r\n\t\t\t\t\tpageStart: pagination.pageStart,\r\n\t\t\t\t\tpageEnd: pagination.pageEnd\r\n\t\t\t\t});\r\n\r\n\t\t\t};\r\n\r\n\t\t\tthis.changePage = function (pageNumber) {\r\n\t\t\t\tif (pageNumber > 0 && pageNumber <= pagination.totalPages) {\r\n\t\t\t\t\tthis.updatePaginationControls(pageNumber);\r\n\t\t\t\t\tthis.createPaginationControlNumbers();\r\n\r\n\t\t\t\t\ttableScope.renderTable();\r\n\r\n\t\t\t\t} else {\r\n\t\t\t\t\tif (isNaN(pageNumber)) {\r\n\t\t\t\t\t\tthrow 'Invaild Page Number: ' + pageNumber + '. Must be a number, no other characters allowed';\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\telse if (pageNumber <= 0) {\r\n\t\t\t\t\t\tthrow 'Invaild Page Number: ' + pageNumber + '. Must be greater than 0';\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\telse if (pageNumber > pagination.totalPages) {\r\n\t\t\t\t\t\tthrow 'Invaild Page Number: ' + pageNumber + '. Must be smaller than ' + pagination.totalPages;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\telse {\r\n\t\t\t\t\t\tthrow 'Invaild Page Number: ' + pageNumber + '. Not sure what you did, but it is invalid';\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t};\r\n\r\n\t\t\tthis.nextPage = function () {\r\n\t\t\t\tvar nextPageNumber = pagination.currentPage;\r\n\t\t\t\tif (nextPageNumber + 1 <= pagination.totalPages) {\r\n\t\t\t\t\tthis.changePage(++nextPageNumber);\r\n\t\t\t\t}\r\n\t\t\t};\r\n\r\n\t\t\tthis.previousPage = function () {\r\n\t\t\t\tvar nextPageNumber = pagination.currentPage;\r\n\t\t\t\tif (nextPageNumber - 1 > 0) {\r\n\t\t\t\t\tthis.changePage(--nextPageNumber);\r\n\t\t\t\t}\r\n\t\t\t};\r\n\r\n\t\t\t//// Make sure the pagination controls are refreshed after a sort. If the table is sorted on a page greater\r\n\t\t\t//// than 1, the controls will not update\r\n\t\t\t//tableScope.$on('table.sort.complete', function() {\r\n\t\t\t//\tthis.updatePaginationControls(1);\r\n\t\t\t//\tthis.createPaginationControlNumbers();\r\n\t\t\t//\r\n\t\t\t//\ttableScope.$broadcast('table.render.start', pagination);\r\n\t\t\t//});\r\n\r\n\t\t\t//responsive stuff\r\n\t\t\ttableScope.$watch(function () {\r\n\t\t\t\treturn pagination.currentBreakpoint;\r\n\t\t\t}, angular.bind(this, function (newValue, oldValue) {\r\n\t\t\t\tif (newValue !== oldValue) {\r\n\t\t\t\t\tif (newValue === 'xs') {\r\n\t\t\t\t\t\t//pagination.resultsPerPage = 'All';\r\n\t\t\t\t\t\t//this.changeResultsPerPage();\r\n\t\t\t\t\t\tpagination.numberOfPageControls = 0;\r\n\t\t\t\t\t\tpagination.boundaryLinks = false;\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse if (newValue === 'sm') {\r\n\t\t\t\t\t\t//pagination.resultsPerPage = this.resultsPerPage || pagination.resultsPerPage;\r\n\t\t\t\t\t\t//this.changeResultsPerPage();\r\n\t\t\t\t\t\tpagination.numberOfPageControls = 0;\r\n\t\t\t\t\t\tpagination.boundaryLinks = false;\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse if (newValue === 'md') {\r\n\t\t\t\t\t\t//pagination.resultsPerPage = this.resultsPerPage || pagination.resultsPerPage;\r\n\t\t\t\t\t\t//this.changeResultsPerPage();\r\n\t\t\t\t\t\tpagination.numberOfPageControls = 0;\r\n\t\t\t\t\t\tpagination.boundaryLinks = false;\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse if (newValue === 'lg') {\r\n\t\t\t\t\t\t//pagination.resultsPerPage = this.resultsPerPage || pagination.resultsPerPage;\r\n\t\t\t\t\t\t//this.changeResultsPerPage();\r\n\t\t\t\t\t\tpagination.numberOfPageControls = 3;\r\n\t\t\t\t\t\tpagination.boundaryLinks = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse {\r\n\t\t\t\t\t\tpagination.numberOfPageControls = responsiveTableController.WcTablePaginationService.getPaginationDefaults().numberOfPageControls;\r\n\t\t\t\t\t\tpagination.boundaryLinks = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.createPaginationControlNumbers();\r\n\t\t\t\t}\r\n\t\t\t}));\r\n\r\n\t\t\tvar resizeHandler = function () {\r\n\t\t\t\t//<=430 is default\r\n\t\t\t\tif (window.innerWidth <= pagination.responsiveBreakpoints[0] && pagination.currentBreakpoint !== 'xs') {\r\n\t\t\t\t\tpagination.currentBreakpoint = 'xs';\r\n\t\t\t\t}\r\n\t\t\t\t//>430 and <=500 is default\r\n\t\t\t\telse if ((window.innerWidth > pagination.responsiveBreakpoints[0] &&\r\n\t\t\t\t\twindow.innerWidth <= pagination.responsiveBreakpoints[1]) && pagination.currentBreakpoint !== 'sm') {\r\n\t\t\t\t\tpagination.currentBreakpoint = 'sm';\r\n\t\t\t\t}\r\n\t\t\t\t//>500 and <=600 is default\r\n\t\t\t\telse if ((window.innerWidth > pagination.responsiveBreakpoints[1] &&\r\n\t\t\t\t\twindow.innerWidth <= pagination.responsiveBreakpoints[2]) && pagination.currentBreakpoint !== 'md') {\r\n\t\t\t\t\tpagination.currentBreakpoint = 'md';\r\n\t\t\t\t}\r\n\t\t\t\t//>600 and <=900 is default\r\n\t\t\t\telse if ((window.innerWidth > pagination.responsiveBreakpoints[2] &&\r\n\t\t\t\t\twindow.innerWidth <= pagination.responsiveBreakpoints[3]) && pagination.currentBreakpoint !== 'lg') {\r\n\t\t\t\t\tpagination.currentBreakpoint = 'lg';\r\n\t\t\t\t}\r\n\t\t\t\t//>900 is default\r\n\t\t\t\telse if (window.innerWidth > pagination.responsiveBreakpoints[3] && pagination.currentBreakpoint !== 'xl') {\r\n\t\t\t\t\tpagination.currentBreakpoint = 'xl';\r\n\t\t\t\t}\r\n\r\n\t\t\t\ttableScope.$digest();\r\n\t\t\t};\r\n\t\t\t//debounce this handler to avoid rapid-fire resize events\r\n\t\t\tangular.element($window).bind('resize', _.debounce(resizeHandler, 300));\r\n\r\n\t\t\t//finally, call the resizeHandler once to initialize our breakpoint var\r\n\t\t\tsetTimeout(resizeHandler, 0);\r\n\t\t}],\r\n\t\tlink: function (scope, element, attr, controllers) {\r\n\t\t\tvar tablePaginationController = controllers[0];\r\n\r\n\t\t\tvar resultsPerPageTemplate = [\r\n\t\t\t\t'<div class=\"col-xs-3 result-page-count\">',\r\n\t\t\t\t'<label>{{\"pagination.resultsPerPage\" | translate}}: ',\r\n\t\t\t\t'<select class=\"form-control form-inline input-sm pagination-results-per-page\" ng-options=\"result for result in tablePaginationController.pagination.selectResultsPerPage\"',\r\n\t\t\t\t'ng-model=\"tablePaginationController.pagination.resultsPerPage\" ng-change=\"tablePaginationController.changeResultsPerPage()\">',\r\n\t\t\t\t'</select></label>',\r\n\t\t\t\t'</div>'].join('');\r\n\r\n\t\t\tvar paginationLegendTemplate = [\r\n\t\t\t\t'<div class=\"col-xs-4 text-right\">',\r\n\t\t\t\t'<p class=\"hidden-xs hidden-sm results-data\"><span ng-if=\"tablePaginationController.pagination.totalItems==0\">{{\"pagination.paginationNoRecordLegend\" | translate:tablePaginationController.pagination}}</span><span ng-if=\"tablePaginationController.pagination.totalItems>0\"> {{\"pagination.paginationLegend\" | translate:tablePaginationController.pagination}}</span>',\r\n\t\t\t\t'</p>',\r\n\t\t\t\t'</div>'].join('');\r\n\r\n\t\t\tvar paginationControlsTemplate = [\r\n\t\t\t\t'<div class=\"col-xs-5 pagination-control text-right\">',\r\n\t\t\t\t'<ul class=\"hidden-xs pagination pagination-sm\">',\r\n\t\t\t\t'<li ng-hide=\"!tablePaginationController.pagination.boundaryLinks\" class=\"pagination-page\"  ng-class=\"{disabled: tablePaginationController.pagination.currentPage == 1}\"><button type=\"button\" ng-disabled=\"tablePaginationController.pagination.currentPage == 1\" ng-click=\"tablePaginationController.changePage(1)\">&#xe069</button></li>',\r\n\t\t\t\t'<li class=\"pagination-page\"  ng-class=\"{disabled: tablePaginationController.pagination.currentPage == 1}\"><button type=\"button\"  ng-disabled=\"tablePaginationController.pagination.currentPage == 1\" class=\"previous\" ng-click=\"tablePaginationController.previousPage()\">&#xe071</button></li>',\r\n\t\t\t\t'<li class=\"pagination-page pagination-page-number\" ng-class=\"{active: tablePaginationController.pagination.currentPage === number}\" ng-repeat=\"number in tablePaginationController.pagination.paginationPageControls\">',\r\n\t\t\t\t'<button type=\"button\" ng-click=\"tablePaginationController.changePage(number)\">{{number}}</button>',\r\n\t\t\t\t'</li>',\r\n\t\t\t\t'<li class=\"pagination-page\" ng-class=\"{disabled: tablePaginationController.pagination.currentPage == tablePaginationController.pagination.totalPages}\"><button type=\"button\" ng-disabled=\"tablePaginationController.pagination.currentPage == tablePaginationController.pagination.totalPages\" class=\"next\" ng-click=\"tablePaginationController.nextPage()\">&#xe075</button></li>',\r\n\t\t\t\t'<li ng-hide=\"!tablePaginationController.pagination.boundaryLinks\" class=\"pagination-page\"  ng-class=\"{disabled: tablePaginationController.pagination.currentPage == tablePaginationController.pagination.totalPages}\"><button type=\"button\" ng-disabled=\"tablePaginationController.pagination.currentPage == tablePaginationController.pagination.totalPages\" ng-click=\"tablePaginationController.changePage(tablePaginationController.pagination.totalPages)\">&#xe077</button></li>',\r\n\t\t\t\t'</ul>',\r\n\t\t\t\t'<div>'].join('');\r\n\r\n\t\t\tvar navigateToPageTemplate = [\r\n\t\t\t\t'<div class=\"col-xs-12 pagination-navigation hidden-sm hidden-md hidden-lg hidden-xl text-center\">',\r\n\t\t\t\t'<ul class=\"pagination pagination-sm\">',\r\n\t\t\t\t'<li class=\"pagination-page\" ng-class=\"{disabled: tablePaginationController.pagination.currentPage == 1}\"><button type=\"button\" class=\"previous\" ng-click=\"tablePaginationController.previousPage()\">&#xe071</button></li>',\r\n\t\t\t\t'<li>',\r\n\t\t\t\t'<input type=\"text\" pattern=\"[0-9]*\" ng-model=\"tablePaginationController.pagination.newInputPage\" ng-change=\"tablePaginationController.changePage(tablePaginationController.pagination.newInputPage)\" placeholder=\"{{\\'pagination.jumpTo\\' | translate}}\"  />',\r\n\t\t\t\t'</li>',\r\n\t\t\t\t'<li class=\"pagination-page\" ng-class=\"{disabled: tablePaginationController.pagination.currentPage == tablePaginationController.pagination.totalPages}\"><button type=\"button\" class=\"next\" ng-click=\"tablePaginationController.nextPage()\">&#xe075</button></li>',\r\n\t\t\t\t'</ul>',\r\n\t\t\t\t'<p class=\"text-center\">{{\"pagination.paginationLegendMobile\" | translate:tablePaginationController.pagination}}</p>',\r\n\t\t\t\t'</div>'\r\n\t\t\t].join('');\r\n\r\n\t\t\t//TODO: Is the data-table-name attribute documented?\r\n\t\t\tvar action = tablePaginationController.tableWrapper.attr('data-table-name');\r\n\r\n\t\t\tvar actionDropdownTemplate = [];\r\n\t\t\tif (action) {\r\n\t\t\t\tactionDropdownTemplate = [\r\n\t\t\t\t\t'<div class=\"col-xs-12 hidden action-dropdown\">',\r\n                    '<div class=\"row\">',\r\n\t\t\t\t\t\t'<div class=\"col-xs-4 pt-10\"><strong>{{\"pagination.rowActions\" | translate}} :</strong></div>',\r\n\t\t\t\t\t\t\t'<div class=\"col-xs-8\">',\r\n\t\t\t\t\t\t\t\t'<select class=\"form-control inline\">',\r\n\t\t\t\t\t\t\t\t'<option>{{\"pagination.select\" | translate}}</option>',\r\n\t\t\t\t\t\t\t\t'<option>{{\"pagination.delete\" | translate}}</option>',\r\n\t\t\t\t\t\t\t\t'</select>',\r\n\t\t\t\t\t\t\t\t'<button type=\"button\" class=\"btn ml-5 mt-neg-3 btn-primary\" wc-row-action-multiple=\"delete-' + action + '\">{{\"pagination.submit\" | translate}}</button>',\r\n\t\t\t\t\t\t\t'</div>',\r\n                    \t'</div>',\r\n\t\t\t\t\t'</div>'\r\n\t\t\t\t].join('');\r\n\t\t\t}\r\n\r\n\t\t\tvar template = [\r\n\t\t\t\t'<div class=\"row\">',\r\n\t\t\t\tresultsPerPageTemplate,\r\n\t\t\t\tpaginationLegendTemplate,\r\n\t\t\t\tpaginationControlsTemplate,\r\n\t\t\t\t'</div>',\r\n\t\t\t\t'<div class=\"row\">',\r\n\t\t\t\tnavigateToPageTemplate,\r\n\t\t\t\t'</div>',\r\n\t\t\t\t'<div class=\"row\">',\r\n\t\t\t\tactionDropdownTemplate,\r\n\t\t\t\t'</div>',\r\n\t\t\t].join('');\r\n\r\n\t\t\tvar controlsPlacement = tablePaginationController.pagination.paginationControlsPlacement;\r\n\t\t\ttablePaginationController.createPaginationControlNumbers();\r\n\r\n\t\t\tif(tablePaginationController.pagination.totalItems>0){\r\n\t\t\t\tif (controlsPlacement === 'top' || controlsPlacement === 'both') {\r\n\t\t\t\t\tvar paginationTop = $compile(template)(scope);\r\n\t\t\t\t\tpaginationTop.addClass('pagination-top');\r\n\t\t\t\t\ttablePaginationController.tableWrapper.prepend(paginationTop);\r\n\t\t\t\t}\r\n\t\t\t\tif (controlsPlacement === 'bottom' || controlsPlacement === 'both') {\r\n\t\t\t\t\tvar paginationBottom = $compile(template)(scope);\r\n\t\t\t\t\tpaginationBottom.addClass('pagination-bottom');\r\n\t\t\t\t\ttablePaginationController.table.after(paginationBottom);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n}]);\r\n","/**\r\n * @ngdoc directive\r\n * @name WcResponsiveTableModule.directive:wcColumnSort\r\n * @restrict A\r\n * @scope\r\n * @param {string} wcColumnSort The parameter holds the column sort values\r\n * @param {string} wcColumnSortDefault The parameter holds the default column sort values\r\n * @param {string} specialChars The string value holds the special characters\r\n * @param {string} columnIndex The variable holds the column index value\r\n * @description\r\n * The wcColumnSort directive adds column sort option to jquery datatable, this directive holds methods that are\r\n * related to column sort operation.\r\n */\r\n\r\n'use strict';\r\n\r\nangular.module('WcResponsiveTableModule').directive('wcColumnSort', [ '$timeout', function ($timeout) {\r\n    return {\r\n        restrict: 'A',\r\n\t\trequire: ['wcColumnSort', '^wcResponsiveTable'],\r\n\t\tscope: {},\r\n\t\tbindToController: {\r\n            wcColumnSort: '@',\r\n            wcColumnSortDefault: '@',\r\n            specialChars: '@',\r\n            columnIndex: '@'\r\n        },\r\n        controllerAs: 'columnSortController',\r\n        controller: ['$scope', '$element', function ($scope, $element) {\r\n            var responsiveTableController = $element.parent().controller('wcResponsiveTable');\r\n\r\n            this.tableScope = responsiveTableController.WcTableScopeService.getTableScope();\r\n            this.collectionLength = responsiveTableController.WcTableCollectionService.getCollectionLength();\r\n            this.resultsPerPage = responsiveTableController.WcTablePaginationService.getPaginationDefaults().resultsPerPage;\r\n\t\t\tthis.sortReverse = false;\r\n\r\n            this.sortCollection = function () {\r\n\t\t\t\tresponsiveTableController.WcTableCollectionService.sortEnabled = true;\r\n                //induce a delay to limit the FOUC\r\n                $timeout(angular.bind(this, function () {\r\n                    var collection = responsiveTableController.WcTableCollectionService.getCollection();\r\n\r\n\t\t\t\t\tvar sortOn = function (arr, prop, reverse, specialChars) {\r\n                        reverse = reverse ? 1 : -1;\r\n\r\n                        if (!specialChars) {\r\n                            return arr.sort(function (a, b) {\r\n                                if (_.get(a, prop) < _.get(b, prop)) {\r\n                                    return 1 * reverse;\r\n                                } else if (_.get(a, prop) > _.get(b, prop)) {\r\n                                    return -1 * reverse;\r\n                                } else {\r\n                                    return 0;\r\n                                }\r\n                            });\r\n                        } else {\r\n                            return arr.sort(function (a, b) {\r\n                                return reverse === 1 ? _.get(b, prop).localeCompare(_.get(a, prop)) : _.get(a, prop).localeCompare(_.get(b, prop));\r\n                            });\r\n                        }\r\n\t\t\t\t\t};\r\n\r\n\t\t\t\t\tresponsiveTableController.previousSortColumn = responsiveTableController.activeSortColumn;\r\n\t\t\t\t\tresponsiveTableController.activeSortColumn = this.columnIndex;\r\n\r\n\t\t\t\t\tresponsiveTableController.WcTableCollectionService.setCollection(sortOn(collection, this.wcColumnSort, this.sortReverse, this.specialChars), responsiveTableController.WcTableCollectionService.sortEnabled, responsiveTableController.WcTableCollectionService.filterEnabled);\r\n                    this.tableScope.$broadcast('table.sort.complete', this.wcColumnSort, this.sortReverse);\r\n\r\n\t\t\t\t\tthis.sortReverse = this.sortReverse ? false : true;\r\n\t\t\t\t}), 30);\r\n            };\r\n\r\n            if (this.wcColumnSortDefault) {\r\n                if (this.wcColumnSortDefault == 'desc') {\r\n\t\t\t\t\tthis.sortReverse = true;\r\n                }\r\n\t\t\t\tthis.sortCollection();\r\n            }\r\n            else {\r\n\t\t\t\t// $timeout(angular.bind(this, function(){\r\n\t\t\t\t// \tthis.tableScope.renderTable();\r\n\t\t\t\t// }), 30);\r\n\t\t\t\t//this.tableScope.$broadcast('table.sort.complete', this.wcColumnSort, this.sortReverse);\r\n            }\r\n        }],\r\n        link: function (scope, element, attrs, controllers) {\r\n\t\t\t//jshint unused:true\r\n\t\t\tvar columnSortController = controllers[0];\r\n\t\t\tvar responsiveTableController = controllers[1];\r\n\r\n            element.addClass('wc-table-column-sort-heading');\r\n\r\n            //if(scope.$parent.ngModel) {\r\n            //include listener for when the sorted column changes\r\n\t\t\tresponsiveTableController.WcTableScopeService.getTableScope().$on('table.sort.complete', function (event, column, reverse) {\r\n                var thSpan = element.find('span[class~=glyphicon-sort]');\r\n                var columnClass = element.attr('class').match(/wc-table-column-\\d+/)[0];\r\n                //var columnSelector = '.wc-table-column-' + scope.columnIndex;\r\n                if (column === columnSortController.wcColumnSort) {\r\n                    thSpan.toggleClass('glyphicon-sort', false);\r\n                    if (!reverse) {\r\n                        thSpan.toggleClass('glyphicon-sort-by-alphabet', true);\r\n                        thSpan.toggleClass('glyphicon-sort-by-alphabet-alt', false);\r\n                    }\r\n                    else {\r\n                        thSpan.toggleClass('glyphicon-sort-by-alphabet-alt', true);\r\n                        thSpan.toggleClass('glyphicon-sort-by-alphabet', false);\r\n                    }\r\n\t\t\t\t\t$('#' + responsiveTableController.id + ' .' + columnClass).addClass('wc-table-column-highlight');\r\n                    //element.addClass('sorted');\r\n                }\r\n                else {\r\n                    thSpan.toggleClass('glyphicon-sort', true);\r\n                    thSpan.toggleClass('glyphicon-sort-by-alphabet glyphicon-sort-by-alphabet-alt', false);\r\n\t\t\t\t\t$('#' + responsiveTableController.id + ' .' + columnClass).removeClass('wc-table-column-highlight');\r\n\t\t\t\t\t//element.removeClass('sorted');\r\n\t\t\t\t\tcolumnSortController.sortReverse = false;\r\n                }\r\n            });\r\n\r\n\t\t\tresponsiveTableController.WcTableScopeService.getTableScope().$on('table.render.complete', function (event) {\r\n                var columnClass = element.attr('class').match(/wc-table-column-\\d+/)[0];\r\n                if (element.hasClass('wc-table-column-highlight')) {\r\n\t\t\t\t\t$('#' + responsiveTableController.id + ' .' + columnClass).addClass('wc-table-column-highlight');\r\n                }\r\n                else {\r\n\t\t\t\t\t$('#' + responsiveTableController.id + ' .' + columnClass).removeClass('wc-table-column-highlight');\r\n                }\r\n            });\r\n\r\n\t\t\t$timeout(function () {\r\n\r\n\t\t\tvar clickableElem = element.find('.header-text, .header-icons');\r\n\r\n            $(clickableElem).on('click', function () {\r\n\t\t\t\tvar collectionLength = columnSortController.collectionLength;\r\n                var showLoadingIndicator = false;\r\n\r\n                if (columnSortController.resultsPerPage <= 25) {\r\n                    if (collectionLength >= 100000) {\r\n                        showLoadingIndicator = true;\r\n                    }\r\n                } else if (columnSortController.resultsPerPage <= 75) {\r\n                    if (collectionLength >= 10000) {\r\n                        showLoadingIndicator = true;\r\n                    }\r\n                }\r\n                else {\r\n                    if (collectionLength >= 1000) {\r\n                        showLoadingIndicator = true;\r\n                    }\r\n                }\r\n\r\n                if (showLoadingIndicator) {\r\n\t\t\t\t\tcolumnSortController.tableScope.tableIsLoading();\r\n                }\r\n\r\n\t\t\t\tcolumnSortController.sortCollection();\r\n            });\r\n\r\n            }, 0);\r\n            //glyphicon-sort-by-alphabet\r\n            //glyphicon-sort-by-alphabet-alt\r\n            if (element[0].children.length) {\r\n                $timeout(function () {\r\n                    element.find('.header-text-wrapper').append('<span class=\"header-icons pull-right\"><span class=\"glyphicon glyphicon-sort\"></span></span>');\r\n                }, 0);\r\n                // element.find('input, select').first().before('<span class=\"glyphicon glyphicon-sort\"></span>');\r\n                // element.find('label').after('<span class=\"glyphicon glyphicon-sort\"></span>');\r\n\r\n            }\r\n            else {\r\n                element.append('<span class=\"glyphicon glyphicon-sort\"></span>');\r\n            }\r\n            //}\r\n        }\r\n    };\r\n}]);\r\n","/**\r\n * @ngdoc directive\r\n * @name WcResponsiveTableModule.directive:wcColumnFilter\r\n * @restrict A\r\n * @scope\r\n * @param {string} wcColumnFilter The string of filter values of a datatable\r\n * @param {string} wcColumnFilterDelay The string of filter delay values of a datatable\r\n * @description\r\n * The wcColumnFilter directive adds filters to jquery datatable, this directive holds methods that are\r\n * related to filter operation.\r\n */\r\n\r\n'use strict';\r\n\r\nangular.module('WcResponsiveTableModule').directive('wcColumnFilter', ['$compile', '$timeout', '$document', '$filter', '_', 'WcTranslateConfiguratorService', '$translate', function ($compile, $timeout, $document, $filter, _, WcTranslateConfiguratorService, $translate) {\r\n\treturn {\r\n\t\trestrict: 'A',\r\n\t\trequire: ['wcColumnFilter', '^wcResponsiveTable'],\r\n\t\tscope: true,\r\n\t\tbindToController: {\r\n\t\t\twcColumnFilter: '@',\r\n\t\t\twcColumnFilterDelay: '@'\r\n\t\t},\r\n\t\tcontrollerAs: 'columnFilterController',\r\n\t\tcontroller: ['$scope', '$element', function ($scope, $element) {\r\n\t\t\tWcTranslateConfiguratorService.loadPartAndRefresh('WC-dataTable');\r\n\r\n\t\t\tvar htmlDecode = function (input) {\r\n\t\t\t\tvar e = $document[0].createElement('div');\r\n\t\t\t\te.innerHTML = input;\r\n\t\t\t\treturn e.childNodes[0].nodeValue;\r\n\t\t\t};\r\n\r\n\t\t\tvar responsiveTableController = $element.parent().controller('wcResponsiveTable');\r\n\r\n\t\t\tthis.tableScope = responsiveTableController.WcTableScopeService.getTableScope();\r\n\t\t\tvar collection = responsiveTableController.WcTableCollectionService.getCollection();\r\n\t\t\tthis.collection = collection;\r\n\r\n\t\t\tthis.predicate = this.wcColumnFilter;\r\n\t\t\tthis.wcColumnFilterDelay = this.wcColumnFilterDelay || 0;\r\n\t\t\tthis.isMultiSelect = false;\r\n\r\n\t\t\tthis.mathFilterOptions = [\r\n\t\t\t\t{id: '==', name: '='},\r\n\t\t\t\t{id: '<', name: htmlDecode('&lt;')},\r\n\t\t\t\t{id: '<=', name: htmlDecode('&le;')},\r\n\t\t\t\t{id: '>', name: htmlDecode('&gt;')},\r\n\t\t\t\t{id: '>=', name: htmlDecode('&ge;')},\r\n\t\t\t\t{id: '!=', name: htmlDecode('&ne;')}\r\n\t\t\t];\r\n\r\n\r\n\t\t\t//reassign our local collection var when an update has occurred.\r\n\t\t\t//also rerun the filters\r\n\t\t\tthis.tableScope.$on('table.collection.update', angular.bind(this, function () {\r\n\t\t\t\tcollection = responsiveTableController.WcTableCollectionService.getCollection();\r\n\t\t\t\t$timeout(angular.bind(this, function () {\r\n\t\t\t\t\tthis.filterColumn();\r\n\t\t\t\t}), 0);\r\n\t\t\t}));\r\n\r\n\t\t\tthis.filterColumn = function () {\r\n\r\n\t\t\t\tvar activeFilterWrapper = responsiveTableController.element.find(\".active-filters\");\r\n\r\n\t\t\t\tresponsiveTableController.WcTableCollectionService.filterEnabled = true;\r\n\r\n\t\t\t\tvar filterEnabled = responsiveTableController.WcTableCollectionService.filterEnabled;\r\n\t\t\t\tvar sortEnabled = responsiveTableController.WcTableCollectionService.sortEnabled;\r\n\r\n\t\t\t\t//TODO only handle one copy of the collection\r\n\t\t\t\tvar filterArray = responsiveTableController.WcColumnFilterService.getColumnsToFilter();\r\n\r\n                if(filterArray.length === 0) {\r\n                    activeFilterWrapper.toggleClass(\"hidden\", true);\r\n                    responsiveTableController.WcTableCollectionService.filterEnabled = false;\r\n                    responsiveTableController.WcTableCollectionService.setCollection(collection, sortEnabled, filterEnabled);\r\n                }\r\n                else {\r\n                \tactiveFilterWrapper.toggleClass(\"hidden\", false);\r\n                    var filteredCollection = _.filter(collection, angular.bind(this, function(row) {\r\n                        var match = false;\r\n                        for (var i = 0; i < filterArray.length; i++) {\r\n                        \tif(filterArray[i].value == \"\"){\r\n                        \t\tmatch = true;\r\n\t\t\t\t\t\t\t}else if (_.get(row, filterArray[i].predicate)){\r\n\t\t\t\t\t\t\t\tif (angular.isArray(filterArray[i].value)) {\r\n                                    for (var j = 0; j < filterArray[i].value.length; j++) {\r\n                                        if (_.get(row, filterArray[i].predicate).toString().toLowerCase().indexOf(filterArray[i].value[j].toLowerCase()) > -1) {\r\n                                            match = true;\r\n                                        } else {\r\n                                            return false;\r\n                                        }\r\n                                    }\r\n                                }\r\n                                else if (filterArray[i].isMathFilter) { //if mathFilter is true\r\n                                    var mathOp = responsiveTableController.selectedMathFilterOption[filterArray[i].predicate].id;\r\n                                    var filterString = filterArray[i].value;\r\n                                    var filterNum = Number(filterString);\r\n                                    var rowValue = Number(_.get(row, filterArray[i].predicate));\r\n                                    if($scope.$eval(rowValue + mathOp + filterNum)){\r\n                                        match = true;\r\n                                    } else {\r\n                                        return false;\r\n                                    }\r\n                                }else if (_.get(row, filterArray[i].predicate, 'default') !== 'default' && _.get(row, filterArray[i].predicate).toString().toLowerCase().indexOf(filterArray[i].value.toLowerCase()) > -1) {\r\n                                    match = true;\r\n                                }else{\r\n                                    return false;\r\n                                }\r\n                            } else {\r\n                                return false;\r\n                            }\r\n\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\treturn match;\r\n\t\t\t\t\t}));\r\n\r\n\t\t\t\t\tresponsiveTableController.WcTableCollectionService.setCollection(filteredCollection, sortEnabled, filterEnabled);\r\n\t\t\t\t}\r\n\t\t\t};\r\n\r\n\t\t\tthis.dismissFilter = function (id) {\r\n\t\t\t\tvar filterInput = $('input[wc-column-filter=\"' + id + '\"], select[wc-column-filter=\"' + id + '\"]');\r\n\t\t\t\tfilterInput.val(\"\");\r\n\t\t\t\tresponsiveTableController.WcColumnFilterService.removeColumnToFilter(id);\r\n\t\t\t\tthis.filterColumn();\r\n\t\t\t\t$(\".active-filters .\" + id.replace(\".\", \"-\")).remove();\r\n                $element.parents(\"th\").find('span.glyphicon-filter').remove();\r\n\t\t\t};\r\n\r\n\t\t\tthis.filterListener = function () {\r\n\t\t\t\tvar htmlPredicate = this.predicate.replace(\".\", \"-\");\r\n\t\t\t\tvar elementVal = $element.val();\r\n\t\t\t\tvar oldVal;\r\n\t\t\t\tif (_.find(responsiveTableController.WcColumnFilterService.getColumnsToFilter(), {'predicate': this.predicate})) {\r\n\t\t\t\t\toldVal = _.find(responsiveTableController.WcColumnFilterService.getColumnsToFilter(), {'predicate': this.predicate}).value;\r\n\t\t\t\t}\r\n\t\t\t\tif (elementVal !== undefined && (elementVal !== \"\" || oldVal !== \"\") && (elementVal !== \"\" || oldVal !== undefined) && (elementVal !== oldVal || $element.attr('wc-math-filter') === \"\")) {\r\n\t\t\t\t\tresponsiveTableController.WcColumnFilterService.setColumnsToFilter(this.predicate, elementVal, $element.attr('wc-math-filter') === \"\");\r\n\t\t\t\t\tthis.filterColumn();\r\n                    var filterIconFinder = $element.parents(\"th\").find('span.glyphicon-filter');\r\n\r\n\t\t\t\t\t//in this section, we are working in the html. we can't use a dotted predicate there, as it will break the selectors.\r\n\t\t\t\t\t//so, replace the dots with hyphens so we can still use them.\r\n\t\t\t\t\thtmlPredicate = this.predicate.replace(\".\", \"-\");\r\n\r\n\t\t\t\t\t//if we have a value, we know we are filtering.\r\n\t\t\t\t\t//add or remove the heading indicator and adjust the active filter spans\r\n\t\t\t\t\tvar activeFilterButton = responsiveTableController.element.find(\".active-filters .\" + htmlPredicate);\r\n\r\n\t\t\t\t\tif (elementVal !== \"\") {\r\n                        var label = $element.parents(\"th\").find('.header-text').text();\r\n                        if (!filterIconFinder.length) {\r\n                            if($element.parents(\"th\").find('.header-icons').length>0 && !filterIconFinder.length ){\r\n                                $element.parents(\"th\").find('.header-icons').append('<span class=\"glyphicon glyphicon-filter\"></span>');\r\n                            }\r\n                            else {\r\n                                $timeout(function () {\r\n                                    $element.parents(\"th\").find('.header-text-wrapper').append('<span class=\"header-icons pull-right\"><span class=\"glyphicon glyphicon-filter\"></span></span>');\r\n                                }, 0);\r\n                            }\r\n                            // $element.parent().prepend('<span class=\"glyphicon glyphicon-filter\"></span>');\r\n                        }\r\n\t\t\t\t\t\t/* Use this to display filter value*/\r\n\t\t\t\t\t\t/*if (activeFilterButton.length) {\r\n\t\t\t\t\t\t // activeF\tilterButton.find('span:last-child').text(label + ': ' + JSON.stringify(elementVal, null, 1));\r\n\t\t\t\t\t\t }\r\n\t\t\t\t\t\t else {\r\n\t\t\t\t\t\t responsiveTableController.element.find('.active-filters').append($compile('<button class=\"btn btn-active-filter ' + htmlPredicate + '\" ng-click=\"columnFilterController.dismissFilter(\\'' + columnFilterController.predicate + '\\')\"><span>' + label +'</span>&nbsp;&nbsp;<span class=\"glyphicon glyphicon-remove\"></span></button>')($scope));\r\n\t\t\t\t\t\t }*/\r\n\t\t\t\t\t\tif (!activeFilterButton.length) {\r\n\t\t\t\t\t\t\tresponsiveTableController.element.find('.active-filters').append($compile('<button class=\"btn btn-active-filter ' + htmlPredicate + '\" ng-click=\"columnFilterController.dismissFilter(\\'' + this.predicate + '\\')\"><span>' + label + '</span>&nbsp;&nbsp;<span class=\"glyphicon glyphicon-remove\"></span></button>')($scope));\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse if (elementVal === \"\") {\r\n\t\t\t\t\t\tfilterIconFinder.remove();\r\n\t\t\t\t\t\tvar activeFilterBox = activeFilterButton.parent();\r\n\t\t\t\t\t\tactiveFilterButton.remove();\r\n\t\t\t\t\t\tif (!activeFilterBox.children().length) {\r\n\t\t\t\t\t\t\tresponsiveTableController.element.find('.active-filters').toggleClass(\"hidden\", true);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n                $scope.$broadcast('table.filter.complete');\r\n\t\t\t};\r\n\r\n\t\t}],\r\n\t\tlink: function (scope, element, attrs, controllers, filter) { // jshint ignore:line\r\n\t\t\tvar columnFilterController = controllers[0];\r\n\t\t\tvar responsiveTableController = controllers[1];\r\n\r\n            if(element.attr('wc-math-filter') === \"\") {\r\n                responsiveTableController.selectedMathFilterOption[columnFilterController.predicate] = columnFilterController.mathFilterOptions[0];\r\n                element.wrap('<div class=\"row wc-math-filter-row\"><div class=\"col-xs-8\">' +\r\n                    '</div></div>');\r\n                element.parent().before($compile('<div class=\"col-xs-4 math-dropdown\"><select class=\"form-control input-sm\" ng-change=\"columnFilterController.filterListener()\" ' +\r\n                    'ng-options=\"option.name for option in columnFilterController.mathFilterOptions track by option.id\" ' +\r\n                    'ng-model=\"columnFilterController.tableScope.responsiveTableController.selectedMathFilterOption[columnFilterController.predicate]\" id=\"wc-math-filter-'+columnFilterController.predicate.replace(\".\", \"-\")+'\">' +\r\n                    '</select></div>')(scope));\r\n\r\n            }\r\n\r\n\t\t\tif (element.prop('tagName') === 'SELECT' && !element.attr('wc-math-filter')) {\r\n\t\t\t\tcolumnFilterController.isMultiSelect = element.attr(\"multiple\");\r\n\t\t\t\tvar options = (_.uniq(_.map(columnFilterController.collection, columnFilterController.predicate))).sort();\r\n\r\n\t\t\t\tvar option = $('<option></option>');\r\n\t\t\t\tif (!columnFilterController.isMultiSelect) {\r\n\t\t\t\t\toption.attr('value', '');\r\n\t\t\t\t\toption.text($translate.instant('columnFilter.selectDefaultText'));\r\n\t\t\t\t\telement.append(option);\r\n\t\t\t\t}\r\n\r\n\t\t\t\t_.each(options, function (item) {\r\n\t\t\t\t\tvar option = $('<option></option>');\r\n\t\t\t\t\toption.attr('value', item);\r\n\t\t\t\t\toption.text(item);\r\n\t\t\t\t\telement.append(option);\r\n\t\t\t\t});\r\n\r\n\t\t\t\telement.on('change', columnFilterController.filterListener.bind(columnFilterController));\r\n\t\t\t} else {\r\n\t\t\t\telement.keyup(_.debounce(columnFilterController.filterListener.bind(columnFilterController), columnFilterController.wcColumnFilterDelay));\r\n\t\t\t}\r\n\r\n\t\t\t//prevent sort action from firing when a click happens in a filter box\r\n\t\t\telement.on('click', function (event) {\r\n\t\t\t\tevent.stopPropagation();\r\n\t\t\t});\r\n\r\n\t\t}\r\n\t};\r\n}]);\r\n","/**\r\n * @ngdoc directive\r\n * @name WcResponsiveTableModule.directive:wcExportToExcel\r\n * @description\r\n * The wcExportToExcel directive is responsible for export the whole table to xlsx.\r\n */\r\n\r\n'use strict';\r\nangular.module('WebCoreModule').directive('wcExportToExcel', ['$window', 'XLSX', 'saveAs', '_', 'WcTranslateConfiguratorService', function($window, XLSX, saveAs, _, WcTranslateConfiguratorService) {\r\n    return {\r\n        restrict: 'E',\r\n        template: '<button type=\"button\" class=\"btn icon icon-excel\" ng-click=\"exportToXslxController.makeExcel()\" aria-label=\"{{\"exportTo.excelButtonAriaLabel\" | translate}}\"> <i class=\"fa fa-file-excel-o\"  aria-hidden=\"true\" title=\"{{\"exportTo.excelButtonTitle\" | translate}}\"></i><span class=\"hidden-xs\">{{\"exportTo.excelButtonText\" | translate}}</span></button>',\r\n        replace: true,\r\n        require: ['wcExportToExcel'],\r\n        scope: {},\r\n        controllerAs: 'exportToXslxController',\r\n        controller: [ '$scope', '$element',  function($scope, $element){\r\n            WcTranslateConfiguratorService.loadPartAndRefresh('WC-dataTable');\r\n\r\n            var responsiveTableController = $element.parent().controller('wcResponsiveTable');\r\n            responsiveTableController = responsiveTableController || $scope.responsiveTableController || $scope.$parent.responsiveTableController;\r\n\r\n            this.exportToExcel = function(columnHeadText, dataAttributes, tableId) {\r\n                var collection = responsiveTableController.WcTableCollectionService.getCollection();\r\n                var collectionLength = collection.length;\r\n\r\n                var exportArray = [];\r\n\r\n                //Add header text to data to export\r\n                exportArray.push(columnHeadText);\r\n                //Assemble row data from the collection array in export array\r\n                var rowLen = exportArray[0].length;\r\n                for (var r = 0; r < collectionLength; ++r) {\r\n                    var row = [];\r\n                    for (var c = 0; c < rowLen; c++) {\r\n                        var value = _.get(collection[r], dataAttributes[c]);\r\n                        row.push(value);\r\n                    }\r\n                    exportArray.push(row);\r\n                }\r\n\r\n                //tableId to identify the export and filename\r\n                tableId = tableId.toString();\r\n                var fileName = tableId + \".xlsx\";\r\n\r\n                //Set up xlsx workbook/worksheet objects to be written to distributable workbook\r\n                var workbook = {SheetNames:[], Sheets:{}}, worksheet = this.sheetFromArrayOfArrays(exportArray);\r\n\r\n                //Add column width details\r\n                var wsColumnWidths = [];\r\n                for(var c = 0; c < dataAttributes.length; ++c){\r\n                    var wch = {};\r\n                    var maxLength = 0;\r\n                    maxLength = Math.max.apply(Math, exportArray.map(function (v) {\r\n                        if(v[c]==null) return 0;\r\n                        return v[c].toString().length;\r\n                    }));\r\n                    wch['wch'] = maxLength;\r\n                    wsColumnWidths.push(wch);\r\n                }\r\n                worksheet['!cols'] = wsColumnWidths;\r\n\r\n                //Can be expanded to use cell ranges (merged cells), at the moment including '!merges' ranges as a formality\r\n                var ranges = [];\r\n                worksheet['!merges'] = ranges;\r\n\r\n                //Add Sheet to Workbook\r\n                workbook.SheetNames.push(tableId);\r\n                workbook.Sheets[tableId] = worksheet;\r\n\r\n                var outWorkbook = XLSX.write(workbook, {type:'binary'});\r\n                saveAs(new $window.Blob([this.s2ab(outWorkbook)],{type:\"application/octet-stream\"}), fileName);\r\n            };\r\n\r\n            this.s2ab = function(s){\r\n                if(typeof ArrayBuffer !== 'undefined') {\r\n                    var buf = new ArrayBuffer(s.length);\r\n                    var view = new Uint8Array(buf);\r\n                    for (var i=0; i!=s.length; ++i) view[i] = s.charCodeAt(i) & 0xFF;\r\n                    return buf;\r\n                } else {\r\n                    var buf = new Array(s.length);\r\n                    for (var i=0; i!=s.length; ++i) buf[i] = s.charCodeAt(i) & 0xFF;\r\n                    return buf;\r\n                }\r\n            };\r\n\r\n            this.sheetFromArrayOfArrays = function(data){\r\n                var ws = {};\r\n                var range = {s: {c:10000000, r:10000000}, e:{c:0, r:0}};\r\n                for(var R = 0; R!=data.length; ++R){\r\n                    for(var C = 0; C!=data[R].length; ++C){\r\n                        if(range.s.r > R) range.s.r = R;\r\n                        if(range.s.c > C) range.s.c = C;\r\n                        if(range.e.r < R) range.e.r = R;\r\n                        if(range.e.c < C) range.e.c = C;\r\n                        var cell = {v: data[R][C] };\r\n                        if(cell.v == null) continue;\r\n                        var cell_ref = XLSX.utils.encode_cell({c:C,r:R});\r\n\r\n                        if(typeof cell.v === 'number') cell.t = 'n';\r\n                        else if(typeof cell.v === 'boolean') cell.t = 'b';\r\n                        else if(cell.v instanceof Date) {\r\n                            cell.t = 'n'; cell.z = XLSX.SSF._table[14];\r\n                            cell.v = this.dateNum(cell.v);\r\n                        }\r\n                        else cell.t = 's';\r\n                        ws[cell_ref] = cell;\r\n                        if(R===0) {ws[cell_ref]['bold'] = true;}\r\n                    }\r\n                }\r\n                if(range.s.c < 10000000) ws['!ref'] = XLSX.utils.encode_range(range);\r\n                return ws;\r\n            };\r\n\r\n            //Formats a passed in date (v) for excel export\r\n            this.dateNum = function(v/*:Date*/, date1904/*:?boolean*/)/*:number*/ {\r\n                var epoch = v.getTime();\r\n                if(date1904) epoch += 1462*24*60*60*1000;\r\n                return (epoch + 2209161600000) / (24 * 60 * 60 * 1000);\r\n            };\r\n\r\n            this.makeExcel = function(){\r\n\r\n                //get table headers\r\n                var tableId = responsiveTableController.id;\r\n\r\n                //Gather column Header text and names of associated data\r\n                var columnHeaders =  $(responsiveTableController.table).find('th');\r\n                var columnHeadText = [];\r\n\r\n                for (var i=0; i<columnHeaders.length; i++){\r\n                    var text = $(columnHeaders[i]).find('.header-text').text();\r\n                    if (text !== \"Actions\" && text.trim() !== \"\" ){\r\n                        columnHeadText.push(text);\r\n                    }\r\n                }\r\n\r\n                var firstRowData = $(responsiveTableController.table).find('tbody tr:first-child td');\r\n                var dataAttributes = [];\r\n\r\n                for (var c=0; c<columnHeaders.length; c++){\r\n                    if(firstRowData[c].getAttribute('ng-bind')){\r\n                        var attr = firstRowData[c].getAttribute('ng-bind');\r\n                        dataAttributes.push(attr.substr(attr.indexOf('.')+1));\r\n                    } else if(columnHeaders[c].getAttribute(\"wc-column-sort\")){\r\n                        dataAttributes.push(columnHeaders[c].getAttribute('wc-column-sort'));\r\n                    }\r\n                }\r\n\r\n                this.exportToExcel(columnHeadText, dataAttributes, tableId);\r\n            };\r\n        }]\r\n    };\r\n}]);\r\n\r\n","/**\r\n * @ngdoc directive\r\n * @name WcResponsiveTableModule.directive:wcExportToPdf\r\n * @restrict E\r\n * @description\r\n * The wcExportToPdf directive is responsible for export the whole table to PDF.\r\n *\r\n * This directive has a requirement that\r\n */\r\n\r\n'use strict';\r\nangular.module('WebCoreModule').directive('wcExportToPdf', ['pdfMake', 'WcTranslateConfiguratorService', '$filter', '_', function (pdfMake, WcTranslateConfiguratorService, $filter ,_) {\r\n    return {\r\n\t\trestrict: 'E',\r\n        template: '<button type=\"button\" class=\"btn icon icon-pdf\" ng-click=\"exportToPdfController.makePDF()\" aria-label=\"{{\"exportTo.pdfButtonAriaLabel\" | translate}}\"><i class=\"fa fa-file-pdf-o\" aria-hidden=\"true\" title=\"{{\"exportTo.pdfButtonTitle\" | translate}}\"></i><span class=\"hidden-xs\">{{\"exportTo.pdfButtonText\" | translate}}</span></button>',\r\n\t\treplace: true,\r\n\t\trequire: ['wcExportToPdf'],\r\n\t\tscope: {},\r\n\t\tcontrollerAs: 'exportToPdfController',\r\n\t\tcontroller: ['$scope', '$element', '_', function ($scope, $element, _) {\r\n            WcTranslateConfiguratorService.loadPartAndRefresh('WC-dataTable');\r\n\r\n\t\t\tvar responsiveTableController = $element.parent().controller('wcResponsiveTable');\r\n\t\t\tresponsiveTableController = responsiveTableController || $scope.responsiveTableController || $scope.$parent.responsiveTableController;\r\n\r\n            this.exportToPDF = function (tableheaders, locationInCollection, tableId) {\r\n\r\n                var collection = responsiveTableController.WcTableCollectionService.getCollection();\r\n                var collectionLength= collection.length; //number of rows\r\n                var outputTDLength =  tableheaders.length; //number of columns you want in the pdf\r\n\r\n\r\n                var tableContent = [];\r\n                var rowContent = [];\r\n                var columnContent = \"\";\r\n\r\n                //header formatting\r\n                for (var i = 0; i<outputTDLength; i++){\r\n                    tableheaders[i] = {text: tableheaders[i],  bold: true};//making the title bold\r\n                }\r\n                tableContent.push(tableheaders);\r\n\r\n                //pdf table formatting\r\n                var pdfTableBodyFormatting = [];\r\n                for (var x= 0; x<outputTDLength; x++){\r\n                    pdfTableBodyFormatting.push(\"auto\");\r\n                }\r\n\r\n                if(collectionLength>0) {\r\n                    for (var i = 0; i < collectionLength; i++) {\r\n                        var row = collection[i];\r\n                        for (var j = 0; j < outputTDLength; j++) {\r\n                            var str = locationInCollection[j].toString();\r\n                            if (str.indexOf('.') == -1) { // . not found\r\n                                columnContent = row[locationInCollection[j]];\r\n                            } else {\r\n                                var stringArr = str.split(\".\");\r\n                                var innerTxt = row;\r\n\r\n                                for (var k = 0; k < stringArr.length; k++) {\r\n                                    innerTxt = innerTxt[stringArr[k]];\r\n                                }\r\n                                columnContent = innerTxt;\r\n                            }\r\n                            if(columnContent) {\r\n                                if(_.isDate(columnContent)){\r\n                                    rowContent.push($filter('date')(columnContent,'yyyy-MM-dd'));\r\n                                }else {\r\n                                    rowContent.push(columnContent.toString());\r\n                                }\r\n                           } else {\r\n                                rowContent.push(\"\");\r\n                            }\r\n\r\n                        }\r\n                        tableContent.push(rowContent);\r\n                        rowContent = [];\r\n                    }\r\n                }\r\n                var docDefinition = {\r\n                    content: [\r\n                        {\r\n                            table: {\r\n                                // headers are automatically repeated if the table spans over multiple pages\r\n                                // you can declare how many rows should be treated as headers\r\n                                headerRows: 1,\r\n                                widths: pdfTableBodyFormatting,\r\n\r\n                                body: tableContent\r\n                            }\r\n                        }\r\n                    ]\r\n                }; //end doc def\r\n                tableId = tableId.toString() + \".pdf\";\r\n                return pdfMake.createPdf(docDefinition).download(tableId);\r\n            };\r\n\r\n\t\t\tthis.makePDF =  function() {\r\n\r\n\t\t\t\t//get table headers\r\n\t\t\t\tvar tableId = responsiveTableController.id;\r\n\r\n                var tableHeader = $(responsiveTableController.table).find('th');\r\n\t\t\t\t//var tableHeader = $element.parent().children('table').children('thead').children('tr').children('th');\r\n\t\t\t\tvar tableHeadersArray = [];\r\n\r\n\t\t\t\tfor (var i = 0; i < tableHeader.length; i++) {\r\n\t\t\t\t    var text = $(tableHeader[i]).find('.header-text').text();\r\n\t\t\t\t\tif (text !== \"Actions\" && text.trim() !== \"\" ) {\r\n\t\t\t\t\t\ttableHeadersArray.push(text);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\t//get table ng-bind\r\n\t\t\t\tvar tableBodyArray = [];\r\n\t\t\t\tvar bodyLength = responsiveTableController.WcTableCollectionService.getCollection().length;\r\n\r\n\t\t\t\tif (bodyLength > 0) {\r\n                    var td = $(responsiveTableController.table).find('tbody tr:first-child td');\r\n\t\t\t\t\t//var tableRow = $element.parent().children('table').children('tbody').children('tr');\r\n\r\n\t\t\t\t\tfor (var j = 0; j < td.length; j++) {\r\n\r\n\t\t\t\t\t\tif (td[j].getAttribute(\"ng-bind\")) { //.getAttribute(\"ng-bind\") returns row.region\r\n\t\t\t\t\t\t\tvar fullStr = td[j].getAttribute(\"ng-bind\");\r\n\t\t\t\t\t\t\tvar substring = fullStr.substr(fullStr.indexOf('.') + 1); //this gets string after the period\r\n\t\t\t\t\t\t\ttableBodyArray.push(substring);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse if (tableHeader[j].getAttribute(\"wc-column-sort\")) {\r\n\t\t\t\t\t\t\ttableBodyArray.push(tableHeader[j].getAttribute(\"wc-column-sort\"));\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tthis.exportToPDF(tableHeadersArray, tableBodyArray, tableId);\r\n\t\t\t};\r\n\t\t}]\r\n    };\r\n}]);\r\n","\t\t\t/**\r\n\t\t\t * @ngdoc service\r\n\t\t\t * @name WcResponsiveTableModule.service:WcTableScopeService\r\n\t\t\t * @description\r\n\t\t\t * The WcTableScopeService is responsible for maintain the scope of the table, the service holds the methods\r\n\t\t\t * that are related to table scope.\r\n\t\t\t */\r\n\r\n'use strict';\r\n\r\nangular.module('WcResponsiveTableModule')\r\n\t.factory('WcTableScopeService', function() {\r\n\t\tfunction WcTableScopeService() {\r\n\r\n            this.parentScope = null;\r\n            this.tableScope = null;\r\n        }\r\n\r\n\r\n\t\tWcTableScopeService.prototype = {\r\n            /**\r\n             * @ngdoc method\r\n             * @name getParentScope\r\n             * @methodOf WcResponsiveTableModule.service:WcTableScopeService\r\n             * @returns {string} This string holds parent scope value.\r\n             * @description\r\n             * The method is to get the parent scope value\r\n             */\r\n\r\n            getParentScope: function () {\r\n                return this.parentScope;\r\n            },\r\n\r\n            /**\r\n             * @ngdoc method\r\n             * @name getTableScope\r\n             * @methodOf WcResponsiveTableModule.service:WcTableScopeService\r\n             * @returns {string} This string holds table scope value.\r\n             * @description\r\n             * The method is to get the table scope value\r\n             */\r\n\r\n            getTableScope: function () {\r\n                return this.tableScope;\r\n            },\r\n\r\n            /**\r\n             * @ngdoc method\r\n             * @name setParentScope\r\n             * @methodOf WcResponsiveTableModule.service:WcTableScopeService\r\n             * @param {string} newParentScope This string value holds the new parent scope\r\n             * @description\r\n             * The method is to set the parent scope value\r\n             */\r\n\r\n            setParentScope: function (newParentScope) {\r\n                if (newParentScope.$id !== 0 && !newParentScope.$id) {\r\n                    this.parentScope = null;\r\n                    console.error('WcTableScopeService: setTableScope(); You must pass in a valid Angular Scope');\r\n                } else if (this.tableScope && newParentScope.$id === this.tableScope.$id) {\r\n                    this.parentScope = null;\r\n                    console.error('WcTableScopeService: setTableScope(); parent scope and table scope can not be the same scope');\r\n                } else {\r\n                    this.parentScope = newParentScope;\r\n                }\r\n            },\r\n\r\n            /**\r\n             * @ngdoc method\r\n             * @name setTableScope\r\n             * @methodOf WcResponsiveTableModule.service:WcTableScopeService\r\n             * @param {string} newTableScope This string value holds the new table scope\r\n             * @description\r\n             * The method is to set the table scope value\r\n             */\r\n\r\n            setTableScope: function (newTableScope) {\r\n                if (newTableScope.$id !== 0 && !newTableScope.$id) {\r\n                    this.tableScope = null;\r\n                    console.error('WcTableScopeService: setTableScope(); You must pass in a valid Angular Scope');\r\n                } else if (this.parentScope && newTableScope.$id === this.parentScope.$id) {\r\n                    this.tableScope = null;\r\n                    console.error('WcTableScopeService: setTableScope(); parent scope and table scope can not be the same scope');\r\n                } else {\r\n                    this.tableScope = newTableScope;\r\n                }\r\n            }\r\n        };\r\n\r\n\t\treturn WcTableScopeService;\r\n\t}\r\n\r\n);","/**\r\n* @ngdoc service\r\n* @name WcResponsiveTableModule.service:WcColumnFilterService\r\n* @description\r\n* The wcColumnFilterService service filters the column names of the datatable on key press.\r\n*/\r\n\r\n'use strict';\r\n\r\nangular.module('WcResponsiveTableModule')\r\n\t.factory('WcColumnFilterService',['_', function (_) {\r\n\t\tfunction WcColumnFilterService() {\r\n\t\t\tthis.columnsToFilter = [];\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t * @ngdoc method\r\n\t\t * @name WcColumnFilterService.getColumnsToFilter\r\n\t\t * @methodOf WcResponsiveTableModule.service:WcColumnFilterService\r\n\t\t * @returns {string} This string holds the list of columns to be filtered\r\n\t\t * @description\r\n\t\t * The method returns the columns that needs to be filtered\r\n\t\t */\r\n\r\n\t\tWcColumnFilterService.prototype.getColumnsToFilter = function () {\r\n\t\t\treturn this.columnsToFilter;\r\n\t\t};\r\n\r\n\t\t/**\r\n\t\t * @ngdoc method\r\n\t\t * @name WcColumnFilterService.setColumnsToFilter\r\n\t\t * @methodOf WcResponsiveTableModule.service:WcColumnFilterService\r\n\t\t * @param {integer} key This integer value holds the index of the array\r\n\t\t * @param {string} value This string value holds the value of the array\r\n         * @param {boolean} mathFilter This boolean tells whether this filter is intended as a conditional math filter\r\n\t\t * @description\r\n\t\t * The method set the columns to the array\r\n\t\t */\r\n\r\n\t\tWcColumnFilterService.prototype.setColumnsToFilter = function (key, value, mathFilter) {\r\n\t\t\t//this.columnsToFilter[key] = [value, mathFilter];\r\n\t\t\tvar index = _.findIndex(this.columnsToFilter, ['predicate', key]);\r\n\t\t\tif(index == -1) {\r\n                this.columnsToFilter.push({\r\n                    predicate: key,\r\n                    value: value,\r\n                    isMathFilter: mathFilter\r\n                });\r\n            } else {\r\n\t\t\t\tthis.columnsToFilter[index].value = value;\r\n\t\t\t\tthis.columnsToFilter[index].isMathFilter = mathFilter;\r\n\t\t\t}\r\n\t\t};\r\n\r\n        /**\r\n         * @ngdoc method\r\n         * @name WcColumnFilterService.removeColumnToFilter\r\n         * @methodOf WcResponsiveTableModule.service:WcColumnFilterService\r\n         * @param {string} key This string value holds the key for the column to remove from the filtering\r\n         * @description\r\n         * Removes a filter based on the key that is passed in.\r\n         */\r\n\t\tWcColumnFilterService.prototype.removeColumnToFilter = function (key){\r\n\t\t\tvar index = _.findIndex(this.columnsToFilter, ['predicate', key]);\r\n\t\t\tif(index != -1){\r\n\t\t\t\tthis.columnsToFilter.splice(index, 1);\r\n\t\t\t}\r\n\t\t};\r\n\r\n        /**\r\n         * @ngdoc method\r\n         * @name WcColumnFilterService.getBlankFilters\r\n         * @methodOf WcResponsiveTableModule.service:WcColumnFilterService\r\n         * @description\r\n         * Removes all filters that have an empty string value\r\n         */\r\n\t\tWcColumnFilterService.prototype.getBlankFilters = function () {\r\n\t\t\tvar blankFilters = [];\r\n\t\t\tfor(var i = this.columnsToFilter.length-1; i >= 0; i--){\r\n\t\t\t\tif(this.columnsToFilter[i].value === \"\"){\r\n                    blankFilters.push(this.columnsToFilter[i]);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn blankFilters;\r\n        };\r\n\r\n\t\treturn WcColumnFilterService;\r\n\t}]);","\t\t/**\r\n\t\t * @ngdoc service\r\n\t\t * @name WcResponsiveTableModule.service:WcTableCollectionService\r\n\t\t * @requires WcTableScopeService\r\n\t\t * @description\r\n\t\t * The WcTableCollectionService manages the collection of table operations, this service is responsible to get the\r\n\t\t * collection information from the table.\r\n */'use strict';\r\n\r\nangular.module('WcResponsiveTableModule')\r\n\t.factory('WcTableCollectionService', function() {\r\n\r\n        function WcTableCollectionService(WcTableScopeService) {\r\n            this.WcTableScopeService = WcTableScopeService;\r\n        \tthis.collection = [];\r\n            this.rowKey = '';\r\n\r\n            this.sortEnabled = false;\r\n            this.filterEnabled = false;\r\n        }\r\n\r\n\t\t/**\r\n\t\t * @ngdoc method\r\n\t\t * @name getCollection\r\n\t\t * @methodOf WcResponsiveTableModule.service:WcTableCollectionService\r\n\t\t * @returns {array} This array holds table collection values\r\n\t\t * @description\r\n\t\t * The method returns the table collection array.\r\n\t\t */\r\n\r\n\t\tWcTableCollectionService.prototype.getCollection = function () {\r\n\t\t\treturn this.collection;\r\n\t\t};\r\n\r\n\t\t/**\r\n\t\t * @ngdoc method\r\n\t\t * @name getCollectionLength\r\n\t\t * @methodOf WcResponsiveTableModule.service:WcTableCollectionService\r\n\t\t * @returns {integer} This integer value holds length of the collection array\r\n\t\t * @description\r\n\t\t * The method returns the collection length\r\n\t\t */\r\n\r\n\t\tWcTableCollectionService.prototype.getCollectionLength = function () {\r\n\t\t\treturn this.collection.length;\r\n\t\t};\r\n\r\n\t\t/**\r\n\t\t * @ngdoc method\r\n\t\t * @name getRowKey\r\n\t\t * @methodOf WcResponsiveTableModule.service:WcTableCollectionService\r\n\t\t * @returns {integer} This integer value holds the index of the array\r\n\t\t * @description\r\n\t\t * The method returns the index of the array\r\n\t\t */\r\n\r\n\t\tWcTableCollectionService.prototype.getRowKey = function () {\r\n\t\t\treturn this.rowKey;\r\n\t\t};\r\n\r\n\t\t/**\r\n\t\t * @ngdoc method\r\n\t\t * @name setCollection\r\n\t\t * @methodOf WcResponsiveTableModule.service:WcTableCollectionService\r\n\t\t * @param {array} newCollection This array holds the collection data\r\n\t\t * @param {boolean} sorted This boolean value decides whether the collection is sorted or not\r\n\t\t * @param {boolean} filtered This boolean value decides whether the collection is filtered or not\r\n\t\t * @description\r\n\t\t * The method set the collection to an array based on sorting and filtered value.\r\n\t\t */\r\n\r\n\t\tWcTableCollectionService.prototype.setCollection = function (newCollection, sorted, filtered) {\r\n\t\t\tthis.collection = newCollection;\r\n\r\n\t\t\t//need to broadcast out that our collection has changed so the filter directives can update\r\n\t\t\tif (sorted === undefined && filtered === undefined) {\r\n\t\t\t\tthis.WcTableScopeService.tableScope.$broadcast('table.collection.update');\r\n\t\t\t}\r\n\r\n\t\t\tthis.WcTableScopeService.tableScope.renderTable((sorted || filtered));\r\n\t\t};\r\n\r\n\t\t/**\r\n\t\t * @ngdoc method\r\n\t\t * @name setInitialCollection\r\n\t\t * @methodOf WcResponsiveTableModule.service:WcTableCollectionService\r\n\t\t * @param {array} initialCollection This array holds the collection data\r\n\t\t * @description\r\n\t\t * The method set the initial collection values to an array\r\n\t\t */\r\n\r\n\t\tWcTableCollectionService.prototype.setInitialCollection = function (initialCollection) {\r\n\t\t\tthis.collection = initialCollection;\r\n\t\t};\r\n\r\n\t\t/**\r\n\t\t * @ngdoc method\r\n\t\t * @name setRowKey\r\n\t\t * @methodOf WcResponsiveTableModule.service:WcTableCollectionService\r\n\t\t * @param {integer} newRowKey This integer value holds the new index of the array.\r\n\t\t * @description\r\n\t\t * The method set the new index to the current index value.\r\n\t\t */\r\n\r\n\t\tWcTableCollectionService.prototype.setRowKey = function (newRowKey) {\r\n\t\t\tif (newRowKey) {\r\n\t\t\t\tthis.rowKey = newRowKey;\r\n\t\t\t} else {\r\n\t\t\t\tthis.rowKey = 'id';\r\n\t\t\t\tthis.collection.forEach(angular.bind(this, function (obj, index) {\r\n\t\t\t\t\tobj[this.rowKey] = index;\r\n\t\t\t\t}));\r\n\t\t\t}\r\n\t\t};\r\n\r\n        return WcTableCollectionService;\r\n\t}\r\n);","\t\t/**\r\n\t\t * @ngdoc service\r\n\t\t * @name WcResponsiveTableModule.service:WcTablePaginationService\r\n\t\t * @requires WcTableCollectionService\r\n\t\t * @description\r\n\t\t * The WcTablePaginationService manages the pagination operations, this service is responsible for all pagination methods.\r\n\t\t * All pagination action will come through this service.\r\n\t\t */\r\n\r\n'use strict';\r\n\r\nangular.module('WcResponsiveTableModule')\r\n\t.factory('WcTablePaginationService', function() {\r\n\r\n        function WcTablePaginationService(WcTableCollectionService) {\r\n        \tthis.WcTableCollectionService = WcTableCollectionService;\r\n\t\t\tthis.collectionLength = this.WcTableCollectionService.getCollectionLength();\r\n\r\n            this.paginationEnabled = false;\r\n\r\n            this.paginationDefaults = {\r\n                pageStart: 0,\r\n                pageEnd: 10,\r\n                resultsPerPage: 10,\r\n                numberOfPageControls: 5,\r\n                selectResultsPerPage: [10, 25, 50, 100],\r\n                responsiveBreakpoints: [430, 500, 600, 900],\r\n                paginationControlsPlacement: 'both'\r\n            };\r\n        }\r\n\r\n\t\t/**\r\n\t\t * @ngdoc method\r\n\t\t * @name getPaginationDefaults\r\n\t\t * @methodOf WcResponsiveTableModule.service:WcTablePaginationService\r\n\t\t * @returns {json} This json holds pagination default values\r\n\t\t * @description\r\n\t\t * This method is to get the pagination default values.\r\n\t\t */\r\n\r\n\t\tWcTablePaginationService.prototype.getPaginationDefaults = function () {\r\n\t\t\tif (this.paginationEnabled) {\r\n\t\t\t\treturn angular.copy(this.paginationDefaults);\r\n\t\t\t} else {\r\n\t\t\t\t// var collectionLength = this.WcTableCollectionService.getCollectionLength();\r\n\t\t\t\treturn {\r\n\t\t\t\t\tpageStart: 0,\r\n\t\t\t\t\tpageEnd: this.collectionLength\r\n\t\t\t\t};\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\t/**\r\n\t\t * @ngdoc method\r\n\t\t * @name isPaginationEnabled\r\n\t\t * @methodOf WcResponsiveTableModule.service:WcTablePaginationService\r\n\t\t * @returns {boolean} This boolean value returns a true or false.\r\n\t\t * @description\r\n\t\t * This method is to set the pagination option for datatable.\r\n\t\t */\r\n\r\n\t\tWcTablePaginationService.prototype.isPaginationEnabled = function () {\r\n\t\t\treturn this.paginationEnabled;\r\n\t\t};\r\n\r\n\t\t/**\r\n\t\t * @ngdoc method\r\n\t\t * @name setPaginationDefaults\r\n\t\t * @methodOf WcResponsiveTableModule.service:WcTablePaginationService\r\n\t\t * @param {json} newDefaults The json string holds the new default values for pagination\r\n\t\t * @description\r\n\t\t * This method is to set the pagination default values.\r\n\t\t */\r\n\r\n\t\tWcTablePaginationService.prototype.setPaginationDefaults = function (newDefaults) {\r\n\t\t\tfor (var property in newDefaults) {\r\n\t\t\t\tif (this.paginationDefaults[property] !== 0 && !this.paginationDefaults[property]) {\r\n\t\t\t\t\tconsole.error('WcTablePaginationService: setPaginationDefaults(); Property ' + property + ' is not a pagination default');\r\n\t\t\t\t\t//remember that 0 is a valid possibility\r\n\t\t\t\t} else if (newDefaults[property] || (typeof newDefaults[property] == 'number' && newDefaults[property] > -1)) {\r\n\t\t\t\t\tthis.paginationDefaults[property] = newDefaults[property];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\t/**\r\n\t\t * @ngdoc method\r\n\t\t * @name setPaginationState\r\n\t\t * @methodOf WcResponsiveTableModule.service:WcTablePaginationService\r\n\t\t * @param {boolean} boolean This boolean value returns a true or false.\r\n\t\t * @description\r\n\t\t * This method is to set the pagination enabled option for datatable\r\n\t\t */\r\n\t\tWcTablePaginationService.prototype.setPaginationState = function (boolean) {\r\n\t\t\tthis.paginationEnabled = boolean;\r\n\t\t};\r\n\r\n        return WcTablePaginationService;\r\n\t});"]}